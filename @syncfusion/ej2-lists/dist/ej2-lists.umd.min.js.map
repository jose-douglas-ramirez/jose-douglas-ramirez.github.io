/*!
*  filename: ej2-lists.umd.min.js.map
*  version : 1.0.19
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-lists.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","list_view_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","ej2_data_1","list_base_1","effectsConfig","None","SlideLeft","SlideDown","Zoom","Fade","effectsRTLConfig","classNames","hover","selected","parentItem","listItem","listItemText","grpListItem","hasChild","view","header","headerText","text","disable","content","icon","backIcon","FieldSettings","_super","ChildProperty","Property","ListView","options","element","_this","curDSLevel","curViewDS","keyConfigs","moveDown","moveUp","select","back","animateOptions","aniObj","Animation","onPropertyChanged","newProp","oldProp","_i","_a","keys","setHTMLAttribute","setCSSClass","cssClass","setEnable","setSize","setEnableRTL","listBaseOption","fields","properties","reRender","headerTitle","showIcon","getSubDS","resetCurrentList","htmlAttributes","attributes","oldCSSClass","addClass","split","removeClass","style","height","formatUnit","width","enableElement","enable","enableRtl","classList","add","remove","isEnabled","showBack","headerEle","showHeader","createElement","className","innerHeaderEle","innerHTML","textEle","outerHTML","hedBackButton","attrs","appendChild","prepend","display","querySelector","switchView","fromView","toView","reverse","fPos_1","position","overflow_1","overflow","anim","duration","animation","effect","animate","name","timingFunction","easing","end","model","trigger","curUL","preRender","template","groupTemplate","expandCollapse","listClass","ariaAttributes","itemRole","listRole","itemText","groupItemRole","wrapperRole","sortOrder","clickHandler","e","contains","li","closest","parentNode","setSelectLI","hoverHandler","curLi","setHoverLI","leaveHandler","removeHover","keyActionHandler","preventDefault","action","hoverSiblingLI","swipeActionHandler","swipeDirection","wireEvents","EventHandler","keyboardModule","KeyboardEvents","keyAction","bind","touchModule","Touch","swipe","unWireEvents","destroy","hoverLI","removeSelect","selectedLI","querySelectorAll","selectedLI_1","ele","removeAttribute","isValidLI","setAttribute","data","getItemData","isNullOrUndefined","dataSource","selectedItems","item","innerText","trim","eventArgs","merge","isInteracted","event","renderSubList","lastLi","prev","siblingLI","ListBase","getSiblingLI","curLIs","levelKeys","ds","localData","levelKeys_1","curDSJSON","findItemFromDS","child","getElementUID","curDS","parent","resultJSON","some","getQuery","columns","query","Query","column","defaultMappedFields","indexOf","push","from","tableName","setViewDataSource","groupBy","groupDataSource","getDataSource","addSorting","sortBy","isInAnimation","setLocalData","DataManager","executeQuery","then","isDestroyed","result","renderList","catch","ul","setProperties","createJsonFromElement","contentContainer","renderIntoDom","ulElement","createList","liCollection","uID","getAttribute","createListFromJson","obj","Element","render","role","rippleFn","rippleEffect","selector","classAr","pID","pop","toUL","fromUL","parentElement","selectItem","getSelectedItem","findItem","enableItem","enabled","disableItem","showItem","showHideItem","hideItem","isHide","isVisible","addItem","concat","removeItem","curAr_1","idx_1","index","arr","splice","getModuleName","getPersistData","addOnPersist","Component","Complex","Event","NotifyPropertyChanges","listViewBuilder","CreateBuilder","group","check","checked","expanded","textContent","level","url","collapsible","disabled","image","iconWrapper","isSingleLevel","curOpt","extend","defaultListBaseOptions","defaultAriaAttributes","type","typeofData","typeof","createListFromArray","generateUL","createListItemFromArray","subChild","getModuleClass","moduleName","genUID","itemCreating","curData","generateSingleLevelLI","generateLI","itemCreated","createListItemFromJson","curItem","innerEle","showCheckBox","iconCss","itemClass","isHeader","toString","tooltip","imageUrl","attr","src","imageAttributes","firstElementChild","processSubChild","elementArray","isPrevious","liIndex","liCollections","slice","cusQuery","j","itemObj","items","grpItem","k","executeLocal","curEle","cloneNode","jsonAr","childs","anchor","json","childNodes","forEach","Number","hasChildNodes","attributes_1","getAllAttributes","urlAttributes","match","elementAttributes","class","nodeName","nodeValue","renderContentTemplate","compiledString","compile","append","renderGroupTemplate","headerItems","category","headerData","headerItems_1","Math","floor","random","substring","subDS","hasChildren","subLi","expandIconPosition","expandIconClass","innerElements","grpLI","elementID","anchorTag","document","createTextNode","href","innerDiv","liElement","generateIcon","isChecked"],"mappings":"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","file":"ej2-lists.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-data\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-data\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, list_view_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(list_view_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_data_1, list_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var effectsConfig = {\n\t        'None': [],\n\t        'SlideLeft': ['SlideRightOut', 'SlideLeftOut', 'SlideLeftIn', 'SlideRightIn'],\n\t        'SlideDown': ['SlideTopOut', 'SlideBottomOut', 'SlideBottomIn', 'SlideTopIn'],\n\t        'Zoom': ['FadeOut', 'FadeZoomOut', 'FadeZoomIn', 'FadeIn'],\n\t        'Fade': ['FadeOut', 'FadeOut', 'FadeIn', 'FadeIn']\n\t    };\n\t    var effectsRTLConfig = {\n\t        'None': [],\n\t        'SlideLeft': ['SlideLeftOut', 'SlideRightOut', 'SlideRightIn', 'SlideLeftIn'],\n\t        'SlideDown': ['SlideBottomOut', 'SlideTopOut', 'SlideTopIn', 'SlideBottomIn'],\n\t        'Zoom': ['FadeZoomOut', 'FadeOut', 'FadeIn', 'FadeZoomIn'],\n\t        'Fade': ['FadeOut', 'FadeOut', 'FadeIn', 'FadeIn']\n\t    };\n\t    var classNames = {\n\t        root: 'e-listview',\n\t        hover: 'e-hover',\n\t        selected: 'e-active',\n\t        parentItem: 'e-list-parent',\n\t        listItem: 'e-list-item',\n\t        listItemText: 'e-list-text',\n\t        grpListItem: 'e-list-group-item',\n\t        hasChild: 'e-has-child',\n\t        view: 'e-view',\n\t        header: 'e-list-header',\n\t        headerText: 'e-headertext',\n\t        text: 'e-text',\n\t        disable: 'e-disabled',\n\t        content: 'e-content',\n\t        icon: 'e-icons',\n\t        backIcon: 'e-icon-back'\n\t    };\n\t    var FieldSettings = (function (_super) {\n\t        __extends(FieldSettings, _super);\n\t        function FieldSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FieldSettings;\n\t    }(ej2_base_4.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property('id')\n\t    ], FieldSettings.prototype, \"id\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('text')\n\t    ], FieldSettings.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('isChecked')\n\t    ], FieldSettings.prototype, \"isChecked\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('isVisible')\n\t    ], FieldSettings.prototype, \"isVisible\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('enabled')\n\t    ], FieldSettings.prototype, \"enabled\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('iconCss')\n\t    ], FieldSettings.prototype, \"iconCss\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('child')\n\t    ], FieldSettings.prototype, \"child\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('tooltip')\n\t    ], FieldSettings.prototype, \"tooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('groupBy')\n\t    ], FieldSettings.prototype, \"groupBy\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('text')\n\t    ], FieldSettings.prototype, \"sortBy\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('htmlAttributes')\n\t    ], FieldSettings.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('tableName')\n\t    ], FieldSettings.prototype, \"tableName\", void 0);\n\t    exports.FieldSettings = FieldSettings;\n\t    var ListView = (function (_super) {\n\t        __extends(ListView, _super);\n\t        function ListView(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.curDSLevel = [];\n\t            _this.curViewDS = [];\n\t            _this.keyConfigs = {\n\t                moveDown: 'downarrow',\n\t                moveUp: 'uparrow',\n\t                select: 'enter',\n\t                back: 'backspace'\n\t            };\n\t            _this.animateOptions = {};\n\t            _this.aniObj = new ej2_base_5.Animation(_this.animateOptions);\n\t            return _this;\n\t        }\n\t        ListView.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'htmlAttributes':\n\t                        this.setHTMLAttribute();\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCSSClass(oldProp.cssClass);\n\t                        break;\n\t                    case 'enable':\n\t                        this.setEnable();\n\t                        break;\n\t                    case 'width':\n\t                    case 'height':\n\t                        this.setSize();\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setEnableRTL();\n\t                        break;\n\t                    case 'fields':\n\t                        this.listBaseOption.fields = this.fields.properties;\n\t                        this.reRender();\n\t                        break;\n\t                    case 'headerTitle':\n\t                        if (!this.curDSLevel.length) {\n\t                            this.header(this.headerTitle, false);\n\t                        }\n\t                        break;\n\t                    case 'showHeader':\n\t                        {\n\t                            this.header(this.headerTitle, false);\n\t                        }\n\t                        break;\n\t                    case 'dataSource':\n\t                        this.reRender();\n\t                        break;\n\t                    case 'sortOrder':\n\t                    case 'showIcon':\n\t                        this.listBaseOption.showIcon = this.showIcon;\n\t                        this.curViewDS = this.getSubDS();\n\t                        this.resetCurrentList();\n\t                        break;\n\t                    default:\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        ListView.prototype.setHTMLAttribute = function () {\n\t            if (Object.keys(this.htmlAttributes).length) {\n\t                ej2_base_2.attributes(this.element, this.htmlAttributes);\n\t            }\n\t        };\n\t        ListView.prototype.setCSSClass = function (oldCSSClass) {\n\t            if (this.cssClass) {\n\t                ej2_base_2.addClass([this.element], this.cssClass.split(' '));\n\t            }\n\t            if (oldCSSClass) {\n\t                ej2_base_2.removeClass([this.element], oldCSSClass.split(' '));\n\t            }\n\t        };\n\t        ListView.prototype.setSize = function () {\n\t            this.element.style.height = ej2_base_1.formatUnit(this.height);\n\t            this.element.style.width = ej2_base_1.formatUnit(this.width);\n\t        };\n\t        ListView.prototype.setEnable = function () {\n\t            this.enableElement(this.element, this.enable);\n\t        };\n\t        ListView.prototype.setEnableRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        ListView.prototype.enableElement = function (element, isEnabled) {\n\t            if (isEnabled) {\n\t                element.classList.remove(classNames.disable);\n\t            }\n\t            else {\n\t                element.classList.add(classNames.disable);\n\t            }\n\t        };\n\t        ListView.prototype.header = function (text, showBack) {\n\t            if (this.headerEle === undefined && this.showHeader) {\n\t                this.headerEle = ej2_base_2.createElement('div', { className: classNames.header });\n\t                var innerHeaderEle = ej2_base_2.createElement('span', { className: classNames.headerText, innerHTML: this.headerTitle });\n\t                var textEle = ej2_base_2.createElement('div', { className: classNames.text, innerHTML: innerHeaderEle.outerHTML });\n\t                var hedBackButton = ej2_base_2.createElement('div', {\n\t                    className: classNames.icon + ' ' + classNames.backIcon + ' e-but-back',\n\t                    attrs: { style: 'display:none;' }\n\t                });\n\t                this.headerEle.appendChild(hedBackButton);\n\t                this.headerEle.appendChild(textEle);\n\t                this.element.classList.add('e-has-header');\n\t                ej2_base_2.prepend([this.headerEle], this.element);\n\t            }\n\t            else if (this.headerEle) {\n\t                if (this.showHeader) {\n\t                    this.headerEle.style.display = '';\n\t                    var textEle = this.headerEle.querySelector('.' + classNames.headerText);\n\t                    var hedBackButton = this.headerEle.querySelector('.' + classNames.backIcon);\n\t                    textEle.innerHTML = text;\n\t                    if (showBack === true) {\n\t                        hedBackButton.style.display = '';\n\t                    }\n\t                    else {\n\t                        hedBackButton.style.display = 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    this.headerEle.style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        ListView.prototype.switchView = function (fromView, toView, reverse) {\n\t            var _this = this;\n\t            if (fromView && toView) {\n\t                var fPos_1 = fromView.style.position;\n\t                var overflow_1 = (this.element.style.overflow !== 'hidden') ? this.element.style.overflow : '';\n\t                fromView.style.position = 'absolute';\n\t                fromView.classList.add('e-view');\n\t                var anim = void 0;\n\t                var duration = this.animation.duration;\n\t                if (this.animation.effect) {\n\t                    anim = (this.enableRtl ? effectsRTLConfig[this.animation.effect] : effectsConfig[this.animation.effect]);\n\t                }\n\t                else {\n\t                    var slideLeft = 'SlideLeft';\n\t                    var slideRight = 'SlideRight';\n\t                    anim = (this.enableRtl ? effectsRTLConfig[slideLeft] : effectsConfig[slideRight]);\n\t                    duration = 0;\n\t                }\n\t                this.element.style.overflow = 'hidden';\n\t                this.aniObj.animate(fromView, {\n\t                    name: (reverse === true ? anim[0] : anim[1]),\n\t                    duration: duration,\n\t                    timingFunction: this.animation.easing,\n\t                    end: function (model) {\n\t                        fromView.style.display = 'none';\n\t                        _this.element.style.overflow = overflow_1;\n\t                        fromView.style.position = fPos_1;\n\t                        fromView.classList.remove('e-view');\n\t                    }\n\t                });\n\t                toView.style.display = '';\n\t                this.aniObj.animate(toView, {\n\t                    name: (reverse === true ? anim[2] : anim[3]),\n\t                    duration: duration,\n\t                    timingFunction: this.animation.easing,\n\t                    end: function () {\n\t                        _this.trigger('actionComplete');\n\t                    }\n\t                });\n\t                this.curUL = toView;\n\t            }\n\t        };\n\t        ListView.prototype.preRender = function () {\n\t            this.listBaseOption = {\n\t                template: this.template,\n\t                groupTemplate: this.groupTemplate, expandCollapse: true, listClass: '',\n\t                ariaAttributes: { itemRole: 'listitem', listRole: 'list', itemText: '',\n\t                    groupItemRole: 'group', wrapperRole: 'presentation' },\n\t                fields: this.fields.properties, sortOrder: this.sortOrder, showIcon: this.showIcon\n\t            };\n\t        };\n\t        ListView.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var classList = target.classList;\n\t            if (classList.contains(classNames.backIcon) || classList.contains(classNames.headerText)) {\n\t                this.back();\n\t            }\n\t            else {\n\t                var li = ej2_base_2.closest(target.parentNode, '.' + classNames.listItem);\n\t                if (li === null) {\n\t                    li = target;\n\t                }\n\t                this.setSelectLI(li, e);\n\t            }\n\t        };\n\t        ListView.prototype.hoverHandler = function (e) {\n\t            var curLi = ej2_base_2.closest(e.target.parentNode, '.' + classNames.listItem);\n\t            this.setHoverLI(curLi);\n\t        };\n\t        ListView.prototype.leaveHandler = function (e) {\n\t            this.removeHover();\n\t        };\n\t        ;\n\t        ListView.prototype.keyActionHandler = function (e) {\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'moveDown':\n\t                    this.hoverSiblingLI();\n\t                    break;\n\t                case 'moveUp':\n\t                    this.hoverSiblingLI(true);\n\t                    break;\n\t                case 'select':\n\t                    this.setSelectLI(this.curUL.querySelector('.' + classNames.hover), e);\n\t                    break;\n\t                case 'back':\n\t                    this.back();\n\t                    break;\n\t            }\n\t        };\n\t        ListView.prototype.swipeActionHandler = function (e) {\n\t            if (e.swipeDirection === 'Right') {\n\t                this.back();\n\t            }\n\t        };\n\t        ListView.prototype.wireEvents = function () {\n\t            ej2_base_3.EventHandler.add(this.element, 'click', this.clickHandler, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_3.EventHandler.add(this.element, 'mouseout', this.leaveHandler, this);\n\t            this.keyboardModule = new ej2_base_4.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs\n\t            });\n\t            this.touchModule = new ej2_base_5.Touch(this.element, { swipe: this.swipeActionHandler.bind(this) });\n\t        };\n\t        ListView.prototype.unWireEvents = function () {\n\t            ej2_base_3.EventHandler.remove(this.element, 'click', this.clickHandler);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n\t            ej2_base_3.EventHandler.remove(this.element, 'mouseout', this.leaveHandler);\n\t            this.keyboardModule.destroy();\n\t            this.touchModule.destroy();\n\t        };\n\t        ListView.prototype.removeHover = function () {\n\t            var hoverLI = this.element.querySelector('.' + classNames.hover);\n\t            if (hoverLI) {\n\t                hoverLI.classList.remove(classNames.hover);\n\t            }\n\t        };\n\t        ListView.prototype.removeSelect = function () {\n\t            var selectedLI = this.element.querySelectorAll('.' + classNames.selected);\n\t            for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {\n\t                var ele = selectedLI_1[_i];\n\t                ele.removeAttribute('aria-selected');\n\t                if (ele.className !== '') {\n\t                    ele.classList.remove(classNames.selected);\n\t                }\n\t            }\n\t        };\n\t        ListView.prototype.isValidLI = function (li) {\n\t            return (li && li.classList.contains(classNames.listItem)\n\t                && !li.classList.contains(classNames.grpListItem)\n\t                && !li.classList.contains(classNames.disable));\n\t        };\n\t        ListView.prototype.setSelectLI = function (li, e) {\n\t            if (this.isValidLI(li)\n\t                && !li.classList.contains(classNames.selected)\n\t                && this.enable) {\n\t                this.removeSelect();\n\t                li.classList.add(classNames.selected);\n\t                li.setAttribute('aria-selected', 'true');\n\t                this.removeHover();\n\t                var data = this.getItemData(li);\n\t                if (ej2_base_1.isNullOrUndefined(data) && typeof this.dataSource[0] === 'string') {\n\t                    this.selectedItems = {\n\t                        item: li,\n\t                        text: li.innerText.trim(),\n\t                        data: this.dataSource\n\t                    };\n\t                }\n\t                else {\n\t                    this.selectedItems = {\n\t                        item: li,\n\t                        text: data[this.listBaseOption.fields.text],\n\t                        data: data\n\t                    };\n\t                }\n\t                var eventArgs = {};\n\t                ej2_base_1.merge(eventArgs, this.selectedItems);\n\t                if (e) {\n\t                    ej2_base_1.merge(eventArgs, { isInteracted: true, event: e });\n\t                }\n\t                this.trigger('select', eventArgs);\n\t                this.selectedLI = li;\n\t                this.renderSubList(li);\n\t            }\n\t        };\n\t        ListView.prototype.setHoverLI = function (li) {\n\t            if (this.isValidLI(li) && !li.classList.contains(classNames.hover) && this.enable) {\n\t                var lastLi = this.element.querySelectorAll('.' + classNames.hover);\n\t                if (lastLi && lastLi.length) {\n\t                    ej2_base_2.removeClass(lastLi, classNames.hover);\n\t                }\n\t                if (!li.classList.contains(classNames.selected)) {\n\t                    li.classList.add(classNames.hover);\n\t                }\n\t            }\n\t        };\n\t        ListView.prototype.hoverSiblingLI = function (prev) {\n\t            var lastLi = this.curUL.querySelector('.' + classNames.hover);\n\t            var siblingLI;\n\t            if (!lastLi) {\n\t                lastLi = this.curUL.querySelector('.' + classNames.selected);\n\t            }\n\t            if (lastLi) {\n\t                siblingLI = list_base_1.ListBase.getSiblingLI(this.curUL.querySelectorAll('.' + classNames.listItem), lastLi, prev);\n\t            }\n\t            else {\n\t                if (prev) {\n\t                    var curLIs = this.curUL.querySelectorAll('.' + classNames.listItem);\n\t                    siblingLI = curLIs[curLIs.length - 1];\n\t                }\n\t                else {\n\t                    siblingLI = this.curUL.querySelector('.' + classNames.listItem);\n\t                }\n\t            }\n\t            this.setHoverLI(siblingLI);\n\t        };\n\t        ListView.prototype.getSubDS = function () {\n\t            var levelKeys = this.curDSLevel;\n\t            if (levelKeys.length) {\n\t                var ds = this.localData;\n\t                for (var _i = 0, levelKeys_1 = levelKeys; _i < levelKeys_1.length; _i++) {\n\t                    var key = levelKeys_1[_i];\n\t                    this.curDSJSON = this.findItemFromDS(ds, { id: key });\n\t                    ds = this.curDSJSON ? this.curDSJSON[this.fields.child] : ds;\n\t                }\n\t                return ds;\n\t            }\n\t            return this.localData;\n\t        };\n\t        ListView.prototype.getItemData = function (li) {\n\t            var fields = this.getElementUID(li);\n\t            var curDS = this.dataSource;\n\t            return this.findItemFromDS(curDS, fields);\n\t        };\n\t        ListView.prototype.findItemFromDS = function (dataSource, fields, parent) {\n\t            var _this = this;\n\t            var resultJSON;\n\t            if (dataSource && dataSource.length && fields) {\n\t                dataSource.some(function (data) {\n\t                    if ((fields.id || fields.text) &&\n\t                        (!fields.id || data[_this.fields.id] === fields.id) &&\n\t                        (!fields.text || data[_this.fields.text] === fields.text)) {\n\t                        resultJSON = (parent ? dataSource : data);\n\t                    }\n\t                    else if (data.hasOwnProperty(_this.fields.child) && data[_this.fields.child].length) {\n\t                        resultJSON = _this.findItemFromDS(data[_this.fields.child], fields, parent);\n\t                    }\n\t                    return !!resultJSON;\n\t                });\n\t            }\n\t            else {\n\t                resultJSON = dataSource;\n\t            }\n\t            return resultJSON;\n\t        };\n\t        ListView.prototype.getQuery = function () {\n\t            var columns = [];\n\t            var query = (this.query ? this.query : new ej2_data_1.Query());\n\t            if (!this.query) {\n\t                for (var _i = 0, _a = Object.keys(this.fields.properties); _i < _a.length; _i++) {\n\t                    var column = _a[_i];\n\t                    if (column !== 'tableName' && !!(this.fields[column]) &&\n\t                        this.fields[column] !==\n\t                            list_base_1.ListBase.defaultMappedFields[column]\n\t                        && columns.indexOf(this.fields[column]) === -1) {\n\t                        columns.push(this.fields[column]);\n\t                    }\n\t                }\n\t                query.select(columns);\n\t                if (this.fields.properties.hasOwnProperty('tableName')) {\n\t                    query.from(this.fields.tableName);\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        ListView.prototype.setViewDataSource = function (dataSource) {\n\t            if (dataSource === void 0) { dataSource = this.localData; }\n\t            if (dataSource && this.fields.groupBy) {\n\t                this.curViewDS = list_base_1.ListBase.groupDataSource(dataSource, this.fields, this.sortOrder);\n\t            }\n\t            else if (dataSource && this.sortOrder !== 'None') {\n\t                this.curViewDS = list_base_1.ListBase.getDataSource(dataSource, list_base_1.ListBase.addSorting(this.sortOrder, this.fields.sortBy));\n\t            }\n\t            else {\n\t                this.curViewDS = dataSource;\n\t            }\n\t        };\n\t        ListView.prototype.isInAnimation = function () {\n\t            return this.curUL.classList.contains('.e-animate');\n\t        };\n\t        ListView.prototype.setLocalData = function () {\n\t            var _this = this;\n\t            this.trigger('actionBegin');\n\t            if (this.dataSource instanceof ej2_data_1.DataManager) {\n\t                this.dataSource.executeQuery(this.getQuery()).then(function (e) {\n\t                    if (_this.isDestroyed) {\n\t                        return;\n\t                    }\n\t                    _this.localData = e.result;\n\t                    _this.renderList();\n\t                    _this.trigger('actionComplete', e);\n\t                }).catch(function (e) {\n\t                    if (_this.isDestroyed) {\n\t                        return;\n\t                    }\n\t                    _this.trigger('actionFailure', e);\n\t                });\n\t            }\n\t            else if (!this.dataSource || !this.dataSource.length) {\n\t                var ul = this.element.querySelector('ul');\n\t                if (ul) {\n\t                    ej2_base_2.remove(ul);\n\t                    this.setProperties({ dataSource: list_base_1.ListBase.createJsonFromElement(ul) }, true);\n\t                    this.localData = this.dataSource;\n\t                    this.renderList();\n\t                    this.trigger('actionComplete', { data: this.localData });\n\t                }\n\t            }\n\t            else {\n\t                this.localData = this.dataSource;\n\t                this.renderList();\n\t                this.trigger('actionComplete', { data: this.localData });\n\t            }\n\t        };\n\t        ListView.prototype.reRender = function () {\n\t            this.element.innerHTML = '';\n\t            this.curUL = this.headerEle = undefined;\n\t            this.setLocalData();\n\t            this.header();\n\t            this.contentContainer = ej2_base_2.createElement('div', { className: classNames.content });\n\t            this.element.appendChild(this.contentContainer);\n\t            this.renderIntoDom(this.ulElement);\n\t        };\n\t        ListView.prototype.resetCurrentList = function () {\n\t            this.setViewDataSource(this.curViewDS);\n\t            this.contentContainer.innerHTML = '';\n\t            this.createList();\n\t            this.renderIntoDom(this.curUL);\n\t        };\n\t        ListView.prototype.createList = function () {\n\t            this.ulElement = this.curUL = list_base_1.ListBase.createList(this.curViewDS, this.listBaseOption);\n\t            this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n\t        };\n\t        ListView.prototype.renderSubList = function (li) {\n\t            var uID = li.getAttribute('data-uid');\n\t            if (li.classList.contains(classNames.hasChild) && uID) {\n\t                var ul = ej2_base_2.closest(li.parentNode, '.' + classNames.parentItem);\n\t                var ele = this.element.querySelector('[pid=\\'' + uID + '\\']');\n\t                this.curDSLevel.push(uID);\n\t                this.setViewDataSource(this.getSubDS());\n\t                if (!ele) {\n\t                    ele = list_base_1.ListBase.createListFromJson(this.curViewDS, this.listBaseOption, this.curDSLevel.length);\n\t                    ele.setAttribute('pID', uID);\n\t                    ele.style.display = 'none';\n\t                    this.renderIntoDom(ele);\n\t                }\n\t                this.switchView(ul, ele);\n\t                this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n\t                this.header(this.selectedItems.data[this.listBaseOption.fields.text], true);\n\t                this.selectedLI = undefined;\n\t            }\n\t        };\n\t        ListView.prototype.renderIntoDom = function (ele) {\n\t            this.contentContainer.appendChild(ele);\n\t        };\n\t        ListView.prototype.renderList = function () {\n\t            this.setViewDataSource();\n\t            this.createList();\n\t            this.contentContainer = ej2_base_2.createElement('div', { className: classNames.content });\n\t            this.element.appendChild(this.contentContainer);\n\t            this.renderIntoDom(this.ulElement);\n\t        };\n\t        ListView.prototype.getElementUID = function (obj) {\n\t            var fields = {};\n\t            if (obj instanceof Element) {\n\t                fields.id = obj.getAttribute('data-uid');\n\t            }\n\t            else {\n\t                fields = obj;\n\t            }\n\t            return fields;\n\t        };\n\t        ListView.prototype.render = function () {\n\t            this.element.classList.add(classNames.root);\n\t            ej2_base_2.attributes(this.element, { role: 'list' });\n\t            this.setCSSClass();\n\t            this.setEnableRTL();\n\t            this.setEnable();\n\t            this.setSize();\n\t            this.wireEvents();\n\t            this.header();\n\t            this.setLocalData();\n\t            this.setHTMLAttribute();\n\t            this.rippleFn = ej2_base_5.rippleEffect(this.element, {\n\t                selector: '.' + classNames.listItem\n\t            });\n\t        };\n\t        ListView.prototype.destroy = function () {\n\t            this.unWireEvents();\n\t            var classAr = [classNames.root, this.cssClass, classNames.disable, 'e-rtl',\n\t                'e-has-header'];\n\t            ej2_base_2.removeClass([this.element], classAr);\n\t            this.rippleFn();\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        ListView.prototype.back = function () {\n\t            var pID = this.curDSLevel[this.curDSLevel.length - 1];\n\t            if (pID === undefined || this.isInAnimation()) {\n\t                return;\n\t            }\n\t            this.curDSLevel.pop();\n\t            this.setViewDataSource(this.getSubDS());\n\t            var toUL = this.element.querySelector('[data-uid=\\'' + pID + '\\']');\n\t            var fromUL = this.curUL;\n\t            if (!toUL) {\n\t                this.createList();\n\t                this.renderIntoDom(this.ulElement);\n\t                toUL = this.curUL;\n\t            }\n\t            else {\n\t                toUL = toUL.parentElement;\n\t            }\n\t            var text = this.curDSJSON[this.fields.text];\n\t            this.switchView(fromUL, toUL, true);\n\t            this.removeSelect();\n\t            this.liCollection = this.curUL.querySelectorAll('.' + classNames.listItem);\n\t            this.header((this.curDSLevel.length ? text : this.headerTitle), (this.curDSLevel.length ? true : false));\n\t        };\n\t        ListView.prototype.selectItem = function (obj) {\n\t            var resultJSON = this.getItemData(obj);\n\t            if (resultJSON) {\n\t                var li = this.element.querySelector('[data-uid=\"' + resultJSON[this.fields.id] + '\"]');\n\t                if (li) {\n\t                    this.setSelectLI(li);\n\t                }\n\t            }\n\t        };\n\t        ListView.prototype.getSelectedItem = function () {\n\t            return this.selectedItems;\n\t        };\n\t        ListView.prototype.findItem = function (fields) {\n\t            return this.findItemFromDS(this.dataSource, fields);\n\t        };\n\t        ListView.prototype.enableItem = function (obj) {\n\t            var resultJSON = this.getItemData(obj);\n\t            if (resultJSON) {\n\t                var li = this.element.querySelector('[data-uid=\"' + resultJSON[this.fields.id] + '\"]');\n\t                if (li) {\n\t                    li.classList.remove(classNames.disable);\n\t                }\n\t                delete resultJSON[this.fields.enabled];\n\t            }\n\t        };\n\t        ListView.prototype.disableItem = function (obj) {\n\t            var resultJSON = this.getItemData(obj);\n\t            if (resultJSON) {\n\t                var li = this.element.querySelector('[data-uid=\"' + resultJSON[this.fields.id] + '\"]');\n\t                if (li) {\n\t                    li.classList.add(classNames.disable);\n\t                }\n\t                resultJSON[this.fields.enabled] = false;\n\t            }\n\t        };\n\t        ListView.prototype.showItem = function (obj) {\n\t            this.showHideItem(obj, false, '');\n\t        };\n\t        ListView.prototype.hideItem = function (obj) {\n\t            this.showHideItem(obj, true, 'none');\n\t        };\n\t        ListView.prototype.showHideItem = function (obj, isHide, display) {\n\t            var resultJSON = this.getItemData(obj);\n\t            if (resultJSON) {\n\t                var li = this.element.querySelector('[data-uid=\"' + resultJSON[this.fields.id] + '\"]');\n\t                if (li) {\n\t                    li.style.display = display;\n\t                }\n\t                if (isHide) {\n\t                    resultJSON[this.fields.isVisible] = false;\n\t                }\n\t                else {\n\t                    delete resultJSON[this.fields.isVisible];\n\t                }\n\t            }\n\t        };\n\t        ListView.prototype.addItem = function (data, fields) {\n\t            var ds = this.findItemFromDS(this.dataSource, fields);\n\t            var child = ds[this.fields.child];\n\t            if (!child) {\n\t                child = [];\n\t            }\n\t            child = child.concat(data);\n\t            if (ds instanceof Array) {\n\t                this.dataSource = this.localData = ds.concat(data);\n\t                this.setViewDataSource();\n\t            }\n\t            else {\n\t                ds[this.fields.child] = child;\n\t            }\n\t            this.resetCurrentList();\n\t        };\n\t        ListView.prototype.removeItem = function (obj) {\n\t            var _this = this;\n\t            var fields = this.getElementUID(obj);\n\t            var curDS = this.findItemFromDS(this.dataSource, fields, true);\n\t            if (curDS && obj) {\n\t                var curAr_1;\n\t                var idx_1;\n\t                curDS.some(function (data, index, arr) {\n\t                    if ((fields.id || fields.text) &&\n\t                        (!fields.id || data[_this.fields.id] === fields.id) &&\n\t                        (!fields.text || data[_this.fields.text] === fields.text)) {\n\t                        curAr_1 = arr;\n\t                        idx_1 = index;\n\t                        return true;\n\t                    }\n\t                    return false;\n\t                });\n\t                curAr_1.splice(idx_1, 1);\n\t                this.resetCurrentList();\n\t            }\n\t        };\n\t        ListView.prototype.getModuleName = function () {\n\t            return 'listview';\n\t        };\n\t        ListView.prototype.getPersistData = function () {\n\t            return this.addOnPersist(['cssClass', 'enableRtl', 'htmlAttributes',\n\t                'enable', 'fields', 'animation', 'headerTitle',\n\t                'sortOrder', 'showIcon', 'height', 'width']);\n\t        };\n\t        return ListView;\n\t    }(ej2_base_3.Component));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], ListView.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property({})\n\t    ], ListView.prototype, \"htmlAttributes\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(true)\n\t    ], ListView.prototype, \"enable\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property([])\n\t    ], ListView.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], ListView.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Complex(list_base_1.ListBase.defaultMappedFields, FieldSettings)\n\t    ], ListView.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property({ effect: 'SlideLeft', duration: 400, easing: 'ease' })\n\t    ], ListView.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('None')\n\t    ], ListView.prototype, \"sortOrder\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(false)\n\t    ], ListView.prototype, \"showIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('')\n\t    ], ListView.prototype, \"headerTitle\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(false)\n\t    ], ListView.prototype, \"showHeader\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('')\n\t    ], ListView.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('')\n\t    ], ListView.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(null)\n\t    ], ListView.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(null)\n\t    ], ListView.prototype, \"groupTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], ListView.prototype, \"select\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], ListView.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], ListView.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], ListView.prototype, \"actionFailure\", void 0);\n\t    ListView = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], ListView);\n\t    exports.ListView = ListView;\n\t    exports.listViewBuilder = ej2_base_3.CreateBuilder(ListView);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.cssClass = {\n\t        li: 'e-list-item',\n\t        ul: 'e-list-parent e-ul',\n\t        group: 'e-list-group-item',\n\t        icon: 'e-list-icon',\n\t        text: 'e-list-text',\n\t        check: 'e-list-check',\n\t        checked: 'e-checked',\n\t        selected: 'e-selected',\n\t        expanded: 'e-expanded',\n\t        textContent: 'e-text-content',\n\t        hasChild: 'e-has-child',\n\t        level: 'e-level',\n\t        url: 'e-list-url',\n\t        collapsible: 'e-icon-collapsible',\n\t        disabled: 'e-disabled',\n\t        image: 'e-list-img',\n\t        iconWrapper: 'e-icon-wrapper'\n\t    };\n\t    var ListBase;\n\t    (function (ListBase) {\n\t        ListBase.defaultMappedFields = {\n\t            id: 'id',\n\t            text: 'text',\n\t            url: 'url',\n\t            value: 'value',\n\t            isChecked: 'isChecked',\n\t            enabled: 'enabled',\n\t            expanded: 'expanded',\n\t            selected: 'selected',\n\t            iconCss: 'iconCss',\n\t            child: 'child',\n\t            isVisible: 'isVisible',\n\t            hasChildren: 'hasChildren',\n\t            tooltip: 'tooltip',\n\t            htmlAttributes: 'htmlAttributes',\n\t            urlAttributes: 'urlAttributes',\n\t            imageAttributes: 'imageAttributes',\n\t            imageUrl: 'imageUrl',\n\t            groupBy: null\n\t        };\n\t        var defaultAriaAttributes = {\n\t            level: 1,\n\t            listRole: 'presentation',\n\t            itemRole: 'presentation',\n\t            groupItemRole: 'group',\n\t            itemText: 'list-item',\n\t            wrapperRole: 'presentation'\n\t        };\n\t        var defaultListBaseOptions = {\n\t            showCheckBox: false,\n\t            showIcon: false,\n\t            expandCollapse: false,\n\t            fields: ListBase.defaultMappedFields,\n\t            ariaAttributes: defaultAriaAttributes,\n\t            listClass: '',\n\t            itemClass: '',\n\t            processSubChild: false,\n\t            sortOrder: 'None',\n\t            template: null,\n\t            groupTemplate: null,\n\t            expandIconClass: 'e-icon-collapsible',\n\t            moduleName: 'list',\n\t            expandIconPosition: 'right'\n\t        };\n\t        function createList(dataSource, options, isSingleLevel) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var ariaAttributes = ej2_base_1.extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n\t            var type = typeofData(dataSource).typeof;\n\t            if (type === 'string' || type === 'number') {\n\t                return createListFromArray(dataSource, isSingleLevel, options);\n\t            }\n\t            else {\n\t                return createListFromJson(dataSource, options, ariaAttributes.level, isSingleLevel);\n\t            }\n\t        }\n\t        ListBase.createList = createList;\n\t        function createListFromArray(dataSource, isSingleLevel, options) {\n\t            var subChild = createListItemFromArray(dataSource, isSingleLevel, options);\n\t            return generateUL(subChild, null, options);\n\t        }\n\t        ListBase.createListFromArray = createListFromArray;\n\t        function createListItemFromArray(dataSource, isSingleLevel, options) {\n\t            var subChild = [];\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            exports.cssClass = getModuleClass(curOpt.moduleName);\n\t            var id = genUID();\n\t            for (var i = 0; i < dataSource.length; i++) {\n\t                if (ej2_base_1.isNullOrUndefined(dataSource[i])) {\n\t                    continue;\n\t                }\n\t                var li = void 0;\n\t                if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n\t                    var curData = {\n\t                        dataSource: dataSource,\n\t                        curData: dataSource[i],\n\t                        text: dataSource[i],\n\t                        options: curOpt\n\t                    };\n\t                    curOpt.itemCreating(curData);\n\t                }\n\t                if (isSingleLevel) {\n\t                    li = generateSingleLevelLI(dataSource[i], null, null, [], null, id, i, options);\n\t                }\n\t                else {\n\t                    li = generateLI(dataSource[i], null, null, options);\n\t                }\n\t                if (curOpt.itemCreated && typeof curOpt.itemCreated === 'function') {\n\t                    var curData = {\n\t                        dataSource: dataSource,\n\t                        curData: dataSource[i],\n\t                        text: dataSource[i],\n\t                        item: li,\n\t                        options: curOpt\n\t                    };\n\t                    curOpt.itemCreated(curData);\n\t                }\n\t                subChild.push(li);\n\t            }\n\t            return subChild;\n\t        }\n\t        ListBase.createListItemFromArray = createListItemFromArray;\n\t        function createListItemFromJson(dataSource, options, level, isSingleLevel) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            exports.cssClass = getModuleClass(curOpt.moduleName);\n\t            var fields = ej2_base_1.extend({}, ListBase.defaultMappedFields, curOpt.fields);\n\t            var ariaAttributes = ej2_base_1.extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n\t            var id;\n\t            if (level) {\n\t                ariaAttributes.level = level;\n\t            }\n\t            var child = [];\n\t            var li;\n\t            if (Object.keys(dataSource).length && !typeofData(dataSource).item.hasOwnProperty(fields.id)) {\n\t                id = genUID();\n\t            }\n\t            for (var i = 0; i < dataSource.length; i++) {\n\t                if (ej2_base_1.isNullOrUndefined(dataSource[i])) {\n\t                    continue;\n\t                }\n\t                if (curOpt.itemCreating && typeof curOpt.itemCreating === 'function') {\n\t                    var curData = {\n\t                        dataSource: dataSource,\n\t                        curData: dataSource[i],\n\t                        text: dataSource[i][fields.text],\n\t                        options: curOpt,\n\t                        fields: fields\n\t                    };\n\t                    curOpt.itemCreating(curData);\n\t                }\n\t                var curItem = dataSource[i];\n\t                if (Object.keys(dataSource).length && dataSource[i].hasOwnProperty(fields.id)\n\t                    && !ej2_base_1.isNullOrUndefined(dataSource[i][fields.id])) {\n\t                    id = dataSource[i].id;\n\t                }\n\t                var innerEle = [];\n\t                if (curOpt.showCheckBox) {\n\t                    innerEle.push(ej2_base_2.createElement('input', { className: exports.cssClass.check, attrs: { type: 'checkbox' } }));\n\t                }\n\t                if (isSingleLevel === true) {\n\t                    if (curOpt.showIcon && curItem.hasOwnProperty(fields.iconCss)) {\n\t                        if (!ej2_base_1.isNullOrUndefined(curItem[fields.iconCss])) {\n\t                            innerEle.push(ej2_base_2.createElement('span', { className: exports.cssClass.icon + ' ' + curItem[fields.iconCss] }));\n\t                        }\n\t                    }\n\t                    li = generateSingleLevelLI(curItem, fields, curOpt.itemClass, innerEle, (curItem.hasOwnProperty('isHeader') &&\n\t                        curItem.isHeader) ? true : false, id, i, options);\n\t                }\n\t                else {\n\t                    li = generateLI(curItem, fields, curOpt.itemClass, options);\n\t                    li.classList.add(exports.cssClass.level + '-' + ariaAttributes.level);\n\t                    li.setAttribute('aria-level', ariaAttributes.level.toString());\n\t                    if (curItem.hasOwnProperty(fields.tooltip)) {\n\t                        li.setAttribute('title', curItem[fields.tooltip]);\n\t                    }\n\t                    if (curItem.hasOwnProperty(fields.htmlAttributes) && curItem[fields.htmlAttributes]) {\n\t                        setAttribute(li, curItem[fields.htmlAttributes]);\n\t                    }\n\t                    if (curItem.hasOwnProperty(fields.enabled) && curItem[fields.enabled] === false) {\n\t                        li.classList.add(exports.cssClass.disabled);\n\t                    }\n\t                    if (curItem.hasOwnProperty(fields.isVisible) && curItem[fields.isVisible] === false) {\n\t                        li.style.display = 'none';\n\t                    }\n\t                    if (curItem.hasOwnProperty(fields.imageUrl) && !ej2_base_1.isNullOrUndefined(curItem[fields.imageUrl])) {\n\t                        var attr = { src: curItem[fields.imageUrl] };\n\t                        if (curItem.hasOwnProperty(fields.imageUrl)) {\n\t                            ej2_base_1.merge(attr, curItem[fields.imageAttributes]);\n\t                        }\n\t                        ej2_base_2.prepend([ej2_base_2.createElement('img', { className: exports.cssClass.image, attrs: attr })], li.firstElementChild);\n\t                    }\n\t                    if (curOpt.showIcon && curItem.hasOwnProperty(fields.iconCss) && !curOpt.template) {\n\t                        if (!ej2_base_1.isNullOrUndefined(curItem[fields.iconCss])) {\n\t                            ej2_base_2.prepend([ej2_base_2.createElement('div', { className: exports.cssClass.icon + ' ' + curItem[fields.iconCss] })], li.firstElementChild);\n\t                        }\n\t                    }\n\t                    if (innerEle.length) {\n\t                        ej2_base_2.prepend(innerEle, li.firstElementChild);\n\t                    }\n\t                    processSubChild(curItem, fields, dataSource, curOpt, li, ariaAttributes.level);\n\t                }\n\t                if (curOpt.itemCreated && typeof curOpt.itemCreated === 'function') {\n\t                    var curData = {\n\t                        dataSource: dataSource,\n\t                        curData: dataSource[i],\n\t                        text: dataSource[i][fields.text],\n\t                        item: li,\n\t                        options: curOpt,\n\t                        fields: fields\n\t                    };\n\t                    curOpt.itemCreated(curData);\n\t                }\n\t                child.push(li);\n\t            }\n\t            return child;\n\t        }\n\t        ListBase.createListItemFromJson = createListItemFromJson;\n\t        function createListFromJson(dataSource, options, level, isSingleLevel) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var li = createListItemFromJson(dataSource, options, level, isSingleLevel);\n\t            return generateUL(li, curOpt.listClass, options);\n\t        }\n\t        ListBase.createListFromJson = createListFromJson;\n\t        function getSiblingLI(elementArray, element, isPrevious) {\n\t            exports.cssClass = getModuleClass(defaultListBaseOptions.moduleName);\n\t            if (!elementArray || !elementArray.length) {\n\t                return void 0;\n\t            }\n\t            var siblingLI;\n\t            var liIndex;\n\t            var liCollections = Array.prototype.slice.call(elementArray);\n\t            if (element) {\n\t                liIndex = indexOf(element, liCollections);\n\t            }\n\t            else {\n\t                liIndex = (isPrevious === true ? liCollections.length : -1);\n\t            }\n\t            siblingLI = liCollections[liIndex + (isPrevious === true ? -1 : 1)];\n\t            while (siblingLI && (!ej2_base_2.isVisible(siblingLI) || siblingLI.classList.contains(exports.cssClass.disabled))) {\n\t                liIndex = liIndex + (isPrevious === true ? -1 : 1);\n\t                siblingLI = liCollections[liIndex];\n\t            }\n\t            return siblingLI;\n\t        }\n\t        ListBase.getSiblingLI = getSiblingLI;\n\t        function indexOf(item, elementArray) {\n\t            if (!elementArray || !item) {\n\t                return void 0;\n\t            }\n\t            else {\n\t                var liCollections = elementArray;\n\t                liCollections = Array.prototype.slice.call(elementArray);\n\t                return liCollections.indexOf(item);\n\t            }\n\t        }\n\t        ListBase.indexOf = indexOf;\n\t        function groupDataSource(dataSource, fields, sortOrder) {\n\t            if (sortOrder === void 0) { sortOrder = 'None'; }\n\t            var cusQuery = new ej2_data_1.Query().group(fields.groupBy);\n\t            cusQuery = addSorting(sortOrder, 'key', cusQuery);\n\t            var ds = getDataSource(dataSource, cusQuery);\n\t            dataSource = [];\n\t            for (var j = 0; j < ds.length; j++) {\n\t                var itemObj = ds[j].items;\n\t                var grpItem = {};\n\t                var hdr = 'isHeader';\n\t                grpItem[fields.text] = ds[j].key;\n\t                grpItem[hdr] = true;\n\t                grpItem.items = itemObj;\n\t                dataSource.push(grpItem);\n\t                for (var k = 0; k < itemObj.length; k++) {\n\t                    dataSource.push(itemObj[k]);\n\t                }\n\t            }\n\t            return dataSource;\n\t        }\n\t        ListBase.groupDataSource = groupDataSource;\n\t        function addSorting(sortOrder, sortBy, query) {\n\t            if (query === void 0) { query = new ej2_data_1.Query(); }\n\t            if (sortOrder === 'Ascending') {\n\t                query.sortBy(sortBy, 'ascending', true);\n\t            }\n\t            else if (sortOrder === 'Descending') {\n\t                query.sortBy(sortBy, 'descending', true);\n\t            }\n\t            return query;\n\t        }\n\t        ListBase.addSorting = addSorting;\n\t        function getDataSource(dataSource, query) {\n\t            return new ej2_data_1.DataManager(dataSource)\n\t                .executeLocal(query);\n\t        }\n\t        ListBase.getDataSource = getDataSource;\n\t        function createJsonFromElement(element, options) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var fields = ej2_base_1.extend({}, ListBase.defaultMappedFields, curOpt.fields);\n\t            var curEle = element.cloneNode(true);\n\t            var jsonAr = [];\n\t            curEle.classList.add('json-parent');\n\t            var childs = curEle.querySelectorAll('.json-parent>li');\n\t            curEle.classList.remove('json-parent');\n\t            var _loop_1 = function (i) {\n\t                var li = childs[i];\n\t                var anchor = li.querySelector('a');\n\t                var ul = li.querySelector('ul');\n\t                var json = {};\n\t                var childNodes = anchor ? anchor.childNodes : li.childNodes;\n\t                Object.keys(childNodes).forEach(function (key) {\n\t                    if (!(childNodes[Number(key)]).hasChildNodes()) {\n\t                        json[fields.text] = childNodes[Number(key)].textContent;\n\t                    }\n\t                });\n\t                json[fields.id] = genUID();\n\t                var attributes_1 = getAllAttributes(li);\n\t                if (Object.keys(attributes_1).length) {\n\t                    json[fields.htmlAttributes] = attributes_1;\n\t                }\n\t                if (anchor) {\n\t                    attributes_1 = getAllAttributes(anchor);\n\t                    if (Object.keys(attributes_1).length) {\n\t                        json[fields.urlAttributes] = attributes_1;\n\t                    }\n\t                }\n\t                if (ul) {\n\t                    json[fields.child] = createJsonFromElement(ul, options);\n\t                }\n\t                jsonAr.push(json);\n\t            };\n\t            for (var i = 0; i < childs.length; i++) {\n\t                _loop_1(i);\n\t            }\n\t            return jsonAr;\n\t        }\n\t        ListBase.createJsonFromElement = createJsonFromElement;\n\t        function typeofData(data) {\n\t            var match = { typeof: null, item: null };\n\t            for (var i = 0; i < data.length; i++) {\n\t                if (!ej2_base_1.isNullOrUndefined(data[i])) {\n\t                    return match = { typeof: typeof data[i], item: data[i] };\n\t                }\n\t            }\n\t            return match;\n\t        }\n\t        function setAttribute(element, elementAttributes) {\n\t            var attr = {};\n\t            ej2_base_1.merge(attr, elementAttributes);\n\t            if (attr.class) {\n\t                ej2_base_2.addClass([element], attr.class.split(' '));\n\t                delete attr.class;\n\t            }\n\t            ej2_base_2.attributes(element, attr);\n\t        }\n\t        function getAllAttributes(element) {\n\t            var attributes = {};\n\t            var attr = element.attributes;\n\t            for (var index = 0; index < attr.length; index++) {\n\t                attributes[attr[index].nodeName] = attr[index].nodeValue;\n\t            }\n\t            return attributes;\n\t        }\n\t        function renderContentTemplate(template, dataSource, fields) {\n\t            exports.cssClass = getModuleClass(defaultListBaseOptions.moduleName);\n\t            var ulElement = ej2_base_2.createElement('ul', { className: exports.cssClass.ul, attrs: { role: 'presentation' } });\n\t            var compiledString = ej2_base_3.compile(template);\n\t            var liCollection = [];\n\t            var id = genUID();\n\t            for (var i = 0; i < dataSource.length; i++) {\n\t                var item = dataSource[i];\n\t                var isHeader = item.isHeader;\n\t                var li = ej2_base_2.createElement('li', {\n\t                    id: id + '-' + i,\n\t                    className: isHeader ? exports.cssClass.group : exports.cssClass.li, attrs: { role: 'presentation' }\n\t                });\n\t                if (isHeader) {\n\t                    li.innerText = item[fields.text];\n\t                }\n\t                else {\n\t                    ej2_base_2.append(compiledString(item), li);\n\t                    var value = item[fields.value];\n\t                    li.setAttribute('data-value', value);\n\t                    li.setAttribute('role', 'option');\n\t                }\n\t                liCollection.push(li);\n\t            }\n\t            ej2_base_2.append(liCollection, ulElement);\n\t            return ulElement;\n\t        }\n\t        ListBase.renderContentTemplate = renderContentTemplate;\n\t        function renderGroupTemplate(groupTemplate, groupDataSource, fields, headerItems) {\n\t            var compiledString = ej2_base_3.compile(groupTemplate);\n\t            var category = fields.groupBy;\n\t            var headerData = {};\n\t            for (var _i = 0, headerItems_1 = headerItems; _i < headerItems_1.length; _i++) {\n\t                var header = headerItems_1[_i];\n\t                headerData[category] = header.textContent;\n\t                header.innerHTML = '';\n\t                ej2_base_2.append(compiledString(headerData), header);\n\t            }\n\t            return headerItems;\n\t        }\n\t        ListBase.renderGroupTemplate = renderGroupTemplate;\n\t        function genUID() {\n\t            return Math.floor((1 + Math.random()) * 0x10000)\n\t                .toString(16)\n\t                .substring(1);\n\t        }\n\t        function processSubChild(curItem, fields, ds, options, element, level) {\n\t            var subDS = curItem[fields.child] || [];\n\t            var hasChildren = curItem[fields.hasChildren];\n\t            if (subDS.length) {\n\t                hasChildren = true;\n\t                element.classList.add(exports.cssClass.hasChild);\n\t                if (options.processSubChild) {\n\t                    var subLi = createListFromJson(subDS, options, ++level);\n\t                    element.appendChild(subLi);\n\t                }\n\t            }\n\t            if (!!options.expandCollapse && hasChildren && !options.template) {\n\t                if (element.firstElementChild.classList.contains(exports.cssClass.textContent)) {\n\t                    element.firstElementChild.classList.add(exports.cssClass.iconWrapper);\n\t                }\n\t                var expandElement = options.expandIconPosition === 'left' ? ej2_base_2.prepend : ej2_base_2.append;\n\t                expandElement([ej2_base_2.createElement('div', { className: 'e-icons ' + options.expandIconClass })], element.querySelector('.' + exports.cssClass.textContent));\n\t            }\n\t        }\n\t        function generateSingleLevelLI(item, fields, className, innerElements, grpLI, id, index, options) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var ariaAttributes = ej2_base_1.extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n\t            var text = item;\n\t            var value = item;\n\t            var dataSource;\n\t            if (typeof item !== 'string' && typeof item !== 'number') {\n\t                dataSource = item;\n\t                text = item[fields.text] || '';\n\t                value = item[fields.value];\n\t            }\n\t            var elementID;\n\t            if (!ej2_base_1.isNullOrUndefined(dataSource) && !ej2_base_1.isNullOrUndefined(dataSource[fields.id])\n\t                && dataSource[fields.id] !== '') {\n\t                elementID = id;\n\t            }\n\t            else {\n\t                elementID = id + '-' + index;\n\t            }\n\t            var li = ej2_base_2.createElement('li', {\n\t                className: (grpLI === true ? exports.cssClass.group : exports.cssClass.li) + ' ' + (ej2_base_1.isNullOrUndefined(className) ? '' : className),\n\t                id: elementID, attrs: (ariaAttributes.groupItemRole !== '' && ariaAttributes.itemRole !== '' ?\n\t                    { role: (grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole) } : {})\n\t            });\n\t            if (dataSource && dataSource.hasOwnProperty(fields.enabled) && dataSource[fields.enabled].toString() === 'false') {\n\t                li.classList.add(exports.cssClass.disabled);\n\t            }\n\t            if (grpLI) {\n\t                li.innerText = text;\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                    li.setAttribute('data-value', value);\n\t                }\n\t                li.setAttribute('role', 'option');\n\t                if (dataSource && dataSource.hasOwnProperty(fields.htmlAttributes) && dataSource[fields.htmlAttributes]) {\n\t                    setAttribute(li, dataSource[fields.htmlAttributes]);\n\t                }\n\t                if (innerElements.length) {\n\t                    ej2_base_2.append(innerElements, li);\n\t                }\n\t                if (dataSource && dataSource.hasOwnProperty(fields.url) && dataSource[fields.url]) {\n\t                    li.appendChild(anchorTag(dataSource, fields, text));\n\t                }\n\t                else {\n\t                    li.appendChild(document.createTextNode(text));\n\t                }\n\t            }\n\t            return li;\n\t        }\n\t        function getModuleClass(moduleName) {\n\t            var moduleClass;\n\t            return moduleClass = {\n\t                li: \"e-\" + moduleName + \"-item\",\n\t                ul: \"e-\" + moduleName + \"-parent e-ul\",\n\t                group: \"e-\" + moduleName + \"-group-item\",\n\t                icon: \"e-\" + moduleName + \"-icon\",\n\t                text: \"e-\" + moduleName + \"-text\",\n\t                check: \"e-\" + moduleName + \"-check\",\n\t                checked: 'e-checked',\n\t                selected: 'e-selected',\n\t                expanded: 'e-expanded',\n\t                textContent: 'e-text-content',\n\t                hasChild: 'e-has-child',\n\t                level: 'e-level',\n\t                url: \"e-\" + moduleName + \"-url\",\n\t                collapsible: 'e-icon-collapsible',\n\t                disabled: 'e-disabled',\n\t                image: \"e-\" + moduleName + \"-img\",\n\t                iconWrapper: 'e-icon-wrapper'\n\t            };\n\t        }\n\t        function anchorTag(dataSource, fields, text) {\n\t            var attr = { href: dataSource[fields.url] };\n\t            if (dataSource.hasOwnProperty(fields.urlAttributes) && dataSource[fields.urlAttributes]) {\n\t                ej2_base_1.merge(attr, dataSource[fields.urlAttributes]);\n\t            }\n\t            var anchorTag = ej2_base_2.createElement('a', { className: exports.cssClass.text + ' ' + exports.cssClass.url, innerHTML: text });\n\t            setAttribute(anchorTag, attr);\n\t            return anchorTag;\n\t        }\n\t        function generateLI(item, fields, className, options) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var ariaAttributes = ej2_base_1.extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n\t            var text = item;\n\t            var uID;\n\t            var grpLI;\n\t            var dataSource;\n\t            if (typeof item !== 'string') {\n\t                dataSource = item;\n\t                text = item[fields.text] || '';\n\t                uID = item[fields.id];\n\t                grpLI = (item.hasOwnProperty('isHeader') && item.isHeader)\n\t                    ? true : false;\n\t            }\n\t            var li = ej2_base_2.createElement('li', {\n\t                className: (grpLI === true ? exports.cssClass.group : exports.cssClass.li) + ' ' + (ej2_base_1.isNullOrUndefined(className) ? '' : className),\n\t                attrs: (ariaAttributes.groupItemRole !== '' && ariaAttributes.itemRole !== '' ?\n\t                    { role: (grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole) } : {})\n\t            });\n\t            if (uID) {\n\t                li.setAttribute('data-uid', uID);\n\t            }\n\t            if (grpLI && options && options.groupTemplate) {\n\t                var compiledString = ej2_base_3.compile(options.groupTemplate);\n\t                ej2_base_2.append(compiledString(item), li);\n\t            }\n\t            else if (!grpLI && options && options.template) {\n\t                var compiledString = ej2_base_3.compile(options.template);\n\t                ej2_base_2.append(compiledString(item), li);\n\t            }\n\t            else {\n\t                var innerDiv = ej2_base_2.createElement('div', { className: exports.cssClass.textContent,\n\t                    attrs: (ariaAttributes.wrapperRole !== '' ? { role: ariaAttributes.wrapperRole } : {}) });\n\t                if (dataSource && dataSource.hasOwnProperty(fields.url) && dataSource[fields.url]) {\n\t                    innerDiv.appendChild(anchorTag(dataSource, fields, text));\n\t                }\n\t                else {\n\t                    innerDiv.appendChild(ej2_base_2.createElement('span', { className: exports.cssClass.text, innerHTML: text,\n\t                        attrs: (ariaAttributes.itemText !== '' ? { role: ariaAttributes.itemText } : {}) }));\n\t                }\n\t                li.appendChild(innerDiv);\n\t            }\n\t            return li;\n\t        }\n\t        function generateUL(liElement, className, options) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var ariaAttributes = ej2_base_1.extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n\t            exports.cssClass = getModuleClass(curOpt.moduleName);\n\t            var ulElement = ej2_base_2.createElement('ul', {\n\t                className: exports.cssClass.ul + ' ' + (ej2_base_1.isNullOrUndefined(className) ? '' : className),\n\t                attrs: (ariaAttributes.listRole !== '' ? { role: ariaAttributes.listRole } : {})\n\t            });\n\t            ej2_base_2.append(liElement, ulElement);\n\t            return ulElement;\n\t        }\n\t        ListBase.generateUL = generateUL;\n\t        function generateIcon(liElement, className, options) {\n\t            var curOpt = ej2_base_1.extend({}, defaultListBaseOptions, options);\n\t            var ariaAttributes = ej2_base_1.extend({}, defaultAriaAttributes, curOpt.ariaAttributes);\n\t            exports.cssClass = getModuleClass(curOpt.moduleName);\n\t            var expandElement = curOpt.expandIconPosition === 'left' ? ej2_base_2.prepend : ej2_base_2.append;\n\t            expandElement([ej2_base_2.createElement('div', { className: 'e-icons ' + curOpt.expandIconClass + ' ' +\n\t                        (ej2_base_1.isNullOrUndefined(className) ? '' : className) })], liElement.querySelector('.' + exports.cssClass.textContent));\n\t            return liElement;\n\t        }\n\t        ListBase.generateIcon = generateIcon;\n\t    })(ListBase = exports.ListBase || (exports.ListBase = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, list_base_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(list_base_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBiNjQxMWU3ZmJlZTEzNzM0NzVlNSIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpc3Qtdmlldy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlzdC12aWV3L2xpc3Qtdmlldy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9saXN0LWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7aUVDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNSRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O0FDUEQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQkFBZ0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QixxREFBcUQ7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztBQ2p5QkQsZ0Q7Ozs7OztBQ0FBLGdEOzs7Ozs7aUVDQUE7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QyxzREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQTtBQUNBLDRCQUEyQix1QkFBdUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLDhDQUE2QztBQUM3QyxzREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHVCQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXFFLDRDQUE0QyxtQkFBbUIsRUFBRTtBQUN0STtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE0RSxtRUFBbUU7QUFDL0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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cnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIikpIDogZmFjdG9yeShyb290W1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYjY0MTFlN2ZiZWUxMzczNDc1ZTUiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2xpc3Qtdmlldy9pbmRleFwiLCBcIi4vY29tbW9uL2luZGV4XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaW5kZXhfMSwgaW5kZXhfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaW5kZXhfMSk7XG4gICAgX19leHBvcnQoaW5kZXhfMik7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbGlzdC12aWV3XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgbGlzdF92aWV3XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGxpc3Rfdmlld18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGlzdC12aWV3L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vY29tbW9uL2xpc3QtYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9kYXRhXzEsIGxpc3RfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBlZmZlY3RzQ29uZmlnID0ge1xuICAgICAgICAnTm9uZSc6IFtdLFxuICAgICAgICAnU2xpZGVMZWZ0JzogWydTbGlkZVJpZ2h0T3V0JywgJ1NsaWRlTGVmdE91dCcsICdTbGlkZUxlZnRJbicsICdTbGlkZVJpZ2h0SW4nXSxcbiAgICAgICAgJ1NsaWRlRG93bic6IFsnU2xpZGVUb3BPdXQnLCAnU2xpZGVCb3R0b21PdXQnLCAnU2xpZGVCb3R0b21JbicsICdTbGlkZVRvcEluJ10sXG4gICAgICAgICdab29tJzogWydGYWRlT3V0JywgJ0ZhZGVab29tT3V0JywgJ0ZhZGVab29tSW4nLCAnRmFkZUluJ10sXG4gICAgICAgICdGYWRlJzogWydGYWRlT3V0JywgJ0ZhZGVPdXQnLCAnRmFkZUluJywgJ0ZhZGVJbiddXG4gICAgfTtcbiAgICB2YXIgZWZmZWN0c1JUTENvbmZpZyA9IHtcbiAgICAgICAgJ05vbmUnOiBbXSxcbiAgICAgICAgJ1NsaWRlTGVmdCc6IFsnU2xpZGVMZWZ0T3V0JywgJ1NsaWRlUmlnaHRPdXQnLCAnU2xpZGVSaWdodEluJywgJ1NsaWRlTGVmdEluJ10sXG4gICAgICAgICdTbGlkZURvd24nOiBbJ1NsaWRlQm90dG9tT3V0JywgJ1NsaWRlVG9wT3V0JywgJ1NsaWRlVG9wSW4nLCAnU2xpZGVCb3R0b21JbiddLFxuICAgICAgICAnWm9vbSc6IFsnRmFkZVpvb21PdXQnLCAnRmFkZU91dCcsICdGYWRlSW4nLCAnRmFkZVpvb21JbiddLFxuICAgICAgICAnRmFkZSc6IFsnRmFkZU91dCcsICdGYWRlT3V0JywgJ0ZhZGVJbicsICdGYWRlSW4nXVxuICAgIH07XG4gICAgdmFyIGNsYXNzTmFtZXMgPSB7XG4gICAgICAgIHJvb3Q6ICdlLWxpc3R2aWV3JyxcbiAgICAgICAgaG92ZXI6ICdlLWhvdmVyJyxcbiAgICAgICAgc2VsZWN0ZWQ6ICdlLWFjdGl2ZScsXG4gICAgICAgIHBhcmVudEl0ZW06ICdlLWxpc3QtcGFyZW50JyxcbiAgICAgICAgbGlzdEl0ZW06ICdlLWxpc3QtaXRlbScsXG4gICAgICAgIGxpc3RJdGVtVGV4dDogJ2UtbGlzdC10ZXh0JyxcbiAgICAgICAgZ3JwTGlzdEl0ZW06ICdlLWxpc3QtZ3JvdXAtaXRlbScsXG4gICAgICAgIGhhc0NoaWxkOiAnZS1oYXMtY2hpbGQnLFxuICAgICAgICB2aWV3OiAnZS12aWV3JyxcbiAgICAgICAgaGVhZGVyOiAnZS1saXN0LWhlYWRlcicsXG4gICAgICAgIGhlYWRlclRleHQ6ICdlLWhlYWRlcnRleHQnLFxuICAgICAgICB0ZXh0OiAnZS10ZXh0JyxcbiAgICAgICAgZGlzYWJsZTogJ2UtZGlzYWJsZWQnLFxuICAgICAgICBjb250ZW50OiAnZS1jb250ZW50JyxcbiAgICAgICAgaWNvbjogJ2UtaWNvbnMnLFxuICAgICAgICBiYWNrSWNvbjogJ2UtaWNvbi1iYWNrJ1xuICAgIH07XG4gICAgdmFyIEZpZWxkU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRmllbGRTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmllbGRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRmllbGRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzQuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdpZCcpXG4gICAgXSwgRmllbGRTZXR0aW5ncy5wcm90b3R5cGUsIFwiaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgndGV4dCcpXG4gICAgXSwgRmllbGRTZXR0aW5ncy5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdpc0NoZWNrZWQnKVxuICAgIF0sIEZpZWxkU2V0dGluZ3MucHJvdG90eXBlLCBcImlzQ2hlY2tlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdpc1Zpc2libGUnKVxuICAgIF0sIEZpZWxkU2V0dGluZ3MucHJvdG90eXBlLCBcImlzVmlzaWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdlbmFibGVkJylcbiAgICBdLCBGaWVsZFNldHRpbmdzLnByb3RvdHlwZSwgXCJlbmFibGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ2ljb25Dc3MnKVxuICAgIF0sIEZpZWxkU2V0dGluZ3MucHJvdG90eXBlLCBcImljb25Dc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnY2hpbGQnKVxuICAgIF0sIEZpZWxkU2V0dGluZ3MucHJvdG90eXBlLCBcImNoaWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ3Rvb2x0aXAnKVxuICAgIF0sIEZpZWxkU2V0dGluZ3MucHJvdG90eXBlLCBcInRvb2x0aXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnZ3JvdXBCeScpXG4gICAgXSwgRmllbGRTZXR0aW5ncy5wcm90b3R5cGUsIFwiZ3JvdXBCeVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCd0ZXh0JylcbiAgICBdLCBGaWVsZFNldHRpbmdzLnByb3RvdHlwZSwgXCJzb3J0QnlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnaHRtbEF0dHJpYnV0ZXMnKVxuICAgIF0sIEZpZWxkU2V0dGluZ3MucHJvdG90eXBlLCBcImh0bWxBdHRyaWJ1dGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ3RhYmxlTmFtZScpXG4gICAgXSwgRmllbGRTZXR0aW5ncy5wcm90b3R5cGUsIFwidGFibGVOYW1lXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5GaWVsZFNldHRpbmdzID0gRmllbGRTZXR0aW5ncztcbiAgICB2YXIgTGlzdFZpZXcgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTGlzdFZpZXcsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIExpc3RWaWV3KG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jdXJEU0xldmVsID0gW107XG4gICAgICAgICAgICBfdGhpcy5jdXJWaWV3RFMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmtleUNvbmZpZ3MgPSB7XG4gICAgICAgICAgICAgICAgbW92ZURvd246ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIG1vdmVVcDogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICBiYWNrOiAnYmFja3NwYWNlJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmFuaW1hdGVPcHRpb25zID0ge307XG4gICAgICAgICAgICBfdGhpcy5hbmlPYmogPSBuZXcgZWoyX2Jhc2VfNS5BbmltYXRpb24oX3RoaXMuYW5pbWF0ZU9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2h0bWxBdHRyaWJ1dGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SFRNTEF0dHJpYnV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q1NTQ2xhc3Mob2xkUHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlUlRMKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmllbGRzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uZmllbGRzID0gdGhpcy5maWVsZHMucHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXJUaXRsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VyRFNMZXZlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcih0aGlzLmhlYWRlclRpdGxlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0hlYWRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIodGhpcy5oZWFkZXJUaXRsZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGFTb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRPcmRlcic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dJY29uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdEJhc2VPcHRpb24uc2hvd0ljb24gPSB0aGlzLnNob3dJY29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJWaWV3RFMgPSB0aGlzLmdldFN1YkRTKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q3VycmVudExpc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuc2V0SFRNTEF0dHJpYnV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmh0bWxBdHRyaWJ1dGVzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB0aGlzLmh0bWxBdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldENTU0NsYXNzID0gZnVuY3Rpb24gKG9sZENTU0NsYXNzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIHRoaXMuY3NzQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2xkQ1NTQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBvbGRDU1NDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldEVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlRWxlbWVudCh0aGlzLmVsZW1lbnQsIHRoaXMuZW5hYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldEVuYWJsZVJUTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5lbmFibGVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKGlzRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWVzLmRpc2FibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZXMuZGlzYWJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5oZWFkZXIgPSBmdW5jdGlvbiAodGV4dCwgc2hvd0JhY2spIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlckVsZSA9PT0gdW5kZWZpbmVkICYmIHRoaXMuc2hvd0hlYWRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyRWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcy5oZWFkZXIgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGlubmVySGVhZGVyRWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMuaGVhZGVyVGV4dCwgaW5uZXJIVE1MOiB0aGlzLmhlYWRlclRpdGxlIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcy50ZXh0LCBpbm5lckhUTUw6IGlubmVySGVhZGVyRWxlLm91dGVySFRNTCB9KTtcbiAgICAgICAgICAgICAgICB2YXIgaGVkQmFja0J1dHRvbiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMuaWNvbiArICcgJyArIGNsYXNzTmFtZXMuYmFja0ljb24gKyAnIGUtYnV0LWJhY2snLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZTsnIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckVsZS5hcHBlbmRDaGlsZChoZWRCYWNrQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckVsZS5hcHBlbmRDaGlsZCh0ZXh0RWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1oYXMtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5wcmVwZW5kKFt0aGlzLmhlYWRlckVsZV0sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhlYWRlckVsZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJFbGUuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dEVsZSA9IHRoaXMuaGVhZGVyRWxlLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY2xhc3NOYW1lcy5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlZEJhY2tCdXR0b24gPSB0aGlzLmhlYWRlckVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIGNsYXNzTmFtZXMuYmFja0ljb24pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlLmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG93QmFjayA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVkQmFja0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWRCYWNrQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyRWxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuc3dpdGNoVmlldyA9IGZ1bmN0aW9uIChmcm9tVmlldywgdG9WaWV3LCByZXZlcnNlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGZyb21WaWV3ICYmIHRvVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBmUG9zXzEgPSBmcm9tVmlldy5zdHlsZS5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3dfMSA9ICh0aGlzLmVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgIT09ICdoaWRkZW4nKSA/IHRoaXMuZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA6ICcnO1xuICAgICAgICAgICAgICAgIGZyb21WaWV3LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICBmcm9tVmlldy5jbGFzc0xpc3QuYWRkKCdlLXZpZXcnKTtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLmFuaW1hdGlvbi5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb24uZWZmZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW0gPSAodGhpcy5lbmFibGVSdGwgPyBlZmZlY3RzUlRMQ29uZmlnW3RoaXMuYW5pbWF0aW9uLmVmZmVjdF0gOiBlZmZlY3RzQ29uZmlnW3RoaXMuYW5pbWF0aW9uLmVmZmVjdF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlTGVmdCA9ICdTbGlkZUxlZnQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2xpZGVSaWdodCA9ICdTbGlkZVJpZ2h0JztcbiAgICAgICAgICAgICAgICAgICAgYW5pbSA9ICh0aGlzLmVuYWJsZVJ0bCA/IGVmZmVjdHNSVExDb25maWdbc2xpZGVMZWZ0XSA6IGVmZmVjdHNDb25maWdbc2xpZGVSaWdodF0pO1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pT2JqLmFuaW1hdGUoZnJvbVZpZXcsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKHJldmVyc2UgPT09IHRydWUgPyBhbmltWzBdIDogYW5pbVsxXSksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246IHRoaXMuYW5pbWF0aW9uLmVhc2luZyxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21WaWV3LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gb3ZlcmZsb3dfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21WaWV3LnN0eWxlLnBvc2l0aW9uID0gZlBvc18xO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnZS12aWV3Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0b1ZpZXcuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pT2JqLmFuaW1hdGUodG9WaWV3LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChyZXZlcnNlID09PSB0cnVlID8gYW5pbVsyXSA6IGFuaW1bM10pLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmFuaW1hdGlvbi5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIGVuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignYWN0aW9uQ29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VyVUwgPSB0b1ZpZXc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RCYXNlT3B0aW9uID0ge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLnRlbXBsYXRlLFxuICAgICAgICAgICAgICAgIGdyb3VwVGVtcGxhdGU6IHRoaXMuZ3JvdXBUZW1wbGF0ZSwgZXhwYW5kQ29sbGFwc2U6IHRydWUsIGxpc3RDbGFzczogJycsXG4gICAgICAgICAgICAgICAgYXJpYUF0dHJpYnV0ZXM6IHsgaXRlbVJvbGU6ICdsaXN0aXRlbScsIGxpc3RSb2xlOiAnbGlzdCcsIGl0ZW1UZXh0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtUm9sZTogJ2dyb3VwJywgd3JhcHBlclJvbGU6ICdwcmVzZW50YXRpb24nIH0sXG4gICAgICAgICAgICAgICAgZmllbGRzOiB0aGlzLmZpZWxkcy5wcm9wZXJ0aWVzLCBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyLCBzaG93SWNvbjogdGhpcy5zaG93SWNvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gdGFyZ2V0LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lcy5iYWNrSWNvbikgfHwgY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZXMuaGVhZGVyVGV4dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBsaSA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQucGFyZW50Tm9kZSwgJy4nICsgY2xhc3NOYW1lcy5saXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGxpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdExJKGxpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmhvdmVySGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY3VyTGkgPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQucGFyZW50Tm9kZSwgJy4nICsgY2xhc3NOYW1lcy5saXN0SXRlbSk7XG4gICAgICAgICAgICB0aGlzLnNldEhvdmVyTEkoY3VyTGkpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUubGVhdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSG92ZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbW92ZURvd24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdmVyU2libGluZ0xJKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vdmVVcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJTaWJsaW5nTEkodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0TEkodGhpcy5jdXJVTC5xdWVyeVNlbGVjdG9yKCcuJyArIGNsYXNzTmFtZXMuaG92ZXIpLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFjayc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnN3aXBlQWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5zd2lwZURpcmVjdGlvbiA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2VvdXQnLCB0aGlzLmxlYXZlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlID0gbmV3IGVqMl9iYXNlXzQuS2V5Ym9hcmRFdmVudHModGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAga2V5QWN0aW9uOiB0aGlzLmtleUFjdGlvbkhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBrZXlDb25maWdzOiB0aGlzLmtleUNvbmZpZ3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG5ldyBlajJfYmFzZV81LlRvdWNoKHRoaXMuZWxlbWVudCwgeyBzd2lwZTogdGhpcy5zd2lwZUFjdGlvbkhhbmRsZXIuYmluZCh0aGlzKSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8zLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnbW91c2VvdXQnLCB0aGlzLmxlYXZlSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUucmVtb3ZlSG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaG92ZXJMSSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGNsYXNzTmFtZXMuaG92ZXIpO1xuICAgICAgICAgICAgaWYgKGhvdmVyTEkpIHtcbiAgICAgICAgICAgICAgICBob3ZlckxJLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lcy5ob3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5yZW1vdmVTZWxlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRMSSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNsYXNzTmFtZXMuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzZWxlY3RlZExJXzEgPSBzZWxlY3RlZExJOyBfaSA8IHNlbGVjdGVkTElfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gc2VsZWN0ZWRMSV8xW19pXTtcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZS5jbGFzc05hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZXMuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmlzVmFsaWRMSSA9IGZ1bmN0aW9uIChsaSkge1xuICAgICAgICAgICAgcmV0dXJuIChsaSAmJiBsaS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lcy5saXN0SXRlbSlcbiAgICAgICAgICAgICAgICAmJiAhbGkuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZXMuZ3JwTGlzdEl0ZW0pXG4gICAgICAgICAgICAgICAgJiYgIWxpLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWVzLmRpc2FibGUpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldFNlbGVjdExJID0gZnVuY3Rpb24gKGxpLCBlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTEkobGkpXG4gICAgICAgICAgICAgICAgJiYgIWxpLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWVzLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgICYmIHRoaXMuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3QoKTtcbiAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZXMuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIb3ZlcigpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5nZXRJdGVtRGF0YShsaSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YSkgJiYgdHlwZW9mIHRoaXMuZGF0YVNvdXJjZVswXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogbGksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBsaS5pbm5lclRleHQudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5kYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBsaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGFbdGhpcy5saXN0QmFzZU9wdGlvbi5maWVsZHMudGV4dF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKGV2ZW50QXJncywgdGhpcy5zZWxlY3RlZEl0ZW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKGV2ZW50QXJncywgeyBpc0ludGVyYWN0ZWQ6IHRydWUsIGV2ZW50OiBlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdCcsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZExJID0gbGk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTdWJMaXN0KGxpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldEhvdmVyTEkgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRMSShsaSkgJiYgIWxpLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWVzLmhvdmVyKSAmJiB0aGlzLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXN0TGkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWVzLmhvdmVyKTtcbiAgICAgICAgICAgICAgICBpZiAobGFzdExpICYmIGxhc3RMaS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhsYXN0TGksIGNsYXNzTmFtZXMuaG92ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWxpLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWVzLnNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZXMuaG92ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmhvdmVyU2libGluZ0xJID0gZnVuY3Rpb24gKHByZXYpIHtcbiAgICAgICAgICAgIHZhciBsYXN0TGkgPSB0aGlzLmN1clVMLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY2xhc3NOYW1lcy5ob3Zlcik7XG4gICAgICAgICAgICB2YXIgc2libGluZ0xJO1xuICAgICAgICAgICAgaWYgKCFsYXN0TGkpIHtcbiAgICAgICAgICAgICAgICBsYXN0TGkgPSB0aGlzLmN1clVMLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY2xhc3NOYW1lcy5zZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFzdExpKSB7XG4gICAgICAgICAgICAgICAgc2libGluZ0xJID0gbGlzdF9iYXNlXzEuTGlzdEJhc2UuZ2V0U2libGluZ0xJKHRoaXMuY3VyVUwucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWVzLmxpc3RJdGVtKSwgbGFzdExpLCBwcmV2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJMSXMgPSB0aGlzLmN1clVMLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgY2xhc3NOYW1lcy5saXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHNpYmxpbmdMSSA9IGN1ckxJc1tjdXJMSXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzaWJsaW5nTEkgPSB0aGlzLmN1clVMLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY2xhc3NOYW1lcy5saXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRIb3ZlckxJKHNpYmxpbmdMSSk7XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5nZXRTdWJEUyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZXZlbEtleXMgPSB0aGlzLmN1ckRTTGV2ZWw7XG4gICAgICAgICAgICBpZiAobGV2ZWxLZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBkcyA9IHRoaXMubG9jYWxEYXRhO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGV2ZWxLZXlzXzEgPSBsZXZlbEtleXM7IF9pIDwgbGV2ZWxLZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBsZXZlbEtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyRFNKU09OID0gdGhpcy5maW5kSXRlbUZyb21EUyhkcywgeyBpZDoga2V5IH0pO1xuICAgICAgICAgICAgICAgICAgICBkcyA9IHRoaXMuY3VyRFNKU09OID8gdGhpcy5jdXJEU0pTT05bdGhpcy5maWVsZHMuY2hpbGRdIDogZHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmdldEl0ZW1EYXRhID0gZnVuY3Rpb24gKGxpKSB7XG4gICAgICAgICAgICB2YXIgZmllbGRzID0gdGhpcy5nZXRFbGVtZW50VUlEKGxpKTtcbiAgICAgICAgICAgIHZhciBjdXJEUyA9IHRoaXMuZGF0YVNvdXJjZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRJdGVtRnJvbURTKGN1ckRTLCBmaWVsZHMpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuZmluZEl0ZW1Gcm9tRFMgPSBmdW5jdGlvbiAoZGF0YVNvdXJjZSwgZmllbGRzLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcmVzdWx0SlNPTjtcbiAgICAgICAgICAgIGlmIChkYXRhU291cmNlICYmIGRhdGFTb3VyY2UubGVuZ3RoICYmIGZpZWxkcykge1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2Uuc29tZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkcy5pZCB8fCBmaWVsZHMudGV4dCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICghZmllbGRzLmlkIHx8IGRhdGFbX3RoaXMuZmllbGRzLmlkXSA9PT0gZmllbGRzLmlkKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKCFmaWVsZHMudGV4dCB8fCBkYXRhW190aGlzLmZpZWxkcy50ZXh0XSA9PT0gZmllbGRzLnRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRKU09OID0gKHBhcmVudCA/IGRhdGFTb3VyY2UgOiBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhLmhhc093blByb3BlcnR5KF90aGlzLmZpZWxkcy5jaGlsZCkgJiYgZGF0YVtfdGhpcy5maWVsZHMuY2hpbGRdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0SlNPTiA9IF90aGlzLmZpbmRJdGVtRnJvbURTKGRhdGFbX3RoaXMuZmllbGRzLmNoaWxkXSwgZmllbGRzLCBwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdEpTT047XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRKU09OID0gZGF0YVNvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRKU09OO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuZ2V0UXVlcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gKHRoaXMucXVlcnkgPyB0aGlzLnF1ZXJ5IDogbmV3IGVqMl9kYXRhXzEuUXVlcnkoKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucXVlcnkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXModGhpcy5maWVsZHMucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW4gIT09ICd0YWJsZU5hbWUnICYmICEhKHRoaXMuZmllbGRzW2NvbHVtbl0pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkc1tjb2x1bW5dICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RfYmFzZV8xLkxpc3RCYXNlLmRlZmF1bHRNYXBwZWRGaWVsZHNbY29sdW1uXVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgY29sdW1ucy5pbmRleE9mKHRoaXMuZmllbGRzW2NvbHVtbl0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHRoaXMuZmllbGRzW2NvbHVtbl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJ5LnNlbGVjdChjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWVsZHMucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eSgndGFibGVOYW1lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuZnJvbSh0aGlzLmZpZWxkcy50YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldFZpZXdEYXRhU291cmNlID0gZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChkYXRhU291cmNlID09PSB2b2lkIDApIHsgZGF0YVNvdXJjZSA9IHRoaXMubG9jYWxEYXRhOyB9XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAmJiB0aGlzLmZpZWxkcy5ncm91cEJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJWaWV3RFMgPSBsaXN0X2Jhc2VfMS5MaXN0QmFzZS5ncm91cERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgdGhpcy5maWVsZHMsIHRoaXMuc29ydE9yZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFTb3VyY2UgJiYgdGhpcy5zb3J0T3JkZXIgIT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VyVmlld0RTID0gbGlzdF9iYXNlXzEuTGlzdEJhc2UuZ2V0RGF0YVNvdXJjZShkYXRhU291cmNlLCBsaXN0X2Jhc2VfMS5MaXN0QmFzZS5hZGRTb3J0aW5nKHRoaXMuc29ydE9yZGVyLCB0aGlzLmZpZWxkcy5zb3J0QnkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VyVmlld0RTID0gZGF0YVNvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmlzSW5BbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJVTC5jbGFzc0xpc3QuY29udGFpbnMoJy5lLWFuaW1hdGUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNldExvY2FsRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2FjdGlvbkJlZ2luJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5leGVjdXRlUXVlcnkodGhpcy5nZXRRdWVyeSgpKS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxvY2FsRGF0YSA9IGUucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJMaXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ2FjdGlvbkNvbXBsZXRlJywgZSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignYWN0aW9uRmFpbHVyZScsIGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuZGF0YVNvdXJjZSB8fCAhdGhpcy5kYXRhU291cmNlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciB1bCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpO1xuICAgICAgICAgICAgICAgIGlmICh1bCkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh1bCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IGRhdGFTb3VyY2U6IGxpc3RfYmFzZV8xLkxpc3RCYXNlLmNyZWF0ZUpzb25Gcm9tRWxlbWVudCh1bCkgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxEYXRhID0gdGhpcy5kYXRhU291cmNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxpc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhY3Rpb25Db21wbGV0ZScsIHsgZGF0YTogdGhpcy5sb2NhbERhdGEgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbERhdGEgPSB0aGlzLmRhdGFTb3VyY2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJMaXN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhY3Rpb25Db21wbGV0ZScsIHsgZGF0YTogdGhpcy5sb2NhbERhdGEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5yZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMuY3VyVUwgPSB0aGlzLmhlYWRlckVsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxEYXRhKCk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50Q29udGFpbmVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcy5jb250ZW50IH0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGVudENvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckludG9Eb20odGhpcy51bEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUucmVzZXRDdXJyZW50TGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Vmlld0RhdGFTb3VyY2UodGhpcy5jdXJWaWV3RFMpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50Q29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckludG9Eb20odGhpcy5jdXJVTCk7XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5jcmVhdGVMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQgPSB0aGlzLmN1clVMID0gbGlzdF9iYXNlXzEuTGlzdEJhc2UuY3JlYXRlTGlzdCh0aGlzLmN1clZpZXdEUywgdGhpcy5saXN0QmFzZU9wdGlvbik7XG4gICAgICAgICAgICB0aGlzLmxpQ29sbGVjdGlvbiA9IHRoaXMuY3VyVUwucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWVzLmxpc3RJdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnJlbmRlclN1Ykxpc3QgPSBmdW5jdGlvbiAobGkpIHtcbiAgICAgICAgICAgIHZhciB1SUQgPSBsaS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJyk7XG4gICAgICAgICAgICBpZiAobGkuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZXMuaGFzQ2hpbGQpICYmIHVJRCkge1xuICAgICAgICAgICAgICAgIHZhciB1bCA9IGVqMl9iYXNlXzIuY2xvc2VzdChsaS5wYXJlbnROb2RlLCAnLicgKyBjbGFzc05hbWVzLnBhcmVudEl0ZW0pO1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW3BpZD1cXCcnICsgdUlEICsgJ1xcJ10nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1ckRTTGV2ZWwucHVzaCh1SUQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Vmlld0RhdGFTb3VyY2UodGhpcy5nZXRTdWJEUygpKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGUgPSBsaXN0X2Jhc2VfMS5MaXN0QmFzZS5jcmVhdGVMaXN0RnJvbUpzb24odGhpcy5jdXJWaWV3RFMsIHRoaXMubGlzdEJhc2VPcHRpb24sIHRoaXMuY3VyRFNMZXZlbC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdwSUQnLCB1SUQpO1xuICAgICAgICAgICAgICAgICAgICBlbGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJbnRvRG9tKGVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVmlldyh1bCwgZWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxpQ29sbGVjdGlvbiA9IHRoaXMuY3VyVUwucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjbGFzc05hbWVzLmxpc3RJdGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcih0aGlzLnNlbGVjdGVkSXRlbXMuZGF0YVt0aGlzLmxpc3RCYXNlT3B0aW9uLmZpZWxkcy50ZXh0XSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZExJID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUucmVuZGVySW50b0RvbSA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudENvbnRhaW5lci5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUucmVuZGVyTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Vmlld0RhdGFTb3VyY2UoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGlzdCgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50Q29udGFpbmVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcy5jb250ZW50IH0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGVudENvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckludG9Eb20odGhpcy51bEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuZ2V0RWxlbWVudFVJRCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBmaWVsZHMgPSB7fTtcbiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZmllbGRzLmlkID0gb2JqLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpZWxkcyA9IG9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmaWVsZHM7XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWVzLnJvb3QpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyByb2xlOiAnbGlzdCcgfSk7XG4gICAgICAgICAgICB0aGlzLnNldENTU0NsYXNzKCk7XG4gICAgICAgICAgICB0aGlzLnNldEVuYWJsZVJUTCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRFbmFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2l6ZSgpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SFRNTEF0dHJpYnV0ZSgpO1xuICAgICAgICAgICAgdGhpcy5yaXBwbGVGbiA9IGVqMl9iYXNlXzUucmlwcGxlRWZmZWN0KHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnLicgKyBjbGFzc05hbWVzLmxpc3RJdGVtXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdmFyIGNsYXNzQXIgPSBbY2xhc3NOYW1lcy5yb290LCB0aGlzLmNzc0NsYXNzLCBjbGFzc05hbWVzLmRpc2FibGUsICdlLXJ0bCcsXG4gICAgICAgICAgICAgICAgJ2UtaGFzLWhlYWRlciddO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgY2xhc3NBcik7XG4gICAgICAgICAgICB0aGlzLnJpcHBsZUZuKCk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcElEID0gdGhpcy5jdXJEU0xldmVsW3RoaXMuY3VyRFNMZXZlbC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChwSUQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmlzSW5BbmltYXRpb24oKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VyRFNMZXZlbC5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Vmlld0RhdGFTb3VyY2UodGhpcy5nZXRTdWJEUygpKTtcbiAgICAgICAgICAgIHZhciB0b1VMID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD1cXCcnICsgcElEICsgJ1xcJ10nKTtcbiAgICAgICAgICAgIHZhciBmcm9tVUwgPSB0aGlzLmN1clVMO1xuICAgICAgICAgICAgaWYgKCF0b1VMKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVMaXN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJJbnRvRG9tKHRoaXMudWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0b1VMID0gdGhpcy5jdXJVTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvVUwgPSB0b1VMLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGV4dCA9IHRoaXMuY3VyRFNKU09OW3RoaXMuZmllbGRzLnRleHRdO1xuICAgICAgICAgICAgdGhpcy5zd2l0Y2hWaWV3KGZyb21VTCwgdG9VTCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdCgpO1xuICAgICAgICAgICAgdGhpcy5saUNvbGxlY3Rpb24gPSB0aGlzLmN1clVMLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgY2xhc3NOYW1lcy5saXN0SXRlbSk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcigodGhpcy5jdXJEU0xldmVsLmxlbmd0aCA/IHRleHQgOiB0aGlzLmhlYWRlclRpdGxlKSwgKHRoaXMuY3VyRFNMZXZlbC5sZW5ndGggPyB0cnVlIDogZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0SlNPTiA9IHRoaXMuZ2V0SXRlbURhdGEob2JqKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRKU09OKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD1cIicgKyByZXN1bHRKU09OW3RoaXMuZmllbGRzLmlkXSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBpZiAobGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RMSShsaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRJdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmZpbmRJdGVtID0gZnVuY3Rpb24gKGZpZWxkcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEl0ZW1Gcm9tRFModGhpcy5kYXRhU291cmNlLCBmaWVsZHMpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuZW5hYmxlSXRlbSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRKU09OID0gdGhpcy5nZXRJdGVtRGF0YShvYmopO1xuICAgICAgICAgICAgaWYgKHJlc3VsdEpTT04pIHtcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPVwiJyArIHJlc3VsdEpTT05bdGhpcy5maWVsZHMuaWRdICsgJ1wiXScpO1xuICAgICAgICAgICAgICAgIGlmIChsaSkge1xuICAgICAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZXMuZGlzYWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHRKU09OW3RoaXMuZmllbGRzLmVuYWJsZWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuZGlzYWJsZUl0ZW0gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0SlNPTiA9IHRoaXMuZ2V0SXRlbURhdGEob2JqKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRKU09OKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD1cIicgKyByZXN1bHRKU09OW3RoaXMuZmllbGRzLmlkXSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBpZiAobGkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChjbGFzc05hbWVzLmRpc2FibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRKU09OW3RoaXMuZmllbGRzLmVuYWJsZWRdID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5zaG93SXRlbSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVJdGVtKG9iaiwgZmFsc2UsICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmhpZGVJdGVtID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZUl0ZW0ob2JqLCB0cnVlLCAnbm9uZScpO1xuICAgICAgICB9O1xuICAgICAgICBMaXN0Vmlldy5wcm90b3R5cGUuc2hvd0hpZGVJdGVtID0gZnVuY3Rpb24gKG9iaiwgaXNIaWRlLCBkaXNwbGF5KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0SlNPTiA9IHRoaXMuZ2V0SXRlbURhdGEob2JqKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRKU09OKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD1cIicgKyByZXN1bHRKU09OW3RoaXMuZmllbGRzLmlkXSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBpZiAobGkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGkuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0hpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0SlNPTlt0aGlzLmZpZWxkcy5pc1Zpc2libGVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0SlNPTlt0aGlzLmZpZWxkcy5pc1Zpc2libGVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbiAoZGF0YSwgZmllbGRzKSB7XG4gICAgICAgICAgICB2YXIgZHMgPSB0aGlzLmZpbmRJdGVtRnJvbURTKHRoaXMuZGF0YVNvdXJjZSwgZmllbGRzKTtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGRzW3RoaXMuZmllbGRzLmNoaWxkXTtcbiAgICAgICAgICAgIGlmICghY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZCA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5jb25jYXQoZGF0YSk7XG4gICAgICAgICAgICBpZiAoZHMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IHRoaXMubG9jYWxEYXRhID0gZHMuY29uY2F0KGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Vmlld0RhdGFTb3VyY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzW3RoaXMuZmllbGRzLmNoaWxkXSA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNldEN1cnJlbnRMaXN0KCk7XG4gICAgICAgIH07XG4gICAgICAgIExpc3RWaWV3LnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBmaWVsZHMgPSB0aGlzLmdldEVsZW1lbnRVSUQob2JqKTtcbiAgICAgICAgICAgIHZhciBjdXJEUyA9IHRoaXMuZmluZEl0ZW1Gcm9tRFModGhpcy5kYXRhU291cmNlLCBmaWVsZHMsIHRydWUpO1xuICAgICAgICAgICAgaWYgKGN1ckRTICYmIG9iaikge1xuICAgICAgICAgICAgICAgIHZhciBjdXJBcl8xO1xuICAgICAgICAgICAgICAgIHZhciBpZHhfMTtcbiAgICAgICAgICAgICAgICBjdXJEUy5zb21lKGZ1bmN0aW9uIChkYXRhLCBpbmRleCwgYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRzLmlkIHx8IGZpZWxkcy50ZXh0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKCFmaWVsZHMuaWQgfHwgZGF0YVtfdGhpcy5maWVsZHMuaWRdID09PSBmaWVsZHMuaWQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoIWZpZWxkcy50ZXh0IHx8IGRhdGFbX3RoaXMuZmllbGRzLnRleHRdID09PSBmaWVsZHMudGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckFyXzEgPSBhcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHhfMSA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGN1ckFyXzEuc3BsaWNlKGlkeF8xLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q3VycmVudExpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2xpc3R2aWV3JztcbiAgICAgICAgfTtcbiAgICAgICAgTGlzdFZpZXcucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KFsnY3NzQ2xhc3MnLCAnZW5hYmxlUnRsJywgJ2h0bWxBdHRyaWJ1dGVzJyxcbiAgICAgICAgICAgICAgICAnZW5hYmxlJywgJ2ZpZWxkcycsICdhbmltYXRpb24nLCAnaGVhZGVyVGl0bGUnLFxuICAgICAgICAgICAgICAgICdzb3J0T3JkZXInLCAnc2hvd0ljb24nLCAnaGVpZ2h0JywgJ3dpZHRoJ10pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTGlzdFZpZXc7XG4gICAgfShlajJfYmFzZV8zLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSh7fSlcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwiaHRtbEF0dHJpYnV0ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIExpc3RWaWV3LnByb3RvdHlwZSwgXCJlbmFibGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eShbXSlcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwiZGF0YVNvdXJjZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwicXVlcnlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Db21wbGV4KGxpc3RfYmFzZV8xLkxpc3RCYXNlLmRlZmF1bHRNYXBwZWRGaWVsZHMsIEZpZWxkU2V0dGluZ3MpXG4gICAgXSwgTGlzdFZpZXcucHJvdG90eXBlLCBcImZpZWxkc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KHsgZWZmZWN0OiAnU2xpZGVMZWZ0JywgZHVyYXRpb246IDQwMCwgZWFzaW5nOiAnZWFzZScgfSlcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwiYW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ05vbmUnKVxuICAgIF0sIExpc3RWaWV3LnByb3RvdHlwZSwgXCJzb3J0T3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwic2hvd0ljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnJylcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwiaGVhZGVyVGl0bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwic2hvd0hlYWRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCcnKVxuICAgIF0sIExpc3RWaWV3LnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnJylcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIExpc3RWaWV3LnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTGlzdFZpZXcucHJvdG90eXBlLCBcImdyb3VwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgTGlzdFZpZXcucHJvdG90eXBlLCBcInNlbGVjdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBMaXN0Vmlldy5wcm90b3R5cGUsIFwiYWN0aW9uQmVnaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgTGlzdFZpZXcucHJvdG90eXBlLCBcImFjdGlvbkNvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIExpc3RWaWV3LnByb3RvdHlwZSwgXCJhY3Rpb25GYWlsdXJlXCIsIHZvaWQgMCk7XG4gICAgTGlzdFZpZXcgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBMaXN0Vmlldyk7XG4gICAgZXhwb3J0cy5MaXN0VmlldyA9IExpc3RWaWV3O1xuICAgIGV4cG9ydHMubGlzdFZpZXdCdWlsZGVyID0gZWoyX2Jhc2VfMy5DcmVhdGVCdWlsZGVyKExpc3RWaWV3KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGlzdC12aWV3L2xpc3Qtdmlldy5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5jc3NDbGFzcyA9IHtcbiAgICAgICAgbGk6ICdlLWxpc3QtaXRlbScsXG4gICAgICAgIHVsOiAnZS1saXN0LXBhcmVudCBlLXVsJyxcbiAgICAgICAgZ3JvdXA6ICdlLWxpc3QtZ3JvdXAtaXRlbScsXG4gICAgICAgIGljb246ICdlLWxpc3QtaWNvbicsXG4gICAgICAgIHRleHQ6ICdlLWxpc3QtdGV4dCcsXG4gICAgICAgIGNoZWNrOiAnZS1saXN0LWNoZWNrJyxcbiAgICAgICAgY2hlY2tlZDogJ2UtY2hlY2tlZCcsXG4gICAgICAgIHNlbGVjdGVkOiAnZS1zZWxlY3RlZCcsXG4gICAgICAgIGV4cGFuZGVkOiAnZS1leHBhbmRlZCcsXG4gICAgICAgIHRleHRDb250ZW50OiAnZS10ZXh0LWNvbnRlbnQnLFxuICAgICAgICBoYXNDaGlsZDogJ2UtaGFzLWNoaWxkJyxcbiAgICAgICAgbGV2ZWw6ICdlLWxldmVsJyxcbiAgICAgICAgdXJsOiAnZS1saXN0LXVybCcsXG4gICAgICAgIGNvbGxhcHNpYmxlOiAnZS1pY29uLWNvbGxhcHNpYmxlJyxcbiAgICAgICAgZGlzYWJsZWQ6ICdlLWRpc2FibGVkJyxcbiAgICAgICAgaW1hZ2U6ICdlLWxpc3QtaW1nJyxcbiAgICAgICAgaWNvbldyYXBwZXI6ICdlLWljb24td3JhcHBlcidcbiAgICB9O1xuICAgIHZhciBMaXN0QmFzZTtcbiAgICAoZnVuY3Rpb24gKExpc3RCYXNlKSB7XG4gICAgICAgIExpc3RCYXNlLmRlZmF1bHRNYXBwZWRGaWVsZHMgPSB7XG4gICAgICAgICAgICBpZDogJ2lkJyxcbiAgICAgICAgICAgIHRleHQ6ICd0ZXh0JyxcbiAgICAgICAgICAgIHVybDogJ3VybCcsXG4gICAgICAgICAgICB2YWx1ZTogJ3ZhbHVlJyxcbiAgICAgICAgICAgIGlzQ2hlY2tlZDogJ2lzQ2hlY2tlZCcsXG4gICAgICAgICAgICBlbmFibGVkOiAnZW5hYmxlZCcsXG4gICAgICAgICAgICBleHBhbmRlZDogJ2V4cGFuZGVkJyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnc2VsZWN0ZWQnLFxuICAgICAgICAgICAgaWNvbkNzczogJ2ljb25Dc3MnLFxuICAgICAgICAgICAgY2hpbGQ6ICdjaGlsZCcsXG4gICAgICAgICAgICBpc1Zpc2libGU6ICdpc1Zpc2libGUnLFxuICAgICAgICAgICAgaGFzQ2hpbGRyZW46ICdoYXNDaGlsZHJlbicsXG4gICAgICAgICAgICB0b29sdGlwOiAndG9vbHRpcCcsXG4gICAgICAgICAgICBodG1sQXR0cmlidXRlczogJ2h0bWxBdHRyaWJ1dGVzJyxcbiAgICAgICAgICAgIHVybEF0dHJpYnV0ZXM6ICd1cmxBdHRyaWJ1dGVzJyxcbiAgICAgICAgICAgIGltYWdlQXR0cmlidXRlczogJ2ltYWdlQXR0cmlidXRlcycsXG4gICAgICAgICAgICBpbWFnZVVybDogJ2ltYWdlVXJsJyxcbiAgICAgICAgICAgIGdyb3VwQnk6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRlZmF1bHRBcmlhQXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgICAgbGlzdFJvbGU6ICdwcmVzZW50YXRpb24nLFxuICAgICAgICAgICAgaXRlbVJvbGU6ICdwcmVzZW50YXRpb24nLFxuICAgICAgICAgICAgZ3JvdXBJdGVtUm9sZTogJ2dyb3VwJyxcbiAgICAgICAgICAgIGl0ZW1UZXh0OiAnbGlzdC1pdGVtJyxcbiAgICAgICAgICAgIHdyYXBwZXJSb2xlOiAncHJlc2VudGF0aW9uJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZGVmYXVsdExpc3RCYXNlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNob3dDaGVja0JveDogZmFsc2UsXG4gICAgICAgICAgICBzaG93SWNvbjogZmFsc2UsXG4gICAgICAgICAgICBleHBhbmRDb2xsYXBzZTogZmFsc2UsXG4gICAgICAgICAgICBmaWVsZHM6IExpc3RCYXNlLmRlZmF1bHRNYXBwZWRGaWVsZHMsXG4gICAgICAgICAgICBhcmlhQXR0cmlidXRlczogZGVmYXVsdEFyaWFBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbGlzdENsYXNzOiAnJyxcbiAgICAgICAgICAgIGl0ZW1DbGFzczogJycsXG4gICAgICAgICAgICBwcm9jZXNzU3ViQ2hpbGQ6IGZhbHNlLFxuICAgICAgICAgICAgc29ydE9yZGVyOiAnTm9uZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogbnVsbCxcbiAgICAgICAgICAgIGdyb3VwVGVtcGxhdGU6IG51bGwsXG4gICAgICAgICAgICBleHBhbmRJY29uQ2xhc3M6ICdlLWljb24tY29sbGFwc2libGUnLFxuICAgICAgICAgICAgbW9kdWxlTmFtZTogJ2xpc3QnLFxuICAgICAgICAgICAgZXhwYW5kSWNvblBvc2l0aW9uOiAncmlnaHQnXG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxpc3QoZGF0YVNvdXJjZSwgb3B0aW9ucywgaXNTaW5nbGVMZXZlbCkge1xuICAgICAgICAgICAgdmFyIGN1ck9wdCA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0TGlzdEJhc2VPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0cmlidXRlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0QXJpYUF0dHJpYnV0ZXMsIGN1ck9wdC5hcmlhQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZkRhdGEoZGF0YVNvdXJjZSkudHlwZW9mO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUxpc3RGcm9tQXJyYXkoZGF0YVNvdXJjZSwgaXNTaW5nbGVMZXZlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlTGlzdEZyb21Kc29uKGRhdGFTb3VyY2UsIG9wdGlvbnMsIGFyaWFBdHRyaWJ1dGVzLmxldmVsLCBpc1NpbmdsZUxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBMaXN0QmFzZS5jcmVhdGVMaXN0ID0gY3JlYXRlTGlzdDtcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTGlzdEZyb21BcnJheShkYXRhU291cmNlLCBpc1NpbmdsZUxldmVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc3ViQ2hpbGQgPSBjcmVhdGVMaXN0SXRlbUZyb21BcnJheShkYXRhU291cmNlLCBpc1NpbmdsZUxldmVsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZVVMKHN1YkNoaWxkLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBMaXN0QmFzZS5jcmVhdGVMaXN0RnJvbUFycmF5ID0gY3JlYXRlTGlzdEZyb21BcnJheTtcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTGlzdEl0ZW1Gcm9tQXJyYXkoZGF0YVNvdXJjZSwgaXNTaW5nbGVMZXZlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHN1YkNoaWxkID0gW107XG4gICAgICAgICAgICB2YXIgY3VyT3B0ID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGRlZmF1bHRMaXN0QmFzZU9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgZXhwb3J0cy5jc3NDbGFzcyA9IGdldE1vZHVsZUNsYXNzKGN1ck9wdC5tb2R1bGVOYW1lKTtcbiAgICAgICAgICAgIHZhciBpZCA9IGdlblVJRCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhU291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YVNvdXJjZVtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsaSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoY3VyT3B0Lml0ZW1DcmVhdGluZyAmJiB0eXBlb2YgY3VyT3B0Lml0ZW1DcmVhdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJEYXRhOiBkYXRhU291cmNlW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZGF0YVNvdXJjZVtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGN1ck9wdFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjdXJPcHQuaXRlbUNyZWF0aW5nKGN1ckRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNTaW5nbGVMZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICBsaSA9IGdlbmVyYXRlU2luZ2xlTGV2ZWxMSShkYXRhU291cmNlW2ldLCBudWxsLCBudWxsLCBbXSwgbnVsbCwgaWQsIGksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGkgPSBnZW5lcmF0ZUxJKGRhdGFTb3VyY2VbaV0sIG51bGwsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VyT3B0Lml0ZW1DcmVhdGVkICYmIHR5cGVvZiBjdXJPcHQuaXRlbUNyZWF0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRGF0YTogZGF0YVNvdXJjZVtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGFTb3VyY2VbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBsaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGN1ck9wdFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjdXJPcHQuaXRlbUNyZWF0ZWQoY3VyRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN1YkNoaWxkLnB1c2gobGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1YkNoaWxkO1xuICAgICAgICB9XG4gICAgICAgIExpc3RCYXNlLmNyZWF0ZUxpc3RJdGVtRnJvbUFycmF5ID0gY3JlYXRlTGlzdEl0ZW1Gcm9tQXJyYXk7XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxpc3RJdGVtRnJvbUpzb24oZGF0YVNvdXJjZSwgb3B0aW9ucywgbGV2ZWwsIGlzU2luZ2xlTGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciBjdXJPcHQgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGVmYXVsdExpc3RCYXNlT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgICAgICBleHBvcnRzLmNzc0NsYXNzID0gZ2V0TW9kdWxlQ2xhc3MoY3VyT3B0Lm1vZHVsZU5hbWUpO1xuICAgICAgICAgICAgdmFyIGZpZWxkcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBMaXN0QmFzZS5kZWZhdWx0TWFwcGVkRmllbGRzLCBjdXJPcHQuZmllbGRzKTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0cmlidXRlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0QXJpYUF0dHJpYnV0ZXMsIGN1ck9wdC5hcmlhQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB2YXIgaWQ7XG4gICAgICAgICAgICBpZiAobGV2ZWwpIHtcbiAgICAgICAgICAgICAgICBhcmlhQXR0cmlidXRlcy5sZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoaWxkID0gW107XG4gICAgICAgICAgICB2YXIgbGk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YVNvdXJjZSkubGVuZ3RoICYmICF0eXBlb2ZEYXRhKGRhdGFTb3VyY2UpLml0ZW0uaGFzT3duUHJvcGVydHkoZmllbGRzLmlkKSkge1xuICAgICAgICAgICAgICAgIGlkID0gZ2VuVUlEKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFTb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkYXRhU291cmNlW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGN1ck9wdC5pdGVtQ3JlYXRpbmcgJiYgdHlwZW9mIGN1ck9wdC5pdGVtQ3JlYXRpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRGF0YTogZGF0YVNvdXJjZVtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRhdGFTb3VyY2VbaV1bZmllbGRzLnRleHRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogY3VyT3B0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBmaWVsZHNcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY3VyT3B0Lml0ZW1DcmVhdGluZyhjdXJEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBkYXRhU291cmNlW2ldO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhU291cmNlKS5sZW5ndGggJiYgZGF0YVNvdXJjZVtpXS5oYXNPd25Qcm9wZXJ0eShmaWVsZHMuaWQpXG4gICAgICAgICAgICAgICAgICAgICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFTb3VyY2VbaV1bZmllbGRzLmlkXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBkYXRhU291cmNlW2ldLmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJFbGUgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyT3B0LnNob3dDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICBpbm5lckVsZS5wdXNoKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogZXhwb3J0cy5jc3NDbGFzcy5jaGVjaywgYXR0cnM6IHsgdHlwZTogJ2NoZWNrYm94JyB9IH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzU2luZ2xlTGV2ZWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1ck9wdC5zaG93SWNvbiAmJiBjdXJJdGVtLmhhc093blByb3BlcnR5KGZpZWxkcy5pY29uQ3NzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1ckl0ZW1bZmllbGRzLmljb25Dc3NdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRWxlLnB1c2goZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IGV4cG9ydHMuY3NzQ2xhc3MuaWNvbiArICcgJyArIGN1ckl0ZW1bZmllbGRzLmljb25Dc3NdIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaSA9IGdlbmVyYXRlU2luZ2xlTGV2ZWxMSShjdXJJdGVtLCBmaWVsZHMsIGN1ck9wdC5pdGVtQ2xhc3MsIGlubmVyRWxlLCAoY3VySXRlbS5oYXNPd25Qcm9wZXJ0eSgnaXNIZWFkZXInKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5pc0hlYWRlcikgPyB0cnVlIDogZmFsc2UsIGlkLCBpLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpID0gZ2VuZXJhdGVMSShjdXJJdGVtLCBmaWVsZHMsIGN1ck9wdC5pdGVtQ2xhc3MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKGV4cG9ydHMuY3NzQ2xhc3MubGV2ZWwgKyAnLScgKyBhcmlhQXR0cmlidXRlcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcsIGFyaWFBdHRyaWJ1dGVzLmxldmVsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNPd25Qcm9wZXJ0eShmaWVsZHMudG9vbHRpcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBjdXJJdGVtW2ZpZWxkcy50b29sdGlwXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckl0ZW0uaGFzT3duUHJvcGVydHkoZmllbGRzLmh0bWxBdHRyaWJ1dGVzKSAmJiBjdXJJdGVtW2ZpZWxkcy5odG1sQXR0cmlidXRlc10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEF0dHJpYnV0ZShsaSwgY3VySXRlbVtmaWVsZHMuaHRtbEF0dHJpYnV0ZXNdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNPd25Qcm9wZXJ0eShmaWVsZHMuZW5hYmxlZCkgJiYgY3VySXRlbVtmaWVsZHMuZW5hYmxlZF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKGV4cG9ydHMuY3NzQ2xhc3MuZGlzYWJsZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc093blByb3BlcnR5KGZpZWxkcy5pc1Zpc2libGUpICYmIGN1ckl0ZW1bZmllbGRzLmlzVmlzaWJsZV0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc093blByb3BlcnR5KGZpZWxkcy5pbWFnZVVybCkgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VySXRlbVtmaWVsZHMuaW1hZ2VVcmxdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHIgPSB7IHNyYzogY3VySXRlbVtmaWVsZHMuaW1hZ2VVcmxdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNPd25Qcm9wZXJ0eShmaWVsZHMuaW1hZ2VVcmwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZShhdHRyLCBjdXJJdGVtW2ZpZWxkcy5pbWFnZUF0dHJpYnV0ZXNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucHJlcGVuZChbZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IGNsYXNzTmFtZTogZXhwb3J0cy5jc3NDbGFzcy5pbWFnZSwgYXR0cnM6IGF0dHIgfSldLCBsaS5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1ck9wdC5zaG93SWNvbiAmJiBjdXJJdGVtLmhhc093blByb3BlcnR5KGZpZWxkcy5pY29uQ3NzKSAmJiAhY3VyT3B0LnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VySXRlbVtmaWVsZHMuaWNvbkNzc10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5wcmVwZW5kKFtlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBleHBvcnRzLmNzc0NsYXNzLmljb24gKyAnICcgKyBjdXJJdGVtW2ZpZWxkcy5pY29uQ3NzXSB9KV0sIGxpLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJFbGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnByZXBlbmQoaW5uZXJFbGUsIGxpLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzU3ViQ2hpbGQoY3VySXRlbSwgZmllbGRzLCBkYXRhU291cmNlLCBjdXJPcHQsIGxpLCBhcmlhQXR0cmlidXRlcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJPcHQuaXRlbUNyZWF0ZWQgJiYgdHlwZW9mIGN1ck9wdC5pdGVtQ3JlYXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJEYXRhOiBkYXRhU291cmNlW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZGF0YVNvdXJjZVtpXVtmaWVsZHMudGV4dF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBsaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGN1ck9wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogZmllbGRzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGN1ck9wdC5pdGVtQ3JlYXRlZChjdXJEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hpbGQucHVzaChsaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgTGlzdEJhc2UuY3JlYXRlTGlzdEl0ZW1Gcm9tSnNvbiA9IGNyZWF0ZUxpc3RJdGVtRnJvbUpzb247XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxpc3RGcm9tSnNvbihkYXRhU291cmNlLCBvcHRpb25zLCBsZXZlbCwgaXNTaW5nbGVMZXZlbCkge1xuICAgICAgICAgICAgdmFyIGN1ck9wdCA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0TGlzdEJhc2VPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBsaSA9IGNyZWF0ZUxpc3RJdGVtRnJvbUpzb24oZGF0YVNvdXJjZSwgb3B0aW9ucywgbGV2ZWwsIGlzU2luZ2xlTGV2ZWwpO1xuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlVUwobGksIGN1ck9wdC5saXN0Q2xhc3MsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIExpc3RCYXNlLmNyZWF0ZUxpc3RGcm9tSnNvbiA9IGNyZWF0ZUxpc3RGcm9tSnNvbjtcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2libGluZ0xJKGVsZW1lbnRBcnJheSwgZWxlbWVudCwgaXNQcmV2aW91cykge1xuICAgICAgICAgICAgZXhwb3J0cy5jc3NDbGFzcyA9IGdldE1vZHVsZUNsYXNzKGRlZmF1bHRMaXN0QmFzZU9wdGlvbnMubW9kdWxlTmFtZSk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnRBcnJheSB8fCAhZWxlbWVudEFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2libGluZ0xJO1xuICAgICAgICAgICAgdmFyIGxpSW5kZXg7XG4gICAgICAgICAgICB2YXIgbGlDb2xsZWN0aW9ucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVsZW1lbnRBcnJheSk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxpSW5kZXggPSBpbmRleE9mKGVsZW1lbnQsIGxpQ29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGlJbmRleCA9IChpc1ByZXZpb3VzID09PSB0cnVlID8gbGlDb2xsZWN0aW9ucy5sZW5ndGggOiAtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaWJsaW5nTEkgPSBsaUNvbGxlY3Rpb25zW2xpSW5kZXggKyAoaXNQcmV2aW91cyA9PT0gdHJ1ZSA/IC0xIDogMSldO1xuICAgICAgICAgICAgd2hpbGUgKHNpYmxpbmdMSSAmJiAoIWVqMl9iYXNlXzIuaXNWaXNpYmxlKHNpYmxpbmdMSSkgfHwgc2libGluZ0xJLmNsYXNzTGlzdC5jb250YWlucyhleHBvcnRzLmNzc0NsYXNzLmRpc2FibGVkKSkpIHtcbiAgICAgICAgICAgICAgICBsaUluZGV4ID0gbGlJbmRleCArIChpc1ByZXZpb3VzID09PSB0cnVlID8gLTEgOiAxKTtcbiAgICAgICAgICAgICAgICBzaWJsaW5nTEkgPSBsaUNvbGxlY3Rpb25zW2xpSW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNpYmxpbmdMSTtcbiAgICAgICAgfVxuICAgICAgICBMaXN0QmFzZS5nZXRTaWJsaW5nTEkgPSBnZXRTaWJsaW5nTEk7XG4gICAgICAgIGZ1bmN0aW9uIGluZGV4T2YoaXRlbSwgZWxlbWVudEFycmF5KSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnRBcnJheSB8fCAhaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlDb2xsZWN0aW9ucyA9IGVsZW1lbnRBcnJheTtcbiAgICAgICAgICAgICAgICBsaUNvbGxlY3Rpb25zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWxlbWVudEFycmF5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlDb2xsZWN0aW9ucy5pbmRleE9mKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIExpc3RCYXNlLmluZGV4T2YgPSBpbmRleE9mO1xuICAgICAgICBmdW5jdGlvbiBncm91cERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgZmllbGRzLCBzb3J0T3JkZXIpIHtcbiAgICAgICAgICAgIGlmIChzb3J0T3JkZXIgPT09IHZvaWQgMCkgeyBzb3J0T3JkZXIgPSAnTm9uZSc7IH1cbiAgICAgICAgICAgIHZhciBjdXNRdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkuZ3JvdXAoZmllbGRzLmdyb3VwQnkpO1xuICAgICAgICAgICAgY3VzUXVlcnkgPSBhZGRTb3J0aW5nKHNvcnRPcmRlciwgJ2tleScsIGN1c1F1ZXJ5KTtcbiAgICAgICAgICAgIHZhciBkcyA9IGdldERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgY3VzUXVlcnkpO1xuICAgICAgICAgICAgZGF0YVNvdXJjZSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtT2JqID0gZHNbal0uaXRlbXM7XG4gICAgICAgICAgICAgICAgdmFyIGdycEl0ZW0gPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgaGRyID0gJ2lzSGVhZGVyJztcbiAgICAgICAgICAgICAgICBncnBJdGVtW2ZpZWxkcy50ZXh0XSA9IGRzW2pdLmtleTtcbiAgICAgICAgICAgICAgICBncnBJdGVtW2hkcl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGdycEl0ZW0uaXRlbXMgPSBpdGVtT2JqO1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UucHVzaChncnBJdGVtKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGl0ZW1PYmoubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZS5wdXNoKGl0ZW1PYmpba10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhU291cmNlO1xuICAgICAgICB9XG4gICAgICAgIExpc3RCYXNlLmdyb3VwRGF0YVNvdXJjZSA9IGdyb3VwRGF0YVNvdXJjZTtcbiAgICAgICAgZnVuY3Rpb24gYWRkU29ydGluZyhzb3J0T3JkZXIsIHNvcnRCeSwgcXVlcnkpIHtcbiAgICAgICAgICAgIGlmIChxdWVyeSA9PT0gdm9pZCAwKSB7IHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTsgfVxuICAgICAgICAgICAgaWYgKHNvcnRPcmRlciA9PT0gJ0FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5zb3J0Qnkoc29ydEJ5LCAnYXNjZW5kaW5nJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3J0T3JkZXIgPT09ICdEZXNjZW5kaW5nJykge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnNvcnRCeShzb3J0QnksICdkZXNjZW5kaW5nJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH1cbiAgICAgICAgTGlzdEJhc2UuYWRkU29ydGluZyA9IGFkZFNvcnRpbmc7XG4gICAgICAgIGZ1bmN0aW9uIGdldERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgcXVlcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihkYXRhU291cmNlKVxuICAgICAgICAgICAgICAgIC5leGVjdXRlTG9jYWwocXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIExpc3RCYXNlLmdldERhdGFTb3VyY2UgPSBnZXREYXRhU291cmNlO1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVKc29uRnJvbUVsZW1lbnQoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGN1ck9wdCA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0TGlzdEJhc2VPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBmaWVsZHMgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgTGlzdEJhc2UuZGVmYXVsdE1hcHBlZEZpZWxkcywgY3VyT3B0LmZpZWxkcyk7XG4gICAgICAgICAgICB2YXIgY3VyRWxlID0gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIganNvbkFyID0gW107XG4gICAgICAgICAgICBjdXJFbGUuY2xhc3NMaXN0LmFkZCgnanNvbi1wYXJlbnQnKTtcbiAgICAgICAgICAgIHZhciBjaGlsZHMgPSBjdXJFbGUucXVlcnlTZWxlY3RvckFsbCgnLmpzb24tcGFyZW50PmxpJyk7XG4gICAgICAgICAgICBjdXJFbGUuY2xhc3NMaXN0LnJlbW92ZSgnanNvbi1wYXJlbnQnKTtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSBjaGlsZHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcbiAgICAgICAgICAgICAgICB2YXIgdWwgPSBsaS5xdWVyeVNlbGVjdG9yKCd1bCcpO1xuICAgICAgICAgICAgICAgIHZhciBqc29uID0ge307XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSBhbmNob3IgPyBhbmNob3IuY2hpbGROb2RlcyA6IGxpLmNoaWxkTm9kZXM7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGNoaWxkTm9kZXNbTnVtYmVyKGtleSldKS5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb25bZmllbGRzLnRleHRdID0gY2hpbGROb2Rlc1tOdW1iZXIoa2V5KV0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBqc29uW2ZpZWxkcy5pZF0gPSBnZW5VSUQoKTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlc18xID0gZ2V0QWxsQXR0cmlidXRlcyhsaSk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXNfMSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25bZmllbGRzLmh0bWxBdHRyaWJ1dGVzXSA9IGF0dHJpYnV0ZXNfMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzXzEgPSBnZXRBbGxBdHRyaWJ1dGVzKGFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhhdHRyaWJ1dGVzXzEpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbltmaWVsZHMudXJsQXR0cmlidXRlc10gPSBhdHRyaWJ1dGVzXzE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25bZmllbGRzLmNoaWxkXSA9IGNyZWF0ZUpzb25Gcm9tRWxlbWVudCh1bCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGpzb25Bci5wdXNoKGpzb24pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBqc29uQXI7XG4gICAgICAgIH1cbiAgICAgICAgTGlzdEJhc2UuY3JlYXRlSnNvbkZyb21FbGVtZW50ID0gY3JlYXRlSnNvbkZyb21FbGVtZW50O1xuICAgICAgICBmdW5jdGlvbiB0eXBlb2ZEYXRhKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IHsgdHlwZW9mOiBudWxsLCBpdGVtOiBudWxsIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YVtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoID0geyB0eXBlb2Y6IHR5cGVvZiBkYXRhW2ldLCBpdGVtOiBkYXRhW2ldIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShlbGVtZW50LCBlbGVtZW50QXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UoYXR0ciwgZWxlbWVudEF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgaWYgKGF0dHIuY2xhc3MpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFtlbGVtZW50XSwgYXR0ci5jbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgYXR0ci5jbGFzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhlbGVtZW50LCBhdHRyKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRBbGxBdHRyaWJ1dGVzKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0ge307XG4gICAgICAgICAgICB2YXIgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlcztcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhdHRyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0cltpbmRleF0ubm9kZU5hbWVdID0gYXR0cltpbmRleF0ubm9kZVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQ29udGVudFRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhU291cmNlLCBmaWVsZHMpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuY3NzQ2xhc3MgPSBnZXRNb2R1bGVDbGFzcyhkZWZhdWx0TGlzdEJhc2VPcHRpb25zLm1vZHVsZU5hbWUpO1xuICAgICAgICAgICAgdmFyIHVsRWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndWwnLCB7IGNsYXNzTmFtZTogZXhwb3J0cy5jc3NDbGFzcy51bCwgYXR0cnM6IHsgcm9sZTogJ3ByZXNlbnRhdGlvbicgfSB9KTtcbiAgICAgICAgICAgIHZhciBjb21waWxlZFN0cmluZyA9IGVqMl9iYXNlXzMuY29tcGlsZSh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICB2YXIgbGlDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgaWQgPSBnZW5VSUQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YVNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZGF0YVNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICB2YXIgaXNIZWFkZXIgPSBpdGVtLmlzSGVhZGVyO1xuICAgICAgICAgICAgICAgIHZhciBsaSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnbGknLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCArICctJyArIGksXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogaXNIZWFkZXIgPyBleHBvcnRzLmNzc0NsYXNzLmdyb3VwIDogZXhwb3J0cy5jc3NDbGFzcy5saSwgYXR0cnM6IHsgcm9sZTogJ3ByZXNlbnRhdGlvbicgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpc0hlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICBsaS5pbm5lclRleHQgPSBpdGVtW2ZpZWxkcy50ZXh0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXBwZW5kKGNvbXBpbGVkU3RyaW5nKGl0ZW0pLCBsaSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1bZmllbGRzLnZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpQ29sbGVjdGlvbi5wdXNoKGxpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXBwZW5kKGxpQ29sbGVjdGlvbiwgdWxFbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiB1bEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgTGlzdEJhc2UucmVuZGVyQ29udGVudFRlbXBsYXRlID0gcmVuZGVyQ29udGVudFRlbXBsYXRlO1xuICAgICAgICBmdW5jdGlvbiByZW5kZXJHcm91cFRlbXBsYXRlKGdyb3VwVGVtcGxhdGUsIGdyb3VwRGF0YVNvdXJjZSwgZmllbGRzLCBoZWFkZXJJdGVtcykge1xuICAgICAgICAgICAgdmFyIGNvbXBpbGVkU3RyaW5nID0gZWoyX2Jhc2VfMy5jb21waWxlKGdyb3VwVGVtcGxhdGUpO1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gZmllbGRzLmdyb3VwQnk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGF0YSA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJJdGVtc18xID0gaGVhZGVySXRlbXM7IF9pIDwgaGVhZGVySXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gaGVhZGVySXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgaGVhZGVyRGF0YVtjYXRlZ29yeV0gPSBoZWFkZXIudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXBwZW5kKGNvbXBpbGVkU3RyaW5nKGhlYWRlckRhdGEpLCBoZWFkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlckl0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIExpc3RCYXNlLnJlbmRlckdyb3VwVGVtcGxhdGUgPSByZW5kZXJHcm91cFRlbXBsYXRlO1xuICAgICAgICBmdW5jdGlvbiBnZW5VSUQoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzU3ViQ2hpbGQoY3VySXRlbSwgZmllbGRzLCBkcywgb3B0aW9ucywgZWxlbWVudCwgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciBzdWJEUyA9IGN1ckl0ZW1bZmllbGRzLmNoaWxkXSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBoYXNDaGlsZHJlbiA9IGN1ckl0ZW1bZmllbGRzLmhhc0NoaWxkcmVuXTtcbiAgICAgICAgICAgIGlmIChzdWJEUy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBoYXNDaGlsZHJlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGV4cG9ydHMuY3NzQ2xhc3MuaGFzQ2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnByb2Nlc3NTdWJDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViTGkgPSBjcmVhdGVMaXN0RnJvbUpzb24oc3ViRFMsIG9wdGlvbnMsICsrbGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHN1YkxpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFvcHRpb25zLmV4cGFuZENvbGxhcHNlICYmIGhhc0NoaWxkcmVuICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKGV4cG9ydHMuY3NzQ2xhc3MudGV4dENvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChleHBvcnRzLmNzc0NsYXNzLmljb25XcmFwcGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZEVsZW1lbnQgPSBvcHRpb25zLmV4cGFuZEljb25Qb3NpdGlvbiA9PT0gJ2xlZnQnID8gZWoyX2Jhc2VfMi5wcmVwZW5kIDogZWoyX2Jhc2VfMi5hcHBlbmQ7XG4gICAgICAgICAgICAgICAgZXhwYW5kRWxlbWVudChbZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgJyArIG9wdGlvbnMuZXhwYW5kSWNvbkNsYXNzIH0pXSwgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGV4cG9ydHMuY3NzQ2xhc3MudGV4dENvbnRlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVNpbmdsZUxldmVsTEkoaXRlbSwgZmllbGRzLCBjbGFzc05hbWUsIGlubmVyRWxlbWVudHMsIGdycExJLCBpZCwgaW5kZXgsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjdXJPcHQgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGVmYXVsdExpc3RCYXNlT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHJpYnV0ZXMgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGVmYXVsdEFyaWFBdHRyaWJ1dGVzLCBjdXJPcHQuYXJpYUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdmFyIHRleHQgPSBpdGVtO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaXRlbTtcbiAgICAgICAgICAgIHZhciBkYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgaXRlbSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gaXRlbTtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gaXRlbVtmaWVsZHMudGV4dF0gfHwgJyc7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBpdGVtW2ZpZWxkcy52YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWxlbWVudElEO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFTb3VyY2UpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGFTb3VyY2VbZmllbGRzLmlkXSlcbiAgICAgICAgICAgICAgICAmJiBkYXRhU291cmNlW2ZpZWxkcy5pZF0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudElEID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50SUQgPSBpZCArICctJyArIGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdsaScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IChncnBMSSA9PT0gdHJ1ZSA/IGV4cG9ydHMuY3NzQ2xhc3MuZ3JvdXAgOiBleHBvcnRzLmNzc0NsYXNzLmxpKSArICcgJyArIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNsYXNzTmFtZSkgPyAnJyA6IGNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnRJRCwgYXR0cnM6IChhcmlhQXR0cmlidXRlcy5ncm91cEl0ZW1Sb2xlICE9PSAnJyAmJiBhcmlhQXR0cmlidXRlcy5pdGVtUm9sZSAhPT0gJycgP1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6IChncnBMSSA9PT0gdHJ1ZSA/IGFyaWFBdHRyaWJ1dGVzLmdyb3VwSXRlbVJvbGUgOiBhcmlhQXR0cmlidXRlcy5pdGVtUm9sZSkgfSA6IHt9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAmJiBkYXRhU291cmNlLmhhc093blByb3BlcnR5KGZpZWxkcy5lbmFibGVkKSAmJiBkYXRhU291cmNlW2ZpZWxkcy5lbmFibGVkXS50b1N0cmluZygpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChleHBvcnRzLmNzc0NsYXNzLmRpc2FibGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChncnBMSSkge1xuICAgICAgICAgICAgICAgIGxpLmlubmVyVGV4dCA9IHRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdyb2xlJywgJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlICYmIGRhdGFTb3VyY2UuaGFzT3duUHJvcGVydHkoZmllbGRzLmh0bWxBdHRyaWJ1dGVzKSAmJiBkYXRhU291cmNlW2ZpZWxkcy5odG1sQXR0cmlidXRlc10pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0QXR0cmlidXRlKGxpLCBkYXRhU291cmNlW2ZpZWxkcy5odG1sQXR0cmlidXRlc10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5uZXJFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hcHBlbmQoaW5uZXJFbGVtZW50cywgbGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAmJiBkYXRhU291cmNlLmhhc093blByb3BlcnR5KGZpZWxkcy51cmwpICYmIGRhdGFTb3VyY2VbZmllbGRzLnVybF0pIHtcbiAgICAgICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoYW5jaG9yVGFnKGRhdGFTb3VyY2UsIGZpZWxkcywgdGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsaTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRNb2R1bGVDbGFzcyhtb2R1bGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlQ2xhc3M7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlQ2xhc3MgPSB7XG4gICAgICAgICAgICAgICAgbGk6IFwiZS1cIiArIG1vZHVsZU5hbWUgKyBcIi1pdGVtXCIsXG4gICAgICAgICAgICAgICAgdWw6IFwiZS1cIiArIG1vZHVsZU5hbWUgKyBcIi1wYXJlbnQgZS11bFwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiBcImUtXCIgKyBtb2R1bGVOYW1lICsgXCItZ3JvdXAtaXRlbVwiLFxuICAgICAgICAgICAgICAgIGljb246IFwiZS1cIiArIG1vZHVsZU5hbWUgKyBcIi1pY29uXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJlLVwiICsgbW9kdWxlTmFtZSArIFwiLXRleHRcIixcbiAgICAgICAgICAgICAgICBjaGVjazogXCJlLVwiICsgbW9kdWxlTmFtZSArIFwiLWNoZWNrXCIsXG4gICAgICAgICAgICAgICAgY2hlY2tlZDogJ2UtY2hlY2tlZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6ICdlLXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICBleHBhbmRlZDogJ2UtZXhwYW5kZWQnLFxuICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAnZS10ZXh0LWNvbnRlbnQnLFxuICAgICAgICAgICAgICAgIGhhc0NoaWxkOiAnZS1oYXMtY2hpbGQnLFxuICAgICAgICAgICAgICAgIGxldmVsOiAnZS1sZXZlbCcsXG4gICAgICAgICAgICAgICAgdXJsOiBcImUtXCIgKyBtb2R1bGVOYW1lICsgXCItdXJsXCIsXG4gICAgICAgICAgICAgICAgY29sbGFwc2libGU6ICdlLWljb24tY29sbGFwc2libGUnLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAnZS1kaXNhYmxlZCcsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IFwiZS1cIiArIG1vZHVsZU5hbWUgKyBcIi1pbWdcIixcbiAgICAgICAgICAgICAgICBpY29uV3JhcHBlcjogJ2UtaWNvbi13cmFwcGVyJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhbmNob3JUYWcoZGF0YVNvdXJjZSwgZmllbGRzLCB0ZXh0KSB7XG4gICAgICAgICAgICB2YXIgYXR0ciA9IHsgaHJlZjogZGF0YVNvdXJjZVtmaWVsZHMudXJsXSB9O1xuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuaGFzT3duUHJvcGVydHkoZmllbGRzLnVybEF0dHJpYnV0ZXMpICYmIGRhdGFTb3VyY2VbZmllbGRzLnVybEF0dHJpYnV0ZXNdKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZShhdHRyLCBkYXRhU291cmNlW2ZpZWxkcy51cmxBdHRyaWJ1dGVzXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYW5jaG9yVGFnID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdhJywgeyBjbGFzc05hbWU6IGV4cG9ydHMuY3NzQ2xhc3MudGV4dCArICcgJyArIGV4cG9ydHMuY3NzQ2xhc3MudXJsLCBpbm5lckhUTUw6IHRleHQgfSk7XG4gICAgICAgICAgICBzZXRBdHRyaWJ1dGUoYW5jaG9yVGFnLCBhdHRyKTtcbiAgICAgICAgICAgIHJldHVybiBhbmNob3JUYWc7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVMSShpdGVtLCBmaWVsZHMsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGN1ck9wdCA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0TGlzdEJhc2VPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0cmlidXRlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkZWZhdWx0QXJpYUF0dHJpYnV0ZXMsIGN1ck9wdC5hcmlhQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IGl0ZW07XG4gICAgICAgICAgICB2YXIgdUlEO1xuICAgICAgICAgICAgdmFyIGdycExJO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2U7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgdGV4dCA9IGl0ZW1bZmllbGRzLnRleHRdIHx8ICcnO1xuICAgICAgICAgICAgICAgIHVJRCA9IGl0ZW1bZmllbGRzLmlkXTtcbiAgICAgICAgICAgICAgICBncnBMSSA9IChpdGVtLmhhc093blByb3BlcnR5KCdpc0hlYWRlcicpICYmIGl0ZW0uaXNIZWFkZXIpXG4gICAgICAgICAgICAgICAgICAgID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdsaScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IChncnBMSSA9PT0gdHJ1ZSA/IGV4cG9ydHMuY3NzQ2xhc3MuZ3JvdXAgOiBleHBvcnRzLmNzc0NsYXNzLmxpKSArICcgJyArIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNsYXNzTmFtZSkgPyAnJyA6IGNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgYXR0cnM6IChhcmlhQXR0cmlidXRlcy5ncm91cEl0ZW1Sb2xlICE9PSAnJyAmJiBhcmlhQXR0cmlidXRlcy5pdGVtUm9sZSAhPT0gJycgP1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6IChncnBMSSA9PT0gdHJ1ZSA/IGFyaWFBdHRyaWJ1dGVzLmdyb3VwSXRlbVJvbGUgOiBhcmlhQXR0cmlidXRlcy5pdGVtUm9sZSkgfSA6IHt9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodUlEKSB7XG4gICAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdkYXRhLXVpZCcsIHVJRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ3JwTEkgJiYgb3B0aW9ucyAmJiBvcHRpb25zLmdyb3VwVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29tcGlsZWRTdHJpbmcgPSBlajJfYmFzZV8zLmNvbXBpbGUob3B0aW9ucy5ncm91cFRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFwcGVuZChjb21waWxlZFN0cmluZyhpdGVtKSwgbGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWdycExJICYmIG9wdGlvbnMgJiYgb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb21waWxlZFN0cmluZyA9IGVqMl9iYXNlXzMuY29tcGlsZShvcHRpb25zLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFwcGVuZChjb21waWxlZFN0cmluZyhpdGVtKSwgbGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogZXhwb3J0cy5jc3NDbGFzcy50ZXh0Q29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IChhcmlhQXR0cmlidXRlcy53cmFwcGVyUm9sZSAhPT0gJycgPyB7IHJvbGU6IGFyaWFBdHRyaWJ1dGVzLndyYXBwZXJSb2xlIH0gOiB7fSkgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UgJiYgZGF0YVNvdXJjZS5oYXNPd25Qcm9wZXJ0eShmaWVsZHMudXJsKSAmJiBkYXRhU291cmNlW2ZpZWxkcy51cmxdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKGFuY2hvclRhZyhkYXRhU291cmNlLCBmaWVsZHMsIHRleHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBleHBvcnRzLmNzc0NsYXNzLnRleHQsIGlubmVySFRNTDogdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiAoYXJpYUF0dHJpYnV0ZXMuaXRlbVRleHQgIT09ICcnID8geyByb2xlOiBhcmlhQXR0cmlidXRlcy5pdGVtVGV4dCB9IDoge30pIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlVUwobGlFbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjdXJPcHQgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGVmYXVsdExpc3RCYXNlT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHJpYnV0ZXMgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGVmYXVsdEFyaWFBdHRyaWJ1dGVzLCBjdXJPcHQuYXJpYUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgZXhwb3J0cy5jc3NDbGFzcyA9IGdldE1vZHVsZUNsYXNzKGN1ck9wdC5tb2R1bGVOYW1lKTtcbiAgICAgICAgICAgIHZhciB1bEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3VsJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZXhwb3J0cy5jc3NDbGFzcy51bCArICcgJyArIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNsYXNzTmFtZSkgPyAnJyA6IGNsYXNzTmFtZSksXG4gICAgICAgICAgICAgICAgYXR0cnM6IChhcmlhQXR0cmlidXRlcy5saXN0Um9sZSAhPT0gJycgPyB7IHJvbGU6IGFyaWFBdHRyaWJ1dGVzLmxpc3RSb2xlIH0gOiB7fSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hcHBlbmQobGlFbGVtZW50LCB1bEVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHVsRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBMaXN0QmFzZS5nZW5lcmF0ZVVMID0gZ2VuZXJhdGVVTDtcbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVJY29uKGxpRWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgY3VyT3B0ID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGRlZmF1bHRMaXN0QmFzZU9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdmFyIGFyaWFBdHRyaWJ1dGVzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGRlZmF1bHRBcmlhQXR0cmlidXRlcywgY3VyT3B0LmFyaWFBdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGV4cG9ydHMuY3NzQ2xhc3MgPSBnZXRNb2R1bGVDbGFzcyhjdXJPcHQubW9kdWxlTmFtZSk7XG4gICAgICAgICAgICB2YXIgZXhwYW5kRWxlbWVudCA9IGN1ck9wdC5leHBhbmRJY29uUG9zaXRpb24gPT09ICdsZWZ0JyA/IGVqMl9iYXNlXzIucHJlcGVuZCA6IGVqMl9iYXNlXzIuYXBwZW5kO1xuICAgICAgICAgICAgZXhwYW5kRWxlbWVudChbZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgJyArIGN1ck9wdC5leHBhbmRJY29uQ2xhc3MgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2xhc3NOYW1lKSA/ICcnIDogY2xhc3NOYW1lKSB9KV0sIGxpRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGV4cG9ydHMuY3NzQ2xhc3MudGV4dENvbnRlbnQpKTtcbiAgICAgICAgICAgIHJldHVybiBsaUVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgTGlzdEJhc2UuZ2VuZXJhdGVJY29uID0gZ2VuZXJhdGVJY29uO1xuICAgIH0pKExpc3RCYXNlID0gZXhwb3J0cy5MaXN0QmFzZSB8fCAoZXhwb3J0cy5MaXN0QmFzZSA9IHt9KSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9saXN0LWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9saXN0LWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBsaXN0X2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQobGlzdF9iYXNlXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}