/*!
*  filename: ej2-popups.umd.min.js.map
*  version : 1.0.22
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-popups.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_9__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","index_4","index_5","__export","hasOwnProperty","Object","defineProperty","value","apply","popup_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","position_1","ej2_base_4","ej2_base_5","ej2_base_6","collision_1","CLASSNAMES","ROOT","RTL","OPEN","CLOSE","Popup","_super","element","options","onPropertyChanged","newProp","oldProp","_i","_a","keys","setStyleAttribute","width","formatUnit","height","zIndex","setEnableRtl","refreshPosition","x","offsetX","style","left","parseInt","toString","y","offsetY","top","setContent","actionOnScroll","wireScrollEvents","unwireScrollEvents","getModuleName","getPersistData","addOnPersist","destroy","classList","remove","unwireEvents","render","add","styles","wireEvents","Browser","isDevice","EventHandler","window","orientationOnChange","getRelateToElement","getScrollableParent","parent_1","scrollRefresh","parent_2","relateTo","document","querySelector","e","offsetParent","tagName","parentElement","hide","targetVisible","isElementOnViewport","targetInvisibleStatus","trigger","relateToElement","scrollElement","scrollParents","parent_3","isElementVisible","rect","getBoundingClientRect","parent_4","bottom","right","win","windowView","scrollY","scrollX","outerWidth","outerHeight","off","calculatePosition","ele","elementView","preRender","reposition","enableRtl","isNullOrUndefined","content","innerHTML","textContent","appendChild","_this","setTimeout","checkCollision","pos","position","X","Y","display","getAnchorPosition","anchorEle","eleRect","anchorRect","anchor","anchorPos","calculateRelativeBasedPosition","targetType","callFlip","param","flip","viewPortElement","callFit","isCollide","data","fit","horz","collision","vert","show","animationOptions","showAnimation","removeClass","addClass","begin","isDestroyed","end","Animation","animate","hideAnimation","eleStyle","getComputedStyle","overflowRegex","parent","parentStyle","test","overflow","overflowY","overflowX","push","Component","Property","body","Event","NotifyPropertyChanges","tempAnchor","offsetLeft","offsetTop","scrollLeft","scrollTop","currentElement","positionX","positionY","parentDocument","ownerDocument","updatePosition","toLowerCase","setPosx","setPosy","posX","posY","elementRect","getElementHCenter","getElementTop","getElementRight","getElementVCenter","getElementLeft","getElementBottom","getBodyScrollTop","documentElement","getBodyScrollLeft","axis","elemData","targetContainer","containerWidth","getTargetContainerWidth","getViewPortWidth","containerLeft","ContainerLeft","containerRight","ContainerRight","overLeft","overRight","containerHeight","getTargetContainerHeight","getViewPortHeight","containerTop","ContainerTop","containerBottom","ContainerBottom","overTop","overBottom","elemOffset","yAxis","topCollideCheck","xAxis","leftCollideCheck","topSide","rightSide","leftSide","bottomSide","tEdge","TL","TR","BL","BR","eEdge","updateElementData","setPosition","leftFlip","topFlip","setPopup","edge","eStatus","deepCheck","collideSide","getTargetContainerLeft","getTargetContainerTop","innerHeight","innerWidth","dialog_1","ej2_buttons_1","ButtonProps","ChildProperty","Dialog","initialize","initRender","closeIconClickEventHandler","event","closedFrom","dlgOverlayClickEventHandler","keyDown","keyCode","isModal","activeElement","btnObj","shiftKey","preventDefault","focusableElements","focus","isTagName","indexOf","isContentEdit","hasAttribute","getAttribute","closeOnEscape","contains","primaryButtonEle","ctrlKey","buttonIndex_1","buttons","some","index","buttonModel","isPrimary","click","targetEle","setCSSClass","setMaxHeight","attributes","role","getZindexPartial","header","setHeader","showCloseIcon","renderCloseIcon","hasChildNodes","contentEle","footerTemplate","setFooterTemplate","setButton","allowDragging","headerContent","setAllowDragging","aria-modal","setIsModal","dlgContainer","popupObj","open","focusContent","close","unBindEvent","storeActiveElement","positionChange","setEnableRTL","visible","dlgOverlay","setProperties","dialogParent","parentZindex","defaultView","getPropertyValue","childrenZindex","children","isEqualNode","finalValue","concat","Math","max","dragObj","Draggable","clone","handle","dragStart","dragStop","drag","dragArea","buttonContent","btn","createElement","attrs","type","outerHTML","Button","ftrTemplateContent","appendTo","getElementsByClassName","aria-describedby","className","insertBefore","maxHeight","offsetHeight","headerEle","aria-labelledby","createHeaderContent","join","closeIcon","closeIconBtnObj","cssClass","iconCss","DLG_CLOSE_ICON","closeIconTitle","prepend","locale","l10n","L10n","setLocale","getConstant","setAttribute","oldCSSClass","split","parentNode","getValidFocusNode","items","node","u","clientHeight","tabIndex","disabled","disableElement","querySelectorAll","getAutoFocusNode","container","validNode","t","elementMatch","matches","webkitMatchesSelector","msMatchesSelector","Element","bindEvent","removeChild","detach","firstChild","unWireEvents","classArray","isFullScreen","fullScreen","openAnimation","name","animationSettings","effect","duration","delay","dialogOpen","closeAnimation","args","Collection","dialogBuilder","CreateBuilder","tooltip_1","Tooltip","formatPosition","tooltipPositionY","tooltipPositionX","_b","renderArrow","setTipClass","tip","ARROW_TIP","tipClass","ARROW_TIP_OUTER","ARROW_TIP_INNER","tooltipEle","renderPopup","elePos","mouseTrail","getTooltipPosition","openPopupHandler","bind","closePopupHandler","offsetPos","calculateTooltipOffset","collisionFlipFit","dataBind","tooltipEventArgs","clear","tooltipEleWidth","offsetWidth","tooltipEleHeight","arrowEle","tipWidth","tipHeight","tipAdjust","showTipPointer","tipHeightAdjust","tipWidthAdjust","clientWidth","updateTipPosition","selEle","removeList","adjustArrow","leftValue","topValue","tooltipWidth","tooltipHeight","tipPosExclude","tipPointerPosition","POINTER_ADJUST","renderContent","tooltipContent","removeAttribute","isSticky","tipClose","ICON","touchStartEvent","onStickyClose","addDescribedBy","describedby","trim","data-tooltip-id","removeDescribedBy","splice","orgdescribedby","tapHoldHandler","evt","clearTimeout","autoCloseTimer","targetHover","originalEvent","touchEndHandler","targetClick","closest","hideTooltip","animation","targetList","slice","ctrlId","targetList_1","target_1","restoreElement","showTooltip","wireMouseEvents","showTimer","hideTimer","cancel","isHidden","getUniqueID","TOOLTIP_WRAP","aria-hidden","maxWidth","stop","timingFunction","openDelay","horizontal","vertical","affectedPos","newpos","eleOffset","arrowleft","targetElement","closeAnimation_1","closeDelay","unwireMouseEvents","onMouseOut","onMouseMove","eventPageX","eventPageY","touches","pageX","pageY","colpos","touchEnd","scrollHandler","opensOn","triggerList","getTriggerList","triggerList_1","wireFocusEvents","touchModule","Touch","tapHoldThreshold","tapHold","touchEndEvent","targetList_2","triggerList_2","unwireFocusEvents","targetList_3","triggerList_3","trgt","refresh","Complex","tooltipBuilder","spinner_1","createSpinner","radius","create_spinner_container","wrap","template","spinTemplate","theme","getTheme","calculateRadius","setTheme","label","createLabel","inner_wrap","CLS_SPINTEMPLATE","replaceContent","spinCSSClass","CLS_HIDESPIN","labelEle","CLS_SPINLABEL","createMaterialSpinner","uniqueID","random_generator","globalTimeOut","timeOut","create_material_element","mat_calculate_attributes","startMatAnimate","globalObject","globalVariables","animateMaterial","globalInfo","timeOutVar","createFabricSpinner","create_fabric_element","fb_calculate_attributes","replace","innerContainer","CLS_SPININWRAP","svg","createBootstrapSpinner","create_bootstrap_element","boot_calculate_attributes","svgBoot","createElementNS","CLS_BOOTSPIN","item","bootCircle","CLS_SPINCIRCLE","defaultRadius","startArc","start","defineArcPoints","circleEle","generateSeries","formSeries","series","count","increment","parseFloat","toFixed","animateBootstrap","circle","boot_animate","isAnimate","defaultSize","DEFT_MAT_WIDTH","DEFT_FAB_WIDTH","DEFT_BOOT_WIDTH","previousId","random","combine","charAt","floor","svgFabric","CLS_FABRICSPIN","fabricCirclePath","fabricCircleArc","CLS_SPINARC","svgMaterial","CLS_MATERIALSPIN","matCirclePath","spinnerContainer","CLS_SPINWRAP","spinnerInnerContainer","spinnerInfo","createCircle","easeAnimation","easing","mat_animation","currentTime","min","Date","getTime","startTime","updatePath","change","path","getDashOffset","diameter","strokeSize","getSize","getStrokeSize","rotate","transformOrigin","drawArc","PI","offset","current","timestamp","timecount","innerConainer","centerX","centerY","defineCircle","defineArc","angle","radians","cos","sin","endArc","showSpinner","showHideSpinner","isHide","spinnerWrap","inner","CLS_SHOWSPIN","svgEle","hideSpinner","setSpinner","ensureTemplate","replaceTheme","svgElement"],"mappings":"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","file":"ej2-popups.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-buttons\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-buttons\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-buttons\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-buttons\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(6), __webpack_require__(7), __webpack_require__(10), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3, index_4, index_5) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t    __export(index_4);\n\t    __export(index_5);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, popup_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(popup_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(3), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, position_1, ej2_base_4, ej2_base_5, ej2_base_6, collision_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLASSNAMES = {\n\t        ROOT: 'e-popup',\n\t        RTL: 'e-rtl',\n\t        OPEN: 'e-popup-open',\n\t        CLOSE: 'e-popup-close'\n\t    };\n\t    var Popup = (function (_super) {\n\t        __extends(Popup, _super);\n\t        function Popup(element, options) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        Popup.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        ej2_base_1.setStyleAttribute(this.element, { 'width': ej2_base_2.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_1.setStyleAttribute(this.element, { 'height': ej2_base_2.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'zIndex':\n\t                        ej2_base_1.setStyleAttribute(this.element, { 'zIndex': newProp.zIndex });\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setEnableRtl();\n\t                        break;\n\t                    case 'position':\n\t                    case 'relateTo':\n\t                        this.refreshPosition();\n\t                        break;\n\t                    case 'offsetX':\n\t                        var x = newProp.offsetX - oldProp.offsetX;\n\t                        this.element.style.left = (parseInt(this.element.style.left, 10) + (x)).toString() + 'px';\n\t                        break;\n\t                    case 'offsetY':\n\t                        var y = newProp.offsetY - oldProp.offsetY;\n\t                        this.element.style.top = (parseInt(this.element.style.top, 10) + (y)).toString() + 'px';\n\t                        break;\n\t                    case 'content':\n\t                        this.setContent();\n\t                        break;\n\t                    case 'actionOnScroll':\n\t                        if (newProp.actionOnScroll !== 'none') {\n\t                            this.wireScrollEvents();\n\t                        }\n\t                        else {\n\t                            this.unwireScrollEvents();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Popup.prototype.getModuleName = function () {\n\t            return 'popup';\n\t        };\n\t        Popup.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Popup.prototype.destroy = function () {\n\t            this.element.classList.remove(CLASSNAMES.ROOT, CLASSNAMES.RTL);\n\t            this.unwireEvents();\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        Popup.prototype.render = function () {\n\t            this.element.classList.add(CLASSNAMES.ROOT);\n\t            var styles = {};\n\t            if (this.zIndex !== 1000) {\n\t                styles.zIndex = this.zIndex;\n\t            }\n\t            if (this.width !== 'auto') {\n\t                styles.width = ej2_base_2.formatUnit(this.width);\n\t            }\n\t            if (this.height !== 'auto') {\n\t                styles.height = ej2_base_2.formatUnit(this.height);\n\t            }\n\t            ej2_base_1.setStyleAttribute(this.element, styles);\n\t            this.setEnableRtl();\n\t            this.setContent();\n\t            this.wireEvents();\n\t        };\n\t        Popup.prototype.wireEvents = function () {\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                ej2_base_6.EventHandler.add(window, 'orientationchange', this.orientationOnChange, this);\n\t            }\n\t            if (this.actionOnScroll !== 'none') {\n\t                this.wireScrollEvents();\n\t            }\n\t        };\n\t        Popup.prototype.wireScrollEvents = function () {\n\t            if (this.getRelateToElement()) {\n\t                for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\n\t                    var parent_1 = _a[_i];\n\t                    ej2_base_6.EventHandler.add(parent_1, 'scroll', this.scrollRefresh, this);\n\t                }\n\t            }\n\t        };\n\t        Popup.prototype.unwireEvents = function () {\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                ej2_base_6.EventHandler.remove(window, 'orientationchange', this.orientationOnChange);\n\t            }\n\t            if (this.actionOnScroll !== 'none') {\n\t                this.unwireScrollEvents();\n\t            }\n\t        };\n\t        Popup.prototype.unwireScrollEvents = function () {\n\t            if (this.getRelateToElement()) {\n\t                for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\n\t                    var parent_2 = _a[_i];\n\t                    ej2_base_6.EventHandler.remove(parent_2, 'scroll', this.scrollRefresh);\n\t                }\n\t            }\n\t        };\n\t        Popup.prototype.getRelateToElement = function () {\n\t            return ((typeof this.relateTo) === 'string') ?\n\t                document.querySelector(this.relateTo) : this.relateTo;\n\t        };\n\t        Popup.prototype.scrollRefresh = function (e) {\n\t            if (this.actionOnScroll === 'reposition') {\n\t                if (!(this.element.offsetParent === e.target ||\n\t                    (this.element.offsetParent && this.element.offsetParent.tagName === 'BODY' &&\n\t                        e.target.parentElement == null))) {\n\t                    this.refreshPosition();\n\t                }\n\t            }\n\t            else if (this.actionOnScroll === 'hide') {\n\t                this.hide();\n\t            }\n\t            if (this.actionOnScroll !== 'none') {\n\t                if (this.getRelateToElement()) {\n\t                    var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);\n\t                    if (!targetVisible && !this.targetInvisibleStatus) {\n\t                        this.trigger('targetExitViewport');\n\t                        this.targetInvisibleStatus = true;\n\t                    }\n\t                    else if (targetVisible) {\n\t                        this.targetInvisibleStatus = false;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Popup.prototype.isElementOnViewport = function (relateToElement, scrollElement) {\n\t            var scrollParents = this.getScrollableParent(relateToElement);\n\t            for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {\n\t                if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {\n\t                    continue;\n\t                }\n\t                else {\n\t                    return false;\n\t                }\n\t            }\n\t            return true;\n\t        };\n\t        Popup.prototype.isElementVisible = function (relateToElement, scrollElement) {\n\t            var rect = relateToElement.getBoundingClientRect();\n\t            if (!rect.height || !rect.width) {\n\t                return false;\n\t            }\n\t            if (scrollElement.getBoundingClientRect) {\n\t                var parent_4 = scrollElement.getBoundingClientRect();\n\t                return !(rect.bottom < parent_4.top) &&\n\t                    (!(rect.bottom > parent_4.bottom) &&\n\t                        (!(rect.right > parent_4.right) &&\n\t                            !(rect.left < parent_4.left)));\n\t            }\n\t            else {\n\t                var win = window;\n\t                var windowView = {\n\t                    top: win.scrollY,\n\t                    left: win.scrollX,\n\t                    right: win.scrollX + win.outerWidth,\n\t                    bottom: win.scrollY + win.outerHeight\n\t                };\n\t                var off = position_1.calculatePosition(relateToElement);\n\t                var ele = {\n\t                    top: off.top,\n\t                    left: off.left,\n\t                    right: off.left + rect.width,\n\t                    bottom: off.top + rect.height\n\t                };\n\t                var elementView = {\n\t                    top: windowView.bottom - ele.top,\n\t                    left: windowView.right - ele.left,\n\t                    bottom: ele.bottom - windowView.top,\n\t                    right: ele.right - windowView.left\n\t                };\n\t                return elementView.top > 0\n\t                    && elementView.left > 0\n\t                    && elementView.right > 0\n\t                    && elementView.bottom > 0;\n\t            }\n\t        };\n\t        Popup.prototype.preRender = function () {\n\t        };\n\t        Popup.prototype.setEnableRtl = function () {\n\t            this.reposition();\n\t            this.enableRtl ? this.element.classList.add(CLASSNAMES.RTL) : this.element.classList.remove(CLASSNAMES.RTL);\n\t        };\n\t        Popup.prototype.setContent = function () {\n\t            if (!ej2_base_2.isNullOrUndefined(this.content)) {\n\t                this.element.innerHTML = '';\n\t                if (typeof (this.content) === 'string') {\n\t                    this.element.textContent = this.content;\n\t                }\n\t                else {\n\t                    this.element.appendChild(this.content);\n\t                }\n\t            }\n\t        };\n\t        Popup.prototype.orientationOnChange = function () {\n\t            var _this = this;\n\t            setTimeout(function () {\n\t                _this.refreshPosition();\n\t            }, 200);\n\t        };\n\t        Popup.prototype.refreshPosition = function () {\n\t            this.reposition();\n\t            this.checkCollision();\n\t        };\n\t        Popup.prototype.reposition = function () {\n\t            var pos;\n\t            var relateToElement = this.getRelateToElement();\n\t            if (typeof this.position.X === 'number' && typeof this.position.Y === 'number') {\n\t                pos = { left: this.position.X, top: this.position.Y };\n\t            }\n\t            else if (relateToElement) {\n\t                var display = this.element.style.display;\n\t                this.element.style.display = 'block';\n\t                pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);\n\t                this.element.style.display = display;\n\t            }\n\t            else {\n\t                pos = { left: 0, top: 0 };\n\t            }\n\t            this.element.style.left = pos.left + 'px';\n\t            this.element.style.top = pos.top + 'px';\n\t        };\n\t        Popup.prototype.getAnchorPosition = function (anchorEle, ele, position, offsetX, offsetY) {\n\t            var eleRect = ele.getBoundingClientRect();\n\t            var anchorRect = anchorEle.getBoundingClientRect();\n\t            var anchor = anchorEle;\n\t            var anchorPos = { left: 0, top: 0 };\n\t            if (ele.offsetParent && ele.offsetParent.tagName === 'BODY' && anchorEle.tagName === 'BODY') {\n\t                anchorPos = position_1.calculatePosition(anchorEle);\n\t            }\n\t            else {\n\t                anchorPos = position_1.calculateRelativeBasedPosition(anchor, ele);\n\t            }\n\t            switch (position.X) {\n\t                default:\n\t                case 'left':\n\t                    break;\n\t                case 'center':\n\t                    if (this.targetType === 'container') {\n\t                        anchorPos.left += (anchorRect.width / 2 - eleRect.width / 2);\n\t                    }\n\t                    else {\n\t                        anchorPos.left += (anchorRect.width / 2);\n\t                    }\n\t                    break;\n\t                case 'right':\n\t                    if (this.targetType === 'container') {\n\t                        anchorPos.left += (anchorRect.width - eleRect.width);\n\t                    }\n\t                    else {\n\t                        anchorPos.left += (anchorRect.width);\n\t                    }\n\t                    break;\n\t            }\n\t            switch (position.Y) {\n\t                default:\n\t                case 'top':\n\t                    break;\n\t                case 'center':\n\t                    if (this.targetType === 'container') {\n\t                        anchorPos.top += (anchorRect.height / 2 - eleRect.height / 2);\n\t                    }\n\t                    else {\n\t                        anchorPos.top += (anchorRect.height / 2);\n\t                    }\n\t                    break;\n\t                case 'bottom':\n\t                    if (this.targetType === 'container') {\n\t                        anchorPos.top += (anchorRect.height - eleRect.height);\n\t                    }\n\t                    else {\n\t                        anchorPos.top += (anchorRect.height);\n\t                    }\n\t                    break;\n\t            }\n\t            anchorPos.left += offsetX;\n\t            anchorPos.top += offsetY;\n\t            return anchorPos;\n\t        };\n\t        Popup.prototype.callFlip = function (param) {\n\t            var relateToElement = this.getRelateToElement();\n\t            collision_1.flip(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param);\n\t        };\n\t        Popup.prototype.callFit = function (param) {\n\t            if (collision_1.isCollide(this.element, this.viewPortElement).length !== 0) {\n\t                var data = collision_1.fit(this.element, this.viewPortElement, param);\n\t                this.element.style.left = data.left + 'px';\n\t                this.element.style.top = data.top + 'px';\n\t            }\n\t        };\n\t        Popup.prototype.checkCollision = function () {\n\t            var horz = this.collision.X;\n\t            var vert = this.collision.Y;\n\t            if (horz === 'none' && vert === 'none') {\n\t                return;\n\t            }\n\t            if (horz === 'flip' && vert === 'flip') {\n\t                this.callFlip({ X: true, Y: true });\n\t            }\n\t            else if (horz === 'fit' && vert === 'fit') {\n\t                this.callFit({ X: true, Y: true });\n\t            }\n\t            else {\n\t                if (horz === 'fit') {\n\t                    this.callFit({ X: true, Y: false });\n\t                }\n\t                else if (vert === 'fit') {\n\t                    this.callFit({ X: false, Y: true });\n\t                }\n\t                if (horz === 'flip') {\n\t                    this.callFlip({ X: true, Y: false });\n\t                }\n\t                else if (vert === 'flip') {\n\t                    this.callFlip({ Y: true, X: false });\n\t                }\n\t            }\n\t        };\n\t        Popup.prototype.show = function (animationOptions) {\n\t            var _this = this;\n\t            animationOptions = (!ej2_base_2.isNullOrUndefined(animationOptions) && typeof animationOptions === 'object') ?\n\t                animationOptions : this.showAnimation;\n\t            if (this.collision.X !== 'none' || this.collision.Y !== 'none') {\n\t                ej2_base_1.removeClass([this.element], CLASSNAMES.CLOSE);\n\t                ej2_base_1.addClass([this.element], CLASSNAMES.OPEN);\n\t                this.checkCollision();\n\t                ej2_base_1.removeClass([this.element], CLASSNAMES.OPEN);\n\t                ej2_base_1.addClass([this.element], CLASSNAMES.CLOSE);\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(animationOptions)) {\n\t                animationOptions.begin = function () {\n\t                    if (!_this.isDestroyed) {\n\t                        ej2_base_1.removeClass([_this.element], CLASSNAMES.CLOSE);\n\t                        ej2_base_1.addClass([_this.element], CLASSNAMES.OPEN);\n\t                    }\n\t                };\n\t                animationOptions.end = function () {\n\t                    if (!_this.isDestroyed) {\n\t                        _this.trigger('open');\n\t                    }\n\t                };\n\t                new ej2_base_4.Animation(animationOptions).animate(this.element);\n\t            }\n\t            else {\n\t                ej2_base_1.removeClass([this.element], CLASSNAMES.CLOSE);\n\t                ej2_base_1.addClass([this.element], CLASSNAMES.OPEN);\n\t                this.trigger('open');\n\t            }\n\t        };\n\t        Popup.prototype.hide = function (animationOptions) {\n\t            var _this = this;\n\t            animationOptions = (!ej2_base_2.isNullOrUndefined(animationOptions) && typeof animationOptions === 'object') ?\n\t                animationOptions : this.hideAnimation;\n\t            if (!ej2_base_2.isNullOrUndefined(animationOptions)) {\n\t                animationOptions.end = function () {\n\t                    if (!_this.isDestroyed) {\n\t                        ej2_base_1.removeClass([_this.element], CLASSNAMES.OPEN);\n\t                        ej2_base_1.addClass([_this.element], CLASSNAMES.CLOSE);\n\t                        _this.trigger('close');\n\t                    }\n\t                };\n\t                new ej2_base_4.Animation(animationOptions).animate(this.element);\n\t            }\n\t            else {\n\t                ej2_base_1.removeClass([this.element], CLASSNAMES.OPEN);\n\t                ej2_base_1.addClass([this.element], CLASSNAMES.CLOSE);\n\t                this.trigger('close');\n\t            }\n\t        };\n\t        Popup.prototype.getScrollableParent = function (element) {\n\t            var eleStyle = getComputedStyle(element);\n\t            var scrollParents = [];\n\t            var overflowRegex = /(auto|scroll)/;\n\t            var parent = element.parentElement;\n\t            while (parent && parent.tagName !== 'HTML') {\n\t                var parentStyle = getComputedStyle(parent);\n\t                if (!(eleStyle.position === 'absolute' && parentStyle.position === 'static')\n\t                    && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\n\t                    scrollParents.push(parent);\n\t                }\n\t                parent = parent.parentElement;\n\t            }\n\t            scrollParents.push(document);\n\t            return scrollParents;\n\t        };\n\t        return Popup;\n\t    }(ej2_base_4.Component));\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Popup.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Popup.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(null)\n\t    ], Popup.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('container')\n\t    ], Popup.prototype, \"targetType\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(null)\n\t    ], Popup.prototype, \"viewPortElement\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({ X: 'none', Y: 'none' })\n\t    ], Popup.prototype, \"collision\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(document.body)\n\t    ], Popup.prototype, \"relateTo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({ X: 'left', Y: 'top' })\n\t    ], Popup.prototype, \"position\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(0)\n\t    ], Popup.prototype, \"offsetX\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(0)\n\t    ], Popup.prototype, \"offsetY\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1000)\n\t    ], Popup.prototype, \"zIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Popup.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('reposition')\n\t    ], Popup.prototype, \"actionOnScroll\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(null)\n\t    ], Popup.prototype, \"showAnimation\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(null)\n\t    ], Popup.prototype, \"hideAnimation\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Popup.prototype, \"open\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Popup.prototype, \"close\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Popup.prototype, \"targetExitViewport\", void 0);\n\t    Popup = __decorate([\n\t        ej2_base_5.NotifyPropertyChanges\n\t    ], Popup);\n\t    exports.Popup = Popup;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var elementRect;\n\t    var element;\n\t    var parentDocument;\n\t    function calculateRelativeBasedPosition(anchor, element) {\n\t        var anchorPos = { left: 0, top: 0 };\n\t        var tempAnchor = anchor;\n\t        if (!anchor || !element) {\n\t            return anchorPos;\n\t        }\n\t        while (element.offsetParent && anchor && element.offsetParent !== anchor) {\n\t            anchorPos.left += anchor.offsetLeft;\n\t            anchorPos.top += anchor.offsetTop;\n\t            anchor = anchor.offsetParent;\n\t        }\n\t        anchor = tempAnchor;\n\t        while (element.offsetParent && anchor && element.offsetParent !== anchor) {\n\t            anchorPos.left -= anchor.scrollLeft;\n\t            anchorPos.top -= anchor.scrollTop;\n\t            anchor = anchor.parentElement;\n\t        }\n\t        return anchorPos;\n\t    }\n\t    exports.calculateRelativeBasedPosition = calculateRelativeBasedPosition;\n\t    function calculatePosition(currentElement, positionX, positionY) {\n\t        if (!currentElement) {\n\t            return { left: 0, top: 0 };\n\t        }\n\t        if (!positionX) {\n\t            positionX = 'left';\n\t        }\n\t        if (!positionY) {\n\t            positionY = 'top';\n\t        }\n\t        parentDocument = currentElement.ownerDocument;\n\t        element = currentElement;\n\t        var pos = { left: 0, top: 0 };\n\t        return updatePosition(positionX.toLowerCase(), positionY.toLowerCase(), pos);\n\t    }\n\t    exports.calculatePosition = calculatePosition;\n\t    function setPosx(value, pos) {\n\t        pos.left = value;\n\t    }\n\t    function setPosy(value, pos) {\n\t        pos.top = value;\n\t    }\n\t    function updatePosition(posX, posY, pos) {\n\t        elementRect = element.getBoundingClientRect();\n\t        switch (posY + posX) {\n\t            case 'topcenter':\n\t                setPosx(getElementHCenter(), pos);\n\t                setPosy(getElementTop(), pos);\n\t                break;\n\t            case 'topright':\n\t                setPosx(getElementRight(), pos);\n\t                setPosy(getElementTop(), pos);\n\t                break;\n\t            case 'centercenter':\n\t                setPosx(getElementHCenter(), pos);\n\t                setPosy(getElementVCenter(), pos);\n\t                break;\n\t            case 'centerright':\n\t                setPosx(getElementRight(), pos);\n\t                setPosy(getElementVCenter(), pos);\n\t                break;\n\t            case 'centerleft':\n\t                setPosx(getElementLeft(), pos);\n\t                setPosy(getElementVCenter(), pos);\n\t                break;\n\t            case 'bottomcenter':\n\t                setPosx(getElementHCenter(), pos);\n\t                setPosy(getElementBottom(), pos);\n\t                break;\n\t            case 'bottomright':\n\t                setPosx(getElementRight(), pos);\n\t                setPosy(getElementBottom(), pos);\n\t                break;\n\t            case 'bottomleft':\n\t                setPosx(getElementLeft(), pos);\n\t                setPosy(getElementBottom(), pos);\n\t                break;\n\t            default:\n\t            case 'topleft':\n\t                setPosx(getElementLeft(), pos);\n\t                setPosy(getElementTop(), pos);\n\t                break;\n\t        }\n\t        return pos;\n\t    }\n\t    function getBodyScrollTop() {\n\t        return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;\n\t    }\n\t    function getBodyScrollLeft() {\n\t        return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;\n\t    }\n\t    function getElementBottom() {\n\t        return elementRect.bottom + getBodyScrollTop();\n\t    }\n\t    function getElementVCenter() {\n\t        return getElementTop() + (elementRect.height / 2);\n\t    }\n\t    function getElementTop() {\n\t        return elementRect.top + getBodyScrollTop();\n\t    }\n\t    function getElementLeft() {\n\t        return elementRect.left + getBodyScrollLeft();\n\t    }\n\t    function getElementRight() {\n\t        return elementRect.right + getBodyScrollLeft();\n\t    }\n\t    function getElementHCenter() {\n\t        return getElementLeft() + (elementRect.width / 2);\n\t    }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, position_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var parentDocument;\n\t    var targetContainer;\n\t    function fit(element, viewPortElement, axis, position) {\n\t        if (viewPortElement === void 0) { viewPortElement = null; }\n\t        if (axis === void 0) { axis = { X: false, Y: false }; }\n\t        if (!axis.Y && !axis.X) {\n\t            return { left: 0, top: 0 };\n\t        }\n\t        var elemData = element.getBoundingClientRect();\n\t        targetContainer = viewPortElement;\n\t        parentDocument = element.ownerDocument;\n\t        if (!position) {\n\t            position = position_1.calculatePosition(element, 'left', 'top');\n\t        }\n\t        if (axis.X) {\n\t            var containerWidth = targetContainer ? getTargetContainerWidth() : getViewPortWidth();\n\t            var containerLeft = ContainerLeft();\n\t            var containerRight = ContainerRight();\n\t            var overLeft = containerLeft - position.left;\n\t            var overRight = position.left + elemData.width - containerRight;\n\t            if (elemData.width > containerWidth) {\n\t                if (overLeft > 0 && overRight <= 0) {\n\t                    position.left = containerRight - elemData.width;\n\t                }\n\t                else if (overRight > 0 && overLeft <= 0) {\n\t                    position.left = containerLeft;\n\t                }\n\t                else {\n\t                    position.left = overLeft > overRight ? (containerRight - elemData.width) : containerLeft;\n\t                }\n\t            }\n\t            else if (overLeft > 0) {\n\t                position.left += overLeft;\n\t            }\n\t            else if (overRight > 0) {\n\t                position.left -= overRight;\n\t            }\n\t        }\n\t        if (axis.Y) {\n\t            var containerHeight = targetContainer ? getTargetContainerHeight() : getViewPortHeight();\n\t            var containerTop = ContainerTop();\n\t            var containerBottom = ContainerBottom();\n\t            var overTop = containerTop - position.top;\n\t            var overBottom = position.top + elemData.height - containerBottom;\n\t            if (elemData.height > containerHeight) {\n\t                if (overTop > 0 && overBottom <= 0) {\n\t                    position.top = containerBottom - elemData.height;\n\t                }\n\t                else if (overBottom > 0 && overTop <= 0) {\n\t                    position.top = containerTop;\n\t                }\n\t                else {\n\t                    position.top = overTop > overBottom ? (containerBottom - elemData.height) : containerTop;\n\t                }\n\t            }\n\t            else if (overTop > 0) {\n\t                position.top += overTop;\n\t            }\n\t            else if (overBottom > 0) {\n\t                position.top -= overBottom;\n\t            }\n\t        }\n\t        return position;\n\t    }\n\t    exports.fit = fit;\n\t    function isCollide(element, viewPortElement, x, y) {\n\t        if (viewPortElement === void 0) { viewPortElement = null; }\n\t        var elemOffset = position_1.calculatePosition(element, 'left', 'top');\n\t        if (x) {\n\t            elemOffset.left = x;\n\t        }\n\t        if (y) {\n\t            elemOffset.top = y;\n\t        }\n\t        var data = [];\n\t        targetContainer = viewPortElement;\n\t        parentDocument = element.ownerDocument;\n\t        var elementRect = element.getBoundingClientRect();\n\t        var top = elemOffset.top;\n\t        var left = elemOffset.left;\n\t        var right = elemOffset.left + elementRect.width;\n\t        var bottom = elemOffset.top + elementRect.height;\n\t        var topData = '';\n\t        var leftData = '';\n\t        var yAxis = topCollideCheck(top, bottom);\n\t        var xAxis = leftCollideCheck(left, right);\n\t        if (yAxis.topSide) {\n\t            data.push('top');\n\t        }\n\t        if (xAxis.rightSide) {\n\t            data.push('right');\n\t        }\n\t        if (xAxis.leftSide) {\n\t            data.push('left');\n\t        }\n\t        if (yAxis.bottomSide) {\n\t            data.push('bottom');\n\t        }\n\t        return data;\n\t    }\n\t    exports.isCollide = isCollide;\n\t    function flip(element, target, offsetX, offsetY, positionX, positionY, viewPortElement, axis) {\n\t        if (viewPortElement === void 0) { viewPortElement = null; }\n\t        if (axis === void 0) { axis = { X: true, Y: true }; }\n\t        if (!target || !element || !positionX || !positionY || (!axis.X && !axis.Y)) {\n\t            return;\n\t        }\n\t        var tEdge = { TL: null,\n\t            TR: null,\n\t            BL: null,\n\t            BR: null };\n\t        var eEdge = {\n\t            TL: null,\n\t            TR: null,\n\t            BL: null,\n\t            BR: null\n\t        };\n\t        var elementRect = element.getBoundingClientRect();\n\t        var pos = {\n\t            posX: positionX, posY: positionY, offsetX: offsetX, offsetY: offsetY, position: { left: 0, top: 0 }\n\t        };\n\t        targetContainer = viewPortElement;\n\t        parentDocument = target.ownerDocument;\n\t        updateElementData(target, tEdge, pos);\n\t        setPosition(eEdge, pos, elementRect);\n\t        if (axis.X) {\n\t            leftFlip(target, eEdge, tEdge, pos, elementRect, true);\n\t        }\n\t        if (axis.Y && tEdge.TL.top > -1) {\n\t            topFlip(target, eEdge, tEdge, pos, elementRect, true);\n\t        }\n\t        setPopup(element, pos);\n\t    }\n\t    exports.flip = flip;\n\t    function setPopup(element, pos) {\n\t        var left = 0;\n\t        var top = 0;\n\t        if (element.offsetParent != null\n\t            && (getComputedStyle(element.offsetParent).position === 'absolute' ||\n\t                getComputedStyle(element.offsetParent).position === 'relative')) {\n\t            var data = position_1.calculatePosition(element.offsetParent, 'left', 'top');\n\t            left = data.left;\n\t            top = data.top;\n\t        }\n\t        element.style.top = (pos.position.top + pos.offsetY - (top)) + 'px';\n\t        element.style.left = (pos.position.left + pos.offsetX - (left)) + 'px';\n\t    }\n\t    function updateElementData(target, edge, pos) {\n\t        pos.position = position_1.calculatePosition(target, pos.posX, pos.posY);\n\t        edge.TL = position_1.calculatePosition(target, 'left', 'top');\n\t        edge.TR = position_1.calculatePosition(target, 'right', 'top');\n\t        edge.BR = position_1.calculatePosition(target, 'left', 'bottom');\n\t        edge.BL = position_1.calculatePosition(target, 'right', 'bottom');\n\t    }\n\t    function setPosition(eStatus, pos, elementRect) {\n\t        eStatus.TL = { top: pos.position.top + pos.offsetY, left: pos.position.left + pos.offsetX };\n\t        eStatus.TR = { top: eStatus.TL.top, left: eStatus.TL.left + elementRect.width };\n\t        eStatus.BL = { top: eStatus.TL.top + elementRect.height,\n\t            left: eStatus.TL.left };\n\t        eStatus.BR = { top: eStatus.TL.top + elementRect.height,\n\t            left: eStatus.TL.left + elementRect.width };\n\t    }\n\t    function leftCollideCheck(left, right) {\n\t        var leftSide = false;\n\t        var rightSide = false;\n\t        if (((left - getBodyScrollLeft()) < ContainerLeft())) {\n\t            leftSide = true;\n\t        }\n\t        if (right > ContainerRight()) {\n\t            rightSide = true;\n\t        }\n\t        return { leftSide: leftSide, rightSide: rightSide };\n\t    }\n\t    function leftFlip(target, edge, tEdge, pos, elementRect, deepCheck) {\n\t        var collideSide = leftCollideCheck(edge.TL.left, edge.TR.left);\n\t        if ((tEdge.TL.left - getBodyScrollLeft()) <= ContainerLeft()) {\n\t            collideSide.leftSide = false;\n\t        }\n\t        if (tEdge.TR.left >= ContainerRight()) {\n\t            collideSide.rightSide = false;\n\t        }\n\t        if ((collideSide.leftSide && !collideSide.rightSide) || (!collideSide.leftSide && collideSide.rightSide)) {\n\t            if (pos.posX === 'right') {\n\t                pos.posX = 'left';\n\t            }\n\t            else {\n\t                pos.posX = 'right';\n\t            }\n\t            pos.offsetX = pos.offsetX + elementRect.width;\n\t            pos.offsetX = -1 * pos.offsetX;\n\t            pos.position = position_1.calculatePosition(target, pos.posX, pos.posY);\n\t            setPosition(edge, pos, elementRect);\n\t            if (deepCheck) {\n\t                leftFlip(target, edge, tEdge, pos, elementRect, false);\n\t            }\n\t        }\n\t    }\n\t    function topFlip(target, edge, tEdge, pos, elementRect, deepCheck) {\n\t        var collideSide = topCollideCheck(edge.TL.top, edge.BL.top);\n\t        if ((tEdge.TL.top - getBodyScrollTop()) <= ContainerTop()) {\n\t            collideSide.topSide = false;\n\t        }\n\t        if (tEdge.BL.top >= ContainerBottom()) {\n\t            collideSide.bottomSide = false;\n\t        }\n\t        if ((collideSide.topSide && !collideSide.bottomSide) || (!collideSide.topSide && collideSide.bottomSide)) {\n\t            if (pos.posY === 'top') {\n\t                pos.posY = 'bottom';\n\t            }\n\t            else {\n\t                pos.posY = 'top';\n\t            }\n\t            pos.offsetY = pos.offsetY + elementRect.height;\n\t            pos.offsetY = -1 * pos.offsetY;\n\t            pos.position = position_1.calculatePosition(target, pos.posX, pos.posY);\n\t            setPosition(edge, pos, elementRect);\n\t            if (deepCheck) {\n\t                topFlip(target, edge, tEdge, pos, elementRect, false);\n\t            }\n\t        }\n\t    }\n\t    function topCollideCheck(top, bottom) {\n\t        var topSide = false;\n\t        var bottomSide = false;\n\t        if ((top - getBodyScrollTop()) < ContainerTop()) {\n\t            topSide = true;\n\t        }\n\t        if (bottom > ContainerBottom()) {\n\t            bottomSide = true;\n\t        }\n\t        return { topSide: topSide, bottomSide: bottomSide };\n\t    }\n\t    function getTargetContainerWidth() {\n\t        return targetContainer.getBoundingClientRect().width;\n\t    }\n\t    function getTargetContainerHeight() {\n\t        return targetContainer.getBoundingClientRect().height;\n\t    }\n\t    function getTargetContainerLeft() {\n\t        return targetContainer.getBoundingClientRect().left;\n\t    }\n\t    function getTargetContainerTop() {\n\t        return targetContainer.getBoundingClientRect().top;\n\t    }\n\t    function ContainerTop() {\n\t        if (targetContainer) {\n\t            return getTargetContainerTop();\n\t        }\n\t        return 0;\n\t    }\n\t    function ContainerLeft() {\n\t        if (targetContainer) {\n\t            return getTargetContainerLeft();\n\t        }\n\t        return 0;\n\t    }\n\t    function ContainerRight() {\n\t        if (targetContainer) {\n\t            return (getBodyScrollLeft() + getTargetContainerLeft() + getTargetContainerWidth());\n\t        }\n\t        return (getBodyScrollLeft() + getViewPortWidth());\n\t    }\n\t    function ContainerBottom() {\n\t        if (targetContainer) {\n\t            return (getBodyScrollTop() + getTargetContainerTop() + getTargetContainerHeight());\n\t        }\n\t        return (getBodyScrollTop() + getViewPortHeight());\n\t    }\n\t    function getBodyScrollTop() {\n\t        return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;\n\t    }\n\t    function getBodyScrollLeft() {\n\t        return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;\n\t    }\n\t    function getViewPortHeight() {\n\t        return window.innerHeight;\n\t    }\n\t    function getViewPortWidth() {\n\t        return window.innerWidth;\n\t    }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, position_1, collision_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(position_1);\n\t    __export(collision_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, dialog_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(dialog_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(2), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6, popup_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ButtonProps = (function (_super) {\n\t        __extends(ButtonProps, _super);\n\t        function ButtonProps() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ButtonProps;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], ButtonProps.prototype, \"buttonModel\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], ButtonProps.prototype, \"click\", void 0);\n\t    exports.ButtonProps = ButtonProps;\n\t    var ROOT = 'e-dialog';\n\t    var RTL = 'e-rtl';\n\t    var DLG_HEADER_CONTENT = 'e-dlg-header-content';\n\t    var DLG_HEADER = 'e-dlg-header';\n\t    var DLG_FOOTER_CONTENT = 'e-footer-content';\n\t    var MODAL_DLG = 'e-dlg-modal';\n\t    var DLG_CONTENT = 'e-dlg-content';\n\t    var DLG_CLOSE_ICON = 'e-icon-dlg-close';\n\t    var DLG_OVERLAY = 'e-dlg-overlay';\n\t    var DLG_CONTAINER = 'e-dlg-container';\n\t    var SCROLL_DISABLED = 'e-scroll-disabled';\n\t    var DLG_PRIMARY_BUTTON = 'e-primary';\n\t    var ICON = 'e-icons';\n\t    var POPUP_ROOT = 'e-popup';\n\t    var DEVICE = 'e-device';\n\t    var FULLSCREEN = 'e-dlg-fullscreen';\n\t    var DLG_CLOSE_ICON_BTN = 'e-dlg-closeicon-btn';\n\t    var DLG_HIDE = 'e-popup-close';\n\t    var DLG_SHOW = 'e-popup-open';\n\t    var Dialog = (function (_super) {\n\t        __extends(Dialog, _super);\n\t        function Dialog(options, element) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        Dialog.prototype.render = function () {\n\t            this.initialize();\n\t            this.initRender();\n\t            this.wireEvents();\n\t        };\n\t        Dialog.prototype.preRender = function () {\n\t            var _this = this;\n\t            this.closeIconClickEventHandler = function (event) {\n\t                _this.hide();\n\t                _this.closedFrom = event;\n\t            };\n\t            this.dlgOverlayClickEventHandler = function (event) {\n\t                _this.trigger('overlayClick', event);\n\t            };\n\t        };\n\t        ;\n\t        Dialog.prototype.keyDown = function (event) {\n\t            var _this = this;\n\t            if (event.keyCode === 9) {\n\t                if (this.isModal) {\n\t                    if (document.activeElement === this.btnObj.element && !event.shiftKey) {\n\t                        event.preventDefault();\n\t                        this.focusableElements(this.element).focus();\n\t                    }\n\t                    if (document.activeElement === this.focusableElements(this.element) && event.shiftKey) {\n\t                        event.preventDefault();\n\t                        this.btnObj.element.focus();\n\t                    }\n\t                }\n\t            }\n\t            var element = document.activeElement;\n\t            var isTagName = (['input', 'textarea'].indexOf(element.tagName.toLowerCase()) > -1);\n\t            var isContentEdit = false;\n\t            if (!isTagName) {\n\t                isContentEdit = element.hasAttribute('contenteditable') && element.getAttribute('contenteditable') === 'true';\n\t            }\n\t            if (event.keyCode === 27 && this.closeOnEscape) {\n\t                this.hide();\n\t                this.closedFrom = event;\n\t            }\n\t            if ((event.keyCode === 13 && element.tagName.toLowerCase() === 'button' &&\n\t                element.classList.contains(DLG_PRIMARY_BUTTON) && !ej2_base_4.isNullOrUndefined(this.primaryButtonEle)) ||\n\t                (event.keyCode === 13 && !event.ctrlKey && element.tagName.toLowerCase() !== 'textarea' &&\n\t                    isTagName && !ej2_base_4.isNullOrUndefined(this.primaryButtonEle)) ||\n\t                (event.keyCode === 13 && event.ctrlKey && (element.tagName.toLowerCase() === 'textarea' ||\n\t                    isContentEdit)) && !ej2_base_4.isNullOrUndefined(this.primaryButtonEle)) {\n\t                var buttonIndex_1;\n\t                var firstPrimary = this.buttons.some(function (data, index) {\n\t                    buttonIndex_1 = index;\n\t                    var buttonModel = data.buttonModel;\n\t                    return !ej2_base_4.isNullOrUndefined(buttonModel) && buttonModel.isPrimary === true;\n\t                });\n\t                if (firstPrimary && typeof (this.buttons[buttonIndex_1].click) === 'function') {\n\t                    setTimeout(function () {\n\t                        _this.buttons[buttonIndex_1].click.call(_this, event);\n\t                    });\n\t                }\n\t            }\n\t        };\n\t        Dialog.prototype.initialize = function () {\n\t            if (!ej2_base_4.isNullOrUndefined(this.target)) {\n\t                this.targetEle = ((typeof this.target) === 'string') ?\n\t                    document.querySelector(this.target) : this.target;\n\t            }\n\t            ej2_base_2.addClass([this.element], ROOT);\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_2.addClass([this.element], DEVICE);\n\t            }\n\t            this.setCSSClass();\n\t            this.setMaxHeight();\n\t        };\n\t        Dialog.prototype.initRender = function () {\n\t            var _this = this;\n\t            ej2_base_2.attributes(this.element, { role: 'dialog' });\n\t            if (ej2_base_4.isNullOrUndefined(this.zIndex)) {\n\t                this.getZindexPartial();\n\t            }\n\t            if (this.header !== '') {\n\t                this.setHeader();\n\t            }\n\t            if (this.showCloseIcon) {\n\t                this.renderCloseIcon();\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(this.content) && this.content !== '') {\n\t                this.setContent();\n\t            }\n\t            else if (this.element.hasChildNodes()) {\n\t                this.contentEle = this.element;\n\t            }\n\t            if (this.footerTemplate !== '') {\n\t                this.setFooterTemplate();\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(this.buttons[0].buttonModel) && this.footerTemplate === '') {\n\t                this.setButton();\n\t            }\n\t            if (this.allowDragging && (!this.isModal) && (!ej2_base_4.isNullOrUndefined(this.headerContent))) {\n\t                this.setAllowDragging();\n\t            }\n\t            ej2_base_2.attributes(this.element, { 'aria-modal': (this.isModal ? 'true' : 'false') });\n\t            if (this.isModal) {\n\t                this.setIsModal();\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(this.targetEle)) {\n\t                this.isModal ? this.targetEle.appendChild(this.dlgContainer) : this.targetEle.appendChild(this.element);\n\t            }\n\t            this.popupObj = new popup_1.Popup(this.element, {\n\t                height: this.height,\n\t                width: this.width,\n\t                zIndex: this.zIndex,\n\t                relateTo: this.target,\n\t                actionOnScroll: 'none',\n\t                open: function () {\n\t                    _this.focusContent();\n\t                    _this.trigger('open');\n\t                },\n\t                close: function (event) {\n\t                    _this.unBindEvent(_this.element);\n\t                    if (_this.isModal) {\n\t                        _this.dlgContainer.style.display = 'none';\n\t                    }\n\t                    _this.trigger('close', _this.closedFrom);\n\t                    _this.closedFrom = {};\n\t                    if (!ej2_base_4.isNullOrUndefined(_this.storeActiveElement)) {\n\t                        _this.storeActiveElement.focus();\n\t                    }\n\t                }\n\t            });\n\t            this.positionChange();\n\t            this.setEnableRTL();\n\t            ej2_base_2.addClass([this.element], DLG_HIDE);\n\t            if (this.visible) {\n\t                this.show();\n\t            }\n\t            else {\n\t                if (this.isModal) {\n\t                    this.dlgOverlay.style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Dialog.prototype.positionChange = function () {\n\t            if (!this.isModal) {\n\t                this.popupObj.setProperties({\n\t                    position: {\n\t                        X: this.position.X, Y: this.position.Y\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                this.dlgContainer.classList.add('e-dlg-' + this.position.X + '-' + this.position.Y);\n\t            }\n\t        };\n\t        Dialog.prototype.getZindexPartial = function () {\n\t            var dialogParent = this.element.parentElement;\n\t            var parentZindex = [];\n\t            while (dialogParent) {\n\t                if (dialogParent.tagName !== 'BODY') {\n\t                    var index = document.defaultView.getComputedStyle(dialogParent, null).getPropertyValue('z-index');\n\t                    var position = document.defaultView.getComputedStyle(dialogParent, null).getPropertyValue('position');\n\t                    if (index !== 'auto' && position !== 'static') {\n\t                        parentZindex.push(index);\n\t                    }\n\t                    dialogParent = dialogParent.parentElement;\n\t                }\n\t                else {\n\t                    break;\n\t                }\n\t            }\n\t            var childrenZindex = [];\n\t            for (var i = 0; i < document.body.children.length; i++) {\n\t                if (!this.element.isEqualNode(document.body.children[i])) {\n\t                    var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('z-index');\n\t                    var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('position');\n\t                    if (index !== 'auto' && position !== 'static') {\n\t                        childrenZindex.push(index);\n\t                    }\n\t                }\n\t            }\n\t            childrenZindex.push('999');\n\t            var finalValue = parentZindex.concat(childrenZindex);\n\t            this.zIndex = Math.max.apply(Math, finalValue) + 1;\n\t        };\n\t        ;\n\t        Dialog.prototype.setAllowDragging = function () {\n\t            var _this = this;\n\t            var handleContent = '.' + DLG_HEADER_CONTENT;\n\t            this.dragObj = new ej2_base_6.Draggable(this.element, {\n\t                clone: false,\n\t                handle: handleContent,\n\t                dragStart: function (event) {\n\t                    _this.trigger('dragStart', event);\n\t                },\n\t                dragStop: function (event) {\n\t                    _this.trigger('dragStop', event);\n\t                },\n\t                drag: function (event) {\n\t                    _this.trigger('drag', event);\n\t                }\n\t            });\n\t            if (!ej2_base_4.isNullOrUndefined(this.targetEle)) {\n\t                this.dragObj.dragArea = this.targetEle;\n\t            }\n\t        };\n\t        Dialog.prototype.setButton = function () {\n\t            this.buttonContent = [];\n\t            var primaryBtnFlag = true;\n\t            for (var i = 0; i < this.buttons.length; i++) {\n\t                var btn = ej2_base_2.createElement('button', { attrs: { type: 'button' } });\n\t                this.buttonContent.push(btn.outerHTML);\n\t            }\n\t            this.setFooterTemplate();\n\t            for (var i = 0; i < this.buttons.length; i++) {\n\t                this.btnObj = new ej2_buttons_1.Button(this.buttons[i].buttonModel);\n\t                if (typeof (this.buttons[i].click) === 'function') {\n\t                    ej2_base_5.EventHandler.add(this.ftrTemplateContent.children[i], 'click', this.buttons[i].click, this);\n\t                }\n\t                this.btnObj.appendTo(this.ftrTemplateContent.children[i]);\n\t                this.primaryButtonEle = this.element.getElementsByClassName('e-primary')[0];\n\t            }\n\t        };\n\t        Dialog.prototype.setContent = function () {\n\t            ej2_base_2.attributes(this.element, { 'aria-describedby': this.element.id + '_dialog-content' });\n\t            this.contentEle = ej2_base_2.createElement('div', { className: DLG_CONTENT, id: this.element.id + '_dialog-content' });\n\t            typeof (this.content) === 'string' ? this.contentEle.innerHTML = this.content : this.contentEle.appendChild(this.content);\n\t            !ej2_base_4.isNullOrUndefined(this.headerContent) ? this.element.insertBefore(this.contentEle, this.element.children[1]) :\n\t                this.element.insertBefore(this.contentEle, this.element.children[0]);\n\t            if (this.height === 'auto') {\n\t                this.setMaxHeight();\n\t            }\n\t        };\n\t        Dialog.prototype.setMaxHeight = function () {\n\t            var display = this.element.style.display;\n\t            this.element.style.display = 'none';\n\t            this.element.style.maxHeight = (!ej2_base_4.isNullOrUndefined(this.target)) ?\n\t                (this.targetEle.offsetHeight - 20) + 'px' : (window.innerHeight - 20) + 'px';\n\t            this.element.style.display = display;\n\t        };\n\t        Dialog.prototype.setEnableRTL = function () {\n\t            this.enableRtl ? ej2_base_2.addClass([this.element], RTL) : ej2_base_2.removeClass([this.element], RTL);\n\t        };\n\t        Dialog.prototype.setHeader = function () {\n\t            this.headerEle = ej2_base_2.createElement('div', { id: this.element.id + '_title', className: DLG_HEADER, innerHTML: this.header });\n\t            ej2_base_2.attributes(this.element, { 'aria-labelledby': this.element.id + '_title' });\n\t            this.createHeaderContent();\n\t            this.headerContent.appendChild(this.headerEle);\n\t            this.element.insertBefore(this.headerContent, this.element.children[0]);\n\t        };\n\t        Dialog.prototype.setFooterTemplate = function () {\n\t            this.ftrTemplateContent = ej2_base_2.createElement('div', {\n\t                className: DLG_FOOTER_CONTENT,\n\t                innerHTML: (this.footerTemplate !== '' ? this.footerTemplate : this.buttonContent.join(''))\n\t            });\n\t            this.element.appendChild(this.ftrTemplateContent);\n\t        };\n\t        Dialog.prototype.createHeaderContent = function () {\n\t            if (ej2_base_4.isNullOrUndefined(this.headerContent)) {\n\t                this.headerContent = ej2_base_2.createElement('div', { className: DLG_HEADER_CONTENT });\n\t            }\n\t        };\n\t        Dialog.prototype.renderCloseIcon = function () {\n\t            this.closeIcon = ej2_base_2.createElement('button', { className: DLG_CLOSE_ICON_BTN, attrs: { type: 'button' } });\n\t            this.closeIconBtnObj = new ej2_buttons_1.Button({ cssClass: 'e-flat', iconCss: DLG_CLOSE_ICON + ' ' + ICON });\n\t            this.closeIconTitle();\n\t            if (!ej2_base_4.isNullOrUndefined(this.headerContent)) {\n\t                ej2_base_2.prepend([this.closeIcon], this.headerContent);\n\t            }\n\t            else {\n\t                this.createHeaderContent();\n\t                ej2_base_2.prepend([this.closeIcon], this.headerContent);\n\t                this.element.insertBefore(this.headerContent, this.element.children[0]);\n\t            }\n\t            this.closeIconBtnObj.appendTo(this.closeIcon);\n\t        };\n\t        Dialog.prototype.closeIconTitle = function () {\n\t            if (this.locale !== '') {\n\t                var l10n = new ej2_base_1.L10n('Dialog', { locale: 'Close' });\n\t                l10n.setLocale(this.locale);\n\t                var closeIconTitle = l10n.getConstant('Close');\n\t                this.closeIcon.setAttribute('title', closeIconTitle);\n\t            }\n\t            else {\n\t                this.closeIcon.setAttribute('title', 'Close');\n\t            }\n\t        };\n\t        Dialog.prototype.setCSSClass = function (oldCSSClass) {\n\t            if (this.cssClass) {\n\t                ej2_base_2.addClass([this.element], this.cssClass.split(' '));\n\t            }\n\t            if (oldCSSClass) {\n\t                ej2_base_2.removeClass([this.element], oldCSSClass.split(' '));\n\t            }\n\t        };\n\t        Dialog.prototype.setIsModal = function () {\n\t            this.dlgContainer = ej2_base_2.createElement('div', { className: DLG_CONTAINER });\n\t            this.element.parentNode.insertBefore(this.dlgContainer, this.element);\n\t            this.dlgContainer.appendChild(this.element);\n\t            ej2_base_2.addClass([this.element], MODAL_DLG);\n\t            this.dlgOverlay = ej2_base_2.createElement('div', { className: DLG_OVERLAY });\n\t            this.dlgOverlay.style.zIndex = (this.zIndex - 1).toString();\n\t            this.dlgContainer.appendChild(this.dlgOverlay);\n\t        };\n\t        Dialog.prototype.getValidFocusNode = function (items) {\n\t            var node;\n\t            for (var u = 0; u < items.length; u++) {\n\t                node = items[u];\n\t                if ((node.clientHeight > 0 || (node.tagName.toLowerCase() === 'a' && node.hasAttribute('href'))) && node.tabIndex > -1 &&\n\t                    !node.disabled && !this.disableElement(node, '[disabled],[aria-disabled=\"true\"],[type=\"hidden\"]')) {\n\t                    return node;\n\t                }\n\t            }\n\t            return node;\n\t        };\n\t        Dialog.prototype.focusableElements = function (content) {\n\t            if (!ej2_base_4.isNullOrUndefined(content)) {\n\t                var value = 'input,select,textarea,button,a,[contenteditable=\"true\"],[tabindex]';\n\t                var items = content.querySelectorAll(value);\n\t                return this.getValidFocusNode(items);\n\t            }\n\t            return null;\n\t        };\n\t        Dialog.prototype.getAutoFocusNode = function (container) {\n\t            var node = container.querySelector('.' + DLG_CLOSE_ICON_BTN);\n\t            var value = '[autofocus]';\n\t            var items = container.querySelectorAll(value);\n\t            var validNode = this.getValidFocusNode(items);\n\t            if (!ej2_base_4.isNullOrUndefined(validNode)) {\n\t                node = validNode;\n\t            }\n\t            else {\n\t                validNode = this.focusableElements(this.contentEle);\n\t                if (!ej2_base_4.isNullOrUndefined(validNode)) {\n\t                    return node = validNode;\n\t                }\n\t                else if (!ej2_base_4.isNullOrUndefined(this.primaryButtonEle)) {\n\t                    return this.element.querySelector('.' + DLG_PRIMARY_BUTTON);\n\t                }\n\t            }\n\t            return node;\n\t        };\n\t        Dialog.prototype.disableElement = function (element, t) {\n\t            var elementMatch = element ? element.matches || element.webkitMatchesSelector || element.msMatchesSelector : null;\n\t            if (elementMatch) {\n\t                for (; element; element = element.parentNode) {\n\t                    if (element instanceof Element && elementMatch.call(element, t)) {\n\t                        return element;\n\t                    }\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Dialog.prototype.focusContent = function () {\n\t            var element = this.getAutoFocusNode(this.element);\n\t            var node = !ej2_base_4.isNullOrUndefined(element) ? element : this.element;\n\t            node.focus();\n\t            this.bindEvent(this.element);\n\t        };\n\t        Dialog.prototype.bindEvent = function (element) {\n\t            ej2_base_5.EventHandler.add(element, 'keydown', this.keyDown, this);\n\t        };\n\t        Dialog.prototype.unBindEvent = function (element) {\n\t            ej2_base_5.EventHandler.remove(element, 'keydown', this.keyDown);\n\t        };\n\t        Dialog.prototype.getModuleName = function () {\n\t            return 'dialog';\n\t        };\n\t        Dialog.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'content':\n\t                        if (!ej2_base_4.isNullOrUndefined(this.content) && this.content !== '') {\n\t                            if (!ej2_base_4.isNullOrUndefined(this.contentEle) && this.contentEle.getAttribute('role') !== 'dialog') {\n\t                                this.contentEle.innerHTML = '';\n\t                                typeof (this.content) === 'string' ?\n\t                                    this.contentEle.innerHTML = this.content : this.contentEle.appendChild(this.content);\n\t                                this.setMaxHeight();\n\t                            }\n\t                            else {\n\t                                this.setContent();\n\t                            }\n\t                        }\n\t                        else if (!ej2_base_4.isNullOrUndefined(this.contentEle)) {\n\t                            this.element.removeChild(this.contentEle);\n\t                        }\n\t                        break;\n\t                    case 'header':\n\t                        if (this.header === '') {\n\t                            ej2_base_2.detach(this.headerEle);\n\t                        }\n\t                        else {\n\t                            this.element.getElementsByClassName(DLG_HEADER).length > 0 ?\n\t                                this.element.getElementsByClassName(DLG_HEADER)[0].innerHTML = this.header\n\t                                : this.setHeader();\n\t                        }\n\t                        break;\n\t                    case 'footerTemplate':\n\t                        this.element.getElementsByClassName(DLG_FOOTER_CONTENT).length > 0 ?\n\t                            this.ftrTemplateContent.innerHTML = this.footerTemplate : this.setFooterTemplate();\n\t                        break;\n\t                    case 'showCloseIcon':\n\t                        if (this.element.getElementsByClassName(DLG_CLOSE_ICON).length > 0) {\n\t                            if (!this.showCloseIcon && this.header === '') {\n\t                                ej2_base_2.detach(this.headerContent);\n\t                            }\n\t                            else if (!this.showCloseIcon) {\n\t                                ej2_base_2.detach(this.closeIcon);\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.renderCloseIcon();\n\t                            this.wireEvents();\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        if (this.showCloseIcon) {\n\t                            this.closeIconTitle();\n\t                        }\n\t                        break;\n\t                    case 'visible':\n\t                        this.visible ? this.show() : this.hide();\n\t                        break;\n\t                    case 'isModal':\n\t                        this.element.setAttribute('aria-modal', this.isModal ? 'true' : 'false');\n\t                        if (this.isModal) {\n\t                            this.setIsModal();\n\t                            this.wireEvents();\n\t                            if (!ej2_base_4.isNullOrUndefined(this.targetEle)) {\n\t                                this.isModal ? this.targetEle.appendChild(this.dlgContainer) : this.targetEle.appendChild(this.element);\n\t                            }\n\t                        }\n\t                        else {\n\t                            ej2_base_2.removeClass([this.element], MODAL_DLG);\n\t                            ej2_base_2.removeClass([document.body], SCROLL_DISABLED);\n\t                            ej2_base_2.detach(this.dlgOverlay);\n\t                            while (this.dlgContainer.firstChild) {\n\t                                this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild, this.dlgContainer);\n\t                            }\n\t                            this.dlgContainer.parentElement.removeChild(this.dlgContainer);\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                        ej2_base_2.setStyleAttribute(this.element, { 'height': ej2_base_4.formatUnit(newProp.height) });\n\t                        break;\n\t                    case 'width':\n\t                        ej2_base_2.setStyleAttribute(this.element, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'zIndex':\n\t                        this.popupObj.zIndex = this.zIndex;\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCSSClass(oldProp.cssClass);\n\t                        break;\n\t                    case 'animationSettings':\n\t                        this.show();\n\t                        break;\n\t                    case 'buttons':\n\t                        if (!ej2_base_4.isNullOrUndefined(this.buttons[0].buttonModel) && this.footerTemplate === '') {\n\t                            if (!ej2_base_4.isNullOrUndefined(this.ftrTemplateContent)) {\n\t                                this.ftrTemplateContent.innerHTML = '';\n\t                            }\n\t                            this.setButton();\n\t                        }\n\t                        break;\n\t                    case 'allowDragging':\n\t                        if (this.allowDragging && (!this.isModal) && (!ej2_base_4.isNullOrUndefined(this.headerContent))) {\n\t                            this.setAllowDragging();\n\t                        }\n\t                        else {\n\t                            this.dragObj.destroy();\n\t                        }\n\t                        break;\n\t                    case 'target':\n\t                        this.popupObj.relateTo = newProp.target;\n\t                        break;\n\t                    case 'position':\n\t                        if (oldProp.position.X === this.position.X && oldProp.position.Y === this.position.Y) {\n\t                            break;\n\t                        }\n\t                        if (this.isModal) {\n\t                            this.dlgContainer.classList.remove('e-dlg-' + oldProp.position.X + '-' + oldProp.position.Y);\n\t                            this.dlgContainer.classList.add('e-dlg-' + this.position.X + '-' + this.position.Y);\n\t                        }\n\t                        else {\n\t                            this.popupObj.position = this.position;\n\t                            break;\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.setEnableRTL();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Dialog.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Dialog.prototype.destroy = function () {\n\t            if (this.element.classList.contains(ROOT)) {\n\t                this.unWireEvents();\n\t                _super.prototype.destroy.call(this);\n\t                var classArray = [\n\t                    ROOT, RTL, MODAL_DLG\n\t                ];\n\t                ej2_base_2.removeClass([this.element, this.element], classArray);\n\t                if (this.popupObj.element.classList.contains(POPUP_ROOT)) {\n\t                    this.popupObj.destroy();\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(this.btnObj)) {\n\t                    this.btnObj.destroy();\n\t                }\n\t                if (this.isModal) {\n\t                    ej2_base_2.detach(this.dlgOverlay);\n\t                    this.dlgContainer.parentNode.insertBefore(this.element, this.dlgContainer);\n\t                    ej2_base_2.detach(this.dlgContainer);\n\t                }\n\t                this.element.innerHTML = '';\n\t            }\n\t        };\n\t        Dialog.prototype.wireEvents = function () {\n\t            if (this.showCloseIcon) {\n\t                ej2_base_5.EventHandler.add(this.closeIcon, 'click', this.closeIconClickEventHandler, this);\n\t            }\n\t            if (this.isModal) {\n\t                ej2_base_5.EventHandler.add(this.dlgOverlay, 'click', this.dlgOverlayClickEventHandler, this);\n\t            }\n\t        };\n\t        Dialog.prototype.unWireEvents = function () {\n\t            if (this.showCloseIcon) {\n\t                ej2_base_5.EventHandler.remove(this.closeIcon, 'click', this.closeIconClickEventHandler);\n\t            }\n\t            if (this.isModal) {\n\t                ej2_base_5.EventHandler.remove(this.dlgOverlay, 'click', this.dlgOverlayClickEventHandler);\n\t            }\n\t            if (!ej2_base_4.isNullOrUndefined(this.buttons[0].buttonModel)) {\n\t                for (var i = 0; i < this.buttons.length; i++) {\n\t                    if (typeof (this.buttons[i].click) === 'function') {\n\t                        ej2_base_5.EventHandler.remove(this.ftrTemplateContent.children[i], 'click', this.buttons[i].click);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Dialog.prototype.refreshPosition = function () {\n\t            this.popupObj.refreshPosition();\n\t        };\n\t        Dialog.prototype.show = function (isFullScreen) {\n\t            if (!this.element.classList.contains(DLG_SHOW) || (!ej2_base_4.isNullOrUndefined(isFullScreen))) {\n\t                if (!ej2_base_4.isNullOrUndefined(isFullScreen)) {\n\t                    this.fullScreen(isFullScreen);\n\t                }\n\t                this.storeActiveElement = document.activeElement;\n\t                this.element.tabIndex = -1;\n\t                this.trigger('beforeOpen');\n\t                if (this.isModal && (!ej2_base_4.isNullOrUndefined(this.dlgOverlay))) {\n\t                    this.dlgOverlay.style.display = 'block';\n\t                    this.dlgContainer.style.display = 'flex';\n\t                    if (!ej2_base_4.isNullOrUndefined(this.targetEle)) {\n\t                        if (this.targetEle === document.body) {\n\t                            this.dlgContainer.style.position = 'fixed';\n\t                        }\n\t                        else {\n\t                            this.dlgContainer.style.position = 'absolute';\n\t                        }\n\t                        this.dlgOverlay.style.position = 'absolute';\n\t                        this.element.style.position = 'relative';\n\t                        ej2_base_2.addClass([this.targetEle], SCROLL_DISABLED);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.addClass([document.body], SCROLL_DISABLED);\n\t                    }\n\t                }\n\t                var openAnimation = {\n\t                    name: this.animationSettings.effect + 'In',\n\t                    duration: this.animationSettings.duration,\n\t                    delay: this.animationSettings.delay\n\t                };\n\t                this.animationSettings.effect === 'None' ? this.popupObj.show() : this.popupObj.show(openAnimation);\n\t                this.dialogOpen = true;\n\t                this.visible = true;\n\t            }\n\t        };\n\t        Dialog.prototype.hide = function () {\n\t            this.trigger('beforeClose');\n\t            if (this.isModal) {\n\t                this.dlgOverlay.style.display = 'none';\n\t                !ej2_base_4.isNullOrUndefined(this.targetEle) ? ej2_base_2.removeClass([this.targetEle], SCROLL_DISABLED) :\n\t                    ej2_base_2.removeClass([document.body], SCROLL_DISABLED);\n\t            }\n\t            var closeAnimation = {\n\t                name: this.animationSettings.effect + 'Out',\n\t                duration: this.animationSettings.duration,\n\t                delay: this.animationSettings.delay\n\t            };\n\t            this.animationSettings.effect === 'None' ? this.popupObj.hide() : this.popupObj.hide(closeAnimation);\n\t            this.dialogOpen = false;\n\t            this.visible = false;\n\t        };\n\t        Dialog.prototype.fullScreen = function (args) {\n\t            var top = this.element.offsetTop;\n\t            var left = this.element.offsetLeft;\n\t            if (args) {\n\t                ej2_base_2.addClass([this.element], FULLSCREEN);\n\t                var display = this.element.style.display;\n\t                this.element.style.display = 'none';\n\t                this.element.style.maxHeight = (!ej2_base_4.isNullOrUndefined(this.target)) ?\n\t                    (this.targetEle.offsetHeight) + 'px' : (window.innerHeight) + 'px';\n\t                this.element.style.display = display;\n\t                ej2_base_2.addClass([document.body], SCROLL_DISABLED);\n\t                if (this.allowDragging && !ej2_base_4.isNullOrUndefined(this.dragObj)) {\n\t                    this.dragObj.destroy();\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.removeClass([this.element], FULLSCREEN);\n\t                ej2_base_2.removeClass([document.body], SCROLL_DISABLED);\n\t                if (this.allowDragging && (!this.isModal) && (!ej2_base_4.isNullOrUndefined(this.headerContent))) {\n\t                    this.setAllowDragging();\n\t                }\n\t            }\n\t            return args;\n\t        };\n\t        return Dialog;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Dialog.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Dialog.prototype, \"showCloseIcon\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Dialog.prototype, \"isModal\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Dialog.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Dialog.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Dialog.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Dialog.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Dialog.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], Dialog.prototype, \"zIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Dialog.prototype, \"target\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Dialog.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Dialog.prototype, \"allowDragging\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Collection([{}], ButtonProps)\n\t    ], Dialog.prototype, \"buttons\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Dialog.prototype, \"closeOnEscape\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property({ effect: 'Fade', duration: 400, delay: 0 })\n\t    ], Dialog.prototype, \"animationSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property({ X: 'center', Y: 'center' })\n\t    ], Dialog.prototype, \"position\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Dialog.prototype, \"locale\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"open\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"beforeOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"close\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"beforeClose\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"dragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"dragStop\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"drag\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Dialog.prototype, \"overlayClick\", void 0);\n\t    Dialog = __decorate([\n\t        ej2_base_3.NotifyPropertyChanges\n\t    ], Dialog);\n\t    exports.Dialog = Dialog;\n\t    exports.dialogBuilder = ej2_base_1.CreateBuilder(Dialog);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, tooltip_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(tooltip_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(2), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, popup_1, position_1, collision_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var TOUCHEND_HIDE_DELAY = 1500;\n\t    var TAPHOLD_THRESHOLD = 500;\n\t    var SHOW_POINTER_TIP_GAP = 0;\n\t    var HIDE_POINTER_TIP_GAP = 8;\n\t    var MOUSE_TRAIL_GAP = 2;\n\t    var POINTER_ADJUST = 2;\n\t    var ROOT = 'e-tooltip';\n\t    var RTL = 'e-rtl';\n\t    var DEVICE = 'e-bigger';\n\t    var ICON = 'e-icons';\n\t    var CLOSE = 'e-tooltip-close';\n\t    var TOOLTIP_WRAP = 'e-tooltip-wrap';\n\t    var CONTENT = 'e-tip-content';\n\t    var ARROW_TIP = 'e-arrow-tip';\n\t    var ARROW_TIP_OUTER = 'e-arrow-tip-outer';\n\t    var ARROW_TIP_INNER = 'e-arrow-tip-inner';\n\t    var TIP_BOTTOM = 'e-tip-bottom';\n\t    var TIP_TOP = 'e-tip-top';\n\t    var TIP_LEFT = 'e-tip-left';\n\t    var TIP_RIGHT = 'e-tip-right';\n\t    var POPUP_ROOT = 'e-popup';\n\t    var POPUP_OPEN = 'e-popup-open';\n\t    var POPUP_CLOSE = 'e-popup-close';\n\t    var Animation = (function (_super) {\n\t        __extends(Animation, _super);\n\t        function Animation() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Animation;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property({ effect: 'FadeIn', duration: 150, delay: 0 })\n\t    ], Animation.prototype, \"open\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property({ effect: 'FadeOut', duration: 150, delay: 0 })\n\t    ], Animation.prototype, \"close\", void 0);\n\t    exports.Animation = Animation;\n\t    var Tooltip = (function (_super) {\n\t        __extends(Tooltip, _super);\n\t        function Tooltip(options, element) {\n\t            return _super.call(this, options, element) || this;\n\t        }\n\t        Tooltip.prototype.initialize = function () {\n\t            this.formatPosition();\n\t            ej2_base_4.addClass([this.element], ROOT);\n\t        };\n\t        Tooltip.prototype.formatPosition = function () {\n\t            if (this.position.indexOf('top') === 0 || this.position.indexOf('bottom') === 0) {\n\t                _a = this.position.split(' '), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];\n\t            }\n\t            else {\n\t                _b = this.position.split(' '), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];\n\t            }\n\t            var _a, _b;\n\t        };\n\t        Tooltip.prototype.renderArrow = function () {\n\t            this.setTipClass(this.position);\n\t            var tip = ej2_base_4.createElement('div', { className: ARROW_TIP + ' ' + this.tipClass });\n\t            tip.appendChild(ej2_base_4.createElement('div', { className: ARROW_TIP_OUTER + ' ' + this.tipClass }));\n\t            tip.appendChild(ej2_base_4.createElement('div', { className: ARROW_TIP_INNER + ' ' + this.tipClass }));\n\t            this.tooltipEle.appendChild(tip);\n\t        };\n\t        Tooltip.prototype.setTipClass = function (position) {\n\t            if (position.indexOf('right') === 0) {\n\t                this.tipClass = TIP_LEFT;\n\t            }\n\t            else if (position.indexOf('bottom') === 0) {\n\t                this.tipClass = TIP_TOP;\n\t            }\n\t            else if (position.indexOf('left') === 0) {\n\t                this.tipClass = TIP_RIGHT;\n\t            }\n\t            else {\n\t                this.tipClass = TIP_BOTTOM;\n\t            }\n\t        };\n\t        Tooltip.prototype.renderPopup = function (target) {\n\t            var elePos = this.mouseTrail ? { top: 0, left: 0 } : this.getTooltipPosition(target);\n\t            this.popupObj = new popup_1.Popup(this.tooltipEle, {\n\t                height: this.height,\n\t                width: this.width,\n\t                position: {\n\t                    X: elePos.left,\n\t                    Y: elePos.top\n\t                },\n\t                enableRtl: this.enableRtl,\n\t                open: this.openPopupHandler.bind(this),\n\t                close: this.closePopupHandler.bind(this)\n\t            });\n\t        };\n\t        Tooltip.prototype.getTooltipPosition = function (target) {\n\t            var pos = position_1.calculatePosition(target, this.tooltipPositionX, this.tooltipPositionY);\n\t            var offsetPos = this.calculateTooltipOffset(this.position);\n\t            var elePos = this.collisionFlipFit(target, pos.left + offsetPos.left, pos.top + offsetPos.top);\n\t            return elePos;\n\t        };\n\t        Tooltip.prototype.reposition = function (target) {\n\t            var elePos = this.getTooltipPosition(target);\n\t            this.popupObj.position = { X: elePos.left, Y: elePos.top };\n\t            this.popupObj.dataBind();\n\t        };\n\t        Tooltip.prototype.openPopupHandler = function () {\n\t            this.trigger('afterOpen', this.tooltipEventArgs);\n\t        };\n\t        Tooltip.prototype.closePopupHandler = function () {\n\t            this.clear();\n\t            this.trigger('afterClose', this.tooltipEventArgs);\n\t        };\n\t        Tooltip.prototype.calculateTooltipOffset = function (position) {\n\t            var pos = { top: 0, left: 0 };\n\t            var tooltipEleWidth = this.tooltipEle.offsetWidth;\n\t            var tooltipEleHeight = this.tooltipEle.offsetHeight;\n\t            var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\n\t            var tipWidth = arrowEle ? arrowEle.offsetWidth : 0;\n\t            var tipHeight = arrowEle ? arrowEle.offsetHeight : 0;\n\t            var tipAdjust = (this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP);\n\t            var tipHeightAdjust = (tipHeight / 2) + POINTER_ADJUST + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight);\n\t            var tipWidthAdjust = (tipWidth / 2) + POINTER_ADJUST + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);\n\t            if (this.mouseTrail) {\n\t                tipAdjust += MOUSE_TRAIL_GAP;\n\t            }\n\t            switch (position) {\n\t                case 'right top':\n\t                    pos.left += tipWidth + tipAdjust;\n\t                    pos.top -= tooltipEleHeight - tipHeightAdjust;\n\t                    break;\n\t                case 'right center':\n\t                    pos.left += tipWidth + tipAdjust;\n\t                    pos.top -= (tooltipEleHeight / 2);\n\t                    break;\n\t                case 'right bottom':\n\t                    pos.left += tipWidth + tipAdjust;\n\t                    pos.top -= (tipHeightAdjust);\n\t                    break;\n\t                case 'bottom right':\n\t                    pos.top += (tipHeight + tipAdjust);\n\t                    pos.left -= (tipWidthAdjust);\n\t                    break;\n\t                case 'bottom center':\n\t                    pos.top += (tipHeight + tipAdjust);\n\t                    pos.left -= (tooltipEleWidth / 2);\n\t                    break;\n\t                case 'bottom left':\n\t                    pos.top += (tipHeight + tipAdjust);\n\t                    pos.left -= (tooltipEleWidth - tipWidthAdjust);\n\t                    break;\n\t                case 'left bottom':\n\t                    pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\n\t                    pos.top -= (tipHeightAdjust);\n\t                    break;\n\t                case 'left center':\n\t                    pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\n\t                    pos.top -= (tooltipEleHeight / 2);\n\t                    break;\n\t                case 'left top':\n\t                    pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\n\t                    pos.top -= (tooltipEleHeight - tipHeightAdjust);\n\t                    break;\n\t                case 'top left':\n\t                    pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\n\t                    pos.left -= (tooltipEleWidth - tipWidthAdjust);\n\t                    break;\n\t                case 'top right':\n\t                    pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\n\t                    pos.left -= (tipWidthAdjust);\n\t                    break;\n\t                default:\n\t                    pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\n\t                    pos.left -= (tooltipEleWidth / 2);\n\t                    break;\n\t            }\n\t            pos.left += this.offsetX;\n\t            pos.top += this.offsetY;\n\t            return pos;\n\t        };\n\t        Tooltip.prototype.updateTipPosition = function (position) {\n\t            var selEle = this.tooltipEle.querySelectorAll('.' + ARROW_TIP + ',.' + ARROW_TIP_OUTER + ',.' + ARROW_TIP_INNER);\n\t            var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];\n\t            ej2_base_4.removeClass(selEle, removeList);\n\t            this.setTipClass(position);\n\t            ej2_base_4.addClass(selEle, this.tipClass);\n\t        };\n\t        Tooltip.prototype.adjustArrow = function (target, position, tooltipPositionX, tooltipPositionY) {\n\t            if (this.showTipPointer === false) {\n\t                return;\n\t            }\n\t            this.updateTipPosition(position);\n\t            var leftValue;\n\t            var topValue;\n\t            var tooltipWidth = this.tooltipEle.clientWidth;\n\t            var tooltipHeight = this.tooltipEle.clientHeight;\n\t            var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\n\t            var tipWidth = arrowEle.offsetWidth;\n\t            var tipHeight = arrowEle.offsetHeight;\n\t            if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {\n\t                topValue = this.tipClass === TIP_BOTTOM ? '100%' : -(tipHeight) + 'px';\n\t                var tipPosExclude = tooltipPositionX !== 'center' || (tooltipWidth > target.offsetWidth) || this.mouseTrail;\n\t                if ((tipPosExclude && tooltipPositionX === 'left') || (!tipPosExclude && this.tipPointerPosition === 'end')) {\n\t                    leftValue = (tooltipWidth - tipWidth - POINTER_ADJUST) + 'px';\n\t                }\n\t                else if ((tipPosExclude && tooltipPositionX === 'right') || (!tipPosExclude && this.tipPointerPosition === 'start')) {\n\t                    leftValue = POINTER_ADJUST + 'px';\n\t                }\n\t                else {\n\t                    leftValue = ((tooltipWidth / 2) - (tipWidth / 2)) + 'px';\n\t                }\n\t            }\n\t            else {\n\t                leftValue = this.tipClass === TIP_RIGHT ? tooltipWidth + 'px' : -(tipWidth) + 'px';\n\t                var tipPosExclude = tooltipPositionY !== 'center' || (tooltipHeight > target.offsetHeight) || this.mouseTrail;\n\t                if ((tipPosExclude && tooltipPositionY === 'top') || (!tipPosExclude && this.tipPointerPosition === 'end')) {\n\t                    topValue = (tooltipHeight - tipHeight - POINTER_ADJUST) + 'px';\n\t                }\n\t                else if ((tipPosExclude && tooltipPositionY === 'bottom') || (!tipPosExclude && this.tipPointerPosition === 'start')) {\n\t                    topValue = POINTER_ADJUST + 'px';\n\t                }\n\t                else {\n\t                    topValue = ((tooltipHeight / 2) - (tipHeight / 2)) + 'px';\n\t                }\n\t            }\n\t            arrowEle.style.top = topValue;\n\t            arrowEle.style.left = leftValue;\n\t        };\n\t        Tooltip.prototype.renderContent = function (target) {\n\t            var tooltipContent = this.tooltipEle.querySelector('.' + CONTENT);\n\t            if (target && !ej2_base_3.isNullOrUndefined(target.getAttribute('title'))) {\n\t                target.setAttribute('data-content', target.getAttribute('title'));\n\t                target.removeAttribute('title');\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(this.content)) {\n\t                if (typeof (this.content) === 'string') {\n\t                    tooltipContent.innerHTML = this.content;\n\t                }\n\t                else {\n\t                    while (tooltipContent.firstChild) {\n\t                        tooltipContent.removeChild(tooltipContent.firstChild);\n\t                    }\n\t                    tooltipContent.appendChild(this.content);\n\t                }\n\t            }\n\t            else {\n\t                if (target && !ej2_base_3.isNullOrUndefined(target.getAttribute('data-content'))) {\n\t                    tooltipContent.innerHTML = target.getAttribute('data-content');\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.renderCloseIcon = function () {\n\t            if (!this.isSticky) {\n\t                return;\n\t            }\n\t            var tipClose = ej2_base_4.createElement('div', { className: ICON + ' ' + CLOSE });\n\t            this.tooltipEle.appendChild(tipClose);\n\t            ej2_base_2.EventHandler.add(tipClose, ej2_base_2.Browser.touchStartEvent, this.onStickyClose, this);\n\t        };\n\t        Tooltip.prototype.addDescribedBy = function (target, id) {\n\t            var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\n\t            if (describedby.indexOf(id) < 0) {\n\t                describedby.push(id);\n\t            }\n\t            ej2_base_4.attributes(target, { 'aria-describedby': describedby.join(' ').trim(), 'data-tooltip-id': id });\n\t        };\n\t        Tooltip.prototype.removeDescribedBy = function (target) {\n\t            var id = target.getAttribute('data-tooltip-id');\n\t            var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\n\t            var index = describedby.indexOf(id);\n\t            if (index !== -1) {\n\t                describedby.splice(index, 1);\n\t            }\n\t            target.removeAttribute('data-tooltip-id');\n\t            var orgdescribedby = describedby.join(' ').trim();\n\t            if (orgdescribedby) {\n\t                target.setAttribute('aria-describedby', orgdescribedby);\n\t            }\n\t            else {\n\t                target.removeAttribute('aria-describedby');\n\t            }\n\t        };\n\t        Tooltip.prototype.tapHoldHandler = function (evt) {\n\t            clearTimeout(this.autoCloseTimer);\n\t            this.targetHover(evt.originalEvent);\n\t        };\n\t        Tooltip.prototype.touchEndHandler = function (e) {\n\t            var _this = this;\n\t            if (this.isSticky) {\n\t                return;\n\t            }\n\t            var close = function () {\n\t                _this.close();\n\t            };\n\t            this.autoCloseTimer = setTimeout(close, TOUCHEND_HIDE_DELAY);\n\t        };\n\t        Tooltip.prototype.targetClick = function (e) {\n\t            var target;\n\t            if (this.target) {\n\t                target = ej2_base_4.closest(e.target, this.target);\n\t            }\n\t            else {\n\t                target = this.element;\n\t            }\n\t            if (ej2_base_3.isNullOrUndefined(target)) {\n\t                return;\n\t            }\n\t            if (target.getAttribute('data-tooltip-id') === null) {\n\t                this.targetHover(e);\n\t            }\n\t            else if (!this.isSticky) {\n\t                this.hideTooltip(this.animation.close, e, target);\n\t            }\n\t        };\n\t        Tooltip.prototype.targetHover = function (e) {\n\t            var target;\n\t            if (this.target) {\n\t                target = ej2_base_4.closest(e.target, this.target);\n\t            }\n\t            else {\n\t                target = this.element;\n\t            }\n\t            if (ej2_base_3.isNullOrUndefined(target) || target.getAttribute('data-tooltip-id') !== null) {\n\t                return;\n\t            }\n\t            var targetList = [].slice.call(document.querySelectorAll('[data-tooltip-id= ' + this.ctrlId + '_content]'));\n\t            for (var _i = 0, targetList_1 = targetList; _i < targetList_1.length; _i++) {\n\t                var target_1 = targetList_1[_i];\n\t                this.restoreElement(target_1);\n\t            }\n\t            this.showTooltip(target, this.animation.open, e);\n\t            this.wireMouseEvents(e, target);\n\t        };\n\t        Tooltip.prototype.showTooltip = function (target, showAnimation, e) {\n\t            var _this = this;\n\t            clearTimeout(this.showTimer);\n\t            clearTimeout(this.hideTimer);\n\t            this.tooltipEventArgs = e ? { type: e.type, cancel: false, target: target, event: e, element: this.tooltipEle } :\n\t                { type: null, cancel: false, target: target, event: null, element: this.tooltipEle };\n\t            this.trigger('beforeRender', this.tooltipEventArgs);\n\t            if (this.tooltipEventArgs.cancel) {\n\t                this.isHidden = true;\n\t                this.clear();\n\t                return;\n\t            }\n\t            this.isHidden = false;\n\t            if (ej2_base_3.isNullOrUndefined(this.tooltipEle)) {\n\t                this.ctrlId = this.element.getAttribute('id') ? ej2_base_3.getUniqueID(this.element.getAttribute('id')) : ej2_base_3.getUniqueID('tooltip');\n\t                this.tooltipEle = ej2_base_4.createElement('div', {\n\t                    className: TOOLTIP_WRAP + ' ' + POPUP_ROOT, attrs: {\n\t                        role: 'tooltip', 'aria-hidden': 'false', 'id': this.ctrlId + '_content'\n\t                    }, styles: 'width:' + ej2_base_3.formatUnit(this.width) + ';height:' + ej2_base_3.formatUnit(this.height) + ';position:absolute;'\n\t                });\n\t                if (this.cssClass) {\n\t                    ej2_base_4.addClass([this.tooltipEle], this.cssClass);\n\t                }\n\t                if (ej2_base_2.Browser.isDevice) {\n\t                    ej2_base_4.addClass([this.tooltipEle], DEVICE);\n\t                }\n\t                if (this.width !== 'auto') {\n\t                    this.tooltipEle.style.maxWidth = ej2_base_3.formatUnit(this.width);\n\t                }\n\t                this.tooltipEle.appendChild(ej2_base_4.createElement('div', { className: CONTENT }));\n\t                document.body.appendChild(this.tooltipEle);\n\t                this.addDescribedBy(target, this.ctrlId + '_content');\n\t                this.renderContent(target);\n\t                ej2_base_4.addClass([this.tooltipEle], POPUP_OPEN);\n\t                if (this.showTipPointer) {\n\t                    this.renderArrow();\n\t                }\n\t                this.renderCloseIcon();\n\t                this.renderPopup(target);\n\t            }\n\t            else {\n\t                this.adjustArrow(target, this.position, this.tooltipPositionX, this.tooltipPositionY);\n\t                this.addDescribedBy(target, this.ctrlId + '_content');\n\t                this.renderContent(target);\n\t                ej2_base_2.Animation.stop(this.tooltipEle);\n\t                this.reposition(target);\n\t            }\n\t            ej2_base_4.removeClass([this.tooltipEle], POPUP_OPEN);\n\t            ej2_base_4.addClass([this.tooltipEle], POPUP_CLOSE);\n\t            this.tooltipEventArgs = e ? { type: e.type, cancel: false, target: target, event: e, element: this.tooltipEle } :\n\t                { type: null, cancel: false, target: target, event: null, element: this.tooltipEle };\n\t            this.trigger('beforeOpen', this.tooltipEventArgs);\n\t            if (this.tooltipEventArgs.cancel) {\n\t                this.isHidden = true;\n\t                this.clear();\n\t                return;\n\t            }\n\t            var openAnimation = {\n\t                name: showAnimation.effect, duration: showAnimation.duration, delay: showAnimation.delay, timingFunction: 'easeOut'\n\t            };\n\t            if (showAnimation.effect === 'None') {\n\t                openAnimation = undefined;\n\t            }\n\t            if (this.openDelay > 0) {\n\t                var show = function () {\n\t                    if (_this.popupObj) {\n\t                        _this.popupObj.show(openAnimation);\n\t                    }\n\t                };\n\t                this.showTimer = setTimeout(show, this.openDelay);\n\t            }\n\t            else {\n\t                this.popupObj.show(openAnimation);\n\t            }\n\t        };\n\t        Tooltip.prototype.checkCollision = function (target, x, y) {\n\t            var elePos = {\n\t                left: x, top: y, position: this.position,\n\t                horizontal: this.tooltipPositionX, vertical: this.tooltipPositionY\n\t            };\n\t            var affectedPos = collision_1.isCollide(this.tooltipEle, (this.target ? this.element : null), x, y);\n\t            if (affectedPos.length > 0) {\n\t                elePos.horizontal = affectedPos.indexOf('left') >= 0 ? 'right' : affectedPos.indexOf('right') >= 0 ? 'left' :\n\t                    this.tooltipPositionX;\n\t                elePos.vertical = affectedPos.indexOf('top') >= 0 ? 'bottom' : affectedPos.indexOf('bottom') >= 0 ? 'top' :\n\t                    this.tooltipPositionY;\n\t            }\n\t            return elePos;\n\t        };\n\t        Tooltip.prototype.collisionFlipFit = function (target, x, y) {\n\t            var elePos = this.checkCollision(target, x, y);\n\t            var newpos = elePos.position;\n\t            if (this.tooltipPositionY !== elePos.vertical) {\n\t                newpos = ((this.position.indexOf('bottom') === 0 || this.position.indexOf('top') === 0) ?\n\t                    elePos.vertical + ' ' + this.tooltipPositionX : this.tooltipPositionX + ' ' + elePos.vertical);\n\t            }\n\t            if (this.tooltipPositionX !== elePos.horizontal) {\n\t                if (newpos.indexOf('left') === 0) {\n\t                    elePos.vertical = (newpos === 'left top' || newpos === 'left center') ? 'top' : 'bottom';\n\t                    newpos = (elePos.vertical + ' ' + 'left');\n\t                }\n\t                if (newpos.indexOf('right') === 0) {\n\t                    elePos.vertical = (newpos === 'right top' || newpos === 'right center') ? 'top' : 'bottom';\n\t                    newpos = (elePos.vertical + ' ' + 'right');\n\t                }\n\t                elePos.horizontal = this.tooltipPositionX;\n\t            }\n\t            if (elePos.position !== newpos) {\n\t                var pos = position_1.calculatePosition(target, this.tooltipPositionX, elePos.vertical);\n\t                this.adjustArrow(target, newpos, elePos.horizontal, elePos.vertical);\n\t                var offsetPos = this.calculateTooltipOffset(newpos);\n\t                elePos.position = newpos;\n\t                elePos.left = pos.left + offsetPos.left;\n\t                elePos.top = pos.top + offsetPos.top;\n\t            }\n\t            else {\n\t                this.adjustArrow(target, newpos, elePos.horizontal, elePos.vertical);\n\t            }\n\t            var eleOffset = { left: elePos.left, top: elePos.top };\n\t            var left = collision_1.fit(this.tooltipEle, (this.target ? this.element : null), { X: true, Y: false }, eleOffset).left;\n\t            if (this.showTipPointer && (newpos.indexOf('bottom') === 0 || newpos.indexOf('top') === 0)) {\n\t                var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\n\t                var arrowleft = parseInt(arrowEle.style.left, 10) - (left - elePos.left);\n\t                if (arrowleft < 0) {\n\t                    arrowleft = 0;\n\t                }\n\t                else if ((arrowleft + arrowEle.offsetWidth) > this.tooltipEle.clientWidth) {\n\t                    arrowleft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;\n\t                }\n\t                arrowEle.style.left = arrowleft.toString() + 'px';\n\t            }\n\t            eleOffset.left = left;\n\t            return eleOffset;\n\t        };\n\t        Tooltip.prototype.hideTooltip = function (hideAnimation, e, targetElement) {\n\t            var _this = this;\n\t            var target;\n\t            if (e) {\n\t                target = this.target ? (targetElement || e.target) : this.element;\n\t                this.tooltipEventArgs = {\n\t                    type: e.type, cancel: false, target: target, event: e, element: this.tooltipEle\n\t                };\n\t            }\n\t            else {\n\t                target = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\n\t                this.tooltipEventArgs = {\n\t                    type: null, cancel: false, target: target, event: null, element: this.tooltipEle\n\t                };\n\t            }\n\t            if (ej2_base_3.isNullOrUndefined(target)) {\n\t                return;\n\t            }\n\t            this.trigger('beforeClose', this.tooltipEventArgs);\n\t            if (!this.tooltipEventArgs.cancel) {\n\t                this.restoreElement(target);\n\t                this.isHidden = true;\n\t                var closeAnimation_1 = {\n\t                    name: hideAnimation.effect, duration: hideAnimation.duration, delay: hideAnimation.delay, timingFunction: 'easeIn'\n\t                };\n\t                if (hideAnimation.effect === 'None') {\n\t                    closeAnimation_1 = undefined;\n\t                }\n\t                if (this.closeDelay > 0) {\n\t                    var hide = function () {\n\t                        if (_this.popupObj) {\n\t                            _this.popupObj.hide(closeAnimation_1);\n\t                        }\n\t                    };\n\t                    this.hideTimer = setTimeout(hide, this.closeDelay);\n\t                }\n\t                else {\n\t                    this.popupObj.hide(closeAnimation_1);\n\t                }\n\t            }\n\t            else {\n\t                this.isHidden = false;\n\t            }\n\t        };\n\t        Tooltip.prototype.restoreElement = function (target) {\n\t            this.unwireMouseEvents(target);\n\t            if (!ej2_base_3.isNullOrUndefined(target.getAttribute('data-content'))) {\n\t                target.setAttribute('title', target.getAttribute('data-content'));\n\t                target.removeAttribute('data-content');\n\t            }\n\t            this.removeDescribedBy(target);\n\t        };\n\t        Tooltip.prototype.clear = function () {\n\t            if (this.tooltipEle) {\n\t                ej2_base_4.removeClass([this.tooltipEle], POPUP_CLOSE);\n\t                ej2_base_4.addClass([this.tooltipEle], POPUP_OPEN);\n\t            }\n\t            if (this.isHidden) {\n\t                if (this.popupObj) {\n\t                    this.popupObj.destroy();\n\t                }\n\t                if (this.tooltipEle) {\n\t                    ej2_base_4.remove(this.tooltipEle);\n\t                }\n\t                this.tooltipEle = null;\n\t                this.popupObj = null;\n\t            }\n\t        };\n\t        Tooltip.prototype.onMouseOut = function (e) {\n\t            this.hideTooltip(this.animation.close, e);\n\t        };\n\t        Tooltip.prototype.onStickyClose = function (e) {\n\t            this.close();\n\t        };\n\t        Tooltip.prototype.onMouseMove = function (event) {\n\t            var eventPageX = 0;\n\t            var eventPageY = 0;\n\t            if (event.type.indexOf('touch') > -1) {\n\t                event.preventDefault();\n\t                eventPageX = event.touches[0].pageX;\n\t                eventPageY = event.touches[0].pageY;\n\t            }\n\t            else {\n\t                eventPageX = event.pageX;\n\t                eventPageY = event.pageY;\n\t            }\n\t            ej2_base_2.Animation.stop(this.tooltipEle);\n\t            ej2_base_4.removeClass([this.tooltipEle], POPUP_CLOSE);\n\t            ej2_base_4.addClass([this.tooltipEle], POPUP_OPEN);\n\t            this.adjustArrow(event.target, this.position, this.tooltipPositionX, this.tooltipPositionY);\n\t            var pos = this.calculateTooltipOffset(this.position);\n\t            var x = eventPageX + pos.left + this.offsetX;\n\t            var y = eventPageY + pos.top + this.offsetY;\n\t            var elePos = this.checkCollision(event.target, x, y);\n\t            if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {\n\t                var newpos = (this.position.indexOf('bottom') === 0 || this.position.indexOf('top') === 0) ?\n\t                    elePos.vertical + ' ' + elePos.horizontal : elePos.horizontal + ' ' + elePos.vertical;\n\t                elePos.position = newpos;\n\t                this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);\n\t                var colpos = this.calculateTooltipOffset(elePos.position);\n\t                elePos.left = eventPageX + colpos.left + this.offsetX;\n\t                elePos.top = eventPageY + colpos.top + this.offsetY;\n\t            }\n\t            this.tooltipEle.style.left = elePos.left + 'px';\n\t            this.tooltipEle.style.top = elePos.top + 'px';\n\t        };\n\t        Tooltip.prototype.keyDown = function (event) {\n\t            if (this.tooltipEle && event.keyCode === 27) {\n\t                this.close();\n\t            }\n\t        };\n\t        Tooltip.prototype.touchEnd = function (e) {\n\t            if (this.tooltipEle && ej2_base_4.closest(e.target, '.' + ROOT) === null) {\n\t                this.close();\n\t            }\n\t        };\n\t        Tooltip.prototype.scrollHandler = function (e) {\n\t            if (this.tooltipEle) {\n\t                this.close();\n\t            }\n\t        };\n\t        Tooltip.prototype.render = function () {\n\t            this.initialize();\n\t            this.wireEvents(this.opensOn);\n\t        };\n\t        Tooltip.prototype.preRender = function () {\n\t            this.tipClass = TIP_BOTTOM;\n\t            this.tooltipPositionX = 'center';\n\t            this.tooltipPositionY = 'top';\n\t            this.isHidden = true;\n\t        };\n\t        Tooltip.prototype.wireEvents = function (trigger) {\n\t            var triggerList = this.getTriggerList(trigger);\n\t            for (var _i = 0, triggerList_1 = triggerList; _i < triggerList_1.length; _i++) {\n\t                var opensOn = triggerList_1[_i];\n\t                if (opensOn === 'custom') {\n\t                    return;\n\t                }\n\t                if (opensOn === 'focus') {\n\t                    this.wireFocusEvents();\n\t                }\n\t                if (opensOn === 'click') {\n\t                    ej2_base_2.EventHandler.add(this.element, ej2_base_2.Browser.touchStartEvent, this.targetClick, this);\n\t                }\n\t                if (opensOn === 'hover') {\n\t                    if (ej2_base_2.Browser.isDevice) {\n\t                        this.touchModule = new ej2_base_2.Touch(this.element, {\n\t                            tapHoldThreshold: TAPHOLD_THRESHOLD,\n\t                            tapHold: this.tapHoldHandler.bind(this)\n\t                        });\n\t                        ej2_base_2.EventHandler.add(this.element, ej2_base_2.Browser.touchEndEvent, this.touchEndHandler, this);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.EventHandler.add(this.element, 'mouseover', this.targetHover, this);\n\t                    }\n\t                }\n\t            }\n\t            ej2_base_2.EventHandler.add(document, 'touchend', this.touchEnd, this);\n\t            ej2_base_2.EventHandler.add(document, 'scroll', this.scrollHandler, this);\n\t            ej2_base_2.EventHandler.add(document, 'keydown', this.keyDown, this);\n\t        };\n\t        Tooltip.prototype.getTriggerList = function (trigger) {\n\t            if (trigger === 'auto') {\n\t                trigger = (ej2_base_2.Browser.isDevice) ? 'hover' : 'hover focus';\n\t            }\n\t            return trigger.split(' ');\n\t        };\n\t        Tooltip.prototype.wireFocusEvents = function () {\n\t            if (!ej2_base_3.isNullOrUndefined(this.target)) {\n\t                var targetList = [].slice.call(this.element.querySelectorAll(this.target));\n\t                for (var _i = 0, targetList_2 = targetList; _i < targetList_2.length; _i++) {\n\t                    var target = targetList_2[_i];\n\t                    ej2_base_2.EventHandler.add(target, 'focus', this.targetHover, this);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.EventHandler.add(this.element, 'focus', this.targetHover, this);\n\t            }\n\t        };\n\t        Tooltip.prototype.wireMouseEvents = function (e, target) {\n\t            if (!this.isSticky) {\n\t                if (e.type === 'focus') {\n\t                    ej2_base_2.EventHandler.add(target, 'blur', this.onMouseOut, this);\n\t                }\n\t                if (e.type === 'mouseover') {\n\t                    ej2_base_2.EventHandler.add(target, 'mouseleave', this.onMouseOut, this);\n\t                }\n\t            }\n\t            if (this.mouseTrail) {\n\t                ej2_base_2.EventHandler.add(target, 'mousemove touchstart', this.onMouseMove, this);\n\t            }\n\t        };\n\t        Tooltip.prototype.unwireEvents = function (trigger) {\n\t            var triggerList = this.getTriggerList(trigger);\n\t            for (var _i = 0, triggerList_2 = triggerList; _i < triggerList_2.length; _i++) {\n\t                var opensOn = triggerList_2[_i];\n\t                if (opensOn === 'custom') {\n\t                    return;\n\t                }\n\t                if (opensOn === 'focus') {\n\t                    this.unwireFocusEvents();\n\t                }\n\t                if (opensOn === 'click') {\n\t                    ej2_base_2.EventHandler.remove(this.element, ej2_base_2.Browser.touchStartEvent, this.targetClick);\n\t                }\n\t                if (opensOn === 'hover') {\n\t                    if (ej2_base_2.Browser.isDevice) {\n\t                        if (this.touchModule) {\n\t                            this.touchModule.destroy();\n\t                        }\n\t                        ej2_base_2.EventHandler.remove(this.element, ej2_base_2.Browser.touchEndEvent, this.touchEndHandler);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.EventHandler.remove(this.element, 'mouseover', this.targetHover);\n\t                    }\n\t                }\n\t            }\n\t            ej2_base_2.EventHandler.remove(document, 'touchend', this.touchEnd);\n\t            ej2_base_2.EventHandler.remove(document, 'scroll', this.scrollHandler);\n\t            ej2_base_2.EventHandler.remove(document, 'keydown', this.keyDown);\n\t        };\n\t        Tooltip.prototype.unwireFocusEvents = function () {\n\t            if (!ej2_base_3.isNullOrUndefined(this.target)) {\n\t                var targetList = [].slice.call(this.element.querySelectorAll(this.target));\n\t                for (var _i = 0, targetList_3 = targetList; _i < targetList_3.length; _i++) {\n\t                    var target = targetList_3[_i];\n\t                    ej2_base_2.EventHandler.remove(target, 'focus', this.targetHover);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.EventHandler.remove(this.element, 'focus', this.targetHover);\n\t            }\n\t        };\n\t        Tooltip.prototype.unwireMouseEvents = function (target) {\n\t            if (!this.isSticky) {\n\t                var triggerList = this.getTriggerList(this.opensOn);\n\t                for (var _i = 0, triggerList_3 = triggerList; _i < triggerList_3.length; _i++) {\n\t                    var opensOn = triggerList_3[_i];\n\t                    if (opensOn === 'focus') {\n\t                        ej2_base_2.EventHandler.remove(target, 'blur', this.onMouseOut);\n\t                    }\n\t                    if (opensOn === 'hover' && !ej2_base_2.Browser.isDevice) {\n\t                        ej2_base_2.EventHandler.remove(target, 'mouseleave', this.onMouseOut);\n\t                    }\n\t                }\n\t            }\n\t            if (this.mouseTrail) {\n\t                ej2_base_2.EventHandler.remove(target, 'mousemove touchstart', this.onMouseMove);\n\t            }\n\t        };\n\t        Tooltip.prototype.getModuleName = function () {\n\t            return 'tooltip';\n\t        };\n\t        Tooltip.prototype.getPersistData = function () {\n\t            return this.addOnPersist([]);\n\t        };\n\t        Tooltip.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        if (this.tooltipEle) {\n\t                            this.tooltipEle.style.width = ej2_base_3.formatUnit(newProp.width);\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                        if (this.tooltipEle) {\n\t                            this.tooltipEle.style.height = ej2_base_3.formatUnit(newProp.height);\n\t                        }\n\t                        break;\n\t                    case 'content':\n\t                        if (this.tooltipEle) {\n\t                            this.renderContent();\n\t                        }\n\t                        break;\n\t                    case 'opensOn':\n\t                        this.unwireEvents(oldProp.opensOn);\n\t                        this.wireEvents(newProp.opensOn);\n\t                        break;\n\t                    case 'position':\n\t                        this.formatPosition();\n\t                        var target = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\n\t                        if (this.tooltipEle && target) {\n\t                            this.reposition(target);\n\t                        }\n\t                        break;\n\t                    case 'tipPointerPosition':\n\t                        var trgt = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\n\t                        if (this.tooltipEle && trgt) {\n\t                            this.reposition(trgt);\n\t                        }\n\t                        break;\n\t                    case 'offsetX':\n\t                        if (this.tooltipEle) {\n\t                            var x = newProp.offsetX - oldProp.offsetX;\n\t                            this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + (x)).toString() + 'px';\n\t                        }\n\t                        break;\n\t                    case 'offsetY':\n\t                        if (this.tooltipEle) {\n\t                            var y = newProp.offsetY - oldProp.offsetY;\n\t                            this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + (y)).toString() + 'px';\n\t                        }\n\t                        break;\n\t                    case 'cssClass':\n\t                        if (this.tooltipEle) {\n\t                            if (oldProp.cssClass) {\n\t                                ej2_base_4.removeClass([this.tooltipEle], oldProp.cssClass);\n\t                            }\n\t                            if (newProp.cssClass) {\n\t                                ej2_base_4.addClass([this.tooltipEle], newProp.cssClass);\n\t                            }\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        if (this.tooltipEle) {\n\t                            if (this.enableRtl) {\n\t                                ej2_base_4.addClass([this.tooltipEle], RTL);\n\t                            }\n\t                            else {\n\t                                ej2_base_4.removeClass([this.tooltipEle], RTL);\n\t                            }\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.open = function (element, animation) {\n\t            if (animation === void 0) { animation = this.animation.open; }\n\t            if (element.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.showTooltip(element, animation);\n\t        };\n\t        Tooltip.prototype.close = function (animation) {\n\t            if (animation === void 0) { animation = this.animation.close; }\n\t            this.hideTooltip(animation);\n\t        };\n\t        Tooltip.prototype.refresh = function (target) {\n\t            if (this.tooltipEle) {\n\t                this.renderContent(target);\n\t            }\n\t            if (this.popupObj && target) {\n\t                this.reposition(target);\n\t            }\n\t        };\n\t        Tooltip.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            ej2_base_4.removeClass([this.element], ROOT);\n\t            this.unwireEvents(this.opensOn);\n\t            if (this.popupObj) {\n\t                this.popupObj.destroy();\n\t            }\n\t            if (this.tooltipEle) {\n\t                ej2_base_4.remove(this.tooltipEle);\n\t            }\n\t            this.tooltipEle = null;\n\t            this.popupObj = null;\n\t        };\n\t        return Tooltip;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tooltip.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tooltip.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], Tooltip.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], Tooltip.prototype, \"target\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('top center')\n\t    ], Tooltip.prototype, \"position\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tooltip.prototype, \"offsetX\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tooltip.prototype, \"offsetY\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Tooltip.prototype, \"showTipPointer\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tooltip.prototype, \"tipPointerPosition\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('auto')\n\t    ], Tooltip.prototype, \"opensOn\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tooltip.prototype, \"mouseTrail\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tooltip.prototype, \"isSticky\", void 0);\n\t    __decorate([\n\t        ej2_base_5.Complex({}, Animation)\n\t    ], Tooltip.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tooltip.prototype, \"openDelay\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Tooltip.prototype, \"closeDelay\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], Tooltip.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Tooltip.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"beforeRender\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"beforeOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"afterOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"beforeClose\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"afterClose\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], Tooltip.prototype, \"destroyed\", void 0);\n\t    Tooltip = __decorate([\n\t        ej2_base_5.NotifyPropertyChanges\n\t    ], Tooltip);\n\t    exports.Tooltip = Tooltip;\n\t    exports.tooltipBuilder = ej2_base_1.CreateBuilder(Tooltip);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, spinner_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(spinner_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var globalTimeOut = {};\n\t    var spinTemplate = null;\n\t    var spinCSSClass = null;\n\t    var DEFT_MAT_WIDTH = 30;\n\t    var DEFT_FAB_WIDTH = 30;\n\t    var DEFT_BOOT_WIDTH = 30;\n\t    var CLS_SHOWSPIN = 'e-spin-show';\n\t    var CLS_HIDESPIN = 'e-spin-hide';\n\t    var CLS_MATERIALSPIN = 'e-spin-material';\n\t    var CLS_FABRICSPIN = 'e-spin-fabric';\n\t    var CLS_BOOTSPIN = 'e-spin-bootstrap';\n\t    var CLS_SPINWRAP = 'e-spinner-pane';\n\t    var CLS_SPININWRAP = 'e-spinner-inner';\n\t    var CLS_SPINCIRCLE = 'e-path-circle';\n\t    var CLS_SPINARC = 'e-path-arc';\n\t    var CLS_SPINLABEL = 'e-spin-label';\n\t    var CLS_SPINTEMPLATE = 'e-spin-template';\n\t    function createSpinner(args) {\n\t        var radius;\n\t        var container = create_spinner_container(args.target);\n\t        if (!ej2_base_1.isNullOrUndefined(args.cssClass)) {\n\t            container.wrap.classList.add(args.cssClass);\n\t        }\n\t        if (!ej2_base_1.isNullOrUndefined(args.template) || !ej2_base_1.isNullOrUndefined(spinTemplate)) {\n\t            var template = !ej2_base_1.isNullOrUndefined(args.template) ? args.template : spinTemplate;\n\t            container.wrap.classList.add(CLS_SPINTEMPLATE);\n\t            replaceContent(container.wrap, template, spinCSSClass);\n\t        }\n\t        else {\n\t            var theme = !ej2_base_1.isNullOrUndefined(args.type) ? args.type : getTheme(container.wrap);\n\t            var width = !ej2_base_1.isNullOrUndefined(args.width) ? args.width : undefined;\n\t            radius = calculateRadius(width, theme);\n\t            setTheme(theme, container.wrap, radius);\n\t            if (!ej2_base_1.isNullOrUndefined(args.label)) {\n\t                createLabel(container.inner_wrap, args.label);\n\t            }\n\t        }\n\t        container.wrap.classList.add(CLS_HIDESPIN);\n\t    }\n\t    exports.createSpinner = createSpinner;\n\t    function createLabel(container, label) {\n\t        var labelEle = document.createElement('div');\n\t        labelEle.classList.add(CLS_SPINLABEL);\n\t        labelEle.textContent = label;\n\t        container.appendChild(labelEle);\n\t        return labelEle;\n\t    }\n\t    function createMaterialSpinner(container, radius) {\n\t        var uniqueID = random_generator();\n\t        globalTimeOut[uniqueID] = { timeOut: 0, type: 'Material', radius: radius };\n\t        create_material_element(container, uniqueID);\n\t        mat_calculate_attributes(radius, container);\n\t    }\n\t    function startMatAnimate(container, uniqueID, radius) {\n\t        var globalObject = {};\n\t        var timeOutVar = 0;\n\t        globalTimeOut[uniqueID].timeOut = 0;\n\t        globalObject[uniqueID] = globalVariables(uniqueID, radius, 0, 0);\n\t        var spinnerInfo = { uniqueID: uniqueID, container: container, globalInfo: globalObject, timeOutVar: timeOutVar };\n\t        animateMaterial(spinnerInfo);\n\t    }\n\t    function createFabricSpinner(container, radius) {\n\t        var uniqueID = random_generator();\n\t        globalTimeOut[uniqueID] = { timeOut: 0, type: 'Fabric', radius: radius };\n\t        create_fabric_element(container, uniqueID);\n\t        fb_calculate_attributes(radius, container);\n\t    }\n\t    function getTheme(container) {\n\t        var theme = window.getComputedStyle(container, ':after').getPropertyValue('content');\n\t        return theme.replace(/['\"]+/g, '');\n\t    }\n\t    function setTheme(theme, container, radius) {\n\t        var innerContainer = container.querySelector('.' + CLS_SPININWRAP);\n\t        var svg = innerContainer.querySelector('svg');\n\t        if (!ej2_base_1.isNullOrUndefined(svg)) {\n\t            innerContainer.removeChild(svg);\n\t        }\n\t        switch (theme) {\n\t            case 'Material':\n\t                createMaterialSpinner(innerContainer, radius);\n\t                break;\n\t            case 'Fabric':\n\t                createFabricSpinner(innerContainer, radius);\n\t                break;\n\t            case 'Bootstrap':\n\t                createBootstrapSpinner(innerContainer, radius);\n\t        }\n\t    }\n\t    function createBootstrapSpinner(innerContainer, radius) {\n\t        var uniqueID = random_generator();\n\t        globalTimeOut[uniqueID] = { timeOut: 0, type: 'Bootstrap', radius: radius };\n\t        create_bootstrap_element(innerContainer, uniqueID);\n\t        boot_calculate_attributes(innerContainer, radius);\n\t    }\n\t    function create_bootstrap_element(innerContainer, uniqueID) {\n\t        var svgBoot = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t        var viewBoxValue = 64;\n\t        var trans = 32;\n\t        var defaultRadius = 2;\n\t        svgBoot.setAttribute('id', uniqueID);\n\t        svgBoot.setAttribute('class', CLS_BOOTSPIN);\n\t        svgBoot.setAttribute('viewBox', '0 0 ' + viewBoxValue + ' ' + viewBoxValue);\n\t        innerContainer.insertBefore(svgBoot, innerContainer.firstChild);\n\t        for (var item = 0; item <= 7; item++) {\n\t            var bootCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\t            bootCircle.setAttribute('class', CLS_SPINCIRCLE + '_' + item);\n\t            bootCircle.setAttribute('r', defaultRadius + '');\n\t            bootCircle.setAttribute('transform', 'translate(' + trans + ',' + trans + ')');\n\t            svgBoot.appendChild(bootCircle);\n\t        }\n\t    }\n\t    function boot_calculate_attributes(innerContainer, radius) {\n\t        var svg = innerContainer.querySelector('svg.e-spin-bootstrap');\n\t        svg.style.width = svg.style.height = radius + 'px';\n\t        var x = 0;\n\t        var y = 0;\n\t        var rad = 24;\n\t        var startArc = 90;\n\t        for (var item = 0; item <= 7; item++) {\n\t            var start = defineArcPoints(x, y, rad, startArc);\n\t            var circleEle = svg.querySelector('.' + CLS_SPINCIRCLE + '_' + item);\n\t            circleEle.setAttribute('cx', start.x + '');\n\t            circleEle.setAttribute('cy', start.y + '');\n\t            startArc = startArc >= 360 ? 0 : startArc;\n\t            startArc = startArc + 45;\n\t        }\n\t    }\n\t    function generateSeries(begin, stop) {\n\t        var series = [];\n\t        var start = begin;\n\t        var end = stop;\n\t        var increment = false;\n\t        var count = 1;\n\t        formSeries(start);\n\t        function formSeries(i) {\n\t            series.push(i);\n\t            if (i !== end || count === 1) {\n\t                if (i <= start && i > 1 && !increment) {\n\t                    i = parseFloat((i - 0.2).toFixed(2));\n\t                }\n\t                else if (i === 1) {\n\t                    i = 7;\n\t                    i = parseFloat((i + 0.2).toFixed(2));\n\t                    increment = true;\n\t                }\n\t                else if (i < 8 && increment) {\n\t                    i = parseFloat((i + 0.2).toFixed(2));\n\t                    if (i === 8) {\n\t                        increment = false;\n\t                    }\n\t                }\n\t                else if (i <= 8 && !increment) {\n\t                    i = parseFloat((i - 0.2).toFixed(2));\n\t                }\n\t                ++count;\n\t                formSeries(i);\n\t            }\n\t        }\n\t        return series;\n\t    }\n\t    function animateBootstrap(innerContainer) {\n\t        var svg = innerContainer.querySelector('svg.e-spin-bootstrap');\n\t        var id = svg.getAttribute('id');\n\t        for (var i = 1; i <= 8; i++) {\n\t            var circleEle = (innerContainer.getElementsByClassName('e-path-circle_' +\n\t                (i === 8 ? 0 : i))[0]);\n\t            rotation(circleEle, i, i, generateSeries(i, i), id);\n\t        }\n\t        function rotation(circle, start, end, series, id) {\n\t            var count = 0;\n\t            boot_animate(start);\n\t            function boot_animate(radius) {\n\t                if (globalTimeOut[id].isAnimate) {\n\t                    ++count;\n\t                    circle.setAttribute('r', radius + '');\n\t                    if (count >= series.length) {\n\t                        count = 0;\n\t                    }\n\t                    globalTimeOut[id].timeOut = setTimeout(boot_animate.bind(null, series[count]), 18);\n\t                }\n\t            }\n\t        }\n\t    }\n\t    function replaceContent(container, template, cssClass) {\n\t        if (!ej2_base_1.isNullOrUndefined(cssClass)) {\n\t            container.classList.add(cssClass);\n\t        }\n\t        var inner = container.querySelector('.e-spinner-inner');\n\t        inner.innerHTML = template;\n\t    }\n\t    function calculateRadius(width, theme) {\n\t        var defaultSize = theme === 'Material' ? DEFT_MAT_WIDTH : theme === 'Fabric' ? DEFT_FAB_WIDTH : DEFT_BOOT_WIDTH;\n\t        width = width ? parseFloat(width + '') : defaultSize;\n\t        return theme === 'Bootstrap' ? width : width / 2;\n\t    }\n\t    function globalVariables(id, radius, count, previousId) {\n\t        return {\n\t            radius: radius,\n\t            count: count,\n\t            previousId: previousId\n\t        };\n\t    }\n\t    function random_generator() {\n\t        var random = '';\n\t        var combine = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\t        for (var i = 0; i < 5; i++) {\n\t            random += combine.charAt(Math.floor(Math.random() * combine.length));\n\t        }\n\t        return random;\n\t    }\n\t    function create_fabric_element(innerContainer, uniqueID) {\n\t        var svgFabric = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t        svgFabric.setAttribute('id', uniqueID);\n\t        svgFabric.setAttribute('class', CLS_FABRICSPIN);\n\t        var fabricCirclePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t        fabricCirclePath.setAttribute('class', CLS_SPINCIRCLE);\n\t        var fabricCircleArc = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t        fabricCircleArc.setAttribute('class', CLS_SPINARC);\n\t        innerContainer.insertBefore(svgFabric, innerContainer.firstChild);\n\t        svgFabric.appendChild(fabricCirclePath);\n\t        svgFabric.appendChild(fabricCircleArc);\n\t    }\n\t    function create_material_element(innerContainer, uniqueID) {\n\t        var svgMaterial = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t        svgMaterial.setAttribute('class', CLS_MATERIALSPIN);\n\t        svgMaterial.setAttribute('id', uniqueID);\n\t        var matCirclePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t        matCirclePath.setAttribute('class', CLS_SPINCIRCLE);\n\t        innerContainer.insertBefore(svgMaterial, innerContainer.firstChild);\n\t        svgMaterial.appendChild(matCirclePath);\n\t    }\n\t    function create_spinner_container(target) {\n\t        var spinnerContainer = document.createElement('div');\n\t        spinnerContainer.classList.add(CLS_SPINWRAP);\n\t        var spinnerInnerContainer = document.createElement('div');\n\t        spinnerInnerContainer.classList.add(CLS_SPININWRAP);\n\t        target.appendChild(spinnerContainer);\n\t        spinnerContainer.appendChild(spinnerInnerContainer);\n\t        return { wrap: spinnerContainer, inner_wrap: spinnerInnerContainer };\n\t    }\n\t    function animateMaterial(spinnerInfo) {\n\t        var start = 1;\n\t        var end = 149;\n\t        var duration = 1333;\n\t        var max = 75;\n\t        createCircle(start, end, easeAnimation, duration, spinnerInfo.globalInfo[spinnerInfo.uniqueID].count, max, spinnerInfo);\n\t        spinnerInfo.globalInfo[spinnerInfo.uniqueID].count = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].count % 4;\n\t    }\n\t    function createCircle(start, end, easing, duration, count, max, spinnerInfo) {\n\t        var id = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId;\n\t        var startTime = new Date().getTime();\n\t        var change = end - start;\n\t        var diameter = getSize((spinnerInfo.globalInfo[spinnerInfo.uniqueID].radius * 2) + '');\n\t        var strokeSize = getStrokeSize(diameter);\n\t        var rotate = -90 * (spinnerInfo.globalInfo[spinnerInfo.uniqueID].count || 0);\n\t        mat_animation(spinnerInfo);\n\t        function mat_animation(spinnerInfo) {\n\t            var currentTime = Math.max(0, Math.min(new Date().getTime() - startTime, duration));\n\t            updatePath(easing(currentTime, start, change, duration), spinnerInfo.container);\n\t            if (id === spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId && currentTime < duration) {\n\t                globalTimeOut[spinnerInfo.uniqueID].timeOut = setTimeout(mat_animation.bind(null, spinnerInfo), 1);\n\t            }\n\t            else {\n\t                animateMaterial(spinnerInfo);\n\t            }\n\t        }\n\t        function updatePath(value, container) {\n\t            if ((!ej2_base_1.isNullOrUndefined(container.querySelector('svg.e-spin-material')))\n\t                && (!ej2_base_1.isNullOrUndefined(container.querySelector('svg.e-spin-material').querySelector('path.e-path-circle')))) {\n\t                var svg = container.querySelector('svg.e-spin-material');\n\t                var path = svg.querySelector('path.e-path-circle');\n\t                path.setAttribute('stroke-dashoffset', getDashOffset(diameter, strokeSize, value, max) + '');\n\t                path.setAttribute('transform', 'rotate(' + (rotate) + ' ' + diameter / 2 + ' ' + diameter / 2 + ')');\n\t            }\n\t        }\n\t    }\n\t    function mat_calculate_attributes(radius, container) {\n\t        var diameter = radius * 2;\n\t        var svg = container.querySelector('svg.e-spin-material');\n\t        var path = svg.querySelector('path.e-path-circle');\n\t        var strokeSize = getStrokeSize(diameter);\n\t        var transformOrigin = (diameter / 2) + 'px';\n\t        svg.setAttribute('viewBox', '0 0 ' + diameter + ' ' + diameter);\n\t        svg.style.width = svg.style.height = diameter + 'px';\n\t        svg.style.transformOrigin = transformOrigin + ' ' + transformOrigin + ' ' + transformOrigin;\n\t        path.setAttribute('stroke-width', strokeSize + '');\n\t        path.setAttribute('d', drawArc(diameter, strokeSize));\n\t        path.setAttribute('stroke-dasharray', ((diameter - strokeSize) * Math.PI * 0.75) + '');\n\t        path.setAttribute('stroke-dashoffset', getDashOffset(diameter, strokeSize, 1, 75) + '');\n\t    }\n\t    function getSize(value) {\n\t        var parsed = parseFloat(value);\n\t        return parsed;\n\t    }\n\t    function drawArc(diameter, strokeSize) {\n\t        var radius = diameter / 2;\n\t        var offset = strokeSize / 2;\n\t        return 'M' + radius + ',' + offset\n\t            + 'A' + (radius - offset) + ',' + (radius - offset) + ' 0 1 1 ' + offset + ',' + radius;\n\t    }\n\t    function getStrokeSize(diameter) {\n\t        return 10 / 100 * diameter;\n\t    }\n\t    function getDashOffset(diameter, strokeSize, value, max) {\n\t        return (diameter - strokeSize) * Math.PI * ((3 * (max) / 100) - (value / 100));\n\t    }\n\t    function easeAnimation(current, start, change, duration) {\n\t        var timestamp = (current /= duration) * current;\n\t        var timecount = timestamp * current;\n\t        return start + change * (6 * timecount * timestamp + -15 * timestamp * timestamp + 10 * timecount);\n\t    }\n\t    function fb_calculate_attributes(radius, innerConainer) {\n\t        var centerX = radius;\n\t        var centerY = radius;\n\t        var diameter = radius * 2;\n\t        var startArc = 315;\n\t        var endArc = 45;\n\t        var svg = innerConainer.querySelector('.e-spin-fabric');\n\t        var circle = svg.querySelector('.e-path-circle');\n\t        var path = svg.querySelector('.e-path-arc');\n\t        var transformOrigin = (diameter / 2) + 'px';\n\t        circle.setAttribute('d', defineCircle(centerX, centerY, radius));\n\t        path.setAttribute('d', defineArc(centerX, centerY, radius, startArc, endArc));\n\t        svg.setAttribute('viewBox', '0 0 ' + diameter + ' ' + diameter);\n\t        svg.style.transformOrigin = transformOrigin + ' ' + transformOrigin + ' ' + transformOrigin;\n\t        svg.style.width = svg.style.height = diameter + 'px';\n\t    }\n\t    function defineArcPoints(centerX, centerY, radius, angle) {\n\t        var radians = (angle - 90) * Math.PI / 180.0;\n\t        return {\n\t            x: centerX + (radius * Math.cos(radians)),\n\t            y: centerY + (radius * Math.sin(radians))\n\t        };\n\t    }\n\t    function defineArc(x, y, radius, startArc, endArc) {\n\t        var start = defineArcPoints(x, y, radius, endArc);\n\t        var end = defineArcPoints(x, y, radius, startArc);\n\t        var d = [\n\t            'M', start.x, start.y,\n\t            'A', radius, radius, 0, 0, 0, end.x, end.y\n\t        ].join(' ');\n\t        return d;\n\t    }\n\t    function defineCircle(x, y, radius) {\n\t        var d = [\n\t            'M', x, y,\n\t            'm', -radius, 0,\n\t            'a', radius, radius, 0, 1, 0, radius * 2, 0,\n\t            'a', radius, radius, 0, 1, 0, -radius * 2, 0,\n\t        ].join(' ');\n\t        return d;\n\t    }\n\t    function showSpinner(container) {\n\t        showHideSpinner(container, false);\n\t    }\n\t    exports.showSpinner = showSpinner;\n\t    function showHideSpinner(container, isHide) {\n\t        var spinnerWrap = container.classList.contains(CLS_SPINWRAP) ? container :\n\t            container.querySelector('.' + CLS_SPINWRAP);\n\t        var inner = spinnerWrap.querySelector('.' + CLS_SPININWRAP);\n\t        var spinCheck;\n\t        spinCheck = isHide ? !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_HIDESPIN) :\n\t            !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_SHOWSPIN);\n\t        if (spinCheck) {\n\t            var svgEle = spinnerWrap.querySelector('svg');\n\t            if (ej2_base_1.isNullOrUndefined(svgEle)) {\n\t                return;\n\t            }\n\t            var id = svgEle.getAttribute('id');\n\t            globalTimeOut[id].isAnimate = !isHide;\n\t            switch (globalTimeOut[id].type) {\n\t                case 'Material':\n\t                    isHide ? clearTimeout(globalTimeOut[id].timeOut) : startMatAnimate(inner, id, globalTimeOut[id].radius);\n\t                    break;\n\t                case 'Bootstrap':\n\t                    isHide ? clearTimeout(globalTimeOut[id].timeOut) : animateBootstrap(inner);\n\t                    break;\n\t            }\n\t        }\n\t        isHide ? ej2_base_1.classList(spinnerWrap, [CLS_HIDESPIN], [CLS_SHOWSPIN]) : ej2_base_1.classList(spinnerWrap, [CLS_SHOWSPIN], [CLS_HIDESPIN]);\n\t    }\n\t    function hideSpinner(container) {\n\t        showHideSpinner(container, true);\n\t    }\n\t    exports.hideSpinner = hideSpinner;\n\t    function setSpinner(args) {\n\t        if (args.template !== undefined) {\n\t            spinTemplate = args.template;\n\t            if (args.template !== undefined) {\n\t                spinCSSClass = args.cssClass;\n\t            }\n\t        }\n\t        var container = document.querySelectorAll('.' + CLS_SPINWRAP);\n\t        for (var index = 0; index < container.length; index++) {\n\t            ensureTemplate(args.template, container[index], args.type, args.cssClass);\n\t        }\n\t    }\n\t    exports.setSpinner = setSpinner;\n\t    function ensureTemplate(template, container, theme, cssClass) {\n\t        if (ej2_base_1.isNullOrUndefined(template) && !container.classList.contains(CLS_SPINTEMPLATE)) {\n\t            replaceTheme(container, theme, cssClass);\n\t            if (container.classList.contains(CLS_SHOWSPIN)) {\n\t                container.classList.remove(CLS_SHOWSPIN);\n\t                showSpinner(container);\n\t            }\n\t            else {\n\t                container.classList.remove(CLS_HIDESPIN);\n\t                hideSpinner(container);\n\t            }\n\t        }\n\t        else {\n\t            spinTemplate = template;\n\t            if (!ej2_base_1.isNullOrUndefined(cssClass)) {\n\t                spinCSSClass = cssClass;\n\t            }\n\t        }\n\t    }\n\t    function replaceTheme(container, theme, cssClass) {\n\t        if (!ej2_base_1.isNullOrUndefined(cssClass)) {\n\t            container.classList.add(cssClass);\n\t        }\n\t        var svgElement = container.querySelector('svg');\n\t        var radius = theme === 'Bootstrap' ? parseFloat(svgElement.style.height) : parseFloat(svgElement.style.height) / 2;\n\t        var classNames = svgElement.getAttribute('class');\n\t        var svgClassList = classNames.split(/\\s/);\n\t        if (svgClassList.indexOf('e-spin-material') >= 0) {\n\t            var id = svgElement.getAttribute('id');\n\t            clearTimeout(globalTimeOut[id].timeOut);\n\t        }\n\t        setTheme(theme, container, radius);\n\t    }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBiOWQ5YTk5MjkzZWEyOGVjNjhkYyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvcHVwL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9wb3B1cC9wb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3Bvc2l0aW9uLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9jb2xsaXNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhbG9nL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9kaWFsb2cvZGlhbG9nLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2x0aXAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rvb2x0aXAvdG9vbHRpcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3Bpbm5lci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3Bpbm5lci9zcGlubmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztpRUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBLEVBQUM7Ozs7Ozs7QUNQRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQkFBZ0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0EscUVBQW9FLGdEQUFnRDtBQUNwSDtBQUNBO0FBQ0EscUVBQW9FLGtEQUFrRDtBQUN0SDtBQUNBO0FBQ0EscUVBQW9FLDJCQUEyQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTBGLGdCQUFnQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRkFBMEYsZ0JBQWdCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0MsaUNBQWlDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQsaUJBQWlCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCxrREFBa0Q7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0Usa0RBQWtEO0FBQ3RIO0FBQ0E7QUFDQSxxRUFBb0UsZ0RBQWdEO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IseUJBQXlCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNEQsZ0NBQWdDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsMEVBQTBFO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELDBCQUEwQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUF5QyxrRkFBa0Y7QUFDM0gsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQiwyREFBMkQsa0RBQWtELGtCQUFrQjtBQUNwSixrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQTZFLHFCQUFxQjtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUF5QyxrRkFBa0Y7QUFDM0gsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCLCtGQUE4RixvQkFBb0I7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQXlELDJCQUEyQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCwwQkFBMEI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCwyQkFBMkI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCwwQkFBMEI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE2RCwyQkFBMkI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQkFBZ0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsaUNBQWlDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxrQ0FBa0M7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDdjVCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O2lFQ1BEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTBCLFdBQVc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEwQixXQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQiwwQkFBMEI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDIiwiZmlsZSI6ImVqMi1wb3B1cHMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGI5ZDlhOTkyOTNlYTI4ZWM2OGRjIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9wb3B1cC9pbmRleFwiLCBcIi4vY29tbW9uL2luZGV4XCIsIFwiLi9kaWFsb2cvaW5kZXhcIiwgXCIuL3Rvb2x0aXAvaW5kZXhcIiwgXCIuL3NwaW5uZXIvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yLCBpbmRleF8zLCBpbmRleF80LCBpbmRleF81KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbiAgICBfX2V4cG9ydChpbmRleF8zKTtcbiAgICBfX2V4cG9ydChpbmRleF80KTtcbiAgICBfX2V4cG9ydChpbmRleF81KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9wb3B1cFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHBvcHVwXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHBvcHVwXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wb3B1cC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2NvbW1vbi9wb3NpdGlvblwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2NvbW1vbi9jb2xsaXNpb25cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBwb3NpdGlvbl8xLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfYmFzZV82LCBjb2xsaXNpb25fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ0xBU1NOQU1FUyA9IHtcbiAgICAgICAgUk9PVDogJ2UtcG9wdXAnLFxuICAgICAgICBSVEw6ICdlLXJ0bCcsXG4gICAgICAgIE9QRU46ICdlLXBvcHVwLW9wZW4nLFxuICAgICAgICBDTE9TRTogJ2UtcG9wdXAtY2xvc2UnXG4gICAgfTtcbiAgICB2YXIgUG9wdXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUG9wdXAsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBvcHVwKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IGVqMl9iYXNlXzIuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGVqMl9iYXNlXzIuZm9ybWF0VW5pdChuZXdQcm9wLmhlaWdodCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnekluZGV4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd6SW5kZXgnOiBuZXdQcm9wLnpJbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbmFibGVSdGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwb3NpdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbGF0ZVRvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb2Zmc2V0WCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG5ld1Byb3Aub2Zmc2V0WCAtIG9sZFByb3Aub2Zmc2V0WDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gKHBhcnNlSW50KHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0LCAxMCkgKyAoeCkpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFknOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBuZXdQcm9wLm9mZnNldFkgLSBvbGRQcm9wLm9mZnNldFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gKHBhcnNlSW50KHRoaXMuZWxlbWVudC5zdHlsZS50b3AsIDEwKSArICh5KSkudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhY3Rpb25PblNjcm9sbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC5hY3Rpb25PblNjcm9sbCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlU2Nyb2xsRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVud2lyZVNjcm9sbEV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncG9wdXAnO1xuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3QoW10pO1xuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTTkFNRVMuUk9PVCwgQ0xBU1NOQU1FUy5SVEwpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5ST09UKTtcbiAgICAgICAgICAgIHZhciBzdHlsZXMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLnpJbmRleCAhPT0gMTAwMCkge1xuICAgICAgICAgICAgICAgIHN0eWxlcy56SW5kZXggPSB0aGlzLnpJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICBzdHlsZXMud2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQodGhpcy53aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHN0eWxlcy5oZWlnaHQgPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQodGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHN0eWxlcyk7XG4gICAgICAgICAgICB0aGlzLnNldEVuYWJsZVJ0bCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5FdmVudEhhbmRsZXIuYWRkKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5vcmllbnRhdGlvbk9uQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbk9uU2Nyb2xsICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVTY3JvbGxFdmVudHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLndpcmVTY3JvbGxFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRSZWxhdGVUb0VsZW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmdldFNjcm9sbGFibGVQYXJlbnQodGhpcy5nZXRSZWxhdGVUb0VsZW1lbnQoKSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5FdmVudEhhbmRsZXIuYWRkKHBhcmVudF8xLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxSZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNi5FdmVudEhhbmRsZXIucmVtb3ZlKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5vcmllbnRhdGlvbk9uQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbk9uU2Nyb2xsICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVud2lyZVNjcm9sbEV2ZW50cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUudW53aXJlU2Nyb2xsRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0UmVsYXRlVG9FbGVtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5nZXRTY3JvbGxhYmxlUGFyZW50KHRoaXMuZ2V0UmVsYXRlVG9FbGVtZW50KCkpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzIgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLnJlbW92ZShwYXJlbnRfMiwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsUmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuZ2V0UmVsYXRlVG9FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICgodHlwZW9mIHRoaXMucmVsYXRlVG8pID09PSAnc3RyaW5nJykgP1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5yZWxhdGVUbykgOiB0aGlzLnJlbGF0ZVRvO1xuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuc2Nyb2xsUmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rpb25PblNjcm9sbCA9PT0gJ3JlcG9zaXRpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEodGhpcy5lbGVtZW50Lm9mZnNldFBhcmVudCA9PT0gZS50YXJnZXQgfHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudC5vZmZzZXRQYXJlbnQgJiYgdGhpcy5lbGVtZW50Lm9mZnNldFBhcmVudC50YWdOYW1lID09PSAnQk9EWScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQgPT0gbnVsbCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hY3Rpb25PblNjcm9sbCA9PT0gJ2hpZGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rpb25PblNjcm9sbCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0UmVsYXRlVG9FbGVtZW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFZpc2libGUgPSB0aGlzLmlzRWxlbWVudE9uVmlld3BvcnQodGhpcy5nZXRSZWxhdGVUb0VsZW1lbnQoKSwgZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFZpc2libGUgJiYgIXRoaXMudGFyZ2V0SW52aXNpYmxlU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3RhcmdldEV4aXRWaWV3cG9ydCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbnZpc2libGVTdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0SW52aXNpYmxlU3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5pc0VsZW1lbnRPblZpZXdwb3J0ID0gZnVuY3Rpb24gKHJlbGF0ZVRvRWxlbWVudCwgc2Nyb2xsRWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbFBhcmVudHMgPSB0aGlzLmdldFNjcm9sbGFibGVQYXJlbnQocmVsYXRlVG9FbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIHBhcmVudF8zID0gMDsgcGFyZW50XzMgPCBzY3JvbGxQYXJlbnRzLmxlbmd0aDsgcGFyZW50XzMrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRWxlbWVudFZpc2libGUocmVsYXRlVG9FbGVtZW50LCBzY3JvbGxQYXJlbnRzW3BhcmVudF8zXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5pc0VsZW1lbnRWaXNpYmxlID0gZnVuY3Rpb24gKHJlbGF0ZVRvRWxlbWVudCwgc2Nyb2xsRWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSByZWxhdGVUb0VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBpZiAoIXJlY3QuaGVpZ2h0IHx8ICFyZWN0LndpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjcm9sbEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudF80ID0gc2Nyb2xsRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIShyZWN0LmJvdHRvbSA8IHBhcmVudF80LnRvcCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKCEocmVjdC5ib3R0b20gPiBwYXJlbnRfNC5ib3R0b20pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoIShyZWN0LnJpZ2h0ID4gcGFyZW50XzQucmlnaHQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIShyZWN0LmxlZnQgPCBwYXJlbnRfNC5sZWZ0KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpbiA9IHdpbmRvdztcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93VmlldyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB3aW4uc2Nyb2xsWSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogd2luLnNjcm9sbFgsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiB3aW4uc2Nyb2xsWCArIHdpbi5vdXRlcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICBib3R0b206IHdpbi5zY3JvbGxZICsgd2luLm91dGVySGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgb2ZmID0gcG9zaXRpb25fMS5jYWxjdWxhdGVQb3NpdGlvbihyZWxhdGVUb0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2ZmLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb2ZmLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBvZmYubGVmdCArIHJlY3Qud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogb2ZmLnRvcCArIHJlY3QuaGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFZpZXcgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogd2luZG93Vmlldy5ib3R0b20gLSBlbGUudG9wLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB3aW5kb3dWaWV3LnJpZ2h0IC0gZWxlLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogZWxlLmJvdHRvbSAtIHdpbmRvd1ZpZXcudG9wLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogZWxlLnJpZ2h0IC0gd2luZG93Vmlldy5sZWZ0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudFZpZXcudG9wID4gMFxuICAgICAgICAgICAgICAgICAgICAmJiBlbGVtZW50Vmlldy5sZWZ0ID4gMFxuICAgICAgICAgICAgICAgICAgICAmJiBlbGVtZW50Vmlldy5yaWdodCA+IDBcbiAgICAgICAgICAgICAgICAgICAgJiYgZWxlbWVudFZpZXcuYm90dG9tID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLnNldEVuYWJsZVJ0bCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVSdGwgPyB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLlJUTCkgOiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLlJUTCk7XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5jb250ZW50KSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUub3JpZW50YXRpb25PbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5yZWZyZXNoUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9zaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLnJlcG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcG9zO1xuICAgICAgICAgICAgdmFyIHJlbGF0ZVRvRWxlbWVudCA9IHRoaXMuZ2V0UmVsYXRlVG9FbGVtZW50KCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucG9zaXRpb24uWCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHRoaXMucG9zaXRpb24uWSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB7IGxlZnQ6IHRoaXMucG9zaXRpb24uWCwgdG9wOiB0aGlzLnBvc2l0aW9uLlkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlbGF0ZVRvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHBvcyA9IHRoaXMuZ2V0QW5jaG9yUG9zaXRpb24ocmVsYXRlVG9FbGVtZW50LCB0aGlzLmVsZW1lbnQsIHRoaXMucG9zaXRpb24sIHRoaXMub2Zmc2V0WCwgdGhpcy5vZmZzZXRZKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB7IGxlZnQ6IDAsIHRvcDogMCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSBwb3MubGVmdCArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gcG9zLnRvcCArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5nZXRBbmNob3JQb3NpdGlvbiA9IGZ1bmN0aW9uIChhbmNob3JFbGUsIGVsZSwgcG9zaXRpb24sIG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICAgICAgICAgIHZhciBlbGVSZWN0ID0gZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGFuY2hvclJlY3QgPSBhbmNob3JFbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gYW5jaG9yRWxlO1xuICAgICAgICAgICAgdmFyIGFuY2hvclBvcyA9IHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgICAgICAgICBpZiAoZWxlLm9mZnNldFBhcmVudCAmJiBlbGUub2Zmc2V0UGFyZW50LnRhZ05hbWUgPT09ICdCT0RZJyAmJiBhbmNob3JFbGUudGFnTmFtZSA9PT0gJ0JPRFknKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yUG9zID0gcG9zaXRpb25fMS5jYWxjdWxhdGVQb3NpdGlvbihhbmNob3JFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yUG9zID0gcG9zaXRpb25fMS5jYWxjdWxhdGVSZWxhdGl2ZUJhc2VkUG9zaXRpb24oYW5jaG9yLCBlbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChwb3NpdGlvbi5YKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0VHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9IChhbmNob3JSZWN0LndpZHRoIC8gMiAtIGVsZVJlY3Qud2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9IChhbmNob3JSZWN0LndpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXRUeXBlID09PSAnY29udGFpbmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yUG9zLmxlZnQgKz0gKGFuY2hvclJlY3Qud2lkdGggLSBlbGVSZWN0LndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9IChhbmNob3JSZWN0LndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAocG9zaXRpb24uWSkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0VHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy50b3AgKz0gKGFuY2hvclJlY3QuaGVpZ2h0IC8gMiAtIGVsZVJlY3QuaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JQb3MudG9wICs9IChhbmNob3JSZWN0LmhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldFR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JQb3MudG9wICs9IChhbmNob3JSZWN0LmhlaWdodCAtIGVsZVJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy50b3AgKz0gKGFuY2hvclJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9IG9mZnNldFg7XG4gICAgICAgICAgICBhbmNob3JQb3MudG9wICs9IG9mZnNldFk7XG4gICAgICAgICAgICByZXR1cm4gYW5jaG9yUG9zO1xuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuY2FsbEZsaXAgPSBmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgICAgIHZhciByZWxhdGVUb0VsZW1lbnQgPSB0aGlzLmdldFJlbGF0ZVRvRWxlbWVudCgpO1xuICAgICAgICAgICAgY29sbGlzaW9uXzEuZmxpcCh0aGlzLmVsZW1lbnQsIHJlbGF0ZVRvRWxlbWVudCwgdGhpcy5vZmZzZXRYLCB0aGlzLm9mZnNldFksIHRoaXMucG9zaXRpb24uWCwgdGhpcy5wb3NpdGlvbi5ZLCB0aGlzLnZpZXdQb3J0RWxlbWVudCwgcGFyYW0pO1xuICAgICAgICB9O1xuICAgICAgICBQb3B1cC5wcm90b3R5cGUuY2FsbEZpdCA9IGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbl8xLmlzQ29sbGlkZSh0aGlzLmVsZW1lbnQsIHRoaXMudmlld1BvcnRFbGVtZW50KS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGNvbGxpc2lvbl8xLmZpdCh0aGlzLmVsZW1lbnQsIHRoaXMudmlld1BvcnRFbGVtZW50LCBwYXJhbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSBkYXRhLmxlZnQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBkYXRhLnRvcCArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBvcHVwLnByb3RvdHlwZS5jaGVja0NvbGxpc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBob3J6ID0gdGhpcy5jb2xsaXNpb24uWDtcbiAgICAgICAgICAgIHZhciB2ZXJ0ID0gdGhpcy5jb2xsaXNpb24uWTtcbiAgICAgICAgICAgIGlmIChob3J6ID09PSAnbm9uZScgJiYgdmVydCA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhvcnogPT09ICdmbGlwJyAmJiB2ZXJ0ID09PSAnZmxpcCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxGbGlwKHsgWDogdHJ1ZSwgWTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhvcnogPT09ICdmaXQnICYmIHZlcnQgPT09ICdmaXQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsRml0KHsgWDogdHJ1ZSwgWTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChob3J6ID09PSAnZml0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxGaXQoeyBYOiB0cnVlLCBZOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmVydCA9PT0gJ2ZpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsRml0KHsgWDogZmFsc2UsIFk6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChob3J6ID09PSAnZmxpcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsRmxpcCh7IFg6IHRydWUsIFk6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2ZXJ0ID09PSAnZmxpcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsRmxpcCh7IFk6IHRydWUsIFg6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoYW5pbWF0aW9uT3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnMgPSAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoYW5pbWF0aW9uT3B0aW9ucykgJiYgdHlwZW9mIGFuaW1hdGlvbk9wdGlvbnMgPT09ICdvYmplY3QnKSA/XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9ucyA6IHRoaXMuc2hvd0FuaW1hdGlvbjtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbi5YICE9PSAnbm9uZScgfHwgdGhpcy5jb2xsaXNpb24uWSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5DTE9TRSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5PUEVOKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uKCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5PUEVOKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLkNMT1NFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChhbmltYXRpb25PcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnMuYmVnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLkNMT1NFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLk9QRU4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25PcHRpb25zLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignb3BlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXcgZWoyX2Jhc2VfNC5BbmltYXRpb24oYW5pbWF0aW9uT3B0aW9ucykuYW5pbWF0ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5DTE9TRSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5PUEVOKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29wZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoYW5pbWF0aW9uT3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnMgPSAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoYW5pbWF0aW9uT3B0aW9ucykgJiYgdHlwZW9mIGFuaW1hdGlvbk9wdGlvbnMgPT09ICdvYmplY3QnKSA/XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9ucyA6IHRoaXMuaGlkZUFuaW1hdGlvbjtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChhbmltYXRpb25PcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnMuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtfdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5PUEVOKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLkNMT1NFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ldyBlajJfYmFzZV80LkFuaW1hdGlvbihhbmltYXRpb25PcHRpb25zKS5hbmltYXRlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLk9QRU4pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIENMQVNTTkFNRVMuQ0xPU0UpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9wdXAucHJvdG90eXBlLmdldFNjcm9sbGFibGVQYXJlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGVsZVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxQYXJlbnRzID0gW107XG4gICAgICAgICAgICB2YXIgb3ZlcmZsb3dSZWdleCA9IC8oYXV0b3xzY3JvbGwpLztcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC50YWdOYW1lICE9PSAnSFRNTCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCEoZWxlU3R5bGUucG9zaXRpb24gPT09ICdhYnNvbHV0ZScgJiYgcGFyZW50U3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKVxuICAgICAgICAgICAgICAgICAgICAmJiBvdmVyZmxvd1JlZ2V4LnRlc3QocGFyZW50U3R5bGUub3ZlcmZsb3cgKyBwYXJlbnRTdHlsZS5vdmVyZmxvd1kgKyBwYXJlbnRTdHlsZS5vdmVyZmxvd1gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjcm9sbFBhcmVudHMucHVzaChkb2N1bWVudCk7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsUGFyZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBvcHVwO1xuICAgIH0oZWoyX2Jhc2VfNC5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJjb250ZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2NvbnRhaW5lcicpXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcInRhcmdldFR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJ2aWV3UG9ydEVsZW1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh7IFg6ICdub25lJywgWTogJ25vbmUnIH0pXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcImNvbGxpc2lvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGRvY3VtZW50LmJvZHkpXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcInJlbGF0ZVRvXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoeyBYOiAnbGVmdCcsIFk6ICd0b3AnIH0pXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMClcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwib2Zmc2V0WFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDApXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcIm9mZnNldFlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxMDAwKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJ6SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwiZW5hYmxlUnRsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ3JlcG9zaXRpb24nKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJhY3Rpb25PblNjcm9sbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KG51bGwpXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcInNob3dBbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJoaWRlQW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJjbG9zZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwidGFyZ2V0RXhpdFZpZXdwb3J0XCIsIHZvaWQgMCk7XG4gICAgUG9wdXAgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBQb3B1cCk7XG4gICAgZXhwb3J0cy5Qb3B1cCA9IFBvcHVwO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wb3B1cC9wb3B1cC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBlbGVtZW50UmVjdDtcbiAgICB2YXIgZWxlbWVudDtcbiAgICB2YXIgcGFyZW50RG9jdW1lbnQ7XG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUmVsYXRpdmVCYXNlZFBvc2l0aW9uKGFuY2hvciwgZWxlbWVudCkge1xuICAgICAgICB2YXIgYW5jaG9yUG9zID0geyBsZWZ0OiAwLCB0b3A6IDAgfTtcbiAgICAgICAgdmFyIHRlbXBBbmNob3IgPSBhbmNob3I7XG4gICAgICAgIGlmICghYW5jaG9yIHx8ICFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gYW5jaG9yUG9zO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFBhcmVudCAmJiBhbmNob3IgJiYgZWxlbWVudC5vZmZzZXRQYXJlbnQgIT09IGFuY2hvcikge1xuICAgICAgICAgICAgYW5jaG9yUG9zLmxlZnQgKz0gYW5jaG9yLm9mZnNldExlZnQ7XG4gICAgICAgICAgICBhbmNob3JQb3MudG9wICs9IGFuY2hvci5vZmZzZXRUb3A7XG4gICAgICAgICAgICBhbmNob3IgPSBhbmNob3Iub2Zmc2V0UGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGFuY2hvciA9IHRlbXBBbmNob3I7XG4gICAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFBhcmVudCAmJiBhbmNob3IgJiYgZWxlbWVudC5vZmZzZXRQYXJlbnQgIT09IGFuY2hvcikge1xuICAgICAgICAgICAgYW5jaG9yUG9zLmxlZnQgLT0gYW5jaG9yLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBhbmNob3JQb3MudG9wIC09IGFuY2hvci5zY3JvbGxUb3A7XG4gICAgICAgICAgICBhbmNob3IgPSBhbmNob3IucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5jaG9yUG9zO1xuICAgIH1cbiAgICBleHBvcnRzLmNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbiA9IGNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbjtcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbihjdXJyZW50RWxlbWVudCwgcG9zaXRpb25YLCBwb3NpdGlvblkpIHtcbiAgICAgICAgaWYgKCFjdXJyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwb3NpdGlvblgpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWCA9ICdsZWZ0JztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBvc2l0aW9uWSkge1xuICAgICAgICAgICAgcG9zaXRpb25ZID0gJ3RvcCc7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50RG9jdW1lbnQgPSBjdXJyZW50RWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgICAgICBlbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7XG4gICAgICAgIHZhciBwb3MgPSB7IGxlZnQ6IDAsIHRvcDogMCB9O1xuICAgICAgICByZXR1cm4gdXBkYXRlUG9zaXRpb24ocG9zaXRpb25YLnRvTG93ZXJDYXNlKCksIHBvc2l0aW9uWS50b0xvd2VyQ2FzZSgpLCBwb3MpO1xuICAgIH1cbiAgICBleHBvcnRzLmNhbGN1bGF0ZVBvc2l0aW9uID0gY2FsY3VsYXRlUG9zaXRpb247XG4gICAgZnVuY3Rpb24gc2V0UG9zeCh2YWx1ZSwgcG9zKSB7XG4gICAgICAgIHBvcy5sZWZ0ID0gdmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFBvc3kodmFsdWUsIHBvcykge1xuICAgICAgICBwb3MudG9wID0gdmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKHBvc1gsIHBvc1ksIHBvcykge1xuICAgICAgICBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHN3aXRjaCAocG9zWSArIHBvc1gpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RvcGNlbnRlcic6XG4gICAgICAgICAgICAgICAgc2V0UG9zeChnZXRFbGVtZW50SENlbnRlcigpLCBwb3MpO1xuICAgICAgICAgICAgICAgIHNldFBvc3koZ2V0RWxlbWVudFRvcCgpLCBwb3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndG9wcmlnaHQnOlxuICAgICAgICAgICAgICAgIHNldFBvc3goZ2V0RWxlbWVudFJpZ2h0KCksIHBvcyk7XG4gICAgICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50VG9wKCksIHBvcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjZW50ZXJjZW50ZXInOlxuICAgICAgICAgICAgICAgIHNldFBvc3goZ2V0RWxlbWVudEhDZW50ZXIoKSwgcG9zKTtcbiAgICAgICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRWQ2VudGVyKCksIHBvcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjZW50ZXJyaWdodCc6XG4gICAgICAgICAgICAgICAgc2V0UG9zeChnZXRFbGVtZW50UmlnaHQoKSwgcG9zKTtcbiAgICAgICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRWQ2VudGVyKCksIHBvcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjZW50ZXJsZWZ0JzpcbiAgICAgICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRMZWZ0KCksIHBvcyk7XG4gICAgICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50VkNlbnRlcigpLCBwb3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYm90dG9tY2VudGVyJzpcbiAgICAgICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRIQ2VudGVyKCksIHBvcyk7XG4gICAgICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50Qm90dG9tKCksIHBvcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdib3R0b21yaWdodCc6XG4gICAgICAgICAgICAgICAgc2V0UG9zeChnZXRFbGVtZW50UmlnaHQoKSwgcG9zKTtcbiAgICAgICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRCb3R0b20oKSwgcG9zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbWxlZnQnOlxuICAgICAgICAgICAgICAgIHNldFBvc3goZ2V0RWxlbWVudExlZnQoKSwgcG9zKTtcbiAgICAgICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRCb3R0b20oKSwgcG9zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYXNlICd0b3BsZWZ0JzpcbiAgICAgICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRMZWZ0KCksIHBvcyk7XG4gICAgICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50VG9wKCksIHBvcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Qm9keVNjcm9sbFRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgcGFyZW50RG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJvZHlTY3JvbGxMZWZ0KCkge1xuICAgICAgICByZXR1cm4gcGFyZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgcGFyZW50RG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50Qm90dG9tKCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFJlY3QuYm90dG9tICsgZ2V0Qm9keVNjcm9sbFRvcCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50VkNlbnRlcigpIHtcbiAgICAgICAgcmV0dXJuIGdldEVsZW1lbnRUb3AoKSArIChlbGVtZW50UmVjdC5oZWlnaHQgLyAyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudFRvcCgpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRSZWN0LnRvcCArIGdldEJvZHlTY3JvbGxUb3AoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudExlZnQoKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50UmVjdC5sZWZ0ICsgZ2V0Qm9keVNjcm9sbExlZnQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudFJpZ2h0KCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFJlY3QucmlnaHQgKyBnZXRCb2R5U2Nyb2xsTGVmdCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50SENlbnRlcigpIHtcbiAgICAgICAgcmV0dXJuIGdldEVsZW1lbnRMZWZ0KCkgKyAoZWxlbWVudFJlY3Qud2lkdGggLyAyKTtcbiAgICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9wb3NpdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3Bvc2l0aW9uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcG9zaXRpb25fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgcGFyZW50RG9jdW1lbnQ7XG4gICAgdmFyIHRhcmdldENvbnRhaW5lcjtcbiAgICBmdW5jdGlvbiBmaXQoZWxlbWVudCwgdmlld1BvcnRFbGVtZW50LCBheGlzLCBwb3NpdGlvbikge1xuICAgICAgICBpZiAodmlld1BvcnRFbGVtZW50ID09PSB2b2lkIDApIHsgdmlld1BvcnRFbGVtZW50ID0gbnVsbDsgfVxuICAgICAgICBpZiAoYXhpcyA9PT0gdm9pZCAwKSB7IGF4aXMgPSB7IFg6IGZhbHNlLCBZOiBmYWxzZSB9OyB9XG4gICAgICAgIGlmICghYXhpcy5ZICYmICFheGlzLlgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGxlZnQ6IDAsIHRvcDogMCB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtRGF0YSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRhcmdldENvbnRhaW5lciA9IHZpZXdQb3J0RWxlbWVudDtcbiAgICAgICAgcGFyZW50RG9jdW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb25fMS5jYWxjdWxhdGVQb3NpdGlvbihlbGVtZW50LCAnbGVmdCcsICd0b3AnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXhpcy5YKSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyV2lkdGggPSB0YXJnZXRDb250YWluZXIgPyBnZXRUYXJnZXRDb250YWluZXJXaWR0aCgpIDogZ2V0Vmlld1BvcnRXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lckxlZnQgPSBDb250YWluZXJMZWZ0KCk7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyUmlnaHQgPSBDb250YWluZXJSaWdodCgpO1xuICAgICAgICAgICAgdmFyIG92ZXJMZWZ0ID0gY29udGFpbmVyTGVmdCAtIHBvc2l0aW9uLmxlZnQ7XG4gICAgICAgICAgICB2YXIgb3ZlclJpZ2h0ID0gcG9zaXRpb24ubGVmdCArIGVsZW1EYXRhLndpZHRoIC0gY29udGFpbmVyUmlnaHQ7XG4gICAgICAgICAgICBpZiAoZWxlbURhdGEud2lkdGggPiBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVyTGVmdCA+IDAgJiYgb3ZlclJpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ubGVmdCA9IGNvbnRhaW5lclJpZ2h0IC0gZWxlbURhdGEud2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG92ZXJSaWdodCA+IDAgJiYgb3ZlckxlZnQgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5sZWZ0ID0gY29udGFpbmVyTGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxlZnQgPSBvdmVyTGVmdCA+IG92ZXJSaWdodCA/IChjb250YWluZXJSaWdodCAtIGVsZW1EYXRhLndpZHRoKSA6IGNvbnRhaW5lckxlZnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3ZlckxlZnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubGVmdCArPSBvdmVyTGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG92ZXJSaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi5sZWZ0IC09IG92ZXJSaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXhpcy5ZKSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVySGVpZ2h0ID0gdGFyZ2V0Q29udGFpbmVyID8gZ2V0VGFyZ2V0Q29udGFpbmVySGVpZ2h0KCkgOiBnZXRWaWV3UG9ydEhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lclRvcCA9IENvbnRhaW5lclRvcCgpO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lckJvdHRvbSA9IENvbnRhaW5lckJvdHRvbSgpO1xuICAgICAgICAgICAgdmFyIG92ZXJUb3AgPSBjb250YWluZXJUb3AgLSBwb3NpdGlvbi50b3A7XG4gICAgICAgICAgICB2YXIgb3ZlckJvdHRvbSA9IHBvc2l0aW9uLnRvcCArIGVsZW1EYXRhLmhlaWdodCAtIGNvbnRhaW5lckJvdHRvbTtcbiAgICAgICAgICAgIGlmIChlbGVtRGF0YS5oZWlnaHQgPiBjb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3ZlclRvcCA+IDAgJiYgb3ZlckJvdHRvbSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnRvcCA9IGNvbnRhaW5lckJvdHRvbSAtIGVsZW1EYXRhLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3ZlckJvdHRvbSA+IDAgJiYgb3ZlclRvcCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnRvcCA9IGNvbnRhaW5lclRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnRvcCA9IG92ZXJUb3AgPiBvdmVyQm90dG9tID8gKGNvbnRhaW5lckJvdHRvbSAtIGVsZW1EYXRhLmhlaWdodCkgOiBjb250YWluZXJUb3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3ZlclRvcCA+IDApIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi50b3AgKz0gb3ZlclRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG92ZXJCb3R0b20gPiAwKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24udG9wIC09IG92ZXJCb3R0b207XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cbiAgICBleHBvcnRzLmZpdCA9IGZpdDtcbiAgICBmdW5jdGlvbiBpc0NvbGxpZGUoZWxlbWVudCwgdmlld1BvcnRFbGVtZW50LCB4LCB5KSB7XG4gICAgICAgIGlmICh2aWV3UG9ydEVsZW1lbnQgPT09IHZvaWQgMCkgeyB2aWV3UG9ydEVsZW1lbnQgPSBudWxsOyB9XG4gICAgICAgIHZhciBlbGVtT2Zmc2V0ID0gcG9zaXRpb25fMS5jYWxjdWxhdGVQb3NpdGlvbihlbGVtZW50LCAnbGVmdCcsICd0b3AnKTtcbiAgICAgICAgaWYgKHgpIHtcbiAgICAgICAgICAgIGVsZW1PZmZzZXQubGVmdCA9IHg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkpIHtcbiAgICAgICAgICAgIGVsZW1PZmZzZXQudG9wID0geTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICB0YXJnZXRDb250YWluZXIgPSB2aWV3UG9ydEVsZW1lbnQ7XG4gICAgICAgIHBhcmVudERvY3VtZW50ID0gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgICAgICB2YXIgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgdG9wID0gZWxlbU9mZnNldC50b3A7XG4gICAgICAgIHZhciBsZWZ0ID0gZWxlbU9mZnNldC5sZWZ0O1xuICAgICAgICB2YXIgcmlnaHQgPSBlbGVtT2Zmc2V0LmxlZnQgKyBlbGVtZW50UmVjdC53aWR0aDtcbiAgICAgICAgdmFyIGJvdHRvbSA9IGVsZW1PZmZzZXQudG9wICsgZWxlbWVudFJlY3QuaGVpZ2h0O1xuICAgICAgICB2YXIgdG9wRGF0YSA9ICcnO1xuICAgICAgICB2YXIgbGVmdERhdGEgPSAnJztcbiAgICAgICAgdmFyIHlBeGlzID0gdG9wQ29sbGlkZUNoZWNrKHRvcCwgYm90dG9tKTtcbiAgICAgICAgdmFyIHhBeGlzID0gbGVmdENvbGxpZGVDaGVjayhsZWZ0LCByaWdodCk7XG4gICAgICAgIGlmICh5QXhpcy50b3BTaWRlKSB7XG4gICAgICAgICAgICBkYXRhLnB1c2goJ3RvcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4QXhpcy5yaWdodFNpZGUpIHtcbiAgICAgICAgICAgIGRhdGEucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeEF4aXMubGVmdFNpZGUpIHtcbiAgICAgICAgICAgIGRhdGEucHVzaCgnbGVmdCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5QXhpcy5ib3R0b21TaWRlKSB7XG4gICAgICAgICAgICBkYXRhLnB1c2goJ2JvdHRvbScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBleHBvcnRzLmlzQ29sbGlkZSA9IGlzQ29sbGlkZTtcbiAgICBmdW5jdGlvbiBmbGlwKGVsZW1lbnQsIHRhcmdldCwgb2Zmc2V0WCwgb2Zmc2V0WSwgcG9zaXRpb25YLCBwb3NpdGlvblksIHZpZXdQb3J0RWxlbWVudCwgYXhpcykge1xuICAgICAgICBpZiAodmlld1BvcnRFbGVtZW50ID09PSB2b2lkIDApIHsgdmlld1BvcnRFbGVtZW50ID0gbnVsbDsgfVxuICAgICAgICBpZiAoYXhpcyA9PT0gdm9pZCAwKSB7IGF4aXMgPSB7IFg6IHRydWUsIFk6IHRydWUgfTsgfVxuICAgICAgICBpZiAoIXRhcmdldCB8fCAhZWxlbWVudCB8fCAhcG9zaXRpb25YIHx8ICFwb3NpdGlvblkgfHwgKCFheGlzLlggJiYgIWF4aXMuWSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdEVkZ2UgPSB7IFRMOiBudWxsLFxuICAgICAgICAgICAgVFI6IG51bGwsXG4gICAgICAgICAgICBCTDogbnVsbCxcbiAgICAgICAgICAgIEJSOiBudWxsIH07XG4gICAgICAgIHZhciBlRWRnZSA9IHtcbiAgICAgICAgICAgIFRMOiBudWxsLFxuICAgICAgICAgICAgVFI6IG51bGwsXG4gICAgICAgICAgICBCTDogbnVsbCxcbiAgICAgICAgICAgIEJSOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHZhciBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBwb3MgPSB7XG4gICAgICAgICAgICBwb3NYOiBwb3NpdGlvblgsIHBvc1k6IHBvc2l0aW9uWSwgb2Zmc2V0WDogb2Zmc2V0WCwgb2Zmc2V0WTogb2Zmc2V0WSwgcG9zaXRpb246IHsgbGVmdDogMCwgdG9wOiAwIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGFyZ2V0Q29udGFpbmVyID0gdmlld1BvcnRFbGVtZW50O1xuICAgICAgICBwYXJlbnREb2N1bWVudCA9IHRhcmdldC5vd25lckRvY3VtZW50O1xuICAgICAgICB1cGRhdGVFbGVtZW50RGF0YSh0YXJnZXQsIHRFZGdlLCBwb3MpO1xuICAgICAgICBzZXRQb3NpdGlvbihlRWRnZSwgcG9zLCBlbGVtZW50UmVjdCk7XG4gICAgICAgIGlmIChheGlzLlgpIHtcbiAgICAgICAgICAgIGxlZnRGbGlwKHRhcmdldCwgZUVkZ2UsIHRFZGdlLCBwb3MsIGVsZW1lbnRSZWN0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXhpcy5ZICYmIHRFZGdlLlRMLnRvcCA+IC0xKSB7XG4gICAgICAgICAgICB0b3BGbGlwKHRhcmdldCwgZUVkZ2UsIHRFZGdlLCBwb3MsIGVsZW1lbnRSZWN0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRQb3B1cChlbGVtZW50LCBwb3MpO1xuICAgIH1cbiAgICBleHBvcnRzLmZsaXAgPSBmbGlwO1xuICAgIGZ1bmN0aW9uIHNldFBvcHVwKGVsZW1lbnQsIHBvcykge1xuICAgICAgICB2YXIgbGVmdCA9IDA7XG4gICAgICAgIHZhciB0b3AgPSAwO1xuICAgICAgICBpZiAoZWxlbWVudC5vZmZzZXRQYXJlbnQgIT0gbnVsbFxuICAgICAgICAgICAgJiYgKGdldENvbXB1dGVkU3R5bGUoZWxlbWVudC5vZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnYWJzb2x1dGUnIHx8XG4gICAgICAgICAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50Lm9mZnNldFBhcmVudCkucG9zaXRpb24gPT09ICdyZWxhdGl2ZScpKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHBvc2l0aW9uXzEuY2FsY3VsYXRlUG9zaXRpb24oZWxlbWVudC5vZmZzZXRQYXJlbnQsICdsZWZ0JywgJ3RvcCcpO1xuICAgICAgICAgICAgbGVmdCA9IGRhdGEubGVmdDtcbiAgICAgICAgICAgIHRvcCA9IGRhdGEudG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudG9wID0gKHBvcy5wb3NpdGlvbi50b3AgKyBwb3Mub2Zmc2V0WSAtICh0b3ApKSArICdweCc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IChwb3MucG9zaXRpb24ubGVmdCArIHBvcy5vZmZzZXRYIC0gKGxlZnQpKSArICdweCc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnREYXRhKHRhcmdldCwgZWRnZSwgcG9zKSB7XG4gICAgICAgIHBvcy5wb3NpdGlvbiA9IHBvc2l0aW9uXzEuY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCBwb3MucG9zWCwgcG9zLnBvc1kpO1xuICAgICAgICBlZGdlLlRMID0gcG9zaXRpb25fMS5jYWxjdWxhdGVQb3NpdGlvbih0YXJnZXQsICdsZWZ0JywgJ3RvcCcpO1xuICAgICAgICBlZGdlLlRSID0gcG9zaXRpb25fMS5jYWxjdWxhdGVQb3NpdGlvbih0YXJnZXQsICdyaWdodCcsICd0b3AnKTtcbiAgICAgICAgZWRnZS5CUiA9IHBvc2l0aW9uXzEuY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCAnbGVmdCcsICdib3R0b20nKTtcbiAgICAgICAgZWRnZS5CTCA9IHBvc2l0aW9uXzEuY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCAncmlnaHQnLCAnYm90dG9tJyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFBvc2l0aW9uKGVTdGF0dXMsIHBvcywgZWxlbWVudFJlY3QpIHtcbiAgICAgICAgZVN0YXR1cy5UTCA9IHsgdG9wOiBwb3MucG9zaXRpb24udG9wICsgcG9zLm9mZnNldFksIGxlZnQ6IHBvcy5wb3NpdGlvbi5sZWZ0ICsgcG9zLm9mZnNldFggfTtcbiAgICAgICAgZVN0YXR1cy5UUiA9IHsgdG9wOiBlU3RhdHVzLlRMLnRvcCwgbGVmdDogZVN0YXR1cy5UTC5sZWZ0ICsgZWxlbWVudFJlY3Qud2lkdGggfTtcbiAgICAgICAgZVN0YXR1cy5CTCA9IHsgdG9wOiBlU3RhdHVzLlRMLnRvcCArIGVsZW1lbnRSZWN0LmhlaWdodCxcbiAgICAgICAgICAgIGxlZnQ6IGVTdGF0dXMuVEwubGVmdCB9O1xuICAgICAgICBlU3RhdHVzLkJSID0geyB0b3A6IGVTdGF0dXMuVEwudG9wICsgZWxlbWVudFJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgbGVmdDogZVN0YXR1cy5UTC5sZWZ0ICsgZWxlbWVudFJlY3Qud2lkdGggfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGVmdENvbGxpZGVDaGVjayhsZWZ0LCByaWdodCkge1xuICAgICAgICB2YXIgbGVmdFNpZGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIHJpZ2h0U2lkZSA9IGZhbHNlO1xuICAgICAgICBpZiAoKChsZWZ0IC0gZ2V0Qm9keVNjcm9sbExlZnQoKSkgPCBDb250YWluZXJMZWZ0KCkpKSB7XG4gICAgICAgICAgICBsZWZ0U2lkZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJpZ2h0ID4gQ29udGFpbmVyUmlnaHQoKSkge1xuICAgICAgICAgICAgcmlnaHRTaWRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBsZWZ0U2lkZTogbGVmdFNpZGUsIHJpZ2h0U2lkZTogcmlnaHRTaWRlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxlZnRGbGlwKHRhcmdldCwgZWRnZSwgdEVkZ2UsIHBvcywgZWxlbWVudFJlY3QsIGRlZXBDaGVjaykge1xuICAgICAgICB2YXIgY29sbGlkZVNpZGUgPSBsZWZ0Q29sbGlkZUNoZWNrKGVkZ2UuVEwubGVmdCwgZWRnZS5UUi5sZWZ0KTtcbiAgICAgICAgaWYgKCh0RWRnZS5UTC5sZWZ0IC0gZ2V0Qm9keVNjcm9sbExlZnQoKSkgPD0gQ29udGFpbmVyTGVmdCgpKSB7XG4gICAgICAgICAgICBjb2xsaWRlU2lkZS5sZWZ0U2lkZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0RWRnZS5UUi5sZWZ0ID49IENvbnRhaW5lclJpZ2h0KCkpIHtcbiAgICAgICAgICAgIGNvbGxpZGVTaWRlLnJpZ2h0U2lkZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoY29sbGlkZVNpZGUubGVmdFNpZGUgJiYgIWNvbGxpZGVTaWRlLnJpZ2h0U2lkZSkgfHwgKCFjb2xsaWRlU2lkZS5sZWZ0U2lkZSAmJiBjb2xsaWRlU2lkZS5yaWdodFNpZGUpKSB7XG4gICAgICAgICAgICBpZiAocG9zLnBvc1ggPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICBwb3MucG9zWCA9ICdsZWZ0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvcy5wb3NYID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcy5vZmZzZXRYID0gcG9zLm9mZnNldFggKyBlbGVtZW50UmVjdC53aWR0aDtcbiAgICAgICAgICAgIHBvcy5vZmZzZXRYID0gLTEgKiBwb3Mub2Zmc2V0WDtcbiAgICAgICAgICAgIHBvcy5wb3NpdGlvbiA9IHBvc2l0aW9uXzEuY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCBwb3MucG9zWCwgcG9zLnBvc1kpO1xuICAgICAgICAgICAgc2V0UG9zaXRpb24oZWRnZSwgcG9zLCBlbGVtZW50UmVjdCk7XG4gICAgICAgICAgICBpZiAoZGVlcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgbGVmdEZsaXAodGFyZ2V0LCBlZGdlLCB0RWRnZSwgcG9zLCBlbGVtZW50UmVjdCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvcEZsaXAodGFyZ2V0LCBlZGdlLCB0RWRnZSwgcG9zLCBlbGVtZW50UmVjdCwgZGVlcENoZWNrKSB7XG4gICAgICAgIHZhciBjb2xsaWRlU2lkZSA9IHRvcENvbGxpZGVDaGVjayhlZGdlLlRMLnRvcCwgZWRnZS5CTC50b3ApO1xuICAgICAgICBpZiAoKHRFZGdlLlRMLnRvcCAtIGdldEJvZHlTY3JvbGxUb3AoKSkgPD0gQ29udGFpbmVyVG9wKCkpIHtcbiAgICAgICAgICAgIGNvbGxpZGVTaWRlLnRvcFNpZGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodEVkZ2UuQkwudG9wID49IENvbnRhaW5lckJvdHRvbSgpKSB7XG4gICAgICAgICAgICBjb2xsaWRlU2lkZS5ib3R0b21TaWRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChjb2xsaWRlU2lkZS50b3BTaWRlICYmICFjb2xsaWRlU2lkZS5ib3R0b21TaWRlKSB8fCAoIWNvbGxpZGVTaWRlLnRvcFNpZGUgJiYgY29sbGlkZVNpZGUuYm90dG9tU2lkZSkpIHtcbiAgICAgICAgICAgIGlmIChwb3MucG9zWSA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgICAgICBwb3MucG9zWSA9ICdib3R0b20nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9zLnBvc1kgPSAndG9wJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcy5vZmZzZXRZID0gcG9zLm9mZnNldFkgKyBlbGVtZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICBwb3Mub2Zmc2V0WSA9IC0xICogcG9zLm9mZnNldFk7XG4gICAgICAgICAgICBwb3MucG9zaXRpb24gPSBwb3NpdGlvbl8xLmNhbGN1bGF0ZVBvc2l0aW9uKHRhcmdldCwgcG9zLnBvc1gsIHBvcy5wb3NZKTtcbiAgICAgICAgICAgIHNldFBvc2l0aW9uKGVkZ2UsIHBvcywgZWxlbWVudFJlY3QpO1xuICAgICAgICAgICAgaWYgKGRlZXBDaGVjaykge1xuICAgICAgICAgICAgICAgIHRvcEZsaXAodGFyZ2V0LCBlZGdlLCB0RWRnZSwgcG9zLCBlbGVtZW50UmVjdCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvcENvbGxpZGVDaGVjayh0b3AsIGJvdHRvbSkge1xuICAgICAgICB2YXIgdG9wU2lkZSA9IGZhbHNlO1xuICAgICAgICB2YXIgYm90dG9tU2lkZSA9IGZhbHNlO1xuICAgICAgICBpZiAoKHRvcCAtIGdldEJvZHlTY3JvbGxUb3AoKSkgPCBDb250YWluZXJUb3AoKSkge1xuICAgICAgICAgICAgdG9wU2lkZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvdHRvbSA+IENvbnRhaW5lckJvdHRvbSgpKSB7XG4gICAgICAgICAgICBib3R0b21TaWRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0b3BTaWRlOiB0b3BTaWRlLCBib3R0b21TaWRlOiBib3R0b21TaWRlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFRhcmdldENvbnRhaW5lcldpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXJnZXRDb250YWluZXJIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXRDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXJnZXRDb250YWluZXJMZWZ0KCkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFRhcmdldENvbnRhaW5lclRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldENvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgfVxuICAgIGZ1bmN0aW9uIENvbnRhaW5lclRvcCgpIHtcbiAgICAgICAgaWYgKHRhcmdldENvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIGdldFRhcmdldENvbnRhaW5lclRvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDb250YWluZXJMZWZ0KCkge1xuICAgICAgICBpZiAodGFyZ2V0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFyZ2V0Q29udGFpbmVyTGVmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDb250YWluZXJSaWdodCgpIHtcbiAgICAgICAgaWYgKHRhcmdldENvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIChnZXRCb2R5U2Nyb2xsTGVmdCgpICsgZ2V0VGFyZ2V0Q29udGFpbmVyTGVmdCgpICsgZ2V0VGFyZ2V0Q29udGFpbmVyV2lkdGgoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChnZXRCb2R5U2Nyb2xsTGVmdCgpICsgZ2V0Vmlld1BvcnRXaWR0aCgpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29udGFpbmVyQm90dG9tKCkge1xuICAgICAgICBpZiAodGFyZ2V0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKGdldEJvZHlTY3JvbGxUb3AoKSArIGdldFRhcmdldENvbnRhaW5lclRvcCgpICsgZ2V0VGFyZ2V0Q29udGFpbmVySGVpZ2h0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoZ2V0Qm9keVNjcm9sbFRvcCgpICsgZ2V0Vmlld1BvcnRIZWlnaHQoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJvZHlTY3JvbGxUb3AoKSB7XG4gICAgICAgIHJldHVybiBwYXJlbnREb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IHBhcmVudERvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRCb2R5U2Nyb2xsTGVmdCgpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IHBhcmVudERvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Vmlld1BvcnRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFZpZXdQb3J0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9jb2xsaXNpb24uanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9wb3NpdGlvblwiLCBcIi4vY29sbGlzaW9uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcG9zaXRpb25fMSwgY29sbGlzaW9uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHBvc2l0aW9uXzEpO1xuICAgIF9fZXhwb3J0KGNvbGxpc2lvbl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZGlhbG9nXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZGlhbG9nXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGRpYWxvZ18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZGlhbG9nL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vcG9wdXAvcG9wdXBcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9iYXNlXzYsIHBvcHVwXzEsIGVqMl9idXR0b25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJ1dHRvblByb3BzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEJ1dHRvblByb3BzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBCdXR0b25Qcm9wcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQnV0dG9uUHJvcHM7XG4gICAgfShlajJfYmFzZV8zLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgQnV0dG9uUHJvcHMucHJvdG90eXBlLCBcImJ1dHRvbk1vZGVsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoKVxuICAgIF0sIEJ1dHRvblByb3BzLnByb3RvdHlwZSwgXCJjbGlja1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQnV0dG9uUHJvcHMgPSBCdXR0b25Qcm9wcztcbiAgICB2YXIgUk9PVCA9ICdlLWRpYWxvZyc7XG4gICAgdmFyIFJUTCA9ICdlLXJ0bCc7XG4gICAgdmFyIERMR19IRUFERVJfQ09OVEVOVCA9ICdlLWRsZy1oZWFkZXItY29udGVudCc7XG4gICAgdmFyIERMR19IRUFERVIgPSAnZS1kbGctaGVhZGVyJztcbiAgICB2YXIgRExHX0ZPT1RFUl9DT05URU5UID0gJ2UtZm9vdGVyLWNvbnRlbnQnO1xuICAgIHZhciBNT0RBTF9ETEcgPSAnZS1kbGctbW9kYWwnO1xuICAgIHZhciBETEdfQ09OVEVOVCA9ICdlLWRsZy1jb250ZW50JztcbiAgICB2YXIgRExHX0NMT1NFX0lDT04gPSAnZS1pY29uLWRsZy1jbG9zZSc7XG4gICAgdmFyIERMR19PVkVSTEFZID0gJ2UtZGxnLW92ZXJsYXknO1xuICAgIHZhciBETEdfQ09OVEFJTkVSID0gJ2UtZGxnLWNvbnRhaW5lcic7XG4gICAgdmFyIFNDUk9MTF9ESVNBQkxFRCA9ICdlLXNjcm9sbC1kaXNhYmxlZCc7XG4gICAgdmFyIERMR19QUklNQVJZX0JVVFRPTiA9ICdlLXByaW1hcnknO1xuICAgIHZhciBJQ09OID0gJ2UtaWNvbnMnO1xuICAgIHZhciBQT1BVUF9ST09UID0gJ2UtcG9wdXAnO1xuICAgIHZhciBERVZJQ0UgPSAnZS1kZXZpY2UnO1xuICAgIHZhciBGVUxMU0NSRUVOID0gJ2UtZGxnLWZ1bGxzY3JlZW4nO1xuICAgIHZhciBETEdfQ0xPU0VfSUNPTl9CVE4gPSAnZS1kbGctY2xvc2VpY29uLWJ0bic7XG4gICAgdmFyIERMR19ISURFID0gJ2UtcG9wdXAtY2xvc2UnO1xuICAgIHZhciBETEdfU0hPVyA9ICdlLXBvcHVwLW9wZW4nO1xuICAgIHZhciBEaWFsb2cgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGlhbG9nLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEaWFsb2cob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY2xvc2VJY29uQ2xpY2tFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VkRnJvbSA9IGV2ZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZGxnT3ZlcmxheUNsaWNrRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignb3ZlcmxheUNsaWNrJywgZXZlbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gOSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuYnRuT2JqLmVsZW1lbnQgJiYgIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2FibGVFbGVtZW50cyh0aGlzLmVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuZm9jdXNhYmxlRWxlbWVudHModGhpcy5lbGVtZW50KSAmJiBldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnRuT2JqLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpc1RhZ05hbWUgPSAoWydpbnB1dCcsICd0ZXh0YXJlYSddLmluZGV4T2YoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpO1xuICAgICAgICAgICAgdmFyIGlzQ29udGVudEVkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghaXNUYWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgaXNDb250ZW50RWRpdCA9IGVsZW1lbnQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT09ICd0cnVlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAyNyAmJiB0aGlzLmNsb3NlT25Fc2NhcGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlZEZyb20gPSBldmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoZXZlbnQua2V5Q29kZSA9PT0gMTMgJiYgZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nICYmXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoRExHX1BSSU1BUllfQlVUVE9OKSAmJiAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnByaW1hcnlCdXR0b25FbGUpKSB8fFxuICAgICAgICAgICAgICAgIChldmVudC5rZXlDb2RlID09PSAxMyAmJiAhZXZlbnQuY3RybEtleSAmJiBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3RleHRhcmVhJyAmJlxuICAgICAgICAgICAgICAgICAgICBpc1RhZ05hbWUgJiYgIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wcmltYXJ5QnV0dG9uRWxlKSkgfHxcbiAgICAgICAgICAgICAgICAoZXZlbnQua2V5Q29kZSA9PT0gMTMgJiYgZXZlbnQuY3RybEtleSAmJiAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYScgfHxcbiAgICAgICAgICAgICAgICAgICAgaXNDb250ZW50RWRpdCkpICYmICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpbWFyeUJ1dHRvbkVsZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnV0dG9uSW5kZXhfMTtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RQcmltYXJ5ID0gdGhpcy5idXR0b25zLnNvbWUoZnVuY3Rpb24gKGRhdGEsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkluZGV4XzEgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbk1vZGVsID0gZGF0YS5idXR0b25Nb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGJ1dHRvbk1vZGVsKSAmJiBidXR0b25Nb2RlbC5pc1ByaW1hcnkgPT09IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0UHJpbWFyeSAmJiB0eXBlb2YgKHRoaXMuYnV0dG9uc1tidXR0b25JbmRleF8xXS5jbGljaykgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5idXR0b25zW2J1dHRvbkluZGV4XzFdLmNsaWNrLmNhbGwoX3RoaXMsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGUgPSAoKHR5cGVvZiB0aGlzLnRhcmdldCkgPT09ICdzdHJpbmcnKSA/XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy50YXJnZXQpIDogdGhpcy50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBST09UKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBERVZJQ0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRDU1NDbGFzcygpO1xuICAgICAgICAgICAgdGhpcy5zZXRNYXhIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5pbml0UmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgcm9sZTogJ2RpYWxvZycgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnpJbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFppbmRleFBhcnRpYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhlYWRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Nsb3NlSWNvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2xvc2VJY29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50KSAmJiB0aGlzLmNvbnRlbnQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmVsZW1lbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb290ZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYnV0dG9uc1swXS5idXR0b25Nb2RlbCkgJiYgdGhpcy5mb290ZXJUZW1wbGF0ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJ1dHRvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dEcmFnZ2luZyAmJiAoIXRoaXMuaXNNb2RhbCkgJiYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaGVhZGVyQ29udGVudCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBbGxvd0RyYWdnaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLW1vZGFsJzogKHRoaXMuaXNNb2RhbCA/ICd0cnVlJyA6ICdmYWxzZScpIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNNb2RhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0RWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb2RhbCA/IHRoaXMudGFyZ2V0RWxlLmFwcGVuZENoaWxkKHRoaXMuZGxnQ29udGFpbmVyKSA6IHRoaXMudGFyZ2V0RWxlLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBvcHVwT2JqID0gbmV3IHBvcHVwXzEuUG9wdXAodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgICAgICAgICB6SW5kZXg6IHRoaXMuekluZGV4LFxuICAgICAgICAgICAgICAgIHJlbGF0ZVRvOiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBhY3Rpb25PblNjcm9sbDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9jdXNDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudW5CaW5kRXZlbnQoX3RoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kbGdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdjbG9zZScsIF90aGlzLmNsb3NlZEZyb20pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZWRGcm9tID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChfdGhpcy5zdG9yZUFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdG9yZUFjdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRFbmFibGVSVEwoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIERMR19ISURFKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLnBvc2l0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwT2JqLnNldFByb3BlcnRpZXMoe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgWDogdGhpcy5wb3NpdGlvbi5YLCBZOiB0aGlzLnBvc2l0aW9uLllcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZS1kbGctJyArIHRoaXMucG9zaXRpb24uWCArICctJyArIHRoaXMucG9zaXRpb24uWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0WmluZGV4UGFydGlhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2dQYXJlbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBwYXJlbnRaaW5kZXggPSBbXTtcbiAgICAgICAgICAgIHdoaWxlIChkaWFsb2dQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nUGFyZW50LnRhZ05hbWUgIT09ICdCT0RZJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGRpYWxvZ1BhcmVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGRpYWxvZ1BhcmVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgncG9zaXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAnYXV0bycgJiYgcG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRaaW5kZXgucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nUGFyZW50ID0gZGlhbG9nUGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW5aaW5kZXggPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jdW1lbnQuYm9keS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LmlzRXF1YWxOb2RlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW5baV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keS5jaGlsZHJlbltpXSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW5baV0sIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gJ2F1dG8nICYmIHBvc2l0aW9uICE9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5aaW5kZXgucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZHJlblppbmRleC5wdXNoKCc5OTknKTtcbiAgICAgICAgICAgIHZhciBmaW5hbFZhbHVlID0gcGFyZW50WmluZGV4LmNvbmNhdChjaGlsZHJlblppbmRleCk7XG4gICAgICAgICAgICB0aGlzLnpJbmRleCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGZpbmFsVmFsdWUpICsgMTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLnNldEFsbG93RHJhZ2dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGhhbmRsZUNvbnRlbnQgPSAnLicgKyBETEdfSEVBREVSX0NPTlRFTlQ7XG4gICAgICAgICAgICB0aGlzLmRyYWdPYmogPSBuZXcgZWoyX2Jhc2VfNi5EcmFnZ2FibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgY2xvbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhhbmRsZTogaGFuZGxlQ29udGVudCxcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdkcmFnU3RhcnQnLCBldmVudCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ2RyYWdTdG9wJywgZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJhZzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ2RyYWcnLCBldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXRFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnT2JqLmRyYWdBcmVhID0gdGhpcy50YXJnZXRFbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuc2V0QnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5idXR0b25Db250ZW50ID0gW107XG4gICAgICAgICAgICB2YXIgcHJpbWFyeUJ0bkZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYnRuID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7IGF0dHJzOiB7IHR5cGU6ICdidXR0b24nIH0gfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b25Db250ZW50LnB1c2goYnRuLm91dGVySFRNTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEZvb3RlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYnRuT2JqID0gbmV3IGVqMl9idXR0b25zXzEuQnV0dG9uKHRoaXMuYnV0dG9uc1tpXS5idXR0b25Nb2RlbCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5idXR0b25zW2ldLmNsaWNrKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQuY2hpbGRyZW5baV0sICdjbGljaycsIHRoaXMuYnV0dG9uc1tpXS5jbGljaywgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYnRuT2JqLmFwcGVuZFRvKHRoaXMuZnRyVGVtcGxhdGVDb250ZW50LmNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaW1hcnlCdXR0b25FbGUgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1wcmltYXJ5JylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtZGVzY3JpYmVkYnknOiB0aGlzLmVsZW1lbnQuaWQgKyAnX2RpYWxvZy1jb250ZW50JyB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IERMR19DT05URU5ULCBpZDogdGhpcy5lbGVtZW50LmlkICsgJ19kaWFsb2ctY29udGVudCcgfSk7XG4gICAgICAgICAgICB0eXBlb2YgKHRoaXMuY29udGVudCkgPT09ICdzdHJpbmcnID8gdGhpcy5jb250ZW50RWxlLmlubmVySFRNTCA9IHRoaXMuY29udGVudCA6IHRoaXMuY29udGVudEVsZS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSA/IHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5jb250ZW50RWxlLCB0aGlzLmVsZW1lbnQuY2hpbGRyZW5bMV0pIDpcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuY29udGVudEVsZSwgdGhpcy5lbGVtZW50LmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNYXhIZWlnaHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5zZXRNYXhIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGlzcGxheSA9IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0KSkgP1xuICAgICAgICAgICAgICAgICh0aGlzLnRhcmdldEVsZS5vZmZzZXRIZWlnaHQgLSAyMCkgKyAncHgnIDogKHdpbmRvdy5pbm5lckhlaWdodCAtIDIwKSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuc2V0RW5hYmxlUlRMID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGVSdGwgPyBlajJfYmFzZV8yLmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBSVEwpIDogZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgUlRMKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5zZXRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlckVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogdGhpcy5lbGVtZW50LmlkICsgJ190aXRsZScsIGNsYXNzTmFtZTogRExHX0hFQURFUiwgaW5uZXJIVE1MOiB0aGlzLmhlYWRlciB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtbGFiZWxsZWRieSc6IHRoaXMuZWxlbWVudC5pZCArICdfdGl0bGUnIH0pO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlckNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5oZWFkZXJFbGUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmhlYWRlckNvbnRlbnQsIHRoaXMuZWxlbWVudC5jaGlsZHJlblswXSk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuc2V0Rm9vdGVyVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZ0clRlbXBsYXRlQ29udGVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogRExHX0ZPT1RFUl9DT05URU5ULFxuICAgICAgICAgICAgICAgIGlubmVySFRNTDogKHRoaXMuZm9vdGVyVGVtcGxhdGUgIT09ICcnID8gdGhpcy5mb290ZXJUZW1wbGF0ZSA6IHRoaXMuYnV0dG9uQ29udGVudC5qb2luKCcnKSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZnRyVGVtcGxhdGVDb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5jcmVhdGVIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQ29udGVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IERMR19IRUFERVJfQ09OVEVOVCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5yZW5kZXJDbG9zZUljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlSWNvbiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgeyBjbGFzc05hbWU6IERMR19DTE9TRV9JQ09OX0JUTiwgYXR0cnM6IHsgdHlwZTogJ2J1dHRvbicgfSB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VJY29uQnRuT2JqID0gbmV3IGVqMl9idXR0b25zXzEuQnV0dG9uKHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBpY29uQ3NzOiBETEdfQ0xPU0VfSUNPTiArICcgJyArIElDT04gfSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlSWNvblRpdGxlKCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucHJlcGVuZChbdGhpcy5jbG9zZUljb25dLCB0aGlzLmhlYWRlckNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5wcmVwZW5kKFt0aGlzLmNsb3NlSWNvbl0sIHRoaXMuaGVhZGVyQ29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmhlYWRlckNvbnRlbnQsIHRoaXMuZWxlbWVudC5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlSWNvbkJ0bk9iai5hcHBlbmRUbyh0aGlzLmNsb3NlSWNvbik7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuY2xvc2VJY29uVGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb2NhbGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwxMG4gPSBuZXcgZWoyX2Jhc2VfMS5MMTBuKCdEaWFsb2cnLCB7IGxvY2FsZTogJ0Nsb3NlJyB9KTtcbiAgICAgICAgICAgICAgICBsMTBuLnNldExvY2FsZSh0aGlzLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgdmFyIGNsb3NlSWNvblRpdGxlID0gbDEwbi5nZXRDb25zdGFudCgnQ2xvc2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlSWNvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgY2xvc2VJY29uVGl0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUljb24uc2V0QXR0cmlidXRlKCd0aXRsZScsICdDbG9zZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLnNldENTU0NsYXNzID0gZnVuY3Rpb24gKG9sZENTU0NsYXNzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIHRoaXMuY3NzQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2xkQ1NTQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBvbGRDU1NDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5zZXRJc01vZGFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBETEdfQ09OVEFJTkVSIH0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZGxnQ29udGFpbmVyLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIE1PREFMX0RMRyk7XG4gICAgICAgICAgICB0aGlzLmRsZ092ZXJsYXkgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBETEdfT1ZFUkxBWSB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT3ZlcmxheS5zdHlsZS56SW5kZXggPSAodGhpcy56SW5kZXggLSAxKS50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5kbGdPdmVybGF5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5nZXRWYWxpZEZvY3VzTm9kZSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgICAgICBmb3IgKHZhciB1ID0gMDsgdSA8IGl0ZW1zLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGl0ZW1zW3VdO1xuICAgICAgICAgICAgICAgIGlmICgobm9kZS5jbGllbnRIZWlnaHQgPiAwIHx8IChub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnICYmIG5vZGUuaGFzQXR0cmlidXRlKCdocmVmJykpKSAmJiBub2RlLnRhYkluZGV4ID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgIW5vZGUuZGlzYWJsZWQgJiYgIXRoaXMuZGlzYWJsZUVsZW1lbnQobm9kZSwgJ1tkaXNhYmxlZF0sW2FyaWEtZGlzYWJsZWQ9XCJ0cnVlXCJdLFt0eXBlPVwiaGlkZGVuXCJdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuZm9jdXNhYmxlRWxlbWVudHMgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJ2lucHV0LHNlbGVjdCx0ZXh0YXJlYSxidXR0b24sYSxbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSxbdGFiaW5kZXhdJztcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbGlkRm9jdXNOb2RlKGl0ZW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLmdldEF1dG9Gb2N1c05vZGUgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIERMR19DTE9TRV9JQ09OX0JUTik7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAnW2F1dG9mb2N1c10nO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwodmFsdWUpO1xuICAgICAgICAgICAgdmFyIHZhbGlkTm9kZSA9IHRoaXMuZ2V0VmFsaWRGb2N1c05vZGUoaXRlbXMpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHZhbGlkTm9kZSkpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gdmFsaWROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsaWROb2RlID0gdGhpcy5mb2N1c2FibGVFbGVtZW50cyh0aGlzLmNvbnRlbnRFbGUpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh2YWxpZE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlID0gdmFsaWROb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnByaW1hcnlCdXR0b25FbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBETEdfUFJJTUFSWV9CVVRUT04pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLmRpc2FibGVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIHQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50TWF0Y2ggPSBlbGVtZW50ID8gZWxlbWVudC5tYXRjaGVzIHx8IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGVsZW1lbnQubXNNYXRjaGVzU2VsZWN0b3IgOiBudWxsO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRNYXRjaCkge1xuICAgICAgICAgICAgICAgIGZvciAoOyBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCAmJiBlbGVtZW50TWF0Y2guY2FsbChlbGVtZW50LCB0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5mb2N1c0NvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZ2V0QXV0b0ZvY3VzTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIG5vZGUgPSAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChlbGVtZW50KSA/IGVsZW1lbnQgOiB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBub2RlLmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmJpbmRFdmVudCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLmJpbmRFdmVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQoZWxlbWVudCwgJ2tleWRvd24nLCB0aGlzLmtleURvd24sIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLnVuQmluZEV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGVtZW50LCAna2V5ZG93bicsIHRoaXMua2V5RG93bik7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZGlhbG9nJztcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudCkgJiYgdGhpcy5jb250ZW50ICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnRFbGUpICYmIHRoaXMuY29udGVudEVsZS5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSAhPT0gJ2RpYWxvZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgKHRoaXMuY29udGVudCkgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZS5pbm5lckhUTUwgPSB0aGlzLmNvbnRlbnQgOiB0aGlzLmNvbnRlbnRFbGUuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNYXhIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudEVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5jb250ZW50RWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMuaGVhZGVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKERMR19IRUFERVIpLmxlbmd0aCA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShETEdfSEVBREVSKVswXS5pbm5lckhUTUwgPSB0aGlzLmhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc2V0SGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9vdGVyVGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoRExHX0ZPT1RFUl9DT05URU5UKS5sZW5ndGggPiAwID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZ0clRlbXBsYXRlQ29udGVudC5pbm5lckhUTUwgPSB0aGlzLmZvb3RlclRlbXBsYXRlIDogdGhpcy5zZXRGb290ZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dDbG9zZUljb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKERMR19DTE9TRV9JQ09OKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dDbG9zZUljb24gJiYgdGhpcy5oZWFkZXIgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMuaGVhZGVyQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLnNob3dDbG9zZUljb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2godGhpcy5jbG9zZUljb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2xvc2VJY29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDbG9zZUljb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlSWNvblRpdGxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndmlzaWJsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2lzTW9kYWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsIHRoaXMuaXNNb2RhbCA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRhcmdldEVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc01vZGFsID8gdGhpcy50YXJnZXRFbGUuYXBwZW5kQ2hpbGQodGhpcy5kbGdDb250YWluZXIpIDogdGhpcy50YXJnZXRFbGUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBNT0RBTF9ETEcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW2RvY3VtZW50LmJvZHldLCBTQ1JPTExfRElTQUJMRUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMuZGxnT3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuZGxnQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5kbGdDb250YWluZXIuZmlyc3RDaGlsZCwgdGhpcy5kbGdDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZGxnQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChuZXdQcm9wLmhlaWdodCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3dpZHRoJzogZWoyX2Jhc2VfNC5mb3JtYXRVbml0KG5ld1Byb3Aud2lkdGgpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pJbmRleCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwT2JqLnpJbmRleCA9IHRoaXMuekluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q1NTQ2xhc3Mob2xkUHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYW5pbWF0aW9uU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnV0dG9ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5idXR0b25zWzBdLmJ1dHRvbk1vZGVsKSAmJiB0aGlzLmZvb3RlclRlbXBsYXRlID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZ0clRlbXBsYXRlQ29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dEcmFnZ2luZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd0RyYWdnaW5nICYmICghdGhpcy5pc01vZGFsKSAmJiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFsbG93RHJhZ2dpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGFyZ2V0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPYmoucmVsYXRlVG8gPSBuZXdQcm9wLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwb3NpdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkUHJvcC5wb3NpdGlvbi5YID09PSB0aGlzLnBvc2l0aW9uLlggJiYgb2xkUHJvcC5wb3NpdGlvbi5ZID09PSB0aGlzLnBvc2l0aW9uLlkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdlLWRsZy0nICsgb2xkUHJvcC5wb3NpdGlvbi5YICsgJy0nICsgb2xkUHJvcC5wb3NpdGlvbi5ZKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdlLWRsZy0nICsgdGhpcy5wb3NpdGlvbi5YICsgJy0nICsgdGhpcy5wb3NpdGlvbi5ZKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPYmoucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEVuYWJsZVJUTCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KFtdKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBjbGFzc0FycmF5ID0gW1xuICAgICAgICAgICAgICAgICAgICBST09ULCBSVEwsIE1PREFMX0RMR1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50LCB0aGlzLmVsZW1lbnRdLCBjbGFzc0FycmF5KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3B1cE9iai5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhQT1BVUF9ST09UKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYnRuT2JqKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ0bk9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5kZXRhY2godGhpcy5kbGdPdmVybGF5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB0aGlzLmRsZ0NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZGV0YWNoKHRoaXMuZGxnQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2cucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q2xvc2VJY29uKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuY2xvc2VJY29uLCAnY2xpY2snLCB0aGlzLmNsb3NlSWNvbkNsaWNrRXZlbnRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5kbGdPdmVybGF5LCAnY2xpY2snLCB0aGlzLmRsZ092ZXJsYXlDbGlja0V2ZW50SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Nsb3NlSWNvbikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmNsb3NlSWNvbiwgJ2NsaWNrJywgdGhpcy5jbG9zZUljb25DbGlja0V2ZW50SGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZGxnT3ZlcmxheSwgJ2NsaWNrJywgdGhpcy5kbGdPdmVybGF5Q2xpY2tFdmVudEhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYnV0dG9uc1swXS5idXR0b25Nb2RlbCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLmJ1dHRvbnNbaV0uY2xpY2spID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQuY2hpbGRyZW5baV0sICdjbGljaycsIHRoaXMuYnV0dG9uc1tpXS5jbGljayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUucmVmcmVzaFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKGlzRnVsbFNjcmVlbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKERMR19TSE9XKSB8fCAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXNGdWxsU2NyZWVuKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoaXNGdWxsU2NyZWVuKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1bGxTY3JlZW4oaXNGdWxsU2NyZWVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZUFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlT3BlbicpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwgJiYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT3ZlcmxheSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0RWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0RWxlID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPdmVybGF5LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0aGlzLnRhcmdldEVsZV0sIFNDUk9MTF9ESVNBQkxFRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFtkb2N1bWVudC5ib2R5XSwgU0NST0xMX0RJU0FCTEVEKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgb3BlbkFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgKyAnSW4nLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5hbmltYXRpb25TZXR0aW5ncy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IHRoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZGVsYXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZWZmZWN0ID09PSAnTm9uZScgPyB0aGlzLnBvcHVwT2JqLnNob3coKSA6IHRoaXMucG9wdXBPYmouc2hvdyhvcGVuQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlQ2xvc2UnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ092ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRhcmdldEVsZSkgPyBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLnRhcmdldEVsZV0sIFNDUk9MTF9ESVNBQkxFRCkgOlxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFtkb2N1bWVudC5ib2R5XSwgU0NST0xMX0RJU0FCTEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9zZUFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFuaW1hdGlvblNldHRpbmdzLmVmZmVjdCArICdPdXQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvblNldHRpbmdzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGRlbGF5OiB0aGlzLmFuaW1hdGlvblNldHRpbmdzLmRlbGF5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgPT09ICdOb25lJyA/IHRoaXMucG9wdXBPYmouaGlkZSgpIDogdGhpcy5wb3B1cE9iai5oaWRlKGNsb3NlQW5pbWF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZy5wcm90b3R5cGUuZnVsbFNjcmVlbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdG9wID0gdGhpcy5lbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gdGhpcy5lbGVtZW50Lm9mZnNldExlZnQ7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIEZVTExTQ1JFRU4pO1xuICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLnRhcmdldCkpID9cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudGFyZ2V0RWxlLm9mZnNldEhlaWdodCkgKyAncHgnIDogKHdpbmRvdy5pbm5lckhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFtkb2N1bWVudC5ib2R5XSwgU0NST0xMX0RJU0FCTEVEKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd0RyYWdnaW5nICYmICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZHJhZ09iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBGVUxMU0NSRUVOKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFtkb2N1bWVudC5ib2R5XSwgU0NST0xMX0RJU0FCTEVEKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd0RyYWdnaW5nICYmICghdGhpcy5pc01vZGFsKSAmJiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBbGxvd0RyYWdnaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEaWFsb2c7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwic2hvd0Nsb3NlSWNvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiaXNNb2RhbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiaGVhZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcInZpc2libGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnMTAwJScpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJ6SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJmb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiYWxsb3dEcmFnZ2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbGxlY3Rpb24oW3t9XSwgQnV0dG9uUHJvcHMpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJidXR0b25zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImNsb3NlT25Fc2NhcGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh7IGVmZmVjdDogJ0ZhZGUnLCBkdXJhdGlvbjogNDAwLCBkZWxheTogMCB9KVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiYW5pbWF0aW9uU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9KVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImxvY2FsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiYmVmb3JlT3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiYmVmb3JlQ2xvc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJkcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJkcmFnU3RvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImRyYWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJvdmVybGF5Q2xpY2tcIiwgdm9pZCAwKTtcbiAgICBEaWFsb2cgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBEaWFsb2cpO1xuICAgIGV4cG9ydHMuRGlhbG9nID0gRGlhbG9nO1xuICAgIGV4cG9ydHMuZGlhbG9nQnVpbGRlciA9IGVqMl9iYXNlXzEuQ3JlYXRlQnVpbGRlcihEaWFsb2cpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kaWFsb2cvZGlhbG9nLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdG9vbHRpcFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHRvb2x0aXBfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQodG9vbHRpcF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdG9vbHRpcC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vcG9wdXAvcG9wdXBcIiwgXCIuLi9jb21tb24vcG9zaXRpb25cIiwgXCIuLi9jb21tb24vY29sbGlzaW9uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgZWoyX2Jhc2VfNSwgcG9wdXBfMSwgcG9zaXRpb25fMSwgY29sbGlzaW9uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFRPVUNIRU5EX0hJREVfREVMQVkgPSAxNTAwO1xuICAgIHZhciBUQVBIT0xEX1RIUkVTSE9MRCA9IDUwMDtcbiAgICB2YXIgU0hPV19QT0lOVEVSX1RJUF9HQVAgPSAwO1xuICAgIHZhciBISURFX1BPSU5URVJfVElQX0dBUCA9IDg7XG4gICAgdmFyIE1PVVNFX1RSQUlMX0dBUCA9IDI7XG4gICAgdmFyIFBPSU5URVJfQURKVVNUID0gMjtcbiAgICB2YXIgUk9PVCA9ICdlLXRvb2x0aXAnO1xuICAgIHZhciBSVEwgPSAnZS1ydGwnO1xuICAgIHZhciBERVZJQ0UgPSAnZS1iaWdnZXInO1xuICAgIHZhciBJQ09OID0gJ2UtaWNvbnMnO1xuICAgIHZhciBDTE9TRSA9ICdlLXRvb2x0aXAtY2xvc2UnO1xuICAgIHZhciBUT09MVElQX1dSQVAgPSAnZS10b29sdGlwLXdyYXAnO1xuICAgIHZhciBDT05URU5UID0gJ2UtdGlwLWNvbnRlbnQnO1xuICAgIHZhciBBUlJPV19USVAgPSAnZS1hcnJvdy10aXAnO1xuICAgIHZhciBBUlJPV19USVBfT1VURVIgPSAnZS1hcnJvdy10aXAtb3V0ZXInO1xuICAgIHZhciBBUlJPV19USVBfSU5ORVIgPSAnZS1hcnJvdy10aXAtaW5uZXInO1xuICAgIHZhciBUSVBfQk9UVE9NID0gJ2UtdGlwLWJvdHRvbSc7XG4gICAgdmFyIFRJUF9UT1AgPSAnZS10aXAtdG9wJztcbiAgICB2YXIgVElQX0xFRlQgPSAnZS10aXAtbGVmdCc7XG4gICAgdmFyIFRJUF9SSUdIVCA9ICdlLXRpcC1yaWdodCc7XG4gICAgdmFyIFBPUFVQX1JPT1QgPSAnZS1wb3B1cCc7XG4gICAgdmFyIFBPUFVQX09QRU4gPSAnZS1wb3B1cC1vcGVuJztcbiAgICB2YXIgUE9QVVBfQ0xPU0UgPSAnZS1wb3B1cC1jbG9zZSc7XG4gICAgdmFyIEFuaW1hdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBbmltYXRpb24sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFuaW1hdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQW5pbWF0aW9uO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoeyBlZmZlY3Q6ICdGYWRlSW4nLCBkdXJhdGlvbjogMTUwLCBkZWxheTogMCB9KVxuICAgIF0sIEFuaW1hdGlvbi5wcm90b3R5cGUsIFwib3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHsgZWZmZWN0OiAnRmFkZU91dCcsIGR1cmF0aW9uOiAxNTAsIGRlbGF5OiAwIH0pXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJjbG9zZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQW5pbWF0aW9uID0gQW5pbWF0aW9uO1xuICAgIHZhciBUb29sdGlwID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRvb2x0aXAsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRvb2x0aXAob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0UG9zaXRpb24oKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFJPT1QpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5mb3JtYXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLmluZGV4T2YoJ3RvcCcpID09PSAwIHx8IHRoaXMucG9zaXRpb24uaW5kZXhPZignYm90dG9tJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBfYSA9IHRoaXMucG9zaXRpb24uc3BsaXQoJyAnKSwgdGhpcy50b29sdGlwUG9zaXRpb25ZID0gX2FbMF0sIHRoaXMudG9vbHRpcFBvc2l0aW9uWCA9IF9hWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2IgPSB0aGlzLnBvc2l0aW9uLnNwbGl0KCcgJyksIHRoaXMudG9vbHRpcFBvc2l0aW9uWCA9IF9iWzBdLCB0aGlzLnRvb2x0aXBQb3NpdGlvblkgPSBfYlsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbmRlckFycm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUaXBDbGFzcyh0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aXAgPSBlajJfYmFzZV80LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBBUlJPV19USVAgKyAnICcgKyB0aGlzLnRpcENsYXNzIH0pO1xuICAgICAgICAgICAgdGlwLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IEFSUk9XX1RJUF9PVVRFUiArICcgJyArIHRoaXMudGlwQ2xhc3MgfSkpO1xuICAgICAgICAgICAgdGlwLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IEFSUk9XX1RJUF9JTk5FUiArICcgJyArIHRoaXMudGlwQ2xhc3MgfSkpO1xuICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLmFwcGVuZENoaWxkKHRpcCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnNldFRpcENsYXNzID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24uaW5kZXhPZigncmlnaHQnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGlwQ2xhc3MgPSBUSVBfTEVGVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uLmluZGV4T2YoJ2JvdHRvbScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aXBDbGFzcyA9IFRJUF9UT1A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlvbi5pbmRleE9mKCdsZWZ0JykgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpcENsYXNzID0gVElQX1JJR0hUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aXBDbGFzcyA9IFRJUF9CT1RUT007XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbmRlclBvcHVwID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMubW91c2VUcmFpbCA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiB0aGlzLmdldFRvb2x0aXBQb3NpdGlvbih0YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9iaiA9IG5ldyBwb3B1cF8xLlBvcHVwKHRoaXMudG9vbHRpcEVsZSwge1xuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgWDogZWxlUG9zLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIFk6IGVsZVBvcy50b3BcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgb3BlbjogdGhpcy5vcGVuUG9wdXBIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgY2xvc2U6IHRoaXMuY2xvc2VQb3B1cEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmdldFRvb2x0aXBQb3NpdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBwb3MgPSBwb3NpdGlvbl8xLmNhbGN1bGF0ZVBvc2l0aW9uKHRhcmdldCwgdGhpcy50b29sdGlwUG9zaXRpb25YLCB0aGlzLnRvb2x0aXBQb3NpdGlvblkpO1xuICAgICAgICAgICAgdmFyIG9mZnNldFBvcyA9IHRoaXMuY2FsY3VsYXRlVG9vbHRpcE9mZnNldCh0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIHZhciBlbGVQb3MgPSB0aGlzLmNvbGxpc2lvbkZsaXBGaXQodGFyZ2V0LCBwb3MubGVmdCArIG9mZnNldFBvcy5sZWZ0LCBwb3MudG9wICsgb2Zmc2V0UG9zLnRvcCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlUG9zO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5yZXBvc2l0aW9uID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMuZ2V0VG9vbHRpcFBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwT2JqLnBvc2l0aW9uID0geyBYOiBlbGVQb3MubGVmdCwgWTogZWxlUG9zLnRvcCB9O1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9iai5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5vcGVuUG9wdXBIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlck9wZW4nLCB0aGlzLnRvb2x0aXBFdmVudEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5jbG9zZVBvcHVwSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJDbG9zZScsIHRoaXMudG9vbHRpcEV2ZW50QXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmNhbGN1bGF0ZVRvb2x0aXBPZmZzZXQgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBwb3MgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBFbGVXaWR0aCA9IHRoaXMudG9vbHRpcEVsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciB0b29sdGlwRWxlSGVpZ2h0ID0gdGhpcy50b29sdGlwRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHZhciBhcnJvd0VsZSA9IHRoaXMudG9vbHRpcEVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIEFSUk9XX1RJUCk7XG4gICAgICAgICAgICB2YXIgdGlwV2lkdGggPSBhcnJvd0VsZSA/IGFycm93RWxlLm9mZnNldFdpZHRoIDogMDtcbiAgICAgICAgICAgIHZhciB0aXBIZWlnaHQgPSBhcnJvd0VsZSA/IGFycm93RWxlLm9mZnNldEhlaWdodCA6IDA7XG4gICAgICAgICAgICB2YXIgdGlwQWRqdXN0ID0gKHRoaXMuc2hvd1RpcFBvaW50ZXIgPyBTSE9XX1BPSU5URVJfVElQX0dBUCA6IEhJREVfUE9JTlRFUl9USVBfR0FQKTtcbiAgICAgICAgICAgIHZhciB0aXBIZWlnaHRBZGp1c3QgPSAodGlwSGVpZ2h0IC8gMikgKyBQT0lOVEVSX0FESlVTVCArICh0aGlzLnRvb2x0aXBFbGUub2Zmc2V0SGVpZ2h0IC0gdGhpcy50b29sdGlwRWxlLmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgICB2YXIgdGlwV2lkdGhBZGp1c3QgPSAodGlwV2lkdGggLyAyKSArIFBPSU5URVJfQURKVVNUICsgKHRoaXMudG9vbHRpcEVsZS5vZmZzZXRXaWR0aCAtIHRoaXMudG9vbHRpcEVsZS5jbGllbnRXaWR0aCk7XG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZVRyYWlsKSB7XG4gICAgICAgICAgICAgICAgdGlwQWRqdXN0ICs9IE1PVVNFX1RSQUlMX0dBUDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCB0b3AnOlxuICAgICAgICAgICAgICAgICAgICBwb3MubGVmdCArPSB0aXBXaWR0aCArIHRpcEFkanVzdDtcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCAtPSB0b29sdGlwRWxlSGVpZ2h0IC0gdGlwSGVpZ2h0QWRqdXN0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCBjZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBwb3MubGVmdCArPSB0aXBXaWR0aCArIHRpcEFkanVzdDtcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCAtPSAodG9vbHRpcEVsZUhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCBib3R0b20nOlxuICAgICAgICAgICAgICAgICAgICBwb3MubGVmdCArPSB0aXBXaWR0aCArIHRpcEFkanVzdDtcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCAtPSAodGlwSGVpZ2h0QWRqdXN0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tIHJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCArPSAodGlwSGVpZ2h0ICsgdGlwQWRqdXN0KTtcbiAgICAgICAgICAgICAgICAgICAgcG9zLmxlZnQgLT0gKHRpcFdpZHRoQWRqdXN0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tIGNlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIHBvcy50b3AgKz0gKHRpcEhlaWdodCArIHRpcEFkanVzdCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0b29sdGlwRWxlV2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tIGxlZnQnOlxuICAgICAgICAgICAgICAgICAgICBwb3MudG9wICs9ICh0aXBIZWlnaHQgKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSAodG9vbHRpcEVsZVdpZHRoIC0gdGlwV2lkdGhBZGp1c3QpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0IGJvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0aXBXaWR0aCArIHRvb2x0aXBFbGVXaWR0aCArIHRpcEFkanVzdCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRpcEhlaWdodEFkanVzdCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQgY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcG9zLmxlZnQgLT0gKHRpcFdpZHRoICsgdG9vbHRpcEVsZVdpZHRoICsgdGlwQWRqdXN0KTtcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCAtPSAodG9vbHRpcEVsZUhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0IHRvcCc6XG4gICAgICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0aXBXaWR0aCArIHRvb2x0aXBFbGVXaWR0aCArIHRpcEFkanVzdCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRvb2x0aXBFbGVIZWlnaHQgLSB0aXBIZWlnaHRBZGp1c3QpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AgbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRvb2x0aXBFbGVIZWlnaHQgKyB0aXBIZWlnaHQgKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSAodG9vbHRpcEVsZVdpZHRoIC0gdGlwV2lkdGhBZGp1c3QpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AgcmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBwb3MudG9wIC09ICh0b29sdGlwRWxlSGVpZ2h0ICsgdGlwSGVpZ2h0ICsgdGlwQWRqdXN0KTtcbiAgICAgICAgICAgICAgICAgICAgcG9zLmxlZnQgLT0gKHRpcFdpZHRoQWRqdXN0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCAtPSAodG9vbHRpcEVsZUhlaWdodCArIHRpcEhlaWdodCArIHRpcEFkanVzdCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0b29sdGlwRWxlV2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MubGVmdCArPSB0aGlzLm9mZnNldFg7XG4gICAgICAgICAgICBwb3MudG9wICs9IHRoaXMub2Zmc2V0WTtcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnVwZGF0ZVRpcFBvc2l0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2VsRWxlID0gdGhpcy50b29sdGlwRWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQVJST1dfVElQICsgJywuJyArIEFSUk9XX1RJUF9PVVRFUiArICcsLicgKyBBUlJPV19USVBfSU5ORVIpO1xuICAgICAgICAgICAgdmFyIHJlbW92ZUxpc3QgPSBbVElQX0JPVFRPTSwgVElQX1RPUCwgVElQX0xFRlQsIFRJUF9SSUdIVF07XG4gICAgICAgICAgICBlajJfYmFzZV80LnJlbW92ZUNsYXNzKHNlbEVsZSwgcmVtb3ZlTGlzdCk7XG4gICAgICAgICAgICB0aGlzLnNldFRpcENsYXNzKHBvc2l0aW9uKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuYWRkQ2xhc3Moc2VsRWxlLCB0aGlzLnRpcENsYXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuYWRqdXN0QXJyb3cgPSBmdW5jdGlvbiAodGFyZ2V0LCBwb3NpdGlvbiwgdG9vbHRpcFBvc2l0aW9uWCwgdG9vbHRpcFBvc2l0aW9uWSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1RpcFBvaW50ZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVUaXBQb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgICAgICB2YXIgbGVmdFZhbHVlO1xuICAgICAgICAgICAgdmFyIHRvcFZhbHVlO1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBXaWR0aCA9IHRoaXMudG9vbHRpcEVsZS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHZhciB0b29sdGlwSGVpZ2h0ID0gdGhpcy50b29sdGlwRWxlLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHZhciBhcnJvd0VsZSA9IHRoaXMudG9vbHRpcEVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIEFSUk9XX1RJUCk7XG4gICAgICAgICAgICB2YXIgdGlwV2lkdGggPSBhcnJvd0VsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciB0aXBIZWlnaHQgPSBhcnJvd0VsZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBpZiAodGhpcy50aXBDbGFzcyA9PT0gVElQX0JPVFRPTSB8fCB0aGlzLnRpcENsYXNzID09PSBUSVBfVE9QKSB7XG4gICAgICAgICAgICAgICAgdG9wVmFsdWUgPSB0aGlzLnRpcENsYXNzID09PSBUSVBfQk9UVE9NID8gJzEwMCUnIDogLSh0aXBIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2YXIgdGlwUG9zRXhjbHVkZSA9IHRvb2x0aXBQb3NpdGlvblggIT09ICdjZW50ZXInIHx8ICh0b29sdGlwV2lkdGggPiB0YXJnZXQub2Zmc2V0V2lkdGgpIHx8IHRoaXMubW91c2VUcmFpbDtcbiAgICAgICAgICAgICAgICBpZiAoKHRpcFBvc0V4Y2x1ZGUgJiYgdG9vbHRpcFBvc2l0aW9uWCA9PT0gJ2xlZnQnKSB8fCAoIXRpcFBvc0V4Y2x1ZGUgJiYgdGhpcy50aXBQb2ludGVyUG9zaXRpb24gPT09ICdlbmQnKSkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0VmFsdWUgPSAodG9vbHRpcFdpZHRoIC0gdGlwV2lkdGggLSBQT0lOVEVSX0FESlVTVCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgodGlwUG9zRXhjbHVkZSAmJiB0b29sdGlwUG9zaXRpb25YID09PSAncmlnaHQnKSB8fCAoIXRpcFBvc0V4Y2x1ZGUgJiYgdGhpcy50aXBQb2ludGVyUG9zaXRpb24gPT09ICdzdGFydCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRWYWx1ZSA9IFBPSU5URVJfQURKVVNUICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRWYWx1ZSA9ICgodG9vbHRpcFdpZHRoIC8gMikgLSAodGlwV2lkdGggLyAyKSkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlZnRWYWx1ZSA9IHRoaXMudGlwQ2xhc3MgPT09IFRJUF9SSUdIVCA/IHRvb2x0aXBXaWR0aCArICdweCcgOiAtKHRpcFdpZHRoKSArICdweCc7XG4gICAgICAgICAgICAgICAgdmFyIHRpcFBvc0V4Y2x1ZGUgPSB0b29sdGlwUG9zaXRpb25ZICE9PSAnY2VudGVyJyB8fCAodG9vbHRpcEhlaWdodCA+IHRhcmdldC5vZmZzZXRIZWlnaHQpIHx8IHRoaXMubW91c2VUcmFpbDtcbiAgICAgICAgICAgICAgICBpZiAoKHRpcFBvc0V4Y2x1ZGUgJiYgdG9vbHRpcFBvc2l0aW9uWSA9PT0gJ3RvcCcpIHx8ICghdGlwUG9zRXhjbHVkZSAmJiB0aGlzLnRpcFBvaW50ZXJQb3NpdGlvbiA9PT0gJ2VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcFZhbHVlID0gKHRvb2x0aXBIZWlnaHQgLSB0aXBIZWlnaHQgLSBQT0lOVEVSX0FESlVTVCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgodGlwUG9zRXhjbHVkZSAmJiB0b29sdGlwUG9zaXRpb25ZID09PSAnYm90dG9tJykgfHwgKCF0aXBQb3NFeGNsdWRlICYmIHRoaXMudGlwUG9pbnRlclBvc2l0aW9uID09PSAnc3RhcnQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0b3BWYWx1ZSA9IFBPSU5URVJfQURKVVNUICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcFZhbHVlID0gKCh0b29sdGlwSGVpZ2h0IC8gMikgLSAodGlwSGVpZ2h0IC8gMikpICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJvd0VsZS5zdHlsZS50b3AgPSB0b3BWYWx1ZTtcbiAgICAgICAgICAgIGFycm93RWxlLnN0eWxlLmxlZnQgPSBsZWZ0VmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgdG9vbHRpcENvbnRlbnQgPSB0aGlzLnRvb2x0aXBFbGUucXVlcnlTZWxlY3RvcignLicgKyBDT05URU5UKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0LmdldEF0dHJpYnV0ZSgndGl0bGUnKSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnLCB0YXJnZXQuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLmNvbnRlbnQpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwQ29udGVudC5pbm5lckhUTUwgPSB0aGlzLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodG9vbHRpcENvbnRlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcENvbnRlbnQucmVtb3ZlQ2hpbGQodG9vbHRpcENvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcENvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpKSkge1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwQ29udGVudC5pbm5lckhUTUwgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbmRlckNsb3NlSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0aWNreSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0aXBDbG9zZSA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IElDT04gKyAnICcgKyBDTE9TRSB9KTtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5hcHBlbmRDaGlsZCh0aXBDbG9zZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGlwQ2xvc2UsIGVqMl9iYXNlXzIuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMub25TdGlja3lDbG9zZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmFkZERlc2NyaWJlZEJ5ID0gZnVuY3Rpb24gKHRhcmdldCwgaWQpIHtcbiAgICAgICAgICAgIHZhciBkZXNjcmliZWRieSA9ICh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JykgfHwgJycpLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpYmVkYnkuaW5kZXhPZihpZCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmVkYnkucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV80LmF0dHJpYnV0ZXModGFyZ2V0LCB7ICdhcmlhLWRlc2NyaWJlZGJ5JzogZGVzY3JpYmVkYnkuam9pbignICcpLnRyaW0oKSwgJ2RhdGEtdG9vbHRpcC1pZCc6IGlkIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5yZW1vdmVEZXNjcmliZWRCeSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1pZCcpO1xuICAgICAgICAgICAgdmFyIGRlc2NyaWJlZGJ5ID0gKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKSB8fCAnJykuc3BsaXQoL1xccysvKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGRlc2NyaWJlZGJ5LmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlZGJ5LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtaWQnKTtcbiAgICAgICAgICAgIHZhciBvcmdkZXNjcmliZWRieSA9IGRlc2NyaWJlZGJ5LmpvaW4oJyAnKS50cmltKCk7XG4gICAgICAgICAgICBpZiAob3JnZGVzY3JpYmVkYnkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jywgb3JnZGVzY3JpYmVkYnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS50YXBIb2xkSGFuZGxlciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmF1dG9DbG9zZVRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0SG92ZXIoZXZ0Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS50b3VjaEVuZEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hdXRvQ2xvc2VUaW1lciA9IHNldFRpbWVvdXQoY2xvc2UsIFRPVUNIRU5EX0hJREVfREVMQVkpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS50YXJnZXRDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZWoyX2Jhc2VfNC5jbG9zZXN0KGUudGFyZ2V0LCB0aGlzLnRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1pZCcpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRIb3ZlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmlzU3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlVG9vbHRpcCh0aGlzLmFuaW1hdGlvbi5jbG9zZSwgZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUudGFyZ2V0SG92ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzQuY2xvc2VzdChlLnRhcmdldCwgdGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0KSB8fCB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtaWQnKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXRMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10b29sdGlwLWlkPSAnICsgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnRdJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0YXJnZXRMaXN0XzEgPSB0YXJnZXRMaXN0OyBfaSA8IHRhcmdldExpc3RfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0XzEgPSB0YXJnZXRMaXN0XzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZUVsZW1lbnQodGFyZ2V0XzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zaG93VG9vbHRpcCh0YXJnZXQsIHRoaXMuYW5pbWF0aW9uLm9wZW4sIGUpO1xuICAgICAgICAgICAgdGhpcy53aXJlTW91c2VFdmVudHMoZSwgdGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuc2hvd1Rvb2x0aXAgPSBmdW5jdGlvbiAodGFyZ2V0LCBzaG93QW5pbWF0aW9uLCBlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVyKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lcik7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXBFdmVudEFyZ3MgPSBlID8geyB0eXBlOiBlLnR5cGUsIGNhbmNlbDogZmFsc2UsIHRhcmdldDogdGFyZ2V0LCBldmVudDogZSwgZWxlbWVudDogdGhpcy50b29sdGlwRWxlIH0gOlxuICAgICAgICAgICAgICAgIHsgdHlwZTogbnVsbCwgY2FuY2VsOiBmYWxzZSwgdGFyZ2V0OiB0YXJnZXQsIGV2ZW50OiBudWxsLCBlbGVtZW50OiB0aGlzLnRvb2x0aXBFbGUgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlUmVuZGVyJywgdGhpcy50b29sdGlwRXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXBFdmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudG9vbHRpcEVsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0cmxJZCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgPyBlajJfYmFzZV8zLmdldFVuaXF1ZUlEKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIDogZWoyX2Jhc2VfMy5nZXRVbmlxdWVJRCgndG9vbHRpcCcpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZSA9IGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFRPT0xUSVBfV1JBUCArICcgJyArIFBPUFVQX1JPT1QsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndG9vbHRpcCcsICdhcmlhLWhpZGRlbic6ICdmYWxzZScsICdpZCc6IHRoaXMuY3RybElkICsgJ19jb250ZW50J1xuICAgICAgICAgICAgICAgICAgICB9LCBzdHlsZXM6ICd3aWR0aDonICsgZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMud2lkdGgpICsgJztoZWlnaHQ6JyArIGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLmhlaWdodCkgKyAnO3Bvc2l0aW9uOmFic29sdXRlOydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LmFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCB0aGlzLmNzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LmFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBERVZJQ0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS5tYXhXaWR0aCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzQuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENPTlRFTlQgfSkpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZERlc2NyaWJlZEJ5KHRhcmdldCwgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LmFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9PUEVOKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93VGlwUG9pbnRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckFycm93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2xvc2VJY29uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQb3B1cCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RBcnJvdyh0YXJnZXQsIHRoaXMucG9zaXRpb24sIHRoaXMudG9vbHRpcFBvc2l0aW9uWCwgdGhpcy50b29sdGlwUG9zaXRpb25ZKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZERlc2NyaWJlZEJ5KHRhcmdldCwgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkFuaW1hdGlvbi5zdG9wKHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV80LnJlbW92ZUNsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9PUEVOKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQuYWRkQ2xhc3MoW3RoaXMudG9vbHRpcEVsZV0sIFBPUFVQX0NMT1NFKTtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcEV2ZW50QXJncyA9IGUgPyB7IHR5cGU6IGUudHlwZSwgY2FuY2VsOiBmYWxzZSwgdGFyZ2V0OiB0YXJnZXQsIGV2ZW50OiBlLCBlbGVtZW50OiB0aGlzLnRvb2x0aXBFbGUgfSA6XG4gICAgICAgICAgICAgICAgeyB0eXBlOiBudWxsLCBjYW5jZWw6IGZhbHNlLCB0YXJnZXQ6IHRhcmdldCwgZXZlbnQ6IG51bGwsIGVsZW1lbnQ6IHRoaXMudG9vbHRpcEVsZSB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVPcGVuJywgdGhpcy50b29sdGlwRXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXBFdmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcGVuQW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNob3dBbmltYXRpb24uZWZmZWN0LCBkdXJhdGlvbjogc2hvd0FuaW1hdGlvbi5kdXJhdGlvbiwgZGVsYXk6IHNob3dBbmltYXRpb24uZGVsYXksIHRpbWluZ0Z1bmN0aW9uOiAnZWFzZU91dCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoc2hvd0FuaW1hdGlvbi5lZmZlY3QgPT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgIG9wZW5BbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcGVuRGVsYXkgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wb3B1cE9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9wdXBPYmouc2hvdyhvcGVuQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VGltZXIgPSBzZXRUaW1lb3V0KHNob3csIHRoaXMub3BlbkRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPYmouc2hvdyhvcGVuQW5pbWF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuY2hlY2tDb2xsaXNpb24gPSBmdW5jdGlvbiAodGFyZ2V0LCB4LCB5KSB7XG4gICAgICAgICAgICB2YXIgZWxlUG9zID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHgsIHRvcDogeSwgcG9zaXRpb246IHRoaXMucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbDogdGhpcy50b29sdGlwUG9zaXRpb25YLCB2ZXJ0aWNhbDogdGhpcy50b29sdGlwUG9zaXRpb25ZXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGFmZmVjdGVkUG9zID0gY29sbGlzaW9uXzEuaXNDb2xsaWRlKHRoaXMudG9vbHRpcEVsZSwgKHRoaXMudGFyZ2V0ID8gdGhpcy5lbGVtZW50IDogbnVsbCksIHgsIHkpO1xuICAgICAgICAgICAgaWYgKGFmZmVjdGVkUG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBlbGVQb3MuaG9yaXpvbnRhbCA9IGFmZmVjdGVkUG9zLmluZGV4T2YoJ2xlZnQnKSA+PSAwID8gJ3JpZ2h0JyA6IGFmZmVjdGVkUG9zLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCA/ICdsZWZ0JyA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcFBvc2l0aW9uWDtcbiAgICAgICAgICAgICAgICBlbGVQb3MudmVydGljYWwgPSBhZmZlY3RlZFBvcy5pbmRleE9mKCd0b3AnKSA+PSAwID8gJ2JvdHRvbScgOiBhZmZlY3RlZFBvcy5pbmRleE9mKCdib3R0b20nKSA+PSAwID8gJ3RvcCcgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBQb3NpdGlvblk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlUG9zO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5jb2xsaXNpb25GbGlwRml0ID0gZnVuY3Rpb24gKHRhcmdldCwgeCwgeSkge1xuICAgICAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMuY2hlY2tDb2xsaXNpb24odGFyZ2V0LCB4LCB5KTtcbiAgICAgICAgICAgIHZhciBuZXdwb3MgPSBlbGVQb3MucG9zaXRpb247XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwUG9zaXRpb25ZICE9PSBlbGVQb3MudmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICBuZXdwb3MgPSAoKHRoaXMucG9zaXRpb24uaW5kZXhPZignYm90dG9tJykgPT09IDAgfHwgdGhpcy5wb3NpdGlvbi5pbmRleE9mKCd0b3AnKSA9PT0gMCkgP1xuICAgICAgICAgICAgICAgICAgICBlbGVQb3MudmVydGljYWwgKyAnICcgKyB0aGlzLnRvb2x0aXBQb3NpdGlvblggOiB0aGlzLnRvb2x0aXBQb3NpdGlvblggKyAnICcgKyBlbGVQb3MudmVydGljYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcFBvc2l0aW9uWCAhPT0gZWxlUG9zLmhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3cG9zLmluZGV4T2YoJ2xlZnQnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVQb3MudmVydGljYWwgPSAobmV3cG9zID09PSAnbGVmdCB0b3AnIHx8IG5ld3BvcyA9PT0gJ2xlZnQgY2VudGVyJykgPyAndG9wJyA6ICdib3R0b20nO1xuICAgICAgICAgICAgICAgICAgICBuZXdwb3MgPSAoZWxlUG9zLnZlcnRpY2FsICsgJyAnICsgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5ld3Bvcy5pbmRleE9mKCdyaWdodCcpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZVBvcy52ZXJ0aWNhbCA9IChuZXdwb3MgPT09ICdyaWdodCB0b3AnIHx8IG5ld3BvcyA9PT0gJ3JpZ2h0IGNlbnRlcicpID8gJ3RvcCcgOiAnYm90dG9tJztcbiAgICAgICAgICAgICAgICAgICAgbmV3cG9zID0gKGVsZVBvcy52ZXJ0aWNhbCArICcgJyArICdyaWdodCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVQb3MuaG9yaXpvbnRhbCA9IHRoaXMudG9vbHRpcFBvc2l0aW9uWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVQb3MucG9zaXRpb24gIT09IG5ld3Bvcykge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBwb3NpdGlvbl8xLmNhbGN1bGF0ZVBvc2l0aW9uKHRhcmdldCwgdGhpcy50b29sdGlwUG9zaXRpb25YLCBlbGVQb3MudmVydGljYWwpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0QXJyb3codGFyZ2V0LCBuZXdwb3MsIGVsZVBvcy5ob3Jpem9udGFsLCBlbGVQb3MudmVydGljYWwpO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRQb3MgPSB0aGlzLmNhbGN1bGF0ZVRvb2x0aXBPZmZzZXQobmV3cG9zKTtcbiAgICAgICAgICAgICAgICBlbGVQb3MucG9zaXRpb24gPSBuZXdwb3M7XG4gICAgICAgICAgICAgICAgZWxlUG9zLmxlZnQgPSBwb3MubGVmdCArIG9mZnNldFBvcy5sZWZ0O1xuICAgICAgICAgICAgICAgIGVsZVBvcy50b3AgPSBwb3MudG9wICsgb2Zmc2V0UG9zLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0QXJyb3codGFyZ2V0LCBuZXdwb3MsIGVsZVBvcy5ob3Jpem9udGFsLCBlbGVQb3MudmVydGljYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVsZU9mZnNldCA9IHsgbGVmdDogZWxlUG9zLmxlZnQsIHRvcDogZWxlUG9zLnRvcCB9O1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBjb2xsaXNpb25fMS5maXQodGhpcy50b29sdGlwRWxlLCAodGhpcy50YXJnZXQgPyB0aGlzLmVsZW1lbnQgOiBudWxsKSwgeyBYOiB0cnVlLCBZOiBmYWxzZSB9LCBlbGVPZmZzZXQpLmxlZnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93VGlwUG9pbnRlciAmJiAobmV3cG9zLmluZGV4T2YoJ2JvdHRvbScpID09PSAwIHx8IG5ld3Bvcy5pbmRleE9mKCd0b3AnKSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJyb3dFbGUgPSB0aGlzLnRvb2x0aXBFbGUucXVlcnlTZWxlY3RvcignLicgKyBBUlJPV19USVApO1xuICAgICAgICAgICAgICAgIHZhciBhcnJvd2xlZnQgPSBwYXJzZUludChhcnJvd0VsZS5zdHlsZS5sZWZ0LCAxMCkgLSAobGVmdCAtIGVsZVBvcy5sZWZ0KTtcbiAgICAgICAgICAgICAgICBpZiAoYXJyb3dsZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBhcnJvd2xlZnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgoYXJyb3dsZWZ0ICsgYXJyb3dFbGUub2Zmc2V0V2lkdGgpID4gdGhpcy50b29sdGlwRWxlLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycm93bGVmdCA9IHRoaXMudG9vbHRpcEVsZS5jbGllbnRXaWR0aCAtIGFycm93RWxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcnJvd0VsZS5zdHlsZS5sZWZ0ID0gYXJyb3dsZWZ0LnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlT2Zmc2V0LmxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgcmV0dXJuIGVsZU9mZnNldDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuaGlkZVRvb2x0aXAgPSBmdW5jdGlvbiAoaGlkZUFuaW1hdGlvbiwgZSwgdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0ID8gKHRhcmdldEVsZW1lbnQgfHwgZS50YXJnZXQpIDogdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEV2ZW50QXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZS50eXBlLCBjYW5jZWw6IGZhbHNlLCB0YXJnZXQ6IHRhcmdldCwgZXZlbnQ6IGUsIGVsZW1lbnQ6IHRoaXMudG9vbHRpcEVsZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10b29sdGlwLWlkPSAnICsgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnRdJyk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBudWxsLCBjYW5jZWw6IGZhbHNlLCB0YXJnZXQ6IHRhcmdldCwgZXZlbnQ6IG51bGwsIGVsZW1lbnQ6IHRoaXMudG9vbHRpcEVsZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVDbG9zZScsIHRoaXMudG9vbHRpcEV2ZW50QXJncyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudG9vbHRpcEV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVFbGVtZW50KHRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIGNsb3NlQW5pbWF0aW9uXzEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGhpZGVBbmltYXRpb24uZWZmZWN0LCBkdXJhdGlvbjogaGlkZUFuaW1hdGlvbi5kdXJhdGlvbiwgZGVsYXk6IGhpZGVBbmltYXRpb24uZGVsYXksIHRpbWluZ0Z1bmN0aW9uOiAnZWFzZUluJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGhpZGVBbmltYXRpb24uZWZmZWN0ID09PSAnTm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VBbmltYXRpb25fMSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xvc2VEZWxheSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucG9wdXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3B1cE9iai5oaWRlKGNsb3NlQW5pbWF0aW9uXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVUaW1lciA9IHNldFRpbWVvdXQoaGlkZSwgdGhpcy5jbG9zZURlbGF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPYmouaGlkZShjbG9zZUFuaW1hdGlvbl8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzSGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlc3RvcmVFbGVtZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVNb3VzZUV2ZW50cyh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpKSkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250ZW50JykpO1xuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVEZXNjcmliZWRCeSh0YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXBFbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnJlbW92ZUNsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9DTE9TRSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5hZGRDbGFzcyhbdGhpcy50b29sdGlwRWxlXSwgUE9QVVBfT1BFTik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0hpZGRlbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQucmVtb3ZlKHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cE9iaiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLm9uTW91c2VPdXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlVG9vbHRpcCh0aGlzLmFuaW1hdGlvbi5jbG9zZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLm9uU3RpY2t5Q2xvc2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50UGFnZVggPSAwO1xuICAgICAgICAgICAgdmFyIGV2ZW50UGFnZVkgPSAwO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUuaW5kZXhPZigndG91Y2gnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudFBhZ2VYID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgICAgICBldmVudFBhZ2VZID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50UGFnZVggPSBldmVudC5wYWdlWDtcbiAgICAgICAgICAgICAgICBldmVudFBhZ2VZID0gZXZlbnQucGFnZVk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLkFuaW1hdGlvbi5zdG9wKHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgICAgICBlajJfYmFzZV80LnJlbW92ZUNsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9DTE9TRSk7XG4gICAgICAgICAgICBlajJfYmFzZV80LmFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9PUEVOKTtcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0QXJyb3coZXZlbnQudGFyZ2V0LCB0aGlzLnBvc2l0aW9uLCB0aGlzLnRvb2x0aXBQb3NpdGlvblgsIHRoaXMudG9vbHRpcFBvc2l0aW9uWSk7XG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5jYWxjdWxhdGVUb29sdGlwT2Zmc2V0KHRoaXMucG9zaXRpb24pO1xuICAgICAgICAgICAgdmFyIHggPSBldmVudFBhZ2VYICsgcG9zLmxlZnQgKyB0aGlzLm9mZnNldFg7XG4gICAgICAgICAgICB2YXIgeSA9IGV2ZW50UGFnZVkgKyBwb3MudG9wICsgdGhpcy5vZmZzZXRZO1xuICAgICAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMuY2hlY2tDb2xsaXNpb24oZXZlbnQudGFyZ2V0LCB4LCB5KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXBQb3NpdGlvblggIT09IGVsZVBvcy5ob3Jpem9udGFsIHx8IHRoaXMudG9vbHRpcFBvc2l0aW9uWSAhPT0gZWxlUG9zLnZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld3BvcyA9ICh0aGlzLnBvc2l0aW9uLmluZGV4T2YoJ2JvdHRvbScpID09PSAwIHx8IHRoaXMucG9zaXRpb24uaW5kZXhPZigndG9wJykgPT09IDApID9cbiAgICAgICAgICAgICAgICAgICAgZWxlUG9zLnZlcnRpY2FsICsgJyAnICsgZWxlUG9zLmhvcml6b250YWwgOiBlbGVQb3MuaG9yaXpvbnRhbCArICcgJyArIGVsZVBvcy52ZXJ0aWNhbDtcbiAgICAgICAgICAgICAgICBlbGVQb3MucG9zaXRpb24gPSBuZXdwb3M7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RBcnJvdyhldmVudC50YXJnZXQsIGVsZVBvcy5wb3NpdGlvbiwgZWxlUG9zLmhvcml6b250YWwsIGVsZVBvcy52ZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHBvcyA9IHRoaXMuY2FsY3VsYXRlVG9vbHRpcE9mZnNldChlbGVQb3MucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGVsZVBvcy5sZWZ0ID0gZXZlbnRQYWdlWCArIGNvbHBvcy5sZWZ0ICsgdGhpcy5vZmZzZXRYO1xuICAgICAgICAgICAgICAgIGVsZVBvcy50b3AgPSBldmVudFBhZ2VZICsgY29scG9zLnRvcCArIHRoaXMub2Zmc2V0WTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS5sZWZ0ID0gZWxlUG9zLmxlZnQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLnRvcCA9IGVsZVBvcy50b3AgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5rZXlEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlICYmIGV2ZW50LmtleUNvZGUgPT09IDI3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS50b3VjaEVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlICYmIGVqMl9iYXNlXzQuY2xvc2VzdChlLnRhcmdldCwgJy4nICsgUk9PVCkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHModGhpcy5vcGVuc09uKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50aXBDbGFzcyA9IFRJUF9CT1RUT007XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXBQb3NpdGlvblggPSAnY2VudGVyJztcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcFBvc2l0aW9uWSA9ICd0b3AnO1xuICAgICAgICAgICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICAgICAgdmFyIHRyaWdnZXJMaXN0ID0gdGhpcy5nZXRUcmlnZ2VyTGlzdCh0cmlnZ2VyKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdHJpZ2dlckxpc3RfMSA9IHRyaWdnZXJMaXN0OyBfaSA8IHRyaWdnZXJMaXN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wZW5zT24gPSB0cmlnZ2VyTGlzdF8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVGb2N1c0V2ZW50cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ2NsaWNrJykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCBlajJfYmFzZV8yLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnRhcmdldENsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5zT24gPT09ICdob3ZlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG5ldyBlajJfYmFzZV8yLlRvdWNoKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcEhvbGRUaHJlc2hvbGQ6IFRBUEhPTERfVEhSRVNIT0xELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcEhvbGQ6IHRoaXMudGFwSG9sZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCBlajJfYmFzZV8yLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy50b3VjaEVuZEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ21vdXNlb3ZlcicsIHRoaXMudGFyZ2V0SG92ZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLnRvdWNoRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5rZXlEb3duLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0VHJpZ2dlckxpc3QgPSBmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHRyaWdnZXIgPSAoZWoyX2Jhc2VfMi5Ccm93c2VyLmlzRGV2aWNlKSA/ICdob3ZlcicgOiAnaG92ZXIgZm9jdXMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXIuc3BsaXQoJyAnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUud2lyZUZvY3VzRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRMaXN0ID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdGFyZ2V0TGlzdF8yID0gdGFyZ2V0TGlzdDsgX2kgPCB0YXJnZXRMaXN0XzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRMaXN0XzJbX2ldO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGFyZ2V0LCAnZm9jdXMnLCB0aGlzLnRhcmdldEhvdmVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXMnLCB0aGlzLnRhcmdldEhvdmVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUud2lyZU1vdXNlRXZlbnRzID0gZnVuY3Rpb24gKGUsIHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzU3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGFyZ2V0LCAnYmx1cicsIHRoaXMub25Nb3VzZU91dCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZW92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0YXJnZXQsICdtb3VzZWxlYXZlJywgdGhpcy5vbk1vdXNlT3V0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZVRyYWlsKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRhcmdldCwgJ21vdXNlbW92ZSB0b3VjaHN0YXJ0JywgdGhpcy5vbk1vdXNlTW92ZSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG4gICAgICAgICAgICB2YXIgdHJpZ2dlckxpc3QgPSB0aGlzLmdldFRyaWdnZXJMaXN0KHRyaWdnZXIpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0cmlnZ2VyTGlzdF8yID0gdHJpZ2dlckxpc3Q7IF9pIDwgdHJpZ2dlckxpc3RfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgb3BlbnNPbiA9IHRyaWdnZXJMaXN0XzJbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChvcGVuc09uID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcGVuc09uID09PSAnZm9jdXMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW53aXJlRm9jdXNFdmVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5zT24gPT09ICdjbGljaycpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgZWoyX2Jhc2VfMi5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy50YXJnZXRDbGljayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcGVuc09uID09PSAnaG92ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCBlajJfYmFzZV8yLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy50b3VjaEVuZEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlb3ZlcicsIHRoaXMudGFyZ2V0SG92ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLnRvdWNoRW5kKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5rZXlEb3duKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUudW53aXJlRm9jdXNFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldExpc3QgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMudGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0YXJnZXRMaXN0XzMgPSB0YXJnZXRMaXN0OyBfaSA8IHRhcmdldExpc3RfMy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldExpc3RfM1tfaV07XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdmb2N1cycsIHRoaXMudGFyZ2V0SG92ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdmb2N1cycsIHRoaXMudGFyZ2V0SG92ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS51bndpcmVNb3VzZUV2ZW50cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0aWNreSkge1xuICAgICAgICAgICAgICAgIHZhciB0cmlnZ2VyTGlzdCA9IHRoaXMuZ2V0VHJpZ2dlckxpc3QodGhpcy5vcGVuc09uKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRyaWdnZXJMaXN0XzMgPSB0cmlnZ2VyTGlzdDsgX2kgPCB0cmlnZ2VyTGlzdF8zLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlbnNPbiA9IHRyaWdnZXJMaXN0XzNbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRhcmdldCwgJ2JsdXInLCB0aGlzLm9uTW91c2VPdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVuc09uID09PSAnaG92ZXInICYmICFlajJfYmFzZV8yLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdtb3VzZWxlYXZlJywgdGhpcy5vbk1vdXNlT3V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlVHJhaWwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGFyZ2V0LCAnbW91c2Vtb3ZlIHRvdWNoc3RhcnQnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndG9vbHRpcCc7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmdldFBlcnNpc3REYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KFtdKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KG5ld1Byb3Aud2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLmhlaWdodCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdChuZXdQcm9wLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3BlbnNPbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cyhvbGRQcm9wLm9wZW5zT24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKG5ld1Byb3Aub3BlbnNPbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9zaXRpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRvb2x0aXAtaWQ9ICcgKyB0aGlzLmN0cmxJZCArICdfY29udGVudF0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXBFbGUgJiYgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGlwUG9pbnRlclBvc2l0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmd0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdG9vbHRpcC1pZD0gJyArIHRoaXMuY3RybElkICsgJ19jb250ZW50XScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSAmJiB0cmd0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRyZ3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gbmV3UHJvcC5vZmZzZXRYIC0gb2xkUHJvcC5vZmZzZXRYO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS5sZWZ0ID0gKHBhcnNlSW50KHRoaXMudG9vbHRpcEVsZS5zdHlsZS5sZWZ0LCAxMCkgKyAoeCkpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFknOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gbmV3UHJvcC5vZmZzZXRZIC0gb2xkUHJvcC5vZmZzZXRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS50b3AgPSAocGFyc2VJbnQodGhpcy50b29sdGlwRWxlLnN0eWxlLnRvcCwgMTApICsgKHkpKS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFByb3AuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5yZW1vdmVDbGFzcyhbdGhpcy50b29sdGlwRWxlXSwgb2xkUHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuYWRkQ2xhc3MoW3RoaXMudG9vbHRpcEVsZV0sIG5ld1Byb3AuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LmFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBSVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5yZW1vdmVDbGFzcyhbdGhpcy50b29sdGlwRWxlXSwgUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoZWxlbWVudCwgYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uID09PSB2b2lkIDApIHsgYW5pbWF0aW9uID0gdGhpcy5hbmltYXRpb24ub3BlbjsgfVxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zaG93VG9vbHRpcChlbGVtZW50LCBhbmltYXRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChhbmltYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChhbmltYXRpb24gPT09IHZvaWQgMCkgeyBhbmltYXRpb24gPSB0aGlzLmFuaW1hdGlvbi5jbG9zZTsgfVxuICAgICAgICAgICAgdGhpcy5oaWRlVG9vbHRpcChhbmltYXRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udGVudCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucG9wdXBPYmogJiYgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzQucmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFJPT1QpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHModGhpcy5vcGVuc09uKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwT2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cE9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5yZW1vdmUodGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnBvcHVwT2JqID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvb2x0aXA7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJ0YXJnZXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgndG9wIGNlbnRlcicpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcIm9mZnNldFhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcIm9mZnNldFlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcInNob3dUaXBQb2ludGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcInRpcFBvaW50ZXJQb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJvcGVuc09uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwibW91c2VUcmFpbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImlzU3RpY2t5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzUuQ29tcGxleCh7fSwgQW5pbWF0aW9uKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwib3BlbkRlbGF5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJjbG9zZURlbGF5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiZW5hYmxlUnRsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImJlZm9yZVJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJiZWZvcmVPcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImFmdGVyT3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJiZWZvcmVDbG9zZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJhZnRlckNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgVG9vbHRpcCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV81Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIFRvb2x0aXApO1xuICAgIGV4cG9ydHMuVG9vbHRpcCA9IFRvb2x0aXA7XG4gICAgZXhwb3J0cy50b29sdGlwQnVpbGRlciA9IGVqMl9iYXNlXzEuQ3JlYXRlQnVpbGRlcihUb29sdGlwKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdG9vbHRpcC90b29sdGlwLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3NwaW5uZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBzcGlubmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHNwaW5uZXJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3NwaW5uZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgZ2xvYmFsVGltZU91dCA9IHt9O1xuICAgIHZhciBzcGluVGVtcGxhdGUgPSBudWxsO1xuICAgIHZhciBzcGluQ1NTQ2xhc3MgPSBudWxsO1xuICAgIHZhciBERUZUX01BVF9XSURUSCA9IDMwO1xuICAgIHZhciBERUZUX0ZBQl9XSURUSCA9IDMwO1xuICAgIHZhciBERUZUX0JPT1RfV0lEVEggPSAzMDtcbiAgICB2YXIgQ0xTX1NIT1dTUElOID0gJ2Utc3Bpbi1zaG93JztcbiAgICB2YXIgQ0xTX0hJREVTUElOID0gJ2Utc3Bpbi1oaWRlJztcbiAgICB2YXIgQ0xTX01BVEVSSUFMU1BJTiA9ICdlLXNwaW4tbWF0ZXJpYWwnO1xuICAgIHZhciBDTFNfRkFCUklDU1BJTiA9ICdlLXNwaW4tZmFicmljJztcbiAgICB2YXIgQ0xTX0JPT1RTUElOID0gJ2Utc3Bpbi1ib290c3RyYXAnO1xuICAgIHZhciBDTFNfU1BJTldSQVAgPSAnZS1zcGlubmVyLXBhbmUnO1xuICAgIHZhciBDTFNfU1BJTklOV1JBUCA9ICdlLXNwaW5uZXItaW5uZXInO1xuICAgIHZhciBDTFNfU1BJTkNJUkNMRSA9ICdlLXBhdGgtY2lyY2xlJztcbiAgICB2YXIgQ0xTX1NQSU5BUkMgPSAnZS1wYXRoLWFyYyc7XG4gICAgdmFyIENMU19TUElOTEFCRUwgPSAnZS1zcGluLWxhYmVsJztcbiAgICB2YXIgQ0xTX1NQSU5URU1QTEFURSA9ICdlLXNwaW4tdGVtcGxhdGUnO1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVNwaW5uZXIoYXJncykge1xuICAgICAgICB2YXIgcmFkaXVzO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlX3NwaW5uZXJfY29udGFpbmVyKGFyZ3MudGFyZ2V0KTtcbiAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MuY3NzQ2xhc3MpKSB7XG4gICAgICAgICAgICBjb250YWluZXIud3JhcC5jbGFzc0xpc3QuYWRkKGFyZ3MuY3NzQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzcGluVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnRlbXBsYXRlKSA/IGFyZ3MudGVtcGxhdGUgOiBzcGluVGVtcGxhdGU7XG4gICAgICAgICAgICBjb250YWluZXIud3JhcC5jbGFzc0xpc3QuYWRkKENMU19TUElOVEVNUExBVEUpO1xuICAgICAgICAgICAgcmVwbGFjZUNvbnRlbnQoY29udGFpbmVyLndyYXAsIHRlbXBsYXRlLCBzcGluQ1NTQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRoZW1lID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy50eXBlKSA/IGFyZ3MudHlwZSA6IGdldFRoZW1lKGNvbnRhaW5lci53cmFwKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3Mud2lkdGgpID8gYXJncy53aWR0aCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJhZGl1cyA9IGNhbGN1bGF0ZVJhZGl1cyh3aWR0aCwgdGhlbWUpO1xuICAgICAgICAgICAgc2V0VGhlbWUodGhlbWUsIGNvbnRhaW5lci53cmFwLCByYWRpdXMpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MubGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlTGFiZWwoY29udGFpbmVyLmlubmVyX3dyYXAsIGFyZ3MubGFiZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lci53cmFwLmNsYXNzTGlzdC5hZGQoQ0xTX0hJREVTUElOKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jcmVhdGVTcGlubmVyID0gY3JlYXRlU3Bpbm5lcjtcbiAgICBmdW5jdGlvbiBjcmVhdGVMYWJlbChjb250YWluZXIsIGxhYmVsKSB7XG4gICAgICAgIHZhciBsYWJlbEVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsYWJlbEVsZS5jbGFzc0xpc3QuYWRkKENMU19TUElOTEFCRUwpO1xuICAgICAgICBsYWJlbEVsZS50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxFbGUpO1xuICAgICAgICByZXR1cm4gbGFiZWxFbGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1hdGVyaWFsU3Bpbm5lcihjb250YWluZXIsIHJhZGl1cykge1xuICAgICAgICB2YXIgdW5pcXVlSUQgPSByYW5kb21fZ2VuZXJhdG9yKCk7XG4gICAgICAgIGdsb2JhbFRpbWVPdXRbdW5pcXVlSURdID0geyB0aW1lT3V0OiAwLCB0eXBlOiAnTWF0ZXJpYWwnLCByYWRpdXM6IHJhZGl1cyB9O1xuICAgICAgICBjcmVhdGVfbWF0ZXJpYWxfZWxlbWVudChjb250YWluZXIsIHVuaXF1ZUlEKTtcbiAgICAgICAgbWF0X2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKHJhZGl1cywgY29udGFpbmVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RhcnRNYXRBbmltYXRlKGNvbnRhaW5lciwgdW5pcXVlSUQsIHJhZGl1cykge1xuICAgICAgICB2YXIgZ2xvYmFsT2JqZWN0ID0ge307XG4gICAgICAgIHZhciB0aW1lT3V0VmFyID0gMDtcbiAgICAgICAgZ2xvYmFsVGltZU91dFt1bmlxdWVJRF0udGltZU91dCA9IDA7XG4gICAgICAgIGdsb2JhbE9iamVjdFt1bmlxdWVJRF0gPSBnbG9iYWxWYXJpYWJsZXModW5pcXVlSUQsIHJhZGl1cywgMCwgMCk7XG4gICAgICAgIHZhciBzcGlubmVySW5mbyA9IHsgdW5pcXVlSUQ6IHVuaXF1ZUlELCBjb250YWluZXI6IGNvbnRhaW5lciwgZ2xvYmFsSW5mbzogZ2xvYmFsT2JqZWN0LCB0aW1lT3V0VmFyOiB0aW1lT3V0VmFyIH07XG4gICAgICAgIGFuaW1hdGVNYXRlcmlhbChzcGlubmVySW5mbyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZhYnJpY1NwaW5uZXIoY29udGFpbmVyLCByYWRpdXMpIHtcbiAgICAgICAgdmFyIHVuaXF1ZUlEID0gcmFuZG9tX2dlbmVyYXRvcigpO1xuICAgICAgICBnbG9iYWxUaW1lT3V0W3VuaXF1ZUlEXSA9IHsgdGltZU91dDogMCwgdHlwZTogJ0ZhYnJpYycsIHJhZGl1czogcmFkaXVzIH07XG4gICAgICAgIGNyZWF0ZV9mYWJyaWNfZWxlbWVudChjb250YWluZXIsIHVuaXF1ZUlEKTtcbiAgICAgICAgZmJfY2FsY3VsYXRlX2F0dHJpYnV0ZXMocmFkaXVzLCBjb250YWluZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUaGVtZShjb250YWluZXIpIHtcbiAgICAgICAgdmFyIHRoZW1lID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY29udGFpbmVyLCAnOmFmdGVyJykuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpO1xuICAgICAgICByZXR1cm4gdGhlbWUucmVwbGFjZSgvWydcIl0rL2csICcnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0VGhlbWUodGhlbWUsIGNvbnRhaW5lciwgcmFkaXVzKSB7XG4gICAgICAgIHZhciBpbm5lckNvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19TUElOSU5XUkFQKTtcbiAgICAgICAgdmFyIHN2ZyA9IGlubmVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc3ZnKSkge1xuICAgICAgICAgICAgaW5uZXJDb250YWluZXIucmVtb3ZlQ2hpbGQoc3ZnKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgICAgICBjYXNlICdNYXRlcmlhbCc6XG4gICAgICAgICAgICAgICAgY3JlYXRlTWF0ZXJpYWxTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnRmFicmljJzpcbiAgICAgICAgICAgICAgICBjcmVhdGVGYWJyaWNTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQm9vdHN0cmFwJzpcbiAgICAgICAgICAgICAgICBjcmVhdGVCb290c3RyYXBTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJvb3RzdHJhcFNwaW5uZXIoaW5uZXJDb250YWluZXIsIHJhZGl1cykge1xuICAgICAgICB2YXIgdW5pcXVlSUQgPSByYW5kb21fZ2VuZXJhdG9yKCk7XG4gICAgICAgIGdsb2JhbFRpbWVPdXRbdW5pcXVlSURdID0geyB0aW1lT3V0OiAwLCB0eXBlOiAnQm9vdHN0cmFwJywgcmFkaXVzOiByYWRpdXMgfTtcbiAgICAgICAgY3JlYXRlX2Jvb3RzdHJhcF9lbGVtZW50KGlubmVyQ29udGFpbmVyLCB1bmlxdWVJRCk7XG4gICAgICAgIGJvb3RfY2FsY3VsYXRlX2F0dHJpYnV0ZXMoaW5uZXJDb250YWluZXIsIHJhZGl1cyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZV9ib290c3RyYXBfZWxlbWVudChpbm5lckNvbnRhaW5lciwgdW5pcXVlSUQpIHtcbiAgICAgICAgdmFyIHN2Z0Jvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgICAgICB2YXIgdmlld0JveFZhbHVlID0gNjQ7XG4gICAgICAgIHZhciB0cmFucyA9IDMyO1xuICAgICAgICB2YXIgZGVmYXVsdFJhZGl1cyA9IDI7XG4gICAgICAgIHN2Z0Jvb3Quc2V0QXR0cmlidXRlKCdpZCcsIHVuaXF1ZUlEKTtcbiAgICAgICAgc3ZnQm9vdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgQ0xTX0JPT1RTUElOKTtcbiAgICAgICAgc3ZnQm9vdC5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyB2aWV3Qm94VmFsdWUgKyAnICcgKyB2aWV3Qm94VmFsdWUpO1xuICAgICAgICBpbm5lckNvbnRhaW5lci5pbnNlcnRCZWZvcmUoc3ZnQm9vdCwgaW5uZXJDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIGZvciAodmFyIGl0ZW0gPSAwOyBpdGVtIDw9IDc7IGl0ZW0rKykge1xuICAgICAgICAgICAgdmFyIGJvb3RDaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgICAgICAgICAgYm9vdENpcmNsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgQ0xTX1NQSU5DSVJDTEUgKyAnXycgKyBpdGVtKTtcbiAgICAgICAgICAgIGJvb3RDaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgZGVmYXVsdFJhZGl1cyArICcnKTtcbiAgICAgICAgICAgIGJvb3RDaXJjbGUuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFucyArICcsJyArIHRyYW5zICsgJyknKTtcbiAgICAgICAgICAgIHN2Z0Jvb3QuYXBwZW5kQ2hpbGQoYm9vdENpcmNsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYm9vdF9jYWxjdWxhdGVfYXR0cmlidXRlcyhpbm5lckNvbnRhaW5lciwgcmFkaXVzKSB7XG4gICAgICAgIHZhciBzdmcgPSBpbm5lckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcuZS1zcGluLWJvb3RzdHJhcCcpO1xuICAgICAgICBzdmcuc3R5bGUud2lkdGggPSBzdmcuc3R5bGUuaGVpZ2h0ID0gcmFkaXVzICsgJ3B4JztcbiAgICAgICAgdmFyIHggPSAwO1xuICAgICAgICB2YXIgeSA9IDA7XG4gICAgICAgIHZhciByYWQgPSAyNDtcbiAgICAgICAgdmFyIHN0YXJ0QXJjID0gOTA7XG4gICAgICAgIGZvciAodmFyIGl0ZW0gPSAwOyBpdGVtIDw9IDc7IGl0ZW0rKykge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gZGVmaW5lQXJjUG9pbnRzKHgsIHksIHJhZCwgc3RhcnRBcmMpO1xuICAgICAgICAgICAgdmFyIGNpcmNsZUVsZSA9IHN2Zy5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19TUElOQ0lSQ0xFICsgJ18nICsgaXRlbSk7XG4gICAgICAgICAgICBjaXJjbGVFbGUuc2V0QXR0cmlidXRlKCdjeCcsIHN0YXJ0LnggKyAnJyk7XG4gICAgICAgICAgICBjaXJjbGVFbGUuc2V0QXR0cmlidXRlKCdjeScsIHN0YXJ0LnkgKyAnJyk7XG4gICAgICAgICAgICBzdGFydEFyYyA9IHN0YXJ0QXJjID49IDM2MCA/IDAgOiBzdGFydEFyYztcbiAgICAgICAgICAgIHN0YXJ0QXJjID0gc3RhcnRBcmMgKyA0NTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVNlcmllcyhiZWdpbiwgc3RvcCkge1xuICAgICAgICB2YXIgc2VyaWVzID0gW107XG4gICAgICAgIHZhciBzdGFydCA9IGJlZ2luO1xuICAgICAgICB2YXIgZW5kID0gc3RvcDtcbiAgICAgICAgdmFyIGluY3JlbWVudCA9IGZhbHNlO1xuICAgICAgICB2YXIgY291bnQgPSAxO1xuICAgICAgICBmb3JtU2VyaWVzKHN0YXJ0KTtcbiAgICAgICAgZnVuY3Rpb24gZm9ybVNlcmllcyhpKSB7XG4gICAgICAgICAgICBzZXJpZXMucHVzaChpKTtcbiAgICAgICAgICAgIGlmIChpICE9PSBlbmQgfHwgY291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8PSBzdGFydCAmJiBpID4gMSAmJiAhaW5jcmVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBwYXJzZUZsb2F0KChpIC0gMC4yKS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpID0gNztcbiAgICAgICAgICAgICAgICAgICAgaSA9IHBhcnNlRmxvYXQoKGkgKyAwLjIpLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpIDwgOCAmJiBpbmNyZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IHBhcnNlRmxvYXQoKGkgKyAwLjIpLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA8PSA4ICYmICFpbmNyZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IHBhcnNlRmxvYXQoKGkgLSAwLjIpLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICArK2NvdW50O1xuICAgICAgICAgICAgICAgIGZvcm1TZXJpZXMoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcmllcztcbiAgICB9XG4gICAgZnVuY3Rpb24gYW5pbWF0ZUJvb3RzdHJhcChpbm5lckNvbnRhaW5lcikge1xuICAgICAgICB2YXIgc3ZnID0gaW5uZXJDb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi1ib290c3RyYXAnKTtcbiAgICAgICAgdmFyIGlkID0gc3ZnLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gODsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2lyY2xlRWxlID0gKGlubmVyQ29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtcGF0aC1jaXJjbGVfJyArXG4gICAgICAgICAgICAgICAgKGkgPT09IDggPyAwIDogaSkpWzBdKTtcbiAgICAgICAgICAgIHJvdGF0aW9uKGNpcmNsZUVsZSwgaSwgaSwgZ2VuZXJhdGVTZXJpZXMoaSwgaSksIGlkKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiByb3RhdGlvbihjaXJjbGUsIHN0YXJ0LCBlbmQsIHNlcmllcywgaWQpIHtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICBib290X2FuaW1hdGUoc3RhcnQpO1xuICAgICAgICAgICAgZnVuY3Rpb24gYm9vdF9hbmltYXRlKHJhZGl1cykge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWxUaW1lT3V0W2lkXS5pc0FuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgKytjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsIHJhZGl1cyArICcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID49IHNlcmllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaW1lT3V0W2lkXS50aW1lT3V0ID0gc2V0VGltZW91dChib290X2FuaW1hdGUuYmluZChudWxsLCBzZXJpZXNbY291bnRdKSwgMTgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiByZXBsYWNlQ29udGVudChjb250YWluZXIsIHRlbXBsYXRlLCBjc3NDbGFzcykge1xuICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3NzQ2xhc3MpKSB7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNwaW5uZXItaW5uZXInKTtcbiAgICAgICAgaW5uZXIuaW5uZXJIVE1MID0gdGVtcGxhdGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVJhZGl1cyh3aWR0aCwgdGhlbWUpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRTaXplID0gdGhlbWUgPT09ICdNYXRlcmlhbCcgPyBERUZUX01BVF9XSURUSCA6IHRoZW1lID09PSAnRmFicmljJyA/IERFRlRfRkFCX1dJRFRIIDogREVGVF9CT09UX1dJRFRIO1xuICAgICAgICB3aWR0aCA9IHdpZHRoID8gcGFyc2VGbG9hdCh3aWR0aCArICcnKSA6IGRlZmF1bHRTaXplO1xuICAgICAgICByZXR1cm4gdGhlbWUgPT09ICdCb290c3RyYXAnID8gd2lkdGggOiB3aWR0aCAvIDI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdsb2JhbFZhcmlhYmxlcyhpZCwgcmFkaXVzLCBjb3VudCwgcHJldmlvdXNJZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmFkaXVzOiByYWRpdXMsXG4gICAgICAgICAgICBjb3VudDogY291bnQsXG4gICAgICAgICAgICBwcmV2aW91c0lkOiBwcmV2aW91c0lkXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmRvbV9nZW5lcmF0b3IoKSB7XG4gICAgICAgIHZhciByYW5kb20gPSAnJztcbiAgICAgICAgdmFyIGNvbWJpbmUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICAgICAgcmFuZG9tICs9IGNvbWJpbmUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbWJpbmUubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmRvbTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlX2ZhYnJpY19lbGVtZW50KGlubmVyQ29udGFpbmVyLCB1bmlxdWVJRCkge1xuICAgICAgICB2YXIgc3ZnRmFicmljID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICAgICAgc3ZnRmFicmljLnNldEF0dHJpYnV0ZSgnaWQnLCB1bmlxdWVJRCk7XG4gICAgICAgIHN2Z0ZhYnJpYy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgQ0xTX0ZBQlJJQ1NQSU4pO1xuICAgICAgICB2YXIgZmFicmljQ2lyY2xlUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICAgICAgICBmYWJyaWNDaXJjbGVQYXRoLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBDTFNfU1BJTkNJUkNMRSk7XG4gICAgICAgIHZhciBmYWJyaWNDaXJjbGVBcmMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbiAgICAgICAgZmFicmljQ2lyY2xlQXJjLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBDTFNfU1BJTkFSQyk7XG4gICAgICAgIGlubmVyQ29udGFpbmVyLmluc2VydEJlZm9yZShzdmdGYWJyaWMsIGlubmVyQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBzdmdGYWJyaWMuYXBwZW5kQ2hpbGQoZmFicmljQ2lyY2xlUGF0aCk7XG4gICAgICAgIHN2Z0ZhYnJpYy5hcHBlbmRDaGlsZChmYWJyaWNDaXJjbGVBcmMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVfbWF0ZXJpYWxfZWxlbWVudChpbm5lckNvbnRhaW5lciwgdW5pcXVlSUQpIHtcbiAgICAgICAgdmFyIHN2Z01hdGVyaWFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICAgICAgc3ZnTWF0ZXJpYWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIENMU19NQVRFUklBTFNQSU4pO1xuICAgICAgICBzdmdNYXRlcmlhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgdW5pcXVlSUQpO1xuICAgICAgICB2YXIgbWF0Q2lyY2xlUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICAgICAgICBtYXRDaXJjbGVQYXRoLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBDTFNfU1BJTkNJUkNMRSk7XG4gICAgICAgIGlubmVyQ29udGFpbmVyLmluc2VydEJlZm9yZShzdmdNYXRlcmlhbCwgaW5uZXJDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIHN2Z01hdGVyaWFsLmFwcGVuZENoaWxkKG1hdENpcmNsZVBhdGgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVfc3Bpbm5lcl9jb250YWluZXIodGFyZ2V0KSB7XG4gICAgICAgIHZhciBzcGlubmVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHNwaW5uZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChDTFNfU1BJTldSQVApO1xuICAgICAgICB2YXIgc3Bpbm5lcklubmVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHNwaW5uZXJJbm5lckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKENMU19TUElOSU5XUkFQKTtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKHNwaW5uZXJDb250YWluZXIpO1xuICAgICAgICBzcGlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXJJbm5lckNvbnRhaW5lcik7XG4gICAgICAgIHJldHVybiB7IHdyYXA6IHNwaW5uZXJDb250YWluZXIsIGlubmVyX3dyYXA6IHNwaW5uZXJJbm5lckNvbnRhaW5lciB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBhbmltYXRlTWF0ZXJpYWwoc3Bpbm5lckluZm8pIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gMTtcbiAgICAgICAgdmFyIGVuZCA9IDE0OTtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gMTMzMztcbiAgICAgICAgdmFyIG1heCA9IDc1O1xuICAgICAgICBjcmVhdGVDaXJjbGUoc3RhcnQsIGVuZCwgZWFzZUFuaW1hdGlvbiwgZHVyYXRpb24sIHNwaW5uZXJJbmZvLmdsb2JhbEluZm9bc3Bpbm5lckluZm8udW5pcXVlSURdLmNvdW50LCBtYXgsIHNwaW5uZXJJbmZvKTtcbiAgICAgICAgc3Bpbm5lckluZm8uZ2xvYmFsSW5mb1tzcGlubmVySW5mby51bmlxdWVJRF0uY291bnQgPSArK3NwaW5uZXJJbmZvLmdsb2JhbEluZm9bc3Bpbm5lckluZm8udW5pcXVlSURdLmNvdW50ICUgNDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlQ2lyY2xlKHN0YXJ0LCBlbmQsIGVhc2luZywgZHVyYXRpb24sIGNvdW50LCBtYXgsIHNwaW5uZXJJbmZvKSB7XG4gICAgICAgIHZhciBpZCA9ICsrc3Bpbm5lckluZm8uZ2xvYmFsSW5mb1tzcGlubmVySW5mby51bmlxdWVJRF0ucHJldmlvdXNJZDtcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB2YXIgY2hhbmdlID0gZW5kIC0gc3RhcnQ7XG4gICAgICAgIHZhciBkaWFtZXRlciA9IGdldFNpemUoKHNwaW5uZXJJbmZvLmdsb2JhbEluZm9bc3Bpbm5lckluZm8udW5pcXVlSURdLnJhZGl1cyAqIDIpICsgJycpO1xuICAgICAgICB2YXIgc3Ryb2tlU2l6ZSA9IGdldFN0cm9rZVNpemUoZGlhbWV0ZXIpO1xuICAgICAgICB2YXIgcm90YXRlID0gLTkwICogKHNwaW5uZXJJbmZvLmdsb2JhbEluZm9bc3Bpbm5lckluZm8udW5pcXVlSURdLmNvdW50IHx8IDApO1xuICAgICAgICBtYXRfYW5pbWF0aW9uKHNwaW5uZXJJbmZvKTtcbiAgICAgICAgZnVuY3Rpb24gbWF0X2FuaW1hdGlvbihzcGlubmVySW5mbykge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUsIGR1cmF0aW9uKSk7XG4gICAgICAgICAgICB1cGRhdGVQYXRoKGVhc2luZyhjdXJyZW50VGltZSwgc3RhcnQsIGNoYW5nZSwgZHVyYXRpb24pLCBzcGlubmVySW5mby5jb250YWluZXIpO1xuICAgICAgICAgICAgaWYgKGlkID09PSBzcGlubmVySW5mby5nbG9iYWxJbmZvW3NwaW5uZXJJbmZvLnVuaXF1ZUlEXS5wcmV2aW91c0lkICYmIGN1cnJlbnRUaW1lIDwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaW1lT3V0W3NwaW5uZXJJbmZvLnVuaXF1ZUlEXS50aW1lT3V0ID0gc2V0VGltZW91dChtYXRfYW5pbWF0aW9uLmJpbmQobnVsbCwgc3Bpbm5lckluZm8pLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFuaW1hdGVNYXRlcmlhbChzcGlubmVySW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUGF0aCh2YWx1ZSwgY29udGFpbmVyKSB7XG4gICAgICAgICAgICBpZiAoKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcuZS1zcGluLW1hdGVyaWFsJykpKVxuICAgICAgICAgICAgICAgICYmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi1tYXRlcmlhbCcpLnF1ZXJ5U2VsZWN0b3IoJ3BhdGguZS1wYXRoLWNpcmNsZScpKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ZnID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tbWF0ZXJpYWwnKTtcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHN2Zy5xdWVyeVNlbGVjdG9yKCdwYXRoLmUtcGF0aC1jaXJjbGUnKTtcbiAgICAgICAgICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hvZmZzZXQnLCBnZXREYXNoT2Zmc2V0KGRpYW1ldGVyLCBzdHJva2VTaXplLCB2YWx1ZSwgbWF4KSArICcnKTtcbiAgICAgICAgICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3JvdGF0ZSgnICsgKHJvdGF0ZSkgKyAnICcgKyBkaWFtZXRlciAvIDIgKyAnICcgKyBkaWFtZXRlciAvIDIgKyAnKScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hdF9jYWxjdWxhdGVfYXR0cmlidXRlcyhyYWRpdXMsIGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgZGlhbWV0ZXIgPSByYWRpdXMgKiAyO1xuICAgICAgICB2YXIgc3ZnID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tbWF0ZXJpYWwnKTtcbiAgICAgICAgdmFyIHBhdGggPSBzdmcucXVlcnlTZWxlY3RvcigncGF0aC5lLXBhdGgtY2lyY2xlJyk7XG4gICAgICAgIHZhciBzdHJva2VTaXplID0gZ2V0U3Ryb2tlU2l6ZShkaWFtZXRlcik7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1PcmlnaW4gPSAoZGlhbWV0ZXIgLyAyKSArICdweCc7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyBkaWFtZXRlciArICcgJyArIGRpYW1ldGVyKTtcbiAgICAgICAgc3ZnLnN0eWxlLndpZHRoID0gc3ZnLnN0eWxlLmhlaWdodCA9IGRpYW1ldGVyICsgJ3B4JztcbiAgICAgICAgc3ZnLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IHRyYW5zZm9ybU9yaWdpbiArICcgJyArIHRyYW5zZm9ybU9yaWdpbiArICcgJyArIHRyYW5zZm9ybU9yaWdpbjtcbiAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIHN0cm9rZVNpemUgKyAnJyk7XG4gICAgICAgIHBhdGguc2V0QXR0cmlidXRlKCdkJywgZHJhd0FyYyhkaWFtZXRlciwgc3Ryb2tlU2l6ZSkpO1xuICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsICgoZGlhbWV0ZXIgLSBzdHJva2VTaXplKSAqIE1hdGguUEkgKiAwLjc1KSArICcnKTtcbiAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNob2Zmc2V0JywgZ2V0RGFzaE9mZnNldChkaWFtZXRlciwgc3Ryb2tlU2l6ZSwgMSwgNzUpICsgJycpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRTaXplKHZhbHVlKSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZHJhd0FyYyhkaWFtZXRlciwgc3Ryb2tlU2l6ZSkge1xuICAgICAgICB2YXIgcmFkaXVzID0gZGlhbWV0ZXIgLyAyO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gc3Ryb2tlU2l6ZSAvIDI7XG4gICAgICAgIHJldHVybiAnTScgKyByYWRpdXMgKyAnLCcgKyBvZmZzZXRcbiAgICAgICAgICAgICsgJ0EnICsgKHJhZGl1cyAtIG9mZnNldCkgKyAnLCcgKyAocmFkaXVzIC0gb2Zmc2V0KSArICcgMCAxIDEgJyArIG9mZnNldCArICcsJyArIHJhZGl1cztcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U3Ryb2tlU2l6ZShkaWFtZXRlcikge1xuICAgICAgICByZXR1cm4gMTAgLyAxMDAgKiBkaWFtZXRlcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGFzaE9mZnNldChkaWFtZXRlciwgc3Ryb2tlU2l6ZSwgdmFsdWUsIG1heCkge1xuICAgICAgICByZXR1cm4gKGRpYW1ldGVyIC0gc3Ryb2tlU2l6ZSkgKiBNYXRoLlBJICogKCgzICogKG1heCkgLyAxMDApIC0gKHZhbHVlIC8gMTAwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVhc2VBbmltYXRpb24oY3VycmVudCwgc3RhcnQsIGNoYW5nZSwgZHVyYXRpb24pIHtcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChjdXJyZW50IC89IGR1cmF0aW9uKSAqIGN1cnJlbnQ7XG4gICAgICAgIHZhciB0aW1lY291bnQgPSB0aW1lc3RhbXAgKiBjdXJyZW50O1xuICAgICAgICByZXR1cm4gc3RhcnQgKyBjaGFuZ2UgKiAoNiAqIHRpbWVjb3VudCAqIHRpbWVzdGFtcCArIC0xNSAqIHRpbWVzdGFtcCAqIHRpbWVzdGFtcCArIDEwICogdGltZWNvdW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmJfY2FsY3VsYXRlX2F0dHJpYnV0ZXMocmFkaXVzLCBpbm5lckNvbmFpbmVyKSB7XG4gICAgICAgIHZhciBjZW50ZXJYID0gcmFkaXVzO1xuICAgICAgICB2YXIgY2VudGVyWSA9IHJhZGl1cztcbiAgICAgICAgdmFyIGRpYW1ldGVyID0gcmFkaXVzICogMjtcbiAgICAgICAgdmFyIHN0YXJ0QXJjID0gMzE1O1xuICAgICAgICB2YXIgZW5kQXJjID0gNDU7XG4gICAgICAgIHZhciBzdmcgPSBpbm5lckNvbmFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNwaW4tZmFicmljJyk7XG4gICAgICAgIHZhciBjaXJjbGUgPSBzdmcucXVlcnlTZWxlY3RvcignLmUtcGF0aC1jaXJjbGUnKTtcbiAgICAgICAgdmFyIHBhdGggPSBzdmcucXVlcnlTZWxlY3RvcignLmUtcGF0aC1hcmMnKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybU9yaWdpbiA9IChkaWFtZXRlciAvIDIpICsgJ3B4JztcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnZCcsIGRlZmluZUNpcmNsZShjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMpKTtcbiAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBkZWZpbmVBcmMoY2VudGVyWCwgY2VudGVyWSwgcmFkaXVzLCBzdGFydEFyYywgZW5kQXJjKSk7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyBkaWFtZXRlciArICcgJyArIGRpYW1ldGVyKTtcbiAgICAgICAgc3ZnLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IHRyYW5zZm9ybU9yaWdpbiArICcgJyArIHRyYW5zZm9ybU9yaWdpbiArICcgJyArIHRyYW5zZm9ybU9yaWdpbjtcbiAgICAgICAgc3ZnLnN0eWxlLndpZHRoID0gc3ZnLnN0eWxlLmhlaWdodCA9IGRpYW1ldGVyICsgJ3B4JztcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lQXJjUG9pbnRzKGNlbnRlclgsIGNlbnRlclksIHJhZGl1cywgYW5nbGUpIHtcbiAgICAgICAgdmFyIHJhZGlhbnMgPSAoYW5nbGUgLSA5MCkgKiBNYXRoLlBJIC8gMTgwLjA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBjZW50ZXJYICsgKHJhZGl1cyAqIE1hdGguY29zKHJhZGlhbnMpKSxcbiAgICAgICAgICAgIHk6IGNlbnRlclkgKyAocmFkaXVzICogTWF0aC5zaW4ocmFkaWFucykpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlZmluZUFyYyh4LCB5LCByYWRpdXMsIHN0YXJ0QXJjLCBlbmRBcmMpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gZGVmaW5lQXJjUG9pbnRzKHgsIHksIHJhZGl1cywgZW5kQXJjKTtcbiAgICAgICAgdmFyIGVuZCA9IGRlZmluZUFyY1BvaW50cyh4LCB5LCByYWRpdXMsIHN0YXJ0QXJjKTtcbiAgICAgICAgdmFyIGQgPSBbXG4gICAgICAgICAgICAnTScsIHN0YXJ0LngsIHN0YXJ0LnksXG4gICAgICAgICAgICAnQScsIHJhZGl1cywgcmFkaXVzLCAwLCAwLCAwLCBlbmQueCwgZW5kLnlcbiAgICAgICAgXS5qb2luKCcgJyk7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWZpbmVDaXJjbGUoeCwgeSwgcmFkaXVzKSB7XG4gICAgICAgIHZhciBkID0gW1xuICAgICAgICAgICAgJ00nLCB4LCB5LFxuICAgICAgICAgICAgJ20nLCAtcmFkaXVzLCAwLFxuICAgICAgICAgICAgJ2EnLCByYWRpdXMsIHJhZGl1cywgMCwgMSwgMCwgcmFkaXVzICogMiwgMCxcbiAgICAgICAgICAgICdhJywgcmFkaXVzLCByYWRpdXMsIDAsIDEsIDAsIC1yYWRpdXMgKiAyLCAwLFxuICAgICAgICBdLmpvaW4oJyAnKTtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNob3dTcGlubmVyKGNvbnRhaW5lcikge1xuICAgICAgICBzaG93SGlkZVNwaW5uZXIoY29udGFpbmVyLCBmYWxzZSk7XG4gICAgfVxuICAgIGV4cG9ydHMuc2hvd1NwaW5uZXIgPSBzaG93U3Bpbm5lcjtcbiAgICBmdW5jdGlvbiBzaG93SGlkZVNwaW5uZXIoY29udGFpbmVyLCBpc0hpZGUpIHtcbiAgICAgICAgdmFyIHNwaW5uZXJXcmFwID0gY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU1BJTldSQVApID8gY29udGFpbmVyIDpcbiAgICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19TUElOV1JBUCk7XG4gICAgICAgIHZhciBpbm5lciA9IHNwaW5uZXJXcmFwLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1NQSU5JTldSQVApO1xuICAgICAgICB2YXIgc3BpbkNoZWNrO1xuICAgICAgICBzcGluQ2hlY2sgPSBpc0hpZGUgPyAhc3Bpbm5lcldyYXAuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TUElOVEVNUExBVEUpICYmICFzcGlubmVyV3JhcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0hJREVTUElOKSA6XG4gICAgICAgICAgICAhc3Bpbm5lcldyYXAuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TUElOVEVNUExBVEUpICYmICFzcGlubmVyV3JhcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NIT1dTUElOKTtcbiAgICAgICAgaWYgKHNwaW5DaGVjaykge1xuICAgICAgICAgICAgdmFyIHN2Z0VsZSA9IHNwaW5uZXJXcmFwLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc3ZnRWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpZCA9IHN2Z0VsZS5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICBnbG9iYWxUaW1lT3V0W2lkXS5pc0FuaW1hdGUgPSAhaXNIaWRlO1xuICAgICAgICAgICAgc3dpdGNoIChnbG9iYWxUaW1lT3V0W2lkXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTWF0ZXJpYWwnOlxuICAgICAgICAgICAgICAgICAgICBpc0hpZGUgPyBjbGVhclRpbWVvdXQoZ2xvYmFsVGltZU91dFtpZF0udGltZU91dCkgOiBzdGFydE1hdEFuaW1hdGUoaW5uZXIsIGlkLCBnbG9iYWxUaW1lT3V0W2lkXS5yYWRpdXMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCb290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBpc0hpZGUgPyBjbGVhclRpbWVvdXQoZ2xvYmFsVGltZU91dFtpZF0udGltZU91dCkgOiBhbmltYXRlQm9vdHN0cmFwKGlubmVyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNIaWRlID8gZWoyX2Jhc2VfMS5jbGFzc0xpc3Qoc3Bpbm5lcldyYXAsIFtDTFNfSElERVNQSU5dLCBbQ0xTX1NIT1dTUElOXSkgOiBlajJfYmFzZV8xLmNsYXNzTGlzdChzcGlubmVyV3JhcCwgW0NMU19TSE9XU1BJTl0sIFtDTFNfSElERVNQSU5dKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGlkZVNwaW5uZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHNob3dIaWRlU3Bpbm5lcihjb250YWluZXIsIHRydWUpO1xuICAgIH1cbiAgICBleHBvcnRzLmhpZGVTcGlubmVyID0gaGlkZVNwaW5uZXI7XG4gICAgZnVuY3Rpb24gc2V0U3Bpbm5lcihhcmdzKSB7XG4gICAgICAgIGlmIChhcmdzLnRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNwaW5UZW1wbGF0ZSA9IGFyZ3MudGVtcGxhdGU7XG4gICAgICAgICAgICBpZiAoYXJncy50ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3BpbkNTU0NsYXNzID0gYXJncy5jc3NDbGFzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDTFNfU1BJTldSQVApO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY29udGFpbmVyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgZW5zdXJlVGVtcGxhdGUoYXJncy50ZW1wbGF0ZSwgY29udGFpbmVyW2luZGV4XSwgYXJncy50eXBlLCBhcmdzLmNzc0NsYXNzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnNldFNwaW5uZXIgPSBzZXRTcGlubmVyO1xuICAgIGZ1bmN0aW9uIGVuc3VyZVRlbXBsYXRlKHRlbXBsYXRlLCBjb250YWluZXIsIHRoZW1lLCBjc3NDbGFzcykge1xuICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZSkgJiYgIWNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NQSU5URU1QTEFURSkpIHtcbiAgICAgICAgICAgIHJlcGxhY2VUaGVtZShjb250YWluZXIsIHRoZW1lLCBjc3NDbGFzcyk7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU0hPV1NQSU4pKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1NIT1dTUElOKTtcbiAgICAgICAgICAgICAgICBzaG93U3Bpbm5lcihjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX0hJREVTUElOKTtcbiAgICAgICAgICAgICAgICBoaWRlU3Bpbm5lcihjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3BpblRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3NzQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgc3BpbkNTU0NsYXNzID0gY3NzQ2xhc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVwbGFjZVRoZW1lKGNvbnRhaW5lciwgdGhlbWUsIGNzc0NsYXNzKSB7XG4gICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjc3NDbGFzcykpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3ZnRWxlbWVudCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcbiAgICAgICAgdmFyIHJhZGl1cyA9IHRoZW1lID09PSAnQm9vdHN0cmFwJyA/IHBhcnNlRmxvYXQoc3ZnRWxlbWVudC5zdHlsZS5oZWlnaHQpIDogcGFyc2VGbG9hdChzdmdFbGVtZW50LnN0eWxlLmhlaWdodCkgLyAyO1xuICAgICAgICB2YXIgY2xhc3NOYW1lcyA9IHN2Z0VsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xuICAgICAgICB2YXIgc3ZnQ2xhc3NMaXN0ID0gY2xhc3NOYW1lcy5zcGxpdCgvXFxzLyk7XG4gICAgICAgIGlmIChzdmdDbGFzc0xpc3QuaW5kZXhPZignZS1zcGluLW1hdGVyaWFsJykgPj0gMCkge1xuICAgICAgICAgICAgdmFyIGlkID0gc3ZnRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZ2xvYmFsVGltZU91dFtpZF0udGltZU91dCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGhlbWUodGhlbWUsIGNvbnRhaW5lciwgcmFkaXVzKTtcbiAgICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3NwaW5uZXIvc3Bpbm5lci5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}