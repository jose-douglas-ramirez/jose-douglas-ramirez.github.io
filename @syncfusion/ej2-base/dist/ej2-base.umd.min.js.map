/*!
*  filename: ej2-base.umd.min.js.map
*  version : 15.4.17
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-base.umd.js"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","require","ajax_1","animation_1","base_1","browser_1","canvas_renderer_1","component_1","child_property_1","draggable_1","droppable_1","event_handler_1","internationalization_1","keyboard_1","l10n_1","module_loader_1","notify_property_change_1","svg_renderer_1","touch_1","template_engine_1","util_1","dom_1","__export","hasOwnProperty","Object","defineProperty","value","apply","EventHandler","addOrGetEventData","element","__eventList","events","add","eventName","listener","bindTo","intDebounce","debounceListener","eventData","debounce","bind","event","split","length","push","name","addEventListener","remove","j","index","some","x","splice","removeEventListener","clearEvents","copyData","extend","shift","trigger","eventProp","_i","eventData_1","event_1","createInstance","classFunction","params","arrayParam","unshift","Function","prototype","setImmediate","handler","unbind","num","Uint16Array","window","msCrypto","crypto","getRandomValues","secret","combineArray","messageHandler","source","data","postMessage","getValue","nameSpace","obj","splits","isUndefined","setValue","key","keys","start","fromObj","isNullOrUndefined","deleteObject","isObject","objCon","constructor","getEnumValue","enumObject","enumValue","merge","destination","temrObj","tempProp","keys_1","copied","first","second","deep","result","arguments","arguments_1","obj1","forEach","clone","src","copy","getUniqueID","definedName","uid","eventFunction","delay","out","_this","args","later","clearTimeout","setTimeout","queryParams","array","keys_2","encodeURIComponent","join","isObjectArray","parser","toString","compareElementParent","child","parent","node","document","parentNode","throwError","message","Error","e","stack","print","printWindow","div","createElement","links","slice","getElementsByTagName","querySelectorAll","reference","open","appendChild","cloneNode","len","outerHTML","write","innerHTML","close","focus","interval","setInterval","ready","clearInterval","formatUnit","indexOf","getInstance","component","elem","querySelector","instances","_a","inst","addInstance","instance","ret","headerRegex","defaultType","Ajax","options","type","async","mode","url","toUpperCase","send","Promise","resolve","reject","httpRequest","XMLHttpRequest","onreadystatechange","stateChange","setRequestHeader","contentType","beforeSend","successHandler","onSuccess","failureHandler","reason","onFailure","responseText","dataType","toLowerCase","JSON","parse","error","readyState","status","statusText","getResponseHeader","responseHeaders","header","headers","exec","getAllResponseHeaders","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","create","__decorate","decorators","target","desc","r","getOwnPropertyDescriptor","Reflect","decorate","rippleEffect","rippleOptions","done","rippleModel","getRippleModel","rippleFlag","isRippleEnabled","setAttribute","rippleHandler","rippleUpHandler","rippleLeaveHandler","Browser","isPointer","removeAttribute","selector","ignore","isCenterRipple","duration","closest","offset","getBoundingClientRect","offsetX","pageX","body","scrollLeft","offsetY","pageY","scrollTop","Math","max","abs","left","right","top","bottom","radius","sqrt","diameter","y","classList","styles","rippleElement","className","getComputedStyle","getPropertyValue","style","transform","removeRipple","eventArgs","rippleElements","selectAll","opacity","removeChild","getElementsByClassName","enableRipple","isRipple","Animation","Animation_1","_super","easing","ease","linear","easeIn","easeOut","easeInOut","elasticInOut","elasticIn","elasticOut","animate","model","getModel","elements","elements_1","element_1","delayAnimation","stop","animation","animationId","getAttribute","frameId","parseInt","cancelAnimationFrame","end","applyAnimation","timeStamp","step","timerId","startTime","prevTimeStamp","startAnimation","begin","avg","timingFunction","progress","requestAnimationFrame","performance","now","fail","onPropertyChanged","newProp","oldProp","getModuleName","destroy","Base","Property","Event","NotifyPropertyChanges","tagName","properties","attrs","attributes","addClass","classes","getClassList","ele","_b","classList_1","contains","removeClass","classList_2","isVisible","visibility","offsetWidth","prepend","fromElements","toElement","docFrag","createDocumentFragment","insertBefore","firstElementChild","append","detach","select","context","el","nodeType","matches","siblings","childNodes","childNodes_1","curNode","Node","ELEMENT_NODE","getAttributeOrDefault","property","attrVal","setStyleAttribute","addClasses","removeClasses","msMatchesSelector","webkitMatchesSelector","observer_1","isProtectedOnChange","changedProperties","oldProperties","refreshing","finalUpdate","childChangedProperties","modelObserver","Observer","setProperties","isDestroyed","prop","muteOnChange","prevDetection","dataBind","callChildDataBind","obj_1","clearChanges","getOwnPropertyNames","newChanges","oldChanges","saveChanges","newValue","oldValue","on","off","notify","moduleClass","ej2_instances","filter","boundedEvents","cntxt","notExist","isHandlerPresent","curObject","argument","curObject_1","cur","boundedEvents_1","REGX_MOBILE","REGX_IE","REGX_IE11","REGX_IOS","REGX_IOS7","REGX_ANDROID","REGX_WINDOWS","REGX_VERSION","REGX_BROWSER","OPERA","EDGE","CHROME","PANTHOMEJS","SAFARI","WEBKIT","MSIE","MOZILLA","browserDetails","extractBrowserDetail","browserInfo","culture","clientInfo","userAgent","match","version","language","navigator","getEvent","isTouch","isDevice","move","getTouchStartEvent","getTouchEndEvent","getTouchMoveEvent","regX","test","get","uA","set","enumerable","configurable","info","isMSPointer","isWebView","cordova","PhoneGap","phonegap","forge","touchStartEvent","touchMoveEvent","touchEndEvent","getObject","curKey","defaultValue","getObjectArray","isSetter","isFactory","curType","propertyGetter","propertySetter","oldVal","complexGetter","complexSetter","complexFactoryGetter","complexFactorySetter","complexArrayGetter","defCollection","complexArraySetter","oldValueCollection","newValCollection","complexArrayFactorySetter","complexArrayFactoryGetter","propertyDescriptor","addPropertyCollection","Complex","ComplexFactory","Collection","CollectionFactory","eventDescriptor","finalContext","getParentContext","prefix","classConstructor","propertyType","propList","props","complexProps","colProps","propNames","complexPropNames","colPropNames","eventNames","propertyName","getBuilderProperties","builderObject","propCollections","isPropertyArray","rex","_c","childType","tempValue","CreateBuilder","builderFunction","temp","curText","CanvasRenderer","rootID","rootId","getOptionValue","createCanvas","canvasObj","ctx","getContext","setCanvasSize","width","height","getElementById","size","setAttributes","lineWidth","dashArray","dashArrayString","setLineDash","strokeStyle","drawLine","save","beginPath","stroke","moveTo","x1","y1","lineTo","x2","y2","restore","dataUrl","toDataURL","drawRectangle","canvasCtx","cornerRadius","rx","globalAlpha","rect","drawCornerRadius","fill","fillStyle","fillRect","arcTo","closePath","drawPath","canvasTranslate","path","dataSplit","borderWidth","flag","translate","parseFloat","innerR","cx","c1","c2","c3","c4","bezierCurveTo","arc","counterClockWise","cy","PI","drawText","label","fontWeight","fontSize","fontFamily","fontStyle","font","anchor","textAlign","baseline","textBaseline","rotate","labelRotation","fillText","drawCircle","drawPolyline","points","point","drawEllipse","circumference","ry","scaleX","scaleY","scale","drawImage","imageObj","Image","href","createLinearGradient","colors","myGradient","colorStop","setGradientValues","createRadialGradient","colorName","color","newColorStop","stopColor","addColorStop","setElementAttributes","values","map","updateCanvasAttributes","img_1","onload","Component","needsID","enableRtl","rightToLeft","locale","defaultCulture","moduleLoader","ModuleLoader","localObserver","detectFunction","onIntlChange","enablePersistence","setPersistData","appendTo","requiredModules","cancel","clean","refresh","preRender","injectModules","render","mergePersistData","arg","event_2","getInjectedModules","injectedModules","Inject","moduleList","inject","localStorage","getItem","setItem","getPersistData","clearTemplate","templateName","addOnPersist","persistObj","options_1","objValue","getActualProperties","stringify","ChildProperty","ignoreOnPersist","iterateJsonProperties","ignoreList","newObj","this_1","newList","str","RegExp","replace","loadedModules","reqLength","clearUnusedModule","modl","moduleList_1","modName","member","isModuleLoaded","moduleObject","memberName","getMemberName","isProperty","loadedModule","usedModules","removableModule","removableModule_1","mod","substring","propName","isArray","parentObj","controlParent","isParentArray","updateChange","val","updateTimeOut","curIndex","date_formatter_1","number_formatter_1","date_parser_1","number_parser_1","intl_base_1","setCulture","cultureName","setCurrencyCode","currencyCode","defaultCurrencyCode","loadCldr","data_1","cldrData","getNumericObject","numObject","IntlBase","getDependables","mapper","dateObject","numSystem","symbPattern","pattern","getSymbolPattern","getFormatData","dateSeparator","getDateSeparator","getDefaultDateObject","Internationalization","getDateFormat","DateFormat","dateFormat","getCulture","skeleton","getNumberFormat","currency","NumberFormat","numberFormatter","getDateParser","DateParser","dateParser","getNumberParser","NumberParser","numberParser","format","formatNumber","option","formatDate","parseDate","parseNumber","getDatePattern","isExcelFormat","getActualDateTimeFormat","getNumberPattern","getActualNumberFormat","parser_base_1","abbreviateRegexGlobal","weekdayKey","basicPatterns","timeSetter","h","H","s","cldr","dependable","formatOptions","resPattern","getResultantPattern","dateSeperator","numMapper","ParserBase","getNumberMapper","parserObject","getNumberingSystem","patternMatch","patternMatch_1","char","weekday","days","monthIndex","month","designator","eText","era","timeZone","isNaN","getDate","intDateFormatter","dateParseRegex","matches_1","length_1","curval","isNumber","processNumber","curstr","getMonth","getDay","getFullYear","substr","desig","getHours","dec","timezone","getTimezoneOffset","pattern_1","hourFormat","timeSeparator","gmtZeroFormat","getTimeZoneValue","gmtFormat","numberSymbols","checkTwodigitNumber","convertValueParts","latnParseRegex","tVal","splt","curPattern","no","ishour","floor","defaultNumberingSystem","latn","_digits","_type","defaultNumberSymbols","decimal","group","percentSign","plusSign","minusSign","infinity","nan","exponential","latnNumberSystem","getMainObject","cName","numberingSystems","reverseObject","propKeys","res","propKeys_1","getSymbolRegex","regexStr","getSymbolMatch","matchKeys","matchKeys_1","constructRegex","regex","getDefaultNumberingSystem","nSystem","getCurrentNumericOptions","curObj","numberSystem","needSymbols","digits","numericPair","numberParseRegex","numericRegex","symbolNumberSystem","symbolMatch","latnNumberSystem_1","nPair","nRegex","iType","dPattern","tPattern","defaultObject","numericObject","isAccount","getProperNumericSkeleton","formatRegex","patternMatcher","fractionDigits","needFraction","cSymbol","fractionOnly","nData","nlead","nend","customRegex","changeCurrencySymbol","groupPattern","fraction","fmatch","fractionRegex","minimumFraction","maximumFraction","sym","defaultCurrency","getCurrencySymbol","customFormat","dOptions","formatSplit","customNumberFormat","pData","minusSymbol","cOptions","minimumFractionDigits","maximumFractionDigits","integerPart","useGrouping","fractionPart","minimumIntegerDigits","lastIndexOf","isCurrencyPercent","currencySymbol","isCurrency","percentSymbol","symbolPattern","numberMapper","groupSeparator","groupData","getGroupingDetails","parts","actual","symbol","part","loc","typeMapper","dateObj","actualPattern","patternRegex","tLength","timeZonePattern","Date","minFrac","parseOptions","custom","fractionDigitsPattern","minimumIntegerPattern","groupingPattern","minDigits","maxDigits","diff","integer","negativeDataRegex","G","M","L","'"," a","yy","EEEE","E","$","%","-","0","1","dates","calendars","gregorian","months","stand-alone","abbreviated","2","3","4","5","6","7","8","9","10","11","12","narrow","wide","sun","mon","tue","wed","thu","fri","sat","short","dayPeriods","am","pm","eras","eraNames","0-alt-variant","1-alt-variant","eraAbbr","eraNarrow","dateFormats","full","long","medium","timeFormats","dateTimeFormats","availableFormats","Ed","Ehm","EHm","Ehms","EHms","Gy","GyMMM","GyMMMd","GyMMMEd","hm","Hm","hms","Hms","hmsv","Hmsv","hmv","Hmv","Md","MEd","MMM","MMMd","MMMEd","MMMMd","ms","yM","yMd","yMEd","yMMM","yMMMd","yMMMEd","yMMMM","timeZoneNames","numbers","currencies","USD","displayName","symbol-alt-narrow","EUR","GBP","minimumGroupingDigits","symbols-numberSystem-latn","list","superscriptingExponent","perMille","decimalFormats-numberSystem-latn","standard","percentFormats-numberSystem-latn","currencyFormats-numberSystem-latn","accounting","C","P","N","A","errorText","ls","mf","lf","fOptions","symbols","isPercent","groupOne","checkValueRange","maximumSignificantDigits","minimumSignificantDigits","mval","mfrac","lfrac","isFinite","intNumberFormatter","primary","secondary","val1","val2","checkbothExist","isFraction","decide","dint","str1","str2","checkRange","text","range","curData","zeroData","fValue","processSignificantDigits","processFraction","processMinimumIntegers","groupNumbers","min","toPrecision","level1","sep","decimalSymbol","level2","toFixed","lead","latnRegex","minute","hour","day","datePartMatcher","z","Z","hourOnly","numOptions","regexString","evalposition","nRegx","canUpdate","charKey","optional","weekObject","hour12","tzone","hpattern","parseTimeZoneRegx","pos","parserRegex","parsedDateParts","internalDateParse","getDateObject","setMilliseconds","tKeys","year","setFullYear","tKeys_1","tValue","pDate","setDate","lDate","lastDay","setHours","tzValue","setMinutes","getMinutes","retOptions","props_1","matchString","internalNumberParser","tmatch","getZoneValue","tZone","splitStr","cRegex","parseRegex","groupRegex","symbolRegex","symbolpattern","getParsedNumber","isNegative","Infinity","NaN","exponent","dom_2","defaultPosition","Position","Draggable","Draggable_1","dragLimit","getDefaultPosition","padding","diffX","diffY","droppables","toggleEvents","isIE","scope","isUnWire","handle","initialize","evt","currentTarget","preventDefault","changedTouches","abort","intCoord","getCoordinates","initialPosition","relativeXPosition","relativeYPosition","intDragStart","intDestroy","documentElement","intCordinate","styleProp","margin","marginLeft","marginTop","marginRight","marginBottom","dragTarget","intClosest","calculateParentPosition","position","getMousePosition","distance","getHelperElement","dragTargetElement","helperElement","parentClientRect","offsetParent","dragStart","curTarget","getProperTargetElement","dragArea","setDragArea","enableTailMode","posValue","getProcessedPositionValue","intDrag","intDragStop","setGlobalDroppables","axis","queryPositionInfo","pageXOffset","pageYOffset","docHeight","getDocumentWidthHeight","docWidth","drag","eleObj","checkTargetElement","intOver","dragData","hoverObject","intOut","helper","tLeft","tTop","pagex","pagey","dLeft","dTop","skipDistanceCheck","helperWidth","helperHeight","offsetHeight","iTop","iLeft","dragValue","docBody","docEle","dragStop","dragStopCalled","intDrop","eleWidthBound","eleHeightBound","elementArea","tborder","tpadding","lowerKey","prevStyle","display","elementFromPoint","clientX","clientY","cursorAt","sender","reset","draggable","draggedElement","dropIns","getDropInstance","parent_1","parentElement","drop","eleInst","eleInst_1","Droppable","mouseOver","wireEvents","area","accept","isDrag","isDropArea","canDrop","droppedElement","coord","keyCode","backspace","tab","enter","control","alt","pause","capslock","space","escape","pageup","pagedown","home","leftarrow","uparrow","rightarrow","downarrow","insert","delete","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","semicolon","plus","comma","minus","dot","forwardslash","graveaccent","openbracket","backslash","closebracket","singlequote","KeyboardEvents","KeyboardEvents_1","keyPressHandler","isAltKey","altKey","isCtrlKey","ctrlKey","isShiftKey","shiftKey","curkeyCode","which","keyConfigs","configCollection","configCollection_1","rconfig","rKeyObj","getKeyConfigData","trim","action","keyAction","unwireEvents","config","configCache","keyData","Number","getKeyCode","keyVal","charCodeAt","L10n","controlName","localeStrings","setLocale","intLocale","intGetControlConstant","currentLocale","load","localeObject","getConstant","SvgRenderer","svgLink","createSvg","svgObj","createElementNS","setSVGSize","line","rectangle","circle","polyline","ellipse","drawPolygon","polygon","img","setAttributeNS","preserveAspectRatio","createText","textContent","createTSpan","tSpan","createTitle","title","createDefs","createClipPath","clipPath","createForeignObject","foreignObject","createGroup","createPattern","newOptions","fx","fy","drawGradient","gradientType","defs","gradient","stop_1","drawClipPath","drawCircularClipPath","SwipeSettings","swipeRegex","Touch","startEvent","isTouchMoved","movedDirection","startPoint","lastMovedPoint","startEventData","hScrollLocked","vScrollLocked","tStampStart","timeOutTapHold","tapHoldEvent","tapHoldThreshold","moveEvent","endEvent","movedPoint","eScrollArgs","calcScrollPoints","scrollArg","startEvents","originalEvent","startX","startY","distanceX","distanceY","scrollDirection","velocity","getVelocity","endPoint","eDblTapArgs","eTapArgs","eSwipeArgs","dblTapTriggred","tDistance","swipeSettings","swipeThresholdDistance","calcPoints","swipeArgs","swipeDirection","defaultArgs","canTrigger","scrollBool","isScrollable","moved","checkSwipe","lastTapTime","getTime","doubleTapThreshold","timeOutTap","doubleTap","eleStyle","overflow","overflowX","overflowY","pnt","newX","newY","newT","xDist","yDist","template_1","compile","templateString","compiler","engineObj","HAS_ROW","setTemplateEngine","classObj","getTemplateEngine","Engine","expression","exp","template","evalExpResult","evalExp","fnCode","localKeys","LINES","DBL_QUOTED_STR","cnt","matchStr","CALL_FUNCTION","rlStr","IF_STMT","WORD","addNameSpace","QUOTES","FOR_STMT","rlStr_1","mtc","fnStr","fNameSpace","ELSE_STMT","IF_OR_FOR","addNS","NOT_NUMBER"],"mappings":"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","file":"ej2-base.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(4), __webpack_require__(6), __webpack_require__(8), __webpack_require__(10), __webpack_require__(11), __webpack_require__(13), __webpack_require__(21), __webpack_require__(22), __webpack_require__(1), __webpack_require__(14), __webpack_require__(23), __webpack_require__(24), __webpack_require__(12), __webpack_require__(9), __webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(2), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ajax_1, animation_1, base_1, browser_1, canvas_renderer_1, component_1, child_property_1, draggable_1, droppable_1, event_handler_1, internationalization_1, keyboard_1, l10n_1, module_loader_1, notify_property_change_1, svg_renderer_1, touch_1, template_engine_1, util_1, dom_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(ajax_1);\n\t    __export(animation_1);\n\t    __export(base_1);\n\t    __export(browser_1);\n\t    __export(canvas_renderer_1);\n\t    __export(component_1);\n\t    __export(child_property_1);\n\t    __export(draggable_1);\n\t    __export(droppable_1);\n\t    __export(event_handler_1);\n\t    __export(internationalization_1);\n\t    __export(keyboard_1);\n\t    __export(l10n_1);\n\t    __export(module_loader_1);\n\t    __export(notify_property_change_1);\n\t    __export(svg_renderer_1);\n\t    __export(touch_1);\n\t    __export(template_engine_1);\n\t    __export(util_1);\n\t    __export(dom_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EventHandler = (function () {\n\t        function EventHandler() {\n\t        }\n\t        EventHandler.addOrGetEventData = function (element) {\n\t            if ('__eventList' in element) {\n\t                return element.__eventList.events;\n\t            }\n\t            else {\n\t                element.__eventList = {};\n\t                return element.__eventList.events = [];\n\t            }\n\t        };\n\t        EventHandler.add = function (element, eventName, listener, bindTo, intDebounce) {\n\t            var eventData = EventHandler.addOrGetEventData(element);\n\t            var debounceListener;\n\t            if (intDebounce) {\n\t                debounceListener = util_1.debounce(listener, intDebounce);\n\t            }\n\t            else {\n\t                debounceListener = listener;\n\t            }\n\t            if (bindTo) {\n\t                debounceListener = debounceListener.bind(bindTo);\n\t            }\n\t            var event = eventName.split(' ');\n\t            for (var i = 0; i < event.length; i++) {\n\t                eventData.push({\n\t                    name: event[i],\n\t                    listener: listener,\n\t                    debounce: debounceListener\n\t                });\n\t                element.addEventListener(event[i], debounceListener);\n\t            }\n\t            return debounceListener;\n\t        };\n\t        EventHandler.remove = function (element, eventName, listener) {\n\t            var eventData = EventHandler.addOrGetEventData(element);\n\t            var event = eventName.split(' ');\n\t            var _loop_1 = function (j) {\n\t                var index = -1;\n\t                var debounceListener;\n\t                if (eventData && eventData.length !== 0) {\n\t                    eventData.some(function (x, i) {\n\t                        return x.name === event[j] && x.listener === listener ?\n\t                            (index = i, debounceListener = x.debounce, true) : false;\n\t                    });\n\t                }\n\t                if (index !== -1) {\n\t                    eventData.splice(index, 1);\n\t                }\n\t                element.removeEventListener(event[j], debounceListener);\n\t            };\n\t            for (var j = 0; j < event.length; j++) {\n\t                _loop_1(j);\n\t            }\n\t        };\n\t        EventHandler.clearEvents = function (element) {\n\t            var eventData;\n\t            var copyData;\n\t            eventData = EventHandler.addOrGetEventData(element);\n\t            copyData = util_1.extend([], copyData, eventData);\n\t            for (var i = 0; i < copyData.length; i++) {\n\t                element.removeEventListener(copyData[i].name, copyData[i].debounce);\n\t                eventData.shift();\n\t            }\n\t        };\n\t        EventHandler.trigger = function (element, eventName, eventProp) {\n\t            var eventData = EventHandler.addOrGetEventData(element);\n\t            var fn = null;\n\t            for (var _i = 0, eventData_1 = eventData; _i < eventData_1.length; _i++) {\n\t                var event_1 = eventData_1[_i];\n\t                if (event_1.name === eventName) {\n\t                    event_1.debounce.call(this, eventProp);\n\t                }\n\t            }\n\t        };\n\t        return EventHandler;\n\t    }());\n\t    exports.EventHandler = EventHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var instances = 'ej2_instances';\n\t    var uid = 0;\n\t    function createInstance(classFunction, params) {\n\t        var arrayParam = params;\n\t        arrayParam.unshift(undefined);\n\t        return new (Function.prototype.bind.apply(classFunction, arrayParam));\n\t    }\n\t    exports.createInstance = createInstance;\n\t    function setImmediate(handler) {\n\t        var unbind;\n\t        var num = new Uint16Array(5);\n\t        var intCrypto = window.msCrypto || window.crypto;\n\t        intCrypto.getRandomValues(num);\n\t        var secret = 'ej2' + combineArray(num);\n\t        var messageHandler = function (event) {\n\t            if (event.source === window && typeof event.data === 'string' && event.data.length <= 32 && event.data === secret) {\n\t                handler();\n\t                unbind();\n\t            }\n\t        };\n\t        window.addEventListener('message', messageHandler, false);\n\t        window.postMessage(secret, '*');\n\t        return unbind = function () {\n\t            window.removeEventListener('message', messageHandler);\n\t        };\n\t    }\n\t    exports.setImmediate = setImmediate;\n\t    function getValue(nameSpace, obj) {\n\t        var value = obj;\n\t        var splits = nameSpace.split('.');\n\t        for (var i = 0; i < splits.length && !isUndefined(value); i++) {\n\t            value = value[splits[i]];\n\t        }\n\t        return value;\n\t    }\n\t    exports.getValue = getValue;\n\t    function setValue(nameSpace, value, obj) {\n\t        var keys = nameSpace.split('.');\n\t        var start = obj || {};\n\t        var fromObj = start;\n\t        var i;\n\t        var length = keys.length;\n\t        var key;\n\t        for (i = 0; i < length; i++) {\n\t            key = keys[i];\n\t            if (i + 1 === length) {\n\t                fromObj[key] = value === undefined ? {} : value;\n\t            }\n\t            else if (isNullOrUndefined(fromObj[key])) {\n\t                fromObj[key] = {};\n\t            }\n\t            fromObj = fromObj[key];\n\t        }\n\t        return start;\n\t    }\n\t    exports.setValue = setValue;\n\t    function deleteObject(obj, key) {\n\t        delete obj[key];\n\t    }\n\t    exports.deleteObject = deleteObject;\n\t    function isObject(obj) {\n\t        var objCon = {};\n\t        return (!isNullOrUndefined(obj) && obj.constructor === objCon.constructor);\n\t    }\n\t    exports.isObject = isObject;\n\t    function getEnumValue(enumObject, enumValue) {\n\t        return enumObject[enumValue];\n\t    }\n\t    exports.getEnumValue = getEnumValue;\n\t    function merge(source, destination) {\n\t        if (!isNullOrUndefined(destination)) {\n\t            var temrObj = source;\n\t            var tempProp = destination;\n\t            var keys = Object.keys(destination);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var key = keys_1[_i];\n\t                temrObj[key] = tempProp[key];\n\t            }\n\t        }\n\t    }\n\t    exports.merge = merge;\n\t    function extend(copied, first, second, deep) {\n\t        var result = copied || {};\n\t        var length = arguments.length;\n\t        if (deep) {\n\t            length = length - 1;\n\t        }\n\t        var _loop_1 = function (i) {\n\t            if (!arguments_1[i]) {\n\t                return \"continue\";\n\t            }\n\t            var obj1 = arguments_1[i];\n\t            Object.keys(obj1).forEach(function (key) {\n\t                var src = result[key];\n\t                var copy = obj1[key];\n\t                var clone;\n\t                if (deep && isObject(copy)) {\n\t                    clone = isObject(src) ? src : {};\n\t                    result[key] = extend({}, clone, copy, true);\n\t                }\n\t                else {\n\t                    result[key] = copy;\n\t                }\n\t            });\n\t        };\n\t        var arguments_1 = arguments;\n\t        for (var i = 1; i < length; i++) {\n\t            _loop_1(i);\n\t        }\n\t        return result;\n\t    }\n\t    exports.extend = extend;\n\t    function isNullOrUndefined(value) {\n\t        return value === undefined || value === null;\n\t    }\n\t    exports.isNullOrUndefined = isNullOrUndefined;\n\t    function isUndefined(value) {\n\t        return ('undefined' === typeof value);\n\t    }\n\t    exports.isUndefined = isUndefined;\n\t    function getUniqueID(definedName) {\n\t        return definedName + '_' + uid++;\n\t    }\n\t    exports.getUniqueID = getUniqueID;\n\t    function debounce(eventFunction, delay) {\n\t        var out;\n\t        return function () {\n\t            var _this = this;\n\t            var args = arguments;\n\t            var later = function () {\n\t                out = null;\n\t                return eventFunction.apply(_this, args);\n\t            };\n\t            clearTimeout(out);\n\t            out = setTimeout(later, delay);\n\t        };\n\t    }\n\t    exports.debounce = debounce;\n\t    function queryParams(data) {\n\t        var array = [];\n\t        var keys = Object.keys(data);\n\t        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n\t            var key = keys_2[_i];\n\t            array.push(encodeURIComponent(key) + '=' + encodeURIComponent('' + data[key]));\n\t        }\n\t        return array.join('&');\n\t    }\n\t    exports.queryParams = queryParams;\n\t    function isObjectArray(value) {\n\t        var parser = Object.prototype.toString;\n\t        if (parser.call(value) === '[object Array]') {\n\t            if (parser.call(value[0]) === '[object Object]') {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    }\n\t    exports.isObjectArray = isObjectArray;\n\t    function compareElementParent(child, parent) {\n\t        var node = child;\n\t        if (node === parent) {\n\t            return true;\n\t        }\n\t        else if (node === document || !node) {\n\t            return false;\n\t        }\n\t        else {\n\t            return compareElementParent(node.parentNode, parent);\n\t        }\n\t    }\n\t    exports.compareElementParent = compareElementParent;\n\t    function throwError(message) {\n\t        try {\n\t            throw new Error(message);\n\t        }\n\t        catch (e) {\n\t            throw e.message + '\\n' + e.stack;\n\t        }\n\t    }\n\t    exports.throwError = throwError;\n\t    function print(element, printWindow) {\n\t        var div = document.createElement('div');\n\t        var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n\t        var reference = '';\n\t        if (isNullOrUndefined(printWindow)) {\n\t            printWindow = window.open('', 'print', 'height=452,width=1024,tabbar=no');\n\t        }\n\t        div.appendChild(element.cloneNode(true));\n\t        for (var i = 0, len = links.length; i < len; i++) {\n\t            reference += links[i].outerHTML;\n\t        }\n\t        printWindow.document.write('<!DOCTYPE html> <html><head>' + reference + '</head><body>' + div.innerHTML +\n\t            '<script> (function() { window.ready = true; })(); </script>' + '</body></html>');\n\t        printWindow.document.close();\n\t        printWindow.focus();\n\t        var interval = setInterval(function () {\n\t            if (printWindow.ready) {\n\t                printWindow.print();\n\t                printWindow.close();\n\t                clearInterval(interval);\n\t            }\n\t        }, 500);\n\t        return printWindow;\n\t    }\n\t    exports.print = print;\n\t    function formatUnit(value) {\n\t        var result = value + '';\n\t        if (result === 'auto' || result.indexOf('%') !== -1 || result.indexOf('px') !== -1) {\n\t            return result;\n\t        }\n\t        return result + 'px';\n\t    }\n\t    exports.formatUnit = formatUnit;\n\t    function getInstance(element, component) {\n\t        var elem = (typeof (element) === 'string') ? document.querySelector(element) : element;\n\t        if (elem[instances]) {\n\t            for (var _i = 0, _a = elem[instances]; _i < _a.length; _i++) {\n\t                var inst = _a[_i];\n\t                if (inst instanceof component) {\n\t                    return inst;\n\t                }\n\t            }\n\t        }\n\t        return null;\n\t    }\n\t    exports.getInstance = getInstance;\n\t    function addInstance(element, instance) {\n\t        var elem = (typeof (element) === 'string') ? document.querySelector(element) : element;\n\t        if (elem[instances]) {\n\t            elem[instances].push(instance);\n\t        }\n\t        else {\n\t            elem[instances] = [instance];\n\t        }\n\t    }\n\t    exports.addInstance = addInstance;\n\t    function combineArray(num) {\n\t        var ret = '';\n\t        for (var i = 0; i < 5; i++) {\n\t            ret += (i ? ',' : '') + num[i];\n\t        }\n\t        return ret;\n\t    }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var headerRegex = /^(.*?):[ \\t]*([^\\r\\n]*)$/gm;\n\t    var defaultType = 'GET';\n\t    var Ajax = (function () {\n\t        function Ajax(options, type, async) {\n\t            this.mode = true;\n\t            this.options = {};\n\t            if (typeof options === 'string') {\n\t                this.url = options;\n\t                this.type = type ? type.toUpperCase() : defaultType;\n\t                this.mode = !util_1.isNullOrUndefined(async) ? async : true;\n\t            }\n\t            else if (typeof options === 'object') {\n\t                this.options = options;\n\t                util_1.merge(this, this.options);\n\t            }\n\t            this.type = this.type ? this.type.toUpperCase() : defaultType;\n\t        }\n\t        Ajax.prototype.send = function (data) {\n\t            var _this = this;\n\t            this.data = util_1.isNullOrUndefined(data) ? this.data : data;\n\t            var promise = new Promise(function (resolve, reject) {\n\t                _this.httpRequest = new XMLHttpRequest();\n\t                _this.httpRequest.onreadystatechange = function () { _this.stateChange(resolve, reject); };\n\t                _this.httpRequest.open(_this.type, _this.url, _this.mode);\n\t                if (!util_1.isNullOrUndefined(_this.data)) {\n\t                    _this.httpRequest.setRequestHeader('Content-Type', _this.contentType || 'application/json; charset=utf-8');\n\t                }\n\t                if (_this.beforeSend) {\n\t                    _this.beforeSend();\n\t                }\n\t                _this.httpRequest.send(!util_1.isNullOrUndefined(_this.data) ? _this.data : null);\n\t            });\n\t            return promise;\n\t        };\n\t        Ajax.prototype.successHandler = function (data) {\n\t            if (this.onSuccess) {\n\t                this.onSuccess(data, this);\n\t            }\n\t            return data;\n\t        };\n\t        Ajax.prototype.failureHandler = function (reason) {\n\t            if (this.onFailure) {\n\t                this.onFailure(this.httpRequest);\n\t            }\n\t            return reason;\n\t        };\n\t        Ajax.prototype.stateChange = function (resolve, reject) {\n\t            var data = this.httpRequest.responseText;\n\t            if (this.dataType && this.dataType.toLowerCase() === 'json') {\n\t                if (data === '') {\n\t                    data = undefined;\n\t                }\n\t                else {\n\t                    try {\n\t                        data = JSON.parse(data);\n\t                    }\n\t                    catch (error) {\n\t                    }\n\t                }\n\t            }\n\t            if (this.httpRequest.readyState === 4) {\n\t                if (this.httpRequest.status === 200 || this.httpRequest.status === 304) {\n\t                    resolve(this.successHandler(data));\n\t                }\n\t                else {\n\t                    reject(new Error(this.failureHandler(this.httpRequest.statusText)));\n\t                }\n\t            }\n\t        };\n\t        Ajax.prototype.getResponseHeader = function (key) {\n\t            var responseHeaders;\n\t            var header;\n\t            responseHeaders = {};\n\t            var headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());\n\t            while (headers) {\n\t                responseHeaders[headers[1].toLowerCase()] = headers[2];\n\t                headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());\n\t            }\n\t            header = responseHeaders[key.toLowerCase()];\n\t            return util_1.isNullOrUndefined(header) ? null : header;\n\t        };\n\t        return Ajax;\n\t    }());\n\t    exports.Ajax = Ajax;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6), __webpack_require__(8), __webpack_require__(1), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, dom_1, base_1, browser_1, event_handler_1, notify_property_change_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Animation = Animation_1 = (function (_super) {\n\t        __extends(Animation, _super);\n\t        function Animation(options) {\n\t            var _this = _super.call(this, options, undefined) || this;\n\t            _this.easing = {\n\t                ease: 'cubic-bezier(0.250, 0.100, 0.250, 1.000)',\n\t                linear: 'cubic-bezier(0.250, 0.250, 0.750, 0.750)',\n\t                easeIn: 'cubic-bezier(0.420, 0.000, 1.000, 1.000)',\n\t                easeOut: 'cubic-bezier(0.000, 0.000, 0.580, 1.000)',\n\t                easeInOut: 'cubic-bezier(0.420, 0.000, 0.580, 1.000)',\n\t                elasticInOut: 'cubic-bezier(0.5,-0.58,0.38,1.81)',\n\t                elasticIn: 'cubic-bezier(0.17,0.67,0.59,1.81)',\n\t                elasticOut: 'cubic-bezier(0.7,-0.75,0.99,1.01)'\n\t            };\n\t            return _this;\n\t        }\n\t        Animation.prototype.animate = function (element, options) {\n\t            options = !options ? {} : options;\n\t            var model = this.getModel(options);\n\t            if (typeof element === 'string') {\n\t                var elements = Array.prototype.slice.call(dom_1.selectAll(element, document));\n\t                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                    var element_1 = elements_1[_i];\n\t                    model.element = element_1;\n\t                    Animation_1.delayAnimation(model);\n\t                }\n\t            }\n\t            else {\n\t                model.element = element;\n\t                Animation_1.delayAnimation(model);\n\t            }\n\t        };\n\t        Animation.stop = function (element, model) {\n\t            element.style.animation = '';\n\t            element.removeAttribute('e-animate');\n\t            var animationId = element.getAttribute('e-animation-id');\n\t            if (animationId) {\n\t                var frameId = parseInt(animationId, 10);\n\t                cancelAnimationFrame(frameId);\n\t                element.removeAttribute('e-animation-id');\n\t            }\n\t            if (model && model.end) {\n\t                model.end.call(this, model);\n\t            }\n\t        };\n\t        Animation.delayAnimation = function (model) {\n\t            if (model.delay) {\n\t                setTimeout(function () { Animation_1.applyAnimation(model); }, model.delay);\n\t            }\n\t            else {\n\t                Animation_1.applyAnimation(model);\n\t            }\n\t        };\n\t        Animation.applyAnimation = function (model) {\n\t            var _this = this;\n\t            model.timeStamp = 0;\n\t            var step = 0;\n\t            var timerId = 0;\n\t            var startTime = 0;\n\t            var prevTimeStamp = 0;\n\t            var duration = model.duration;\n\t            model.element.setAttribute('e-animate', 'true');\n\t            var startAnimation = function (timeStamp) {\n\t                try {\n\t                    if (timeStamp) {\n\t                        prevTimeStamp = prevTimeStamp === 0 ? timeStamp : prevTimeStamp;\n\t                        model.timeStamp = (timeStamp + model.timeStamp) - prevTimeStamp;\n\t                        prevTimeStamp = timeStamp;\n\t                        if (!step && model.begin) {\n\t                            model.begin.call(_this, model);\n\t                        }\n\t                        step = step + 1;\n\t                        var avg = model.timeStamp / step;\n\t                        if (model.timeStamp < duration && model.timeStamp + avg < duration && model.element.getAttribute('e-animate')) {\n\t                            model.element.style.animation = model.name + ' ' + model.duration + 'ms ' + model.timingFunction;\n\t                            if (model.progress) {\n\t                                model.progress.call(_this, model);\n\t                            }\n\t                            requestAnimationFrame(startAnimation);\n\t                        }\n\t                        else {\n\t                            cancelAnimationFrame(timerId);\n\t                            model.element.removeAttribute('e-animation-id');\n\t                            model.element.removeAttribute('e-animate');\n\t                            model.element.style.animation = '';\n\t                            if (model.end) {\n\t                                model.end.call(_this, model);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        startTime = performance.now();\n\t                        timerId = requestAnimationFrame(startAnimation);\n\t                        model.element.setAttribute('e-animation-id', timerId.toString());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    cancelAnimationFrame(timerId);\n\t                    model.element.removeAttribute('e-animation-id');\n\t                    if (model.fail) {\n\t                        model.fail.call(_this, e);\n\t                    }\n\t                }\n\t            };\n\t            startAnimation();\n\t        };\n\t        Animation.prototype.getModel = function (options) {\n\t            return {\n\t                name: options.name || this.name,\n\t                delay: options.delay || this.delay,\n\t                duration: (options.duration !== undefined ? options.duration : this.duration),\n\t                begin: options.begin || this.begin,\n\t                end: options.end || this.end,\n\t                fail: options.fail || this.fail,\n\t                progress: options.progress || this.progress,\n\t                timingFunction: this.easing[options.timingFunction] ? this.easing[options.timingFunction] :\n\t                    (options.timingFunction || this.easing[this.timingFunction])\n\t            };\n\t        };\n\t        Animation.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        Animation.prototype.getModuleName = function () {\n\t            return 'animation';\n\t        };\n\t        Animation.prototype.destroy = function () {\n\t        };\n\t        return Animation;\n\t    }(base_1.Base));\n\t    __decorate([\n\t        notify_property_change_1.Property('FadeIn')\n\t    ], Animation.prototype, \"name\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(400)\n\t    ], Animation.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property('ease')\n\t    ], Animation.prototype, \"timingFunction\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(0)\n\t    ], Animation.prototype, \"delay\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Animation.prototype, \"progress\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Animation.prototype, \"begin\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Animation.prototype, \"end\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Animation.prototype, \"fail\", void 0);\n\t    Animation = Animation_1 = __decorate([\n\t        notify_property_change_1.NotifyPropertyChanges\n\t    ], Animation);\n\t    exports.Animation = Animation;\n\t    function rippleEffect(element, rippleOptions, done) {\n\t        var rippleModel = getRippleModel(rippleOptions);\n\t        if (rippleModel.rippleFlag === false || (rippleModel.rippleFlag === undefined && !exports.isRippleEnabled)) {\n\t            return Function;\n\t        }\n\t        element.setAttribute('data-ripple', 'true');\n\t        event_handler_1.EventHandler.add(element, 'mousedown', rippleHandler, { parent: element, rippleOptions: rippleModel });\n\t        event_handler_1.EventHandler.add(element, 'mouseup', rippleUpHandler, { parent: element, rippleOptions: rippleModel, done: done });\n\t        event_handler_1.EventHandler.add(element, 'mouseleave', rippleLeaveHandler, { parent: element, rippleOptions: rippleModel });\n\t        if (browser_1.Browser.isPointer) {\n\t            event_handler_1.EventHandler.add(element, 'transitionend', rippleLeaveHandler, { parent: element, rippleOptions: rippleModel });\n\t        }\n\t        return (function () {\n\t            element.removeAttribute('data-ripple');\n\t            event_handler_1.EventHandler.remove(element, 'mousedown', rippleHandler);\n\t            event_handler_1.EventHandler.remove(element, 'mouseup', rippleUpHandler);\n\t            event_handler_1.EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);\n\t            event_handler_1.EventHandler.remove(element, 'transitionend', rippleLeaveHandler);\n\t        });\n\t    }\n\t    exports.rippleEffect = rippleEffect;\n\t    function getRippleModel(rippleOptions) {\n\t        var rippleModel = {\n\t            selector: rippleOptions && rippleOptions.selector ? rippleOptions.selector : null,\n\t            ignore: rippleOptions && rippleOptions.ignore ? rippleOptions.ignore : null,\n\t            rippleFlag: rippleOptions && rippleOptions.rippleFlag,\n\t            isCenterRipple: rippleOptions && rippleOptions.isCenterRipple,\n\t            duration: rippleOptions && rippleOptions.duration ? rippleOptions.duration : 350\n\t        };\n\t        return rippleModel;\n\t    }\n\t    function rippleHandler(e) {\n\t        var target = (e.target);\n\t        var selector = this.rippleOptions.selector;\n\t        var element = selector ? dom_1.closest(target, selector) : target;\n\t        if (!element || (this.rippleOptions && dom_1.closest(target, this.rippleOptions.ignore))) {\n\t            return;\n\t        }\n\t        var offset = element.getBoundingClientRect();\n\t        var offsetX = e.pageX - document.body.scrollLeft;\n\t        var offsetY = e.pageY - document.body.scrollTop;\n\t        var pageX = Math.max(Math.abs(offsetX - offset.left), Math.abs(offsetX - offset.right));\n\t        var pageY = Math.max(Math.abs(offsetY - offset.top), Math.abs(offsetY - offset.bottom));\n\t        var radius = Math.sqrt(pageX * pageX + pageY * pageY);\n\t        var diameter = radius * 2 + 'px';\n\t        var x = offsetX - offset.left - radius;\n\t        var y = offsetY - offset.top - radius;\n\t        if (this.rippleOptions && this.rippleOptions.isCenterRipple) {\n\t            x = 0;\n\t            y = 0;\n\t            diameter = '100%';\n\t        }\n\t        element.classList.add('e-ripple');\n\t        var duration = this.rippleOptions.duration.toString();\n\t        var styles = 'width: ' + diameter + ';height: ' + diameter + ';left: ' + x + 'px;top: ' + y + 'px;' +\n\t            'transition-duration: ' + duration + 'ms;';\n\t        var rippleElement = dom_1.createElement('div', { className: 'e-ripple-element', styles: styles });\n\t        element.appendChild(rippleElement);\n\t        window.getComputedStyle(rippleElement).getPropertyValue('opacity');\n\t        rippleElement.style.transform = 'scale(1)';\n\t        if (element !== this.parent) {\n\t            event_handler_1.EventHandler.add(element, 'mouseleave', rippleLeaveHandler, { parent: this.parent, rippleOptions: this.rippleOptions });\n\t        }\n\t    }\n\t    function rippleUpHandler(e) {\n\t        removeRipple(e, this);\n\t    }\n\t    function rippleLeaveHandler(e) {\n\t        removeRipple(e, this);\n\t    }\n\t    function removeRipple(e, eventArgs) {\n\t        var duration = eventArgs.rippleOptions.duration;\n\t        var target = (e.target);\n\t        var selector = eventArgs.rippleOptions.selector;\n\t        var element = selector ? dom_1.closest(target, selector) : target;\n\t        if (!element || (element && element.className.indexOf('e-ripple') === -1)) {\n\t            return;\n\t        }\n\t        var rippleElements = dom_1.selectAll('.e-ripple-element', element);\n\t        var rippleElement = rippleElements[rippleElements.length - 1];\n\t        if (rippleElement) {\n\t            rippleElement.style.opacity = '0.5';\n\t        }\n\t        if (eventArgs.parent !== element) {\n\t            event_handler_1.EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);\n\t        }\n\t        setTimeout(function () {\n\t            if (rippleElement && rippleElement.parentNode) {\n\t                rippleElement.parentNode.removeChild(rippleElement);\n\t            }\n\t            if (!element.getElementsByClassName('e-ripple-element').length) {\n\t                element.classList.remove('e-ripple');\n\t            }\n\t            if (eventArgs.done) {\n\t                eventArgs.done(e);\n\t            }\n\t        }, duration);\n\t    }\n\t    exports.isRippleEnabled = false;\n\t    function enableRipple(isRipple) {\n\t        exports.isRippleEnabled = isRipple;\n\t        return exports.isRippleEnabled;\n\t    }\n\t    exports.enableRipple = enableRipple;\n\t    var Animation_1;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, event_handler_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function createElement(tagName, properties) {\n\t        var element = document.createElement(tagName);\n\t        if (typeof (properties) === 'undefined') {\n\t            return element;\n\t        }\n\t        element.innerHTML = (properties.innerHTML ? properties.innerHTML : '');\n\t        if (properties.className !== undefined) {\n\t            element.className = properties.className;\n\t        }\n\t        if (properties.id !== undefined) {\n\t            element.id = properties.id;\n\t        }\n\t        if (properties.styles !== undefined) {\n\t            element.setAttribute('style', properties.styles);\n\t        }\n\t        if (properties.attrs !== undefined) {\n\t            attributes(element, properties.attrs);\n\t        }\n\t        return element;\n\t    }\n\t    exports.createElement = createElement;\n\t    function addClass(elements, classes) {\n\t        var classList = getClassList(classes);\n\t        for (var _i = 0, _a = elements; _i < _a.length; _i++) {\n\t            var ele = _a[_i];\n\t            for (var _b = 0, classList_1 = classList; _b < classList_1.length; _b++) {\n\t                var className = classList_1[_b];\n\t                if (!ele.classList.contains(className)) {\n\t                    ele.classList.add(className);\n\t                }\n\t            }\n\t        }\n\t        return elements;\n\t    }\n\t    exports.addClass = addClass;\n\t    function removeClass(elements, classes) {\n\t        var classList = getClassList(classes);\n\t        for (var _i = 0, _a = elements; _i < _a.length; _i++) {\n\t            var ele = _a[_i];\n\t            if (ele.className !== '') {\n\t                for (var _b = 0, classList_2 = classList; _b < classList_2.length; _b++) {\n\t                    var className = classList_2[_b];\n\t                    ele.classList.remove(className);\n\t                }\n\t            }\n\t        }\n\t        return elements;\n\t    }\n\t    exports.removeClass = removeClass;\n\t    function getClassList(classes) {\n\t        var classList = [];\n\t        if (typeof classes === 'string') {\n\t            classList.push(classes);\n\t        }\n\t        else {\n\t            classList = classes;\n\t        }\n\t        return classList;\n\t    }\n\t    function isVisible(element) {\n\t        var ele = element;\n\t        return (ele.style.visibility === '' && ele.offsetWidth > 0);\n\t    }\n\t    exports.isVisible = isVisible;\n\t    function prepend(fromElements, toElement) {\n\t        var docFrag = document.createDocumentFragment();\n\t        for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {\n\t            var ele = _a[_i];\n\t            docFrag.appendChild(ele);\n\t        }\n\t        toElement.insertBefore(docFrag, toElement.firstElementChild);\n\t        return fromElements;\n\t    }\n\t    exports.prepend = prepend;\n\t    function append(fromElements, toElement) {\n\t        var docFrag = document.createDocumentFragment();\n\t        for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {\n\t            var ele = _a[_i];\n\t            docFrag.appendChild(ele);\n\t        }\n\t        toElement.appendChild(docFrag);\n\t        return fromElements;\n\t    }\n\t    exports.append = append;\n\t    function detach(element) {\n\t        var parentNode = element.parentNode;\n\t        return parentNode.removeChild(element);\n\t    }\n\t    exports.detach = detach;\n\t    function remove(element) {\n\t        var parentNode = element.parentNode;\n\t        event_handler_1.EventHandler.clearEvents(element);\n\t        parentNode.removeChild(element);\n\t    }\n\t    exports.remove = remove;\n\t    function attributes(element, attributes) {\n\t        var keys = Object.keys(attributes);\n\t        var ele = element;\n\t        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t            var key = keys_1[_i];\n\t            ele.setAttribute(key, attributes[key]);\n\t        }\n\t        return ele;\n\t    }\n\t    exports.attributes = attributes;\n\t    function select(selector, context) {\n\t        if (context === void 0) { context = document; }\n\t        return context.querySelector(selector);\n\t    }\n\t    exports.select = select;\n\t    function selectAll(selector, context) {\n\t        if (context === void 0) { context = document; }\n\t        var nodeList = context.querySelectorAll(selector);\n\t        return nodeList;\n\t    }\n\t    exports.selectAll = selectAll;\n\t    function closest(element, selector) {\n\t        var el = element;\n\t        if (typeof el.closest === 'function') {\n\t            return el.closest(selector);\n\t        }\n\t        while (el && el.nodeType === 1) {\n\t            if (matches(el, selector)) {\n\t                return el;\n\t            }\n\t            el = el.parentNode;\n\t        }\n\t        return null;\n\t    }\n\t    exports.closest = closest;\n\t    function siblings(element) {\n\t        var siblings = [];\n\t        var childNodes = Array.prototype.slice.call(element.parentNode.childNodes);\n\t        for (var _i = 0, childNodes_1 = childNodes; _i < childNodes_1.length; _i++) {\n\t            var curNode = childNodes_1[_i];\n\t            if (curNode.nodeType === Node.ELEMENT_NODE && element !== curNode) {\n\t                siblings.push(curNode);\n\t            }\n\t        }\n\t        return siblings;\n\t    }\n\t    exports.siblings = siblings;\n\t    function getAttributeOrDefault(element, property, value) {\n\t        var attrVal = element.getAttribute(property);\n\t        if (util_1.isNullOrUndefined(attrVal)) {\n\t            element.setAttribute(property, value.toString());\n\t            attrVal = value;\n\t        }\n\t        return attrVal;\n\t    }\n\t    exports.getAttributeOrDefault = getAttributeOrDefault;\n\t    function setStyleAttribute(element, attrs) {\n\t        if (attrs !== undefined) {\n\t            Object.keys(attrs).forEach(function (key) {\n\t                element.style[key] = attrs[key];\n\t            });\n\t        }\n\t    }\n\t    exports.setStyleAttribute = setStyleAttribute;\n\t    function classList(element, addClasses, removeClasses) {\n\t        addClass([element], addClasses);\n\t        removeClass([element], removeClasses);\n\t    }\n\t    exports.classList = classList;\n\t    function matches(element, selector) {\n\t        var matches = element.matches || element.msMatchesSelector || element.webkitMatchesSelector;\n\t        if (matches) {\n\t            return matches.call(element, selector);\n\t        }\n\t        else {\n\t            return [].indexOf.call(document.querySelectorAll(selector), element) !== -1;\n\t        }\n\t    }\n\t    exports.matches = matches;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, dom_1, observer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Base = (function () {\n\t        function Base(options, element) {\n\t            this.isProtectedOnChange = true;\n\t            this.properties = {};\n\t            this.changedProperties = {};\n\t            this.oldProperties = {};\n\t            this.refreshing = false;\n\t            this.finalUpdate = function () { };\n\t            this.childChangedProperties = {};\n\t            this.modelObserver = new observer_1.Observer(this);\n\t            if (!util_1.isUndefined(element)) {\n\t                if ('string' === typeof (element)) {\n\t                    this.element = document.querySelector(element);\n\t                }\n\t                else {\n\t                    this.element = element;\n\t                }\n\t                if (!util_1.isNullOrUndefined(this.element)) {\n\t                    this.isProtectedOnChange = false;\n\t                    this.addInstance();\n\t                }\n\t            }\n\t            if (!util_1.isUndefined(options)) {\n\t                this.setProperties(options, true);\n\t            }\n\t            this.isDestroyed = false;\n\t        }\n\t        Base.prototype.setProperties = function (prop, muteOnChange) {\n\t            var prevDetection = this.isProtectedOnChange;\n\t            this.isProtectedOnChange = !!muteOnChange;\n\t            util_1.merge(this, prop);\n\t            if (muteOnChange !== true) {\n\t                util_1.merge(this.changedProperties, prop);\n\t                this.dataBind();\n\t            }\n\t            this.finalUpdate();\n\t            this.changedProperties = {};\n\t            this.oldProperties = {};\n\t            this.isProtectedOnChange = prevDetection;\n\t        };\n\t        ;\n\t        Base.callChildDataBind = function (obj, parent) {\n\t            var keys = Object.keys(obj);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var key = keys_1[_i];\n\t                if (parent[key] instanceof Array) {\n\t                    for (var _a = 0, _b = parent[key]; _a < _b.length; _a++) {\n\t                        var obj_1 = _b[_a];\n\t                        if (obj_1.dataBind !== undefined) {\n\t                            obj_1.dataBind();\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    parent[key].dataBind();\n\t                }\n\t            }\n\t        };\n\t        Base.prototype.clearChanges = function () {\n\t            this.finalUpdate();\n\t            this.changedProperties = {};\n\t            this.oldProperties = {};\n\t            this.childChangedProperties = {};\n\t        };\n\t        Base.prototype.dataBind = function () {\n\t            Base.callChildDataBind(this.childChangedProperties, this);\n\t            if (Object.getOwnPropertyNames(this.changedProperties).length) {\n\t                var prevDetection = this.isProtectedOnChange;\n\t                var newChanges = this.changedProperties;\n\t                var oldChanges = this.oldProperties;\n\t                this.clearChanges();\n\t                this.isProtectedOnChange = true;\n\t                this.onPropertyChanged(newChanges, oldChanges);\n\t                this.isProtectedOnChange = prevDetection;\n\t            }\n\t        };\n\t        ;\n\t        Base.prototype.saveChanges = function (key, newValue, oldValue) {\n\t            if (this.isProtectedOnChange) {\n\t                return;\n\t            }\n\t            this.oldProperties[key] = oldValue;\n\t            this.changedProperties[key] = newValue;\n\t            this.finalUpdate();\n\t            this.finalUpdate = util_1.setImmediate(this.dataBind.bind(this));\n\t        };\n\t        ;\n\t        Base.prototype.addEventListener = function (eventName, handler) {\n\t            this.modelObserver.on(eventName, handler);\n\t        };\n\t        Base.prototype.removeEventListener = function (eventName, handler) {\n\t            this.modelObserver.off(eventName, handler);\n\t        };\n\t        Base.prototype.trigger = function (eventName, eventProp) {\n\t            if (this.isDestroyed !== true) {\n\t                var prevDetection = this.isProtectedOnChange;\n\t                this.isProtectedOnChange = false;\n\t                this.modelObserver.notify(eventName, eventProp);\n\t                this.isProtectedOnChange = prevDetection;\n\t            }\n\t        };\n\t        Base.prototype.addInstance = function () {\n\t            var moduleClass = 'e-' + this.getModuleName().toLowerCase();\n\t            dom_1.addClass([this.element], ['e-control', moduleClass]);\n\t            if (!util_1.isNullOrUndefined(this.element.ej2_instances)) {\n\t                this.element.ej2_instances.push(this);\n\t            }\n\t            else {\n\t                util_1.setValue('ej2_instances', [this], this.element);\n\t            }\n\t        };\n\t        Base.prototype.destroy = function () {\n\t            var _this = this;\n\t            this.element.ej2_instances =\n\t                this.element.ej2_instances.filter(function (i) { return i !== _this; });\n\t            dom_1.removeClass([this.element], ['e-' + this.getModuleName()]);\n\t            if (this.element.ej2_instances.length === 0) {\n\t                dom_1.removeClass([this.element], ['e-control']);\n\t            }\n\t            this.clearChanges();\n\t            this.modelObserver.destroy();\n\t            this.isDestroyed = true;\n\t        };\n\t        return Base;\n\t    }());\n\t    exports.Base = Base;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Observer = (function () {\n\t        function Observer(context) {\n\t            this.boundedEvents = {};\n\t            if (util_1.isNullOrUndefined(context)) {\n\t                return;\n\t            }\n\t            this.context = context;\n\t        }\n\t        ;\n\t        Observer.prototype.on = function (property, handler, context) {\n\t            if (util_1.isNullOrUndefined(handler)) {\n\t                return;\n\t            }\n\t            var cntxt = context || this.context;\n\t            if (this.notExist(property)) {\n\t                this.boundedEvents[property] = [{ handler: handler, context: cntxt }];\n\t                return;\n\t            }\n\t            if (!this.isHandlerPresent(this.boundedEvents[property], handler)) {\n\t                this.boundedEvents[property].push({ handler: handler, context: cntxt });\n\t            }\n\t        };\n\t        Observer.prototype.off = function (property, handler) {\n\t            if (this.notExist(property)) {\n\t                return;\n\t            }\n\t            var curObject = util_1.getValue(property, this.boundedEvents);\n\t            if (handler) {\n\t                for (var i = 0; i < curObject.length; i++) {\n\t                    if (handler === curObject[i].handler) {\n\t                        curObject.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                delete this.boundedEvents[property];\n\t            }\n\t        };\n\t        Observer.prototype.notify = function (property, argument) {\n\t            if (this.notExist(property)) {\n\t                return;\n\t            }\n\t            if (argument) {\n\t                argument.name = property;\n\t            }\n\t            var curObject = util_1.getValue(property, this.boundedEvents).slice(0);\n\t            for (var _i = 0, curObject_1 = curObject; _i < curObject_1.length; _i++) {\n\t                var cur = curObject_1[_i];\n\t                cur.handler.call(cur.context, argument);\n\t            }\n\t        };\n\t        Observer.prototype.destroy = function () {\n\t            this.boundedEvents = this.context = undefined;\n\t        };\n\t        Observer.prototype.notExist = function (prop) {\n\t            return this.boundedEvents.hasOwnProperty(prop) === false;\n\t        };\n\t        Observer.prototype.isHandlerPresent = function (boundedEvents, handler) {\n\t            for (var _i = 0, boundedEvents_1 = boundedEvents; _i < boundedEvents_1.length; _i++) {\n\t                var cur = boundedEvents_1[_i];\n\t                if (cur.handler === handler) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        return Observer;\n\t    }());\n\t    exports.Observer = Observer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var REGX_MOBILE = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i;\n\t    var REGX_IE = /msie|trident/i;\n\t    var REGX_IE11 = /Trident\\/7\\./;\n\t    var REGX_IOS = /(ipad|iphone|ipod touch)/i;\n\t    var REGX_IOS7 = /(ipad|iphone|ipod touch);.*os 7_\\d|(ipad|iphone|ipod touch);.*os 8_\\d/i;\n\t    var REGX_ANDROID = /android/i;\n\t    var REGX_WINDOWS = /trident|windows phone|edge/i;\n\t    var REGX_VERSION = /(version)[ \\/]([\\w.]+)/i;\n\t    var REGX_BROWSER = {\n\t        OPERA: /(opera|opr)(?:.*version|)[ \\/]([\\w.]+)/i,\n\t        EDGE: /(edge)(?:.*version|)[ \\/]([\\w.]+)/i,\n\t        CHROME: /(chrome|crios)[ \\/]([\\w.]+)/i,\n\t        PANTHOMEJS: /(phantomjs)[ \\/]([\\w.]+)/i,\n\t        SAFARI: /(safari)[ \\/]([\\w.]+)/i,\n\t        WEBKIT: /(webkit)[ \\/]([\\w.]+)/i,\n\t        MSIE: /(msie|trident) ([\\w.]+)/i,\n\t        MOZILLA: /(mozilla)(?:.*? rv:([\\w.]+)|)/i\n\t    };\n\t    window.browserDetails = window.browserDetails || {};\n\t    var Browser = (function () {\n\t        function Browser() {\n\t        }\n\t        Browser.extractBrowserDetail = function () {\n\t            var browserInfo = { culture: {} };\n\t            var keys = Object.keys(REGX_BROWSER);\n\t            var clientInfo = [];\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var key = keys_1[_i];\n\t                clientInfo = Browser.userAgent.match(REGX_BROWSER[key]);\n\t                if (clientInfo) {\n\t                    browserInfo.name = (clientInfo[1].toLowerCase() === 'opr' ? 'opera' : clientInfo[1].toLowerCase());\n\t                    browserInfo.name = (clientInfo[1].toLowerCase() === 'crios' ? 'chrome' : browserInfo.name);\n\t                    browserInfo.version = clientInfo[2];\n\t                    browserInfo.culture.name = browserInfo.culture.language = navigator.language;\n\t                    if (!!Browser.userAgent.match(REGX_IE11)) {\n\t                        browserInfo.name = 'msie';\n\t                        break;\n\t                    }\n\t                    var version = Browser.userAgent.match(REGX_VERSION);\n\t                    if (browserInfo.name === 'safari' && version) {\n\t                        browserInfo.version = version[2];\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            return browserInfo;\n\t        };\n\t        Browser.getEvent = function (event) {\n\t            var events = {\n\t                start: {\n\t                    isPointer: 'pointerdown', isTouch: 'touchstart', isDevice: 'mousedown'\n\t                },\n\t                move: {\n\t                    isPointer: 'pointermove', isTouch: 'touchmove', isDevice: 'mousemove'\n\t                },\n\t                end: {\n\t                    isPointer: 'pointerup', isTouch: 'touchend', isDevice: 'mouseup'\n\t                }\n\t            };\n\t            return (Browser.isPointer ? events[event].isPointer :\n\t                (Browser.isTouch ? events[event].isTouch + (!Browser.isDevice ? ' ' + events[event].isDevice : '')\n\t                    : events[event].isDevice));\n\t        };\n\t        Browser.getTouchStartEvent = function () {\n\t            return Browser.getEvent('start');\n\t        };\n\t        Browser.getTouchEndEvent = function () {\n\t            return Browser.getEvent('end');\n\t        };\n\t        Browser.getTouchMoveEvent = function () {\n\t            return Browser.getEvent('move');\n\t        };\n\t        Browser.getValue = function (key, regX) {\n\t            var browserDetails = window.browserDetails;\n\t            if ('undefined' === typeof browserDetails[key]) {\n\t                return browserDetails[key] = regX.test(Browser.userAgent);\n\t            }\n\t            return browserDetails[key];\n\t        };\n\t        Object.defineProperty(Browser, \"userAgent\", {\n\t            get: function () {\n\t                return Browser.uA;\n\t            },\n\t            set: function (uA) {\n\t                Browser.uA = uA;\n\t                window.browserDetails = {};\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"info\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.info)) {\n\t                    return window.browserDetails.info = Browser.extractBrowserDetail();\n\t                }\n\t                return window.browserDetails.info;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isIE\", {\n\t            get: function () {\n\t                return Browser.getValue('isIE', REGX_IE);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isTouch\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.isTouch)) {\n\t                    return window.browserDetails.isTouch = ('ontouchstart' in window);\n\t                }\n\t                return window.browserDetails.isTouch;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isPointer\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.isPointer)) {\n\t                    return window.browserDetails.isPointer = ('pointerEnabled' in window.navigator);\n\t                }\n\t                return window.browserDetails.isPointer;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isMSPointer\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.isMSPointer)) {\n\t                    return window.browserDetails.isMSPointer = ('msPointerEnabled' in window.navigator);\n\t                }\n\t                return window.browserDetails.isMSPointer;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isDevice\", {\n\t            get: function () {\n\t                return Browser.getValue('isDevice', REGX_MOBILE);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isIos\", {\n\t            get: function () {\n\t                return Browser.getValue('isIos', REGX_IOS);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isIos7\", {\n\t            get: function () {\n\t                return Browser.getValue('isIos7', REGX_IOS7);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isAndroid\", {\n\t            get: function () {\n\t                return Browser.getValue('isAndroid', REGX_ANDROID);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isWebView\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.isWebView)) {\n\t                    window.browserDetails.isWebView = !(util_1.isUndefined(window.cordova) && util_1.isUndefined(window.PhoneGap)\n\t                        && util_1.isUndefined(window.phonegap) && window.forge !== 'object');\n\t                    return window.browserDetails.isWebView;\n\t                }\n\t                return window.browserDetails.isWebView;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"isWindows\", {\n\t            get: function () {\n\t                return Browser.getValue('isWindows', REGX_WINDOWS);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"touchStartEvent\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.touchStartEvent)) {\n\t                    return window.browserDetails.touchStartEvent = Browser.getTouchStartEvent();\n\t                }\n\t                return window.browserDetails.touchStartEvent;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"touchMoveEvent\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.touchMoveEvent)) {\n\t                    return window.browserDetails.touchMoveEvent = Browser.getTouchMoveEvent();\n\t                }\n\t                return window.browserDetails.touchMoveEvent;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Browser, \"touchEndEvent\", {\n\t            get: function () {\n\t                if (util_1.isUndefined(window.browserDetails.touchEndEvent)) {\n\t                    return window.browserDetails.touchEndEvent = Browser.getTouchEndEvent();\n\t                }\n\t                return window.browserDetails.touchEndEvent;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        return Browser;\n\t    }());\n\t    Browser.uA = navigator.userAgent;\n\t    exports.Browser = Browser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function getObject(instance, curKey, defaultValue, type) {\n\t        if (!instance.properties.hasOwnProperty(curKey)) {\n\t            instance.properties[curKey] = util_1.createInstance(type, [instance, curKey, defaultValue]);\n\t        }\n\t        return instance.properties[curKey];\n\t    }\n\t    function getObjectArray(instance, curKey, defaultValue, type, isSetter, isFactory) {\n\t        var result = [];\n\t        var len = defaultValue.length;\n\t        for (var i = 0; i < len; i++) {\n\t            var curType = type;\n\t            if (isFactory) {\n\t                curType = type(defaultValue[i]);\n\t            }\n\t            if (isSetter) {\n\t                var inst = util_1.createInstance(curType, [instance, curKey, {}, true]);\n\t                inst.setProperties(defaultValue[i], true);\n\t                result.push(inst);\n\t            }\n\t            else {\n\t                result.push(util_1.createInstance(curType, [instance, curKey, defaultValue[i], true]));\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    function propertyGetter(defaultValue, curKey) {\n\t        return function () {\n\t            if (!this.properties.hasOwnProperty(curKey)) {\n\t                this.properties[curKey] = defaultValue;\n\t            }\n\t            return this.properties[curKey];\n\t        };\n\t    }\n\t    function propertySetter(defaultValue, curKey) {\n\t        return function (newValue) {\n\t            if (this.properties[curKey] !== newValue) {\n\t                var oldVal = this.properties.hasOwnProperty(curKey) ? this.properties[curKey] : defaultValue;\n\t                this.saveChanges(curKey, newValue, oldVal);\n\t                this.properties[curKey] = newValue;\n\t            }\n\t        };\n\t    }\n\t    function complexGetter(defaultValue, curKey, type) {\n\t        return function () {\n\t            return getObject(this, curKey, defaultValue, type);\n\t        };\n\t    }\n\t    function complexSetter(defaultValue, curKey, type) {\n\t        return function (newValue) {\n\t            getObject(this, curKey, defaultValue, type).setProperties(newValue);\n\t        };\n\t    }\n\t    function complexFactoryGetter(defaultValue, curKey, type) {\n\t        return function () {\n\t            var curType = type({});\n\t            return getObject(this, curKey, defaultValue, curType);\n\t        };\n\t    }\n\t    function complexFactorySetter(defaultValue, curKey, type) {\n\t        return function (newValue) {\n\t            var curType = type(newValue);\n\t            getObject(this, curKey, defaultValue, curType).setProperties(newValue);\n\t        };\n\t    }\n\t    function complexArrayGetter(defaultValue, curKey, type) {\n\t        return function () {\n\t            if (!this.properties.hasOwnProperty(curKey)) {\n\t                var defCollection = getObjectArray(this, curKey, defaultValue, type, false);\n\t                this.properties[curKey] = defCollection;\n\t            }\n\t            return this.properties[curKey];\n\t        };\n\t    }\n\t    function complexArraySetter(defaultValue, curKey, type) {\n\t        return function (newValue) {\n\t            var oldValueCollection = getObjectArray(this, curKey, defaultValue, type, false);\n\t            var newValCollection = getObjectArray(this, curKey, newValue, type, true);\n\t            this.saveChanges(curKey, newValCollection, oldValueCollection);\n\t            this.properties[curKey] = newValCollection;\n\t        };\n\t    }\n\t    function complexArrayFactorySetter(defaultValue, curKey, type) {\n\t        return function (newValue) {\n\t            var oldValueCollection = getObjectArray(this, curKey, defaultValue, type, false, true);\n\t            var newValCollection = getObjectArray(this, curKey, newValue, type, true, true);\n\t            this.saveChanges(curKey, newValCollection, oldValueCollection);\n\t            this.properties[curKey] = newValCollection;\n\t        };\n\t    }\n\t    function complexArrayFactoryGetter(defaultValue, curKey, type) {\n\t        return function () {\n\t            var curType = type({});\n\t            if (!this.properties.hasOwnProperty(curKey)) {\n\t                var defCollection = getObjectArray(this, curKey, defaultValue, curType, false);\n\t                this.properties[curKey] = defCollection;\n\t            }\n\t            return this.properties[curKey];\n\t        };\n\t    }\n\t    function Property(defaultValue) {\n\t        return function (target, key) {\n\t            var propertyDescriptor = {\n\t                set: propertySetter(defaultValue, key),\n\t                get: propertyGetter(defaultValue, key),\n\t                enumerable: true,\n\t                configurable: true\n\t            };\n\t            Object.defineProperty(target, key, propertyDescriptor);\n\t            addPropertyCollection(target, key, 'prop', defaultValue);\n\t        };\n\t    }\n\t    exports.Property = Property;\n\t    function Complex(defaultValue, type) {\n\t        return function (target, key) {\n\t            var propertyDescriptor = {\n\t                set: complexSetter(defaultValue, key, type),\n\t                get: complexGetter(defaultValue, key, type),\n\t                enumerable: true,\n\t                configurable: true\n\t            };\n\t            Object.defineProperty(target, key, propertyDescriptor);\n\t            addPropertyCollection(target, key, 'complexProp', defaultValue, type);\n\t        };\n\t    }\n\t    exports.Complex = Complex;\n\t    function ComplexFactory(type) {\n\t        return function (target, key) {\n\t            var propertyDescriptor = {\n\t                set: complexFactorySetter({}, key, type),\n\t                get: complexFactoryGetter({}, key, type),\n\t                enumerable: true,\n\t                configurable: true\n\t            };\n\t            Object.defineProperty(target, key, propertyDescriptor);\n\t            addPropertyCollection(target, key, 'complexProp', {}, type);\n\t        };\n\t    }\n\t    exports.ComplexFactory = ComplexFactory;\n\t    function Collection(defaultValue, type) {\n\t        return function (target, key) {\n\t            var propertyDescriptor = {\n\t                set: complexArraySetter(defaultValue, key, type),\n\t                get: complexArrayGetter(defaultValue, key, type),\n\t                enumerable: true,\n\t                configurable: true\n\t            };\n\t            Object.defineProperty(target, key, propertyDescriptor);\n\t            addPropertyCollection(target, key, 'colProp', defaultValue, type);\n\t        };\n\t    }\n\t    exports.Collection = Collection;\n\t    function CollectionFactory(type) {\n\t        return function (target, key) {\n\t            var propertyDescriptor = {\n\t                set: complexArrayFactorySetter([], key, type),\n\t                get: complexArrayFactoryGetter([], key, type),\n\t                enumerable: true,\n\t                configurable: true\n\t            };\n\t            Object.defineProperty(target, key, propertyDescriptor);\n\t            addPropertyCollection(target, key, 'colProp', {}, type);\n\t        };\n\t    }\n\t    exports.CollectionFactory = CollectionFactory;\n\t    function Event() {\n\t        return function (target, key) {\n\t            var eventDescriptor = {\n\t                set: function (newValue) {\n\t                    var oldValue = this.properties[key];\n\t                    if (oldValue !== newValue) {\n\t                        var finalContext = getParentContext(this, key);\n\t                        if (util_1.isUndefined(oldValue) === false) {\n\t                            finalContext.context.removeEventListener(finalContext.prefix, oldValue);\n\t                        }\n\t                        finalContext.context.addEventListener(finalContext.prefix, newValue);\n\t                        this.properties[key] = newValue;\n\t                    }\n\t                },\n\t                get: propertyGetter(undefined, key),\n\t                enumerable: true,\n\t                configurable: true\n\t            };\n\t            Object.defineProperty(target, key, eventDescriptor);\n\t            addPropertyCollection(target, key, 'event');\n\t        };\n\t    }\n\t    exports.Event = Event;\n\t    function NotifyPropertyChanges(classConstructor) {\n\t    }\n\t    exports.NotifyPropertyChanges = NotifyPropertyChanges;\n\t    function addPropertyCollection(target, key, propertyType, defaultValue, type) {\n\t        if (util_1.isUndefined(target.propList)) {\n\t            target.propList = {\n\t                props: [],\n\t                complexProps: [],\n\t                colProps: [],\n\t                events: [],\n\t                propNames: [],\n\t                complexPropNames: [],\n\t                colPropNames: [],\n\t                eventNames: []\n\t            };\n\t        }\n\t        target.propList[propertyType + 's'].push({\n\t            propertyName: key,\n\t            defaultValue: defaultValue,\n\t            type: type\n\t        });\n\t        target.propList[propertyType + 'Names'].push(key);\n\t    }\n\t    function getBuilderProperties(component) {\n\t        if (util_1.isUndefined(component.prototype.builderObject)) {\n\t            component.prototype.builderObject = {\n\t                properties: {}, propCollections: [], add: function () {\n\t                    this.isPropertyArray = true;\n\t                    this.propCollections.push(util_1.extend({}, this.properties, {}));\n\t                }\n\t            };\n\t            var rex = /complex/;\n\t            for (var _i = 0, _a = Object.keys(component.prototype.propList); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var _loop_1 = function (prop) {\n\t                    if (rex.test(key)) {\n\t                        component.prototype.builderObject[prop.propertyName] = function (value) {\n\t                            var childType = {};\n\t                            util_1.merge(childType, getBuilderProperties(prop.type));\n\t                            value(childType);\n\t                            var tempValue;\n\t                            if (!childType.isPropertyArray) {\n\t                                tempValue = util_1.extend({}, childType.properties, {});\n\t                            }\n\t                            else {\n\t                                tempValue = childType.propCollections;\n\t                            }\n\t                            this.properties[prop.propertyName] = tempValue;\n\t                            childType.properties = {};\n\t                            childType.propCollections = [];\n\t                            childType.isPropertyArray = false;\n\t                            return this;\n\t                        };\n\t                    }\n\t                    else {\n\t                        component.prototype.builderObject[prop.propertyName] = function (value) {\n\t                            this.properties[prop.propertyName] = value;\n\t                            return this;\n\t                        };\n\t                    }\n\t                };\n\t                for (var _b = 0, _c = component.prototype.propList[key]; _b < _c.length; _b++) {\n\t                    var prop = _c[_b];\n\t                    _loop_1(prop);\n\t                }\n\t            }\n\t        }\n\t        return component.prototype.builderObject;\n\t    }\n\t    function CreateBuilder(component) {\n\t        var builderFunction = function (element) {\n\t            this.element = element;\n\t            return this;\n\t        };\n\t        var instanceFunction = function (element) {\n\t            if (!builderFunction.prototype.hasOwnProperty('create')) {\n\t                builderFunction.prototype = getBuilderProperties(component);\n\t                builderFunction.prototype.create = function () {\n\t                    var temp = util_1.extend({}, {}, this.properties);\n\t                    this.properties = {};\n\t                    return new component(temp, this.element);\n\t                };\n\t            }\n\t            return new builderFunction(element);\n\t        };\n\t        return instanceFunction;\n\t    }\n\t    exports.CreateBuilder = CreateBuilder;\n\t    function getParentContext(context, prefix) {\n\t        if (context.hasOwnProperty('parentObj') === false) {\n\t            return { context: context, prefix: prefix };\n\t        }\n\t        else {\n\t            var curText = util_1.getValue('propName', context);\n\t            if (curText) {\n\t                prefix = curText + '-' + prefix;\n\t            }\n\t            return getParentContext(util_1.getValue('parentObj', context), prefix);\n\t        }\n\t    }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CanvasRenderer = (function () {\n\t        function CanvasRenderer(rootID) {\n\t            this.rootId = rootID;\n\t        }\n\t        CanvasRenderer.prototype.getOptionValue = function (options, key) {\n\t            return options[key];\n\t        };\n\t        CanvasRenderer.prototype.createCanvas = function (options) {\n\t            var canvasObj = document.createElement('canvas');\n\t            canvasObj.setAttribute('id', this.rootId + '_canvas');\n\t            this.ctx = canvasObj.getContext('2d');\n\t            this.canvasObj = canvasObj;\n\t            this.setCanvasSize(options.width, options.height);\n\t            return this.canvasObj;\n\t        };\n\t        CanvasRenderer.prototype.setCanvasSize = function (width, height) {\n\t            var element = document.getElementById(this.rootId);\n\t            var size = !util_1.isNullOrUndefined(element) ? element.getBoundingClientRect() : null;\n\t            if (util_1.isNullOrUndefined(this.width)) {\n\t                this.canvasObj.setAttribute('width', width ? width.toString() : size.width.toString());\n\t            }\n\t            else {\n\t                this.canvasObj.setAttribute('width', this.width.toString());\n\t            }\n\t            if (util_1.isNullOrUndefined(this.height)) {\n\t                this.canvasObj.setAttribute('height', height ? height.toString() : '450');\n\t            }\n\t            else {\n\t                this.canvasObj.setAttribute('height', this.height.toString());\n\t            }\n\t        };\n\t        CanvasRenderer.prototype.setAttributes = function (options) {\n\t            this.ctx.lineWidth = this.getOptionValue(options, 'stroke-width');\n\t            var dashArray = this.getOptionValue(options, 'stroke-dasharray');\n\t            if (!util_1.isNullOrUndefined(dashArray)) {\n\t                var dashArrayString = dashArray.split(',');\n\t                this.ctx.setLineDash([parseInt(dashArrayString[0], 10), parseInt(dashArrayString[1], 10)]);\n\t            }\n\t            this.ctx.strokeStyle = this.getOptionValue(options, 'stroke');\n\t        };\n\t        CanvasRenderer.prototype.drawLine = function (options) {\n\t            this.ctx.save();\n\t            this.ctx.beginPath();\n\t            this.ctx.lineWidth = this.getOptionValue(options, 'stroke-width');\n\t            this.ctx.strokeStyle = options.stroke;\n\t            this.ctx.moveTo(options.x1, options.y1);\n\t            this.ctx.lineTo(options.x2, options.y2);\n\t            this.ctx.stroke();\n\t            this.ctx.restore();\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawRectangle = function (options) {\n\t            var canvasCtx = this.ctx;\n\t            var cornerRadius = options.rx;\n\t            this.ctx.save();\n\t            this.ctx.beginPath();\n\t            this.ctx.globalAlpha = this.getOptionValue(options, 'opacity');\n\t            this.setAttributes(options);\n\t            this.ctx.rect(options.x, options.y, options.width, options.height);\n\t            if (cornerRadius !== null && cornerRadius >= 0) {\n\t                this.drawCornerRadius(options);\n\t            }\n\t            else {\n\t                if (options.fill === 'none') {\n\t                    options.fill = 'transparent';\n\t                }\n\t                this.ctx.fillStyle = options.fill;\n\t                this.ctx.fillRect(options.x, options.y, options.width, options.height);\n\t                this.ctx.stroke();\n\t            }\n\t            this.ctx.restore();\n\t            this.ctx = canvasCtx;\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawCornerRadius = function (options) {\n\t            var cornerRadius = options.rx;\n\t            var x = options.x;\n\t            var y = options.y;\n\t            var width = options.width;\n\t            var height = options.height;\n\t            if (options.fill === 'none') {\n\t                options.fill = 'transparent';\n\t            }\n\t            this.ctx.fillStyle = options.fill;\n\t            if (width < 2 * cornerRadius) {\n\t                cornerRadius = width / 2;\n\t            }\n\t            if (height < 2 * cornerRadius) {\n\t                cornerRadius = height / 2;\n\t            }\n\t            this.ctx.beginPath();\n\t            this.ctx.moveTo(x + width - cornerRadius, y);\n\t            this.ctx.arcTo(x + width, y, x + width, y + height, cornerRadius);\n\t            this.ctx.arcTo(x + width, y + height, x, y + height, cornerRadius);\n\t            this.ctx.arcTo(x, y + height, x, y, cornerRadius);\n\t            this.ctx.arcTo(x, y, x + width, y, cornerRadius);\n\t            this.ctx.closePath();\n\t            this.ctx.fill();\n\t            this.ctx.stroke();\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawPath = function (options, canvasTranslate) {\n\t            var path = options.d;\n\t            var dataSplit = path.split(' ');\n\t            var borderWidth = this.getOptionValue(options, 'stroke-width');\n\t            var canvasCtx = this.ctx;\n\t            var flag = true;\n\t            this.ctx.save();\n\t            this.ctx.beginPath();\n\t            if (canvasTranslate) {\n\t                this.ctx.translate(canvasTranslate[0], canvasTranslate[1]);\n\t            }\n\t            this.ctx.globalAlpha = options.opacity ? options.opacity : this.getOptionValue(options, 'fill-opacity');\n\t            this.setAttributes(options);\n\t            for (var i = 0; i < dataSplit.length; i = i + 3) {\n\t                var x1 = parseFloat(dataSplit[i + 1]);\n\t                var y1 = parseFloat(dataSplit[i + 2]);\n\t                switch (dataSplit[i]) {\n\t                    case 'M':\n\t                        if (!options.innerR && !options.cx) {\n\t                            this.ctx.moveTo(x1, y1);\n\t                        }\n\t                        break;\n\t                    case 'L':\n\t                        if (!options.innerR) {\n\t                            this.ctx.lineTo(x1, y1);\n\t                        }\n\t                        break;\n\t                    case 'C':\n\t                        var c1 = parseFloat(dataSplit[i + 3]);\n\t                        var c2 = parseFloat(dataSplit[i + 4]);\n\t                        var c3 = parseFloat(dataSplit[i + 5]);\n\t                        var c4 = parseFloat(dataSplit[i + 6]);\n\t                        this.ctx.bezierCurveTo(x1, y1, c1, c2, c3, c4);\n\t                        i = i + 4;\n\t                        break;\n\t                    case 'A':\n\t                        if (!options.innerR) {\n\t                            if (options.cx) {\n\t                                this.ctx.arc(options.cx, options.cy, options.radius, 0, 2 * Math.PI, options.counterClockWise);\n\t                            }\n\t                            else {\n\t                                this.ctx.moveTo(options.x, options.y);\n\t                                this.ctx.arc(options.x, options.y, options.radius, options.start, options.end, options.counterClockWise);\n\t                                this.ctx.lineTo(options.x, options.y);\n\t                            }\n\t                        }\n\t                        else if (flag) {\n\t                            this.ctx.arc(options.x, options.y, options.radius, options.start, options.end, options.counterClockWise);\n\t                            this.ctx.arc(options.x, options.y, options.innerR, options.end, options.start, !options.counterClockWise);\n\t                            flag = false;\n\t                        }\n\t                        i = i + 5;\n\t                        break;\n\t                    case 'z':\n\t                        this.ctx.closePath();\n\t                        break;\n\t                }\n\t            }\n\t            if (options.fill !== 'none' && options.fill !== undefined) {\n\t                this.ctx.fillStyle = options.fill;\n\t                this.ctx.fill();\n\t            }\n\t            if (borderWidth > 0) {\n\t                this.ctx.stroke();\n\t            }\n\t            this.ctx.restore();\n\t            this.ctx = canvasCtx;\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawText = function (options, label) {\n\t            var fontWeight = this.getOptionValue(options, 'font-weight');\n\t            if (!util_1.isNullOrUndefined(fontWeight) && fontWeight.toLowerCase() === 'regular') {\n\t                fontWeight = 'normal';\n\t            }\n\t            var fontSize = this.getOptionValue(options, 'font-size');\n\t            var fontFamily = this.getOptionValue(options, 'font-family');\n\t            var fontStyle = this.getOptionValue(options, 'font-style').toLowerCase();\n\t            var font = (fontStyle + ' ' + fontWeight + ' ' + fontSize + ' ' + fontFamily);\n\t            var anchor = this.getOptionValue(options, 'text-anchor');\n\t            var opacity = options.opacity !== undefined ? options.opacity : 1;\n\t            if (anchor === 'middle') {\n\t                anchor = 'center';\n\t            }\n\t            this.ctx.save();\n\t            this.ctx.fillStyle = options.fill;\n\t            this.ctx.font = font;\n\t            this.ctx.textAlign = anchor;\n\t            this.ctx.globalAlpha = opacity;\n\t            if (options.baseline) {\n\t                this.ctx.textBaseline = options.baseline;\n\t            }\n\t            var txtlngth = 0;\n\t            this.ctx.translate(options.x + (txtlngth / 2), options.y);\n\t            this.ctx.rotate(options.labelRotation * Math.PI / 180);\n\t            this.ctx.fillText(label, 0, 0);\n\t            this.ctx.restore();\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawCircle = function (options) {\n\t            var canvasCtx = this.ctx;\n\t            this.ctx.save();\n\t            this.ctx.beginPath();\n\t            this.ctx.arc(options.cx, options.cy, options.r, 0, 2 * Math.PI);\n\t            this.ctx.fillStyle = options.fill;\n\t            this.ctx.globalAlpha = options.opacity;\n\t            this.ctx.fill();\n\t            this.setAttributes(options);\n\t            this.ctx.stroke();\n\t            this.ctx.restore();\n\t            this.ctx = canvasCtx;\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawPolyline = function (options) {\n\t            this.ctx.save();\n\t            this.ctx.beginPath();\n\t            var points = options.points.split(' ');\n\t            for (var i = 0; i < points.length - 1; i++) {\n\t                var point = points[i].split(',');\n\t                var x = parseFloat(point[0]);\n\t                var y = parseFloat(point[1]);\n\t                if (i === 0) {\n\t                    this.ctx.moveTo(x, y);\n\t                }\n\t                else {\n\t                    this.ctx.lineTo(x, y);\n\t                }\n\t            }\n\t            this.ctx.lineWidth = this.getOptionValue(options, 'stroke-width');\n\t            this.ctx.strokeStyle = options.stroke;\n\t            this.ctx.stroke();\n\t            this.ctx.restore();\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawEllipse = function (options) {\n\t            var canvasCtx = this.ctx;\n\t            var circumference = Math.max(options.rx, options.ry);\n\t            var scaleX = options.rx / circumference;\n\t            var scaleY = options.ry / circumference;\n\t            this.ctx.save();\n\t            this.ctx.beginPath();\n\t            this.ctx.translate(options.cx, options.cy);\n\t            this.ctx.save();\n\t            this.ctx.scale(scaleX, scaleY);\n\t            this.ctx.arc(0, 0, circumference, 0, 2 * Math.PI, false);\n\t            this.ctx.fillStyle = options.fill;\n\t            this.ctx.fill();\n\t            this.ctx.restore();\n\t            this.ctx.lineWidth = this.getOptionValue(options, 'stroke-width');\n\t            this.ctx.strokeStyle = options.stroke;\n\t            this.ctx.stroke();\n\t            this.ctx.restore();\n\t            this.ctx = canvasCtx;\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.drawImage = function (options) {\n\t            this.ctx.save();\n\t            var imageObj = new Image();\n\t            if (!util_1.isNullOrUndefined(options.href)) {\n\t                imageObj.src = options.href;\n\t                this.ctx.drawImage(imageObj, options.x, options.y, options.width, options.height);\n\t            }\n\t            this.ctx.restore();\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t        };\n\t        CanvasRenderer.prototype.createLinearGradient = function (colors) {\n\t            var myGradient;\n\t            if (!util_1.isNullOrUndefined(colors[0].colorStop)) {\n\t                myGradient = this.ctx.createLinearGradient(0, 0, 0, this.canvasObj.height);\n\t            }\n\t            var color = this.setGradientValues(colors, myGradient);\n\t            return color;\n\t        };\n\t        CanvasRenderer.prototype.createRadialGradient = function (colors) {\n\t            var myGradient;\n\t            if (!util_1.isNullOrUndefined(colors[0].colorStop)) {\n\t                myGradient = this.ctx.createRadialGradient(0, 0, 0, 0, 0, this.canvasObj.height);\n\t            }\n\t            var colorName = this.setGradientValues(colors, myGradient);\n\t            return colorName;\n\t        };\n\t        CanvasRenderer.prototype.setGradientValues = function (colors, myGradient) {\n\t            var colorName;\n\t            if (!util_1.isNullOrUndefined(colors[0].colorStop)) {\n\t                for (var i = 0; i <= colors.length - 1; i++) {\n\t                    var color = colors[i].color;\n\t                    var newColorStop = (colors[i].colorStop).slice(0, -1);\n\t                    var stopColor = parseInt(newColorStop, 10) / 100;\n\t                    myGradient.addColorStop(stopColor, color);\n\t                }\n\t                colorName = myGradient.toString();\n\t            }\n\t            else {\n\t                colorName = colors[0].color.toString();\n\t            }\n\t            this.dataUrl = this.canvasObj.toDataURL();\n\t            return colorName;\n\t        };\n\t        CanvasRenderer.prototype.setElementAttributes = function (options, element) {\n\t            var keys = Object.keys(options);\n\t            var values = Object.keys(options).map(function (key) { return options[key]; });\n\t            for (var i = 0; i < keys.length; i++) {\n\t                element.setAttribute(keys[i], values[i]);\n\t            }\n\t            return element;\n\t        };\n\t        CanvasRenderer.prototype.updateCanvasAttributes = function (options) {\n\t            this.setElementAttributes(options, this.canvasObj);\n\t            var ctx = this.ctx;\n\t            if (!util_1.isNullOrUndefined(this.dataUrl)) {\n\t                var img_1 = new Image;\n\t                img_1.onload = function () {\n\t                    ctx.drawImage(img_1, 0, 0);\n\t                };\n\t                img_1.src = this.dataUrl;\n\t            }\n\t        };\n\t        return CanvasRenderer;\n\t    }());\n\t    exports.CanvasRenderer = CanvasRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(12), __webpack_require__(6), __webpack_require__(7), __webpack_require__(13), __webpack_require__(9), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, module_loader_1, base_1, observer_1, child_property_1, notify_property_change_1, internationalization_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Component = (function (_super) {\n\t        __extends(Component, _super);\n\t        function Component(options, selector) {\n\t            var _this = _super.call(this, options, selector) || this;\n\t            _this.needsID = false;\n\t            if (util_1.isNullOrUndefined(_this.enableRtl)) {\n\t                _this.setProperties({ 'enableRtl': internationalization_1.rightToLeft }, true);\n\t            }\n\t            if (util_1.isNullOrUndefined(_this.locale)) {\n\t                _this.setProperties({ 'locale': internationalization_1.defaultCulture }, true);\n\t            }\n\t            _this.moduleLoader = new module_loader_1.ModuleLoader(_this);\n\t            _this.localObserver = new observer_1.Observer(_this);\n\t            _this.detectFunction = new Function('args', 'var prop = Object.keys(args); if(prop.length){this[prop[0]] = args[prop[0]];}');\n\t            internationalization_1.onIntlChange.on('notifyExternalChange', _this.detectFunction, _this);\n\t            if (_this.enablePersistence) {\n\t                window.addEventListener('unload', _this.setPersistData.bind(_this));\n\t            }\n\t            if (!util_1.isUndefined(selector)) {\n\t                _this.appendTo();\n\t            }\n\t            return _this;\n\t        }\n\t        Component.prototype.requiredModules = function () {\n\t            return [];\n\t        };\n\t        ;\n\t        Component.prototype.destroy = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.localObserver.destroy();\n\t            if (this.refreshing) {\n\t                return;\n\t            }\n\t            this.trigger('destroyed', { cancel: false });\n\t            _super.prototype.destroy.call(this);\n\t            this.moduleLoader.clean();\n\t            internationalization_1.onIntlChange.off('notifyExternalChange', this.detectFunction);\n\t            if (this.enablePersistence) {\n\t                this.setPersistData();\n\t            }\n\t        };\n\t        Component.prototype.refresh = function () {\n\t            this.refreshing = true;\n\t            this.moduleLoader.clean();\n\t            this.destroy();\n\t            this.clearChanges();\n\t            this.localObserver = new observer_1.Observer(this);\n\t            this.preRender();\n\t            this.injectModules();\n\t            this.render();\n\t            this.refreshing = false;\n\t        };\n\t        Component.prototype.appendTo = function (selector) {\n\t            if (!util_1.isNullOrUndefined(selector) && typeof (selector) === 'string') {\n\t                this.element = document.querySelector(selector);\n\t            }\n\t            else if (!util_1.isNullOrUndefined(selector)) {\n\t                this.element = selector;\n\t            }\n\t            if (!util_1.isNullOrUndefined(this.element)) {\n\t                if (this.needsID && !this.element.id) {\n\t                    this.element.id = util_1.getUniqueID(this.getModuleName());\n\t                }\n\t                this.isProtectedOnChange = false;\n\t                var inst = util_1.getValue('ej2_instances', this.element);\n\t                if (!inst || inst.indexOf(this) === -1) {\n\t                    _super.prototype.addInstance.call(this);\n\t                }\n\t                this.preRender();\n\t                if (this.enablePersistence) {\n\t                    this.mergePersistData();\n\t                }\n\t                this.injectModules();\n\t                this.render();\n\t                this.trigger('created');\n\t            }\n\t        };\n\t        Component.prototype.dataBind = function () {\n\t            this.injectModules();\n\t            _super.prototype.dataBind.call(this);\n\t        };\n\t        ;\n\t        Component.prototype.on = function (event, handler, context) {\n\t            if (typeof event === 'string') {\n\t                this.localObserver.on(event, handler, context);\n\t            }\n\t            else {\n\t                for (var _i = 0, event_1 = event; _i < event_1.length; _i++) {\n\t                    var arg = event_1[_i];\n\t                    this.localObserver.on(arg.event, arg.handler, arg.context);\n\t                }\n\t            }\n\t        };\n\t        Component.prototype.off = function (event, handler) {\n\t            if (typeof event === 'string') {\n\t                this.localObserver.off(event, handler);\n\t            }\n\t            else {\n\t                for (var _i = 0, event_2 = event; _i < event_2.length; _i++) {\n\t                    var arg = event_2[_i];\n\t                    this.localObserver.off(arg.event, arg.handler);\n\t                }\n\t            }\n\t        };\n\t        Component.prototype.notify = function (property, argument) {\n\t            if (this.isDestroyed !== true) {\n\t                this.localObserver.notify(property, argument);\n\t            }\n\t        };\n\t        Component.prototype.getInjectedModules = function () {\n\t            return this.injectedModules;\n\t        };\n\t        ;\n\t        Component.Inject = function () {\n\t            var moduleList = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                moduleList[_i] = arguments[_i];\n\t            }\n\t            if (!this.prototype.injectedModules) {\n\t                this.prototype.injectedModules = [];\n\t            }\n\t            for (var i = 0; i < moduleList.length; i++) {\n\t                if (this.prototype.injectedModules.indexOf(moduleList[i]) === -1) {\n\t                    this.prototype.injectedModules.push(moduleList[i]);\n\t                }\n\t            }\n\t        };\n\t        Component.prototype.injectModules = function () {\n\t            if (this.injectedModules && this.injectedModules.length) {\n\t                this.moduleLoader.inject(this.requiredModules(), this.injectedModules);\n\t            }\n\t        };\n\t        Component.prototype.mergePersistData = function () {\n\t            var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n\t            if (!(util_1.isNullOrUndefined(data) || (data === ''))) {\n\t                this.setProperties(JSON.parse(data), true);\n\t            }\n\t        };\n\t        Component.prototype.setPersistData = function () {\n\t            window.localStorage.setItem(this.getModuleName() + this.element.id, this.getPersistData());\n\t        };\n\t        Component.prototype.clearTemplate = function (templateName) {\n\t        };\n\t        Component.prototype.addOnPersist = function (options) {\n\t            var _this = this;\n\t            var persistObj = {};\n\t            for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n\t                var key = options_1[_i];\n\t                var objValue = void 0;\n\t                objValue = util_1.getValue(key, this);\n\t                if (!util_1.isUndefined(objValue)) {\n\t                    util_1.setValue(key, this.getActualProperties(objValue), persistObj);\n\t                }\n\t            }\n\t            return JSON.stringify(persistObj, function (key, value) {\n\t                return _this.getActualProperties(value);\n\t            });\n\t        };\n\t        Component.prototype.getActualProperties = function (obj) {\n\t            if (obj instanceof child_property_1.ChildProperty) {\n\t                return util_1.getValue('properties', obj);\n\t            }\n\t            else {\n\t                return obj;\n\t            }\n\t        };\n\t        Component.prototype.ignoreOnPersist = function (options) {\n\t            return JSON.stringify(this.iterateJsonProperties(this.properties, options));\n\t        };\n\t        Component.prototype.iterateJsonProperties = function (obj, ignoreList) {\n\t            var newObj = {};\n\t            var _loop_1 = function (key) {\n\t                if (ignoreList.indexOf(key) === -1) {\n\t                    var value = obj[key];\n\t                    if (typeof value === 'object' && !(value instanceof Array)) {\n\t                        var newList = ignoreList.filter(function (str) {\n\t                            return new RegExp(key + '.').test(str);\n\t                        }).map(function (str) {\n\t                            return str.replace(key + '.', '');\n\t                        });\n\t                        newObj[key] = this_1.iterateJsonProperties(this_1.getActualProperties(value), newList);\n\t                    }\n\t                    else {\n\t                        newObj[key] = value;\n\t                    }\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                _loop_1(key);\n\t            }\n\t            return newObj;\n\t        };\n\t        return Component;\n\t    }(base_1.Base));\n\t    __decorate([\n\t        notify_property_change_1.Property(false)\n\t    ], Component.prototype, \"enablePersistence\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Component.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Component.prototype, \"locale\", void 0);\n\t    Component = __decorate([\n\t        notify_property_change_1.NotifyPropertyChanges\n\t    ], Component);\n\t    exports.Component = Component;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var MODULE_SUFFIX = 'Module';\n\t    var ModuleLoader = (function () {\n\t        function ModuleLoader(parent) {\n\t            this.loadedModules = [];\n\t            this.parent = parent;\n\t        }\n\t        ;\n\t        ModuleLoader.prototype.inject = function (requiredModules, moduleList) {\n\t            var reqLength = requiredModules.length;\n\t            if (reqLength === 0) {\n\t                this.clean();\n\t                return;\n\t            }\n\t            if (this.loadedModules.length) {\n\t                this.clearUnusedModule(requiredModules);\n\t            }\n\t            for (var i = 0; i < reqLength; i++) {\n\t                var modl = requiredModules[i];\n\t                for (var _i = 0, moduleList_1 = moduleList; _i < moduleList_1.length; _i++) {\n\t                    var module = moduleList_1[_i];\n\t                    var modName = modl.member;\n\t                    if (module.prototype.getModuleName() === modl.member && !this.isModuleLoaded(modName)) {\n\t                        var moduleObject = util_1.createInstance(module, modl.args);\n\t                        var memberName = this.getMemberName(modName);\n\t                        if (modl.isProperty) {\n\t                            util_1.setValue(memberName, module, this.parent);\n\t                        }\n\t                        else {\n\t                            util_1.setValue(memberName, moduleObject, this.parent);\n\t                        }\n\t                        var loadedModule = modl;\n\t                        loadedModule.member = memberName;\n\t                        this.loadedModules.push(loadedModule);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ModuleLoader.prototype.clean = function () {\n\t            for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {\n\t                var modules = _a[_i];\n\t                if (!modules.isProperty) {\n\t                    util_1.getValue(modules.member, this.parent).destroy();\n\t                }\n\t            }\n\t            this.loadedModules = [];\n\t        };\n\t        ModuleLoader.prototype.clearUnusedModule = function (moduleList) {\n\t            var _this = this;\n\t            var usedModules = moduleList.map(function (arg) { return _this.getMemberName(arg.member); });\n\t            var removableModule = this.loadedModules.filter(function (module) {\n\t                return usedModules.indexOf(module.member) === -1;\n\t            });\n\t            for (var _i = 0, removableModule_1 = removableModule; _i < removableModule_1.length; _i++) {\n\t                var mod = removableModule_1[_i];\n\t                if (!mod.isProperty) {\n\t                    util_1.getValue(mod.member, this.parent).destroy();\n\t                }\n\t                this.loadedModules.splice(this.loadedModules.indexOf(mod), 1);\n\t                util_1.deleteObject(this.parent, mod.member);\n\t            }\n\t        };\n\t        ModuleLoader.prototype.getMemberName = function (name) {\n\t            return name[0].toLowerCase() + name.substring(1) + MODULE_SUFFIX;\n\t        };\n\t        ModuleLoader.prototype.isModuleLoaded = function (modName) {\n\t            for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {\n\t                var mod = _a[_i];\n\t                if (mod.member === this.getMemberName(modName)) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        return ModuleLoader;\n\t    }());\n\t    exports.ModuleLoader = ModuleLoader;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ChildProperty = (function () {\n\t        function ChildProperty(parent, propName, defaultValue, isArray) {\n\t            this.properties = {};\n\t            this.changedProperties = {};\n\t            this.childChangedProperties = {};\n\t            this.oldProperties = {};\n\t            this.finalUpdate = function () { };\n\t            this.callChildDataBind = util_1.getValue('callChildDataBind', base_1.Base);\n\t            this.parentObj = parent;\n\t            this.controlParent = this.parentObj.controlParent || this.parentObj;\n\t            this.propName = propName;\n\t            this.setProperties(defaultValue, true);\n\t            this.isParentArray = isArray;\n\t        }\n\t        ChildProperty.prototype.updateChange = function (val, propName) {\n\t            if (val === true) {\n\t                this.parentObj.childChangedProperties[propName] = val;\n\t            }\n\t            else {\n\t                delete this.parentObj.childChangedProperties[propName];\n\t            }\n\t            if (this.parentObj.updateChange) {\n\t                this.parentObj.updateChange(val, this.parentObj.propName);\n\t            }\n\t        };\n\t        ChildProperty.prototype.updateTimeOut = function () {\n\t            if (this.parentObj.updateTimeOut) {\n\t                this.parentObj.finalUpdate();\n\t                this.parentObj.updateTimeOut();\n\t            }\n\t            else {\n\t                this.parentObj.finalUpdate = util_1.setImmediate(this.parentObj.dataBind.bind(this.parentObj));\n\t            }\n\t        };\n\t        ChildProperty.prototype.clearChanges = function () {\n\t            this.finalUpdate();\n\t            this.updateChange(false, this.propName);\n\t            this.oldProperties = {};\n\t            this.changedProperties = {};\n\t        };\n\t        ChildProperty.prototype.setProperties = function (prop, muteOnChange) {\n\t            if (muteOnChange === true) {\n\t                util_1.merge(this, prop);\n\t                this.updateChange(false, this.propName);\n\t                this.clearChanges();\n\t            }\n\t            else {\n\t                util_1.merge(this, prop);\n\t            }\n\t        };\n\t        ChildProperty.prototype.dataBind = function () {\n\t            this.callChildDataBind(this.childChangedProperties, this);\n\t            if (this.isParentArray) {\n\t                var curIndex = this.parentObj[this.propName].indexOf(this);\n\t                if (Object.keys(this.changedProperties).length) {\n\t                    util_1.setValue(this.propName + '.' + curIndex, this.changedProperties, this.parentObj.changedProperties);\n\t                    util_1.setValue(this.propName + '.' + curIndex, this.oldProperties, this.parentObj.oldProperties);\n\t                }\n\t            }\n\t            else {\n\t                this.parentObj.changedProperties[this.propName] = this.changedProperties;\n\t                this.parentObj.oldProperties[this.propName] = this.oldProperties;\n\t            }\n\t            this.clearChanges();\n\t        };\n\t        ChildProperty.prototype.saveChanges = function (key, newValue, oldValue) {\n\t            if (this.controlParent.isProtectedOnChange) {\n\t                return;\n\t            }\n\t            this.oldProperties[key] = oldValue;\n\t            this.changedProperties[key] = newValue;\n\t            this.updateChange(true, this.propName);\n\t            this.finalUpdate();\n\t            this.updateTimeOut();\n\t        };\n\t        return ChildProperty;\n\t    }());\n\t    exports.ChildProperty = ChildProperty;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(15), __webpack_require__(18), __webpack_require__(19), __webpack_require__(20), __webpack_require__(17), __webpack_require__(2), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, date_formatter_1, number_formatter_1, date_parser_1, number_parser_1, intl_base_1, util_1, observer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.onIntlChange = new observer_1.Observer();\n\t    exports.rightToLeft = false;\n\t    exports.cldrData = {};\n\t    exports.defaultCulture = 'en-US';\n\t    exports.defaultCurrencyCode = 'USD';\n\t    var mapper = ['numericObject', 'dateObject'];\n\t    var Internationalization = (function () {\n\t        function Internationalization(cultureName) {\n\t            if (cultureName) {\n\t                this.culture = cultureName;\n\t            }\n\t        }\n\t        Internationalization.prototype.getDateFormat = function (options) {\n\t            return date_formatter_1.DateFormat.dateFormat(this.getCulture(), options || { type: 'date', skeleton: 'short' }, exports.cldrData);\n\t        };\n\t        Internationalization.prototype.getNumberFormat = function (options) {\n\t            if (options && !options.currency) {\n\t                options.currency = exports.defaultCurrencyCode;\n\t            }\n\t            return number_formatter_1.NumberFormat.numberFormatter(this.getCulture(), options || {}, exports.cldrData);\n\t        };\n\t        Internationalization.prototype.getDateParser = function (options) {\n\t            return date_parser_1.DateParser.dateParser(this.getCulture(), options || { skeleton: 'short', type: 'date' }, exports.cldrData);\n\t        };\n\t        Internationalization.prototype.getNumberParser = function (options) {\n\t            return number_parser_1.NumberParser.numberParser(this.getCulture(), options || { format: 'N' }, exports.cldrData);\n\t        };\n\t        Internationalization.prototype.formatNumber = function (value, option) {\n\t            return this.getNumberFormat(option)(value);\n\t        };\n\t        Internationalization.prototype.formatDate = function (value, option) {\n\t            return this.getDateFormat(option)(value);\n\t        };\n\t        Internationalization.prototype.parseDate = function (value, option) {\n\t            return this.getDateParser(option)(value);\n\t        };\n\t        Internationalization.prototype.parseNumber = function (value, option) {\n\t            return this.getNumberParser(option)(value);\n\t        };\n\t        Internationalization.prototype.getDatePattern = function (option, isExcelFormat) {\n\t            return intl_base_1.IntlBase.getActualDateTimeFormat(this.getCulture(), option, exports.cldrData, isExcelFormat);\n\t        };\n\t        Internationalization.prototype.getNumberPattern = function (option) {\n\t            return intl_base_1.IntlBase.getActualNumberFormat(this.getCulture(), option, exports.cldrData);\n\t        };\n\t        Internationalization.prototype.getCulture = function () {\n\t            return this.culture || exports.defaultCulture;\n\t        };\n\t        return Internationalization;\n\t    }());\n\t    exports.Internationalization = Internationalization;\n\t    function setCulture(cultureName) {\n\t        exports.defaultCulture = cultureName;\n\t        exports.onIntlChange.notify('notifyExternalChange', { 'locale': exports.defaultCulture });\n\t    }\n\t    exports.setCulture = setCulture;\n\t    function setCurrencyCode(currencyCode) {\n\t        exports.defaultCurrencyCode = currencyCode;\n\t    }\n\t    exports.setCurrencyCode = setCurrencyCode;\n\t    function loadCldr() {\n\t        var data = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            data[_i] = arguments[_i];\n\t        }\n\t        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n\t            var obj = data_1[_a];\n\t            util_1.extend(exports.cldrData, obj, {}, true);\n\t        }\n\t    }\n\t    exports.loadCldr = loadCldr;\n\t    function enableRtl(status) {\n\t        if (status === void 0) { status = true; }\n\t        exports.rightToLeft = status;\n\t        exports.onIntlChange.notify('notifyExternalChange', { enableRtl: exports.rightToLeft });\n\t    }\n\t    exports.enableRtl = enableRtl;\n\t    function getNumericObject(locale, type) {\n\t        var numObject = intl_base_1.IntlBase.getDependables(exports.cldrData, locale, true)[mapper[0]];\n\t        var dateObject = intl_base_1.IntlBase.getDependables(exports.cldrData, locale)[mapper[1]];\n\t        var numSystem = util_1.getValue('defaultNumberingSystem', numObject);\n\t        var symbPattern = util_1.getValue('symbols-numberSystem-' + numSystem, numObject);\n\t        var pattern = intl_base_1.IntlBase.getSymbolPattern(type || 'decimal', numSystem, numObject, false);\n\t        return util_1.extend(symbPattern, intl_base_1.IntlBase.getFormatData(pattern, true, '', true), { 'dateSeparator': intl_base_1.IntlBase.getDateSeparator(dateObject) });\n\t    }\n\t    exports.getNumericObject = getNumericObject;\n\t    function getDefaultDateObject() {\n\t        return intl_base_1.IntlBase.getDependables(exports.cldrData, '', false)[mapper[1]];\n\t    }\n\t    exports.getDefaultDateObject = getDefaultDateObject;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16), __webpack_require__(17), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, parser_base_1, intl_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var abbreviateRegexGlobal = /\\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|ccc|G+|z+/gi;\n\t    var standalone = 'stand-alone';\n\t    var weekdayKey = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n\t    exports.basicPatterns = ['short', 'medium', 'long', 'full'];\n\t    var timeSetter = {\n\t        m: 'getMinutes',\n\t        h: 'getHours',\n\t        H: 'getHours',\n\t        s: 'getSeconds',\n\t        d: 'getDate',\n\t    };\n\t    var datePartMatcher = {\n\t        'M': 'month',\n\t        'd': 'day',\n\t        'E': 'weekday',\n\t        'c': 'weekday',\n\t        'y': 'year',\n\t        'm': 'minute',\n\t        'h': 'hour',\n\t        'H': 'hour',\n\t        's': 'second',\n\t        'L': 'month',\n\t        'a': 'designator',\n\t        'z': 'timeZone',\n\t        'Z': 'timeZone',\n\t        'G': 'era'\n\t    };\n\t    var timeSeparator = 'timeSeparator';\n\t    var DateFormat = (function () {\n\t        function DateFormat() {\n\t        }\n\t        DateFormat.dateFormat = function (culture, option, cldr) {\n\t            var _this = this;\n\t            var dependable = intl_base_1.IntlBase.getDependables(cldr, culture);\n\t            var formatOptions = {};\n\t            var resPattern = option.format || intl_base_1.IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type);\n\t            formatOptions.dateSeperator = intl_base_1.IntlBase.getDateSeparator(dependable.dateObject);\n\t            if (util_1.isUndefined(resPattern)) {\n\t                util_1.throwError('Format options or type given must be invalid');\n\t            }\n\t            else {\n\t                formatOptions.pattern = resPattern;\n\t                formatOptions.numMapper = parser_base_1.ParserBase.getNumberMapper(dependable.parserObject, parser_base_1.ParserBase.getNumberingSystem(cldr));\n\t                var patternMatch = resPattern.match(abbreviateRegexGlobal) || [];\n\t                for (var _i = 0, patternMatch_1 = patternMatch; _i < patternMatch_1.length; _i++) {\n\t                    var str = patternMatch_1[_i];\n\t                    var len = str.length;\n\t                    var char = str[0];\n\t                    if (char === 'K') {\n\t                        char = 'h';\n\t                    }\n\t                    var charKey = datePartMatcher[char];\n\t                    switch (char) {\n\t                        case 'E':\n\t                        case 'c':\n\t                            formatOptions.weekday = dependable.dateObject[intl_base_1.IntlBase.days][standalone][intl_base_1.IntlBase.monthIndex[len]];\n\t                            break;\n\t                        case 'M':\n\t                        case 'L':\n\t                            formatOptions.month = dependable.dateObject[intl_base_1.IntlBase.month][standalone][intl_base_1.IntlBase.monthIndex[len]];\n\t                            break;\n\t                        case 'a':\n\t                            formatOptions.designator = util_1.getValue('dayPeriods.format.wide', dependable.dateObject);\n\t                            break;\n\t                        case 'G':\n\t                            var eText = (len <= 3) ? 'eraAbbr' : (len === 4) ? 'eraNames' : 'eraNarrow';\n\t                            formatOptions.era = util_1.getValue('eras.' + eText, dependable.dateObject);\n\t                            break;\n\t                        case 'z':\n\t                            formatOptions.timeZone = util_1.getValue('dates.timeZoneNames', dependable.parserObject);\n\t                            break;\n\t                    }\n\t                }\n\t            }\n\t            return function (value) {\n\t                if (isNaN(value.getDate())) {\n\t                    return null;\n\t                }\n\t                return _this.intDateFormatter(value, formatOptions);\n\t            };\n\t        };\n\t        DateFormat.intDateFormatter = function (value, options) {\n\t            var pattern = options.pattern;\n\t            var ret = '';\n\t            var matches = pattern.match(intl_base_1.IntlBase.dateParseRegex);\n\t            for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n\t                var match = matches_1[_i];\n\t                var length_1 = match.length;\n\t                var char = match[0];\n\t                if (char === 'K') {\n\t                    char = 'h';\n\t                }\n\t                var curval = void 0;\n\t                var isNumber = void 0;\n\t                var processNumber = void 0;\n\t                var curstr = '';\n\t                switch (char) {\n\t                    case 'M':\n\t                    case 'L':\n\t                        curval = value.getMonth() + 1;\n\t                        if (length_1 > 2) {\n\t                            ret += options.month[curval];\n\t                        }\n\t                        else {\n\t                            isNumber = true;\n\t                        }\n\t                        break;\n\t                    case 'E':\n\t                    case 'c':\n\t                        ret += options.weekday[weekdayKey[value.getDay()]];\n\t                        break;\n\t                    case 'H':\n\t                    case 'h':\n\t                    case 'm':\n\t                    case 's':\n\t                    case 'd':\n\t                        isNumber = true;\n\t                        curval = value[timeSetter[char]]();\n\t                        if (char === 'h') {\n\t                            curval = curval % 12 || 12;\n\t                        }\n\t                        break;\n\t                    case 'y':\n\t                        processNumber = true;\n\t                        curstr += value.getFullYear();\n\t                        if (length_1 === 2) {\n\t                            curstr = curstr.substr(curstr.length - 2);\n\t                        }\n\t                        break;\n\t                    case 'a':\n\t                        var desig = value.getHours() < 12 ? 'am' : 'pm';\n\t                        ret += options.designator[desig];\n\t                        break;\n\t                    case 'G':\n\t                        var dec = value.getFullYear() < 0 ? 0 : 1;\n\t                        ret += options.era[dec];\n\t                        break;\n\t                    case '\\'':\n\t                        ret += (match === '\\'\\'') ? '\\'' : match.replace(/\\'/g, '');\n\t                        break;\n\t                    case 'z':\n\t                        var timezone = value.getTimezoneOffset();\n\t                        var pattern_1 = (length_1 < 4) ? '+H;-H' : options.timeZone.hourFormat;\n\t                        pattern_1 = pattern_1.replace(/:/g, options.numMapper.timeSeparator);\n\t                        if (timezone === 0) {\n\t                            ret += options.timeZone.gmtZeroFormat;\n\t                        }\n\t                        else {\n\t                            processNumber = true;\n\t                            curstr = this.getTimeZoneValue(timezone, pattern_1);\n\t                        }\n\t                        curstr = options.timeZone.gmtFormat.replace(/\\{0\\}/, curstr);\n\t                        break;\n\t                    case ':':\n\t                        ret += options.numMapper.numberSymbols[timeSeparator];\n\t                        break;\n\t                    case '/':\n\t                        ret += options.dateSeperator;\n\t                        break;\n\t                    default:\n\t                        ret += match;\n\t                }\n\t                if (isNumber) {\n\t                    processNumber = true;\n\t                    curstr = this.checkTwodigitNumber(curval, length_1);\n\t                }\n\t                if (processNumber) {\n\t                    ret += parser_base_1.ParserBase.convertValueParts(curstr, intl_base_1.IntlBase.latnParseRegex, options.numMapper.mapper);\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t        DateFormat.checkTwodigitNumber = function (val, len) {\n\t            var ret = val + '';\n\t            if (len === 2 && ret.length !== 2) {\n\t                return '0' + ret;\n\t            }\n\t            return ret;\n\t        };\n\t        DateFormat.getTimeZoneValue = function (tVal, pattern) {\n\t            var _this = this;\n\t            var splt = pattern.split(';');\n\t            var curPattern = splt[tVal > 0 ? 1 : 0];\n\t            var no = Math.abs(tVal);\n\t            return curPattern = curPattern.replace(/HH?|mm/g, function (str) {\n\t                var len = str.length;\n\t                var ishour = str.indexOf('H') !== -1;\n\t                return _this.checkTwodigitNumber(Math.floor(ishour ? (no / 60) : (no % 60)), len);\n\t            });\n\t        };\n\t        return DateFormat;\n\t    }());\n\t    exports.DateFormat = DateFormat;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var defaultNumberingSystem = {\n\t        'latn': {\n\t            '_digits': '0123456789',\n\t            '_type': 'numeric'\n\t        }\n\t    };\n\t    var latnRegex = /^[0-9]*$/;\n\t    var defaultNumberSymbols = {\n\t        'decimal': '.',\n\t        'group': ',',\n\t        'percentSign': '%',\n\t        'plusSign': '+',\n\t        'minusSign': '-',\n\t        'infinity': '∞',\n\t        'nan': 'NaN',\n\t        'exponential': 'E'\n\t    };\n\t    var latnNumberSystem = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n\t    var ParserBase = (function () {\n\t        function ParserBase() {\n\t        }\n\t        ParserBase.getMainObject = function (obj, cName) {\n\t            return util_1.getValue('main.' + cName, obj);\n\t        };\n\t        ParserBase.getNumberingSystem = function (obj) {\n\t            return util_1.getValue('supplemental.numberingSystems', obj) || this.numberingSystems;\n\t        };\n\t        ParserBase.reverseObject = function (prop, keys) {\n\t            var propKeys = keys || Object.keys(prop);\n\t            var res = {};\n\t            for (var _i = 0, propKeys_1 = propKeys; _i < propKeys_1.length; _i++) {\n\t                var key = propKeys_1[_i];\n\t                if (!res.hasOwnProperty(prop[key])) {\n\t                    res[prop[key]] = key;\n\t                }\n\t            }\n\t            return res;\n\t        };\n\t        ParserBase.getSymbolRegex = function (props) {\n\t            var regexStr = props.map(function (str) {\n\t                return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n\t            }).join('|');\n\t            return new RegExp(regexStr, 'g');\n\t        };\n\t        ParserBase.getSymbolMatch = function (prop) {\n\t            var matchKeys = Object.keys(defaultNumberSymbols);\n\t            var ret = {};\n\t            for (var _i = 0, matchKeys_1 = matchKeys; _i < matchKeys_1.length; _i++) {\n\t                var key = matchKeys_1[_i];\n\t                ret[prop[key]] = defaultNumberSymbols[key];\n\t            }\n\t            return ret;\n\t        };\n\t        ParserBase.constructRegex = function (val) {\n\t            var len = val.length;\n\t            var ret = '';\n\t            for (var i = 0; i < len; i++) {\n\t                if (i !== len - 1) {\n\t                    ret += val[i] + '|';\n\t                }\n\t                else {\n\t                    ret += val[i];\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t        ParserBase.convertValueParts = function (value, regex, obj) {\n\t            return value.replace(regex, function (str) {\n\t                return obj[str];\n\t            });\n\t        };\n\t        ParserBase.getDefaultNumberingSystem = function (obj) {\n\t            var ret = {};\n\t            ret.obj = util_1.getValue('numbers', obj);\n\t            ret.nSystem = util_1.getValue('defaultNumberingSystem', ret.obj);\n\t            return ret;\n\t        };\n\t        ParserBase.getCurrentNumericOptions = function (curObj, numberSystem, needSymbols) {\n\t            var ret = {};\n\t            var cur = this.getDefaultNumberingSystem(curObj);\n\t            if (!util_1.isUndefined(cur.nSystem)) {\n\t                var digits = util_1.getValue(cur.nSystem + '._digits', numberSystem);\n\t                if (!util_1.isUndefined(digits)) {\n\t                    ret.numericPair = this.reverseObject(digits, latnNumberSystem);\n\t                    ret.numberParseRegex = new RegExp(this.constructRegex(digits), 'g');\n\t                    ret.numericRegex = '[' + digits[0] + '-' + digits[9] + ']';\n\t                    if (needSymbols) {\n\t                        ret.numericRegex = digits[0] + '-' + digits[9];\n\t                        ret.symbolNumberSystem = util_1.getValue('symbols-numberSystem-' + cur.nSystem, cur.obj);\n\t                        ret.symbolMatch = this.getSymbolMatch(ret.symbolNumberSystem);\n\t                        ret.numberSystem = cur.nSystem;\n\t                    }\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t        ParserBase.getNumberMapper = function (curObj, numberSystem, isNumber) {\n\t            var ret = { mapper: {} };\n\t            var cur = this.getDefaultNumberingSystem(curObj);\n\t            if (!util_1.isUndefined(cur.nSystem)) {\n\t                ret.numberSystem = cur.nSystem;\n\t                ret.numberSymbols = util_1.getValue('symbols-numberSystem-' + cur.nSystem, cur.obj);\n\t                ret.timeSeparator = util_1.getValue('timeSeparator', ret.numberSymbols);\n\t                var digits = util_1.getValue(cur.nSystem + '._digits', numberSystem);\n\t                if (!util_1.isUndefined(digits)) {\n\t                    for (var _i = 0, latnNumberSystem_1 = latnNumberSystem; _i < latnNumberSystem_1.length; _i++) {\n\t                        var i = latnNumberSystem_1[_i];\n\t                        ret.mapper[i] = digits[i];\n\t                    }\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t        return ParserBase;\n\t    }());\n\t    ParserBase.nPair = 'numericPair';\n\t    ParserBase.nRegex = 'numericRegex';\n\t    ParserBase.numberingSystems = defaultNumberingSystem;\n\t    exports.ParserBase = ParserBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(16), __webpack_require__(15), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, parser_base_1, date_formatter_1, number_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IntlBase;\n\t    (function (IntlBase) {\n\t        IntlBase.negativeDataRegex = /^(('[^']+'|''|[^*#@0,.E])*)(\\*.)?((([#,]*[0,]*0+)(\\.0*[0-9]*#*)?)|([#,]*@+#*))(E\\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;\n\t        IntlBase.customRegex = /^(('[^']+'|''|[^*#@0,.])*)(\\*.)?((([0#,]*[0,]*[0#]*)(\\.[0#]*)?)|([#,]*@+#*))(E\\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;\n\t        IntlBase.latnParseRegex = /0|1|2|3|4|5|6|7|8|9/g;\n\t        var fractionRegex = /[0-9]/g;\n\t        IntlBase.defaultCurrency = '$';\n\t        var mapper = ['infinity', 'nan', 'group', 'decimal'];\n\t        var patternRegex = /G|M|L|H|c|'| a|yy|y|EEEE|E/g;\n\t        var patternMatch = {\n\t            'G': '',\n\t            'M': 'm',\n\t            'L': 'm',\n\t            'H': 'h',\n\t            'c': 'd',\n\t            '\\'': '\"',\n\t            ' a': ' AM/PM',\n\t            'yy': 'yy',\n\t            'y': 'yyyy',\n\t            'EEEE': 'dddd',\n\t            'E': 'ddd'\n\t        };\n\t        IntlBase.formatRegex = /(^[ncpa]{1})([0-1]?[0-9]|20)?$/i;\n\t        var typeMapper = {\n\t            '$': 'isCurrency',\n\t            '%': 'isPercent',\n\t            '-': 'isNegative',\n\t            0: 'nlead',\n\t            1: 'nend'\n\t        };\n\t        IntlBase.dateParseRegex = /([a-z])\\1*|'([^']|'')+'|''|./gi;\n\t        IntlBase.basicPatterns = ['short', 'medium', 'long', 'full'];\n\t        IntlBase.defaultObject = {\n\t            'dates': {\n\t                'calendars': {\n\t                    'gregorian': {\n\t                        'months': {\n\t                            'stand-alone': {\n\t                                'abbreviated': {\n\t                                    '1': 'Jan',\n\t                                    '2': 'Feb',\n\t                                    '3': 'Mar',\n\t                                    '4': 'Apr',\n\t                                    '5': 'May',\n\t                                    '6': 'Jun',\n\t                                    '7': 'Jul',\n\t                                    '8': 'Aug',\n\t                                    '9': 'Sep',\n\t                                    '10': 'Oct',\n\t                                    '11': 'Nov',\n\t                                    '12': 'Dec'\n\t                                },\n\t                                'narrow': {\n\t                                    '1': 'J',\n\t                                    '2': 'F',\n\t                                    '3': 'M',\n\t                                    '4': 'A',\n\t                                    '5': 'M',\n\t                                    '6': 'J',\n\t                                    '7': 'J',\n\t                                    '8': 'A',\n\t                                    '9': 'S',\n\t                                    '10': 'O',\n\t                                    '11': 'N',\n\t                                    '12': 'D'\n\t                                },\n\t                                'wide': {\n\t                                    '1': 'January',\n\t                                    '2': 'February',\n\t                                    '3': 'March',\n\t                                    '4': 'April',\n\t                                    '5': 'May',\n\t                                    '6': 'June',\n\t                                    '7': 'July',\n\t                                    '8': 'August',\n\t                                    '9': 'September',\n\t                                    '10': 'October',\n\t                                    '11': 'November',\n\t                                    '12': 'December'\n\t                                }\n\t                            }\n\t                        },\n\t                        \"days\": {\n\t                            \"stand-alone\": {\n\t                                \"abbreviated\": {\n\t                                    \"sun\": \"Sun\",\n\t                                    \"mon\": \"Mon\",\n\t                                    \"tue\": \"Tue\",\n\t                                    \"wed\": \"Wed\",\n\t                                    \"thu\": \"Thu\",\n\t                                    \"fri\": \"Fri\",\n\t                                    \"sat\": \"Sat\"\n\t                                },\n\t                                \"narrow\": {\n\t                                    \"sun\": \"S\",\n\t                                    \"mon\": \"M\",\n\t                                    \"tue\": \"T\",\n\t                                    \"wed\": \"W\",\n\t                                    \"thu\": \"T\",\n\t                                    \"fri\": \"F\",\n\t                                    \"sat\": \"S\"\n\t                                },\n\t                                \"short\": {\n\t                                    \"sun\": \"Su\",\n\t                                    \"mon\": \"Mo\",\n\t                                    \"tue\": \"Tu\",\n\t                                    \"wed\": \"We\",\n\t                                    \"thu\": \"Th\",\n\t                                    \"fri\": \"Fr\",\n\t                                    \"sat\": \"Sa\"\n\t                                },\n\t                                \"wide\": {\n\t                                    \"sun\": \"Sunday\",\n\t                                    \"mon\": \"Monday\",\n\t                                    \"tue\": \"Tuesday\",\n\t                                    \"wed\": \"Wednesday\",\n\t                                    \"thu\": \"Thursday\",\n\t                                    \"fri\": \"Friday\",\n\t                                    \"sat\": \"Saturday\"\n\t                                }\n\t                            }\n\t                        },\n\t                        \"dayPeriods\": {\n\t                            \"format\": {\n\t                                \"wide\": {\n\t                                    \"am\": \"AM\",\n\t                                    \"pm\": \"PM\"\n\t                                }\n\t                            }\n\t                        },\n\t                        'eras': {\n\t                            'eraNames': {\n\t                                '0': 'Before Christ',\n\t                                '0-alt-variant': 'Before Common Era',\n\t                                '1': 'Anno Domini',\n\t                                \"1-alt-variant\": \"Common Era\"\n\t                            },\n\t                            'eraAbbr': {\n\t                                '0': 'BC',\n\t                                '0-alt-variant': 'BCE',\n\t                                '1': 'AD',\n\t                                '1-alt-variant': 'CE'\n\t                            },\n\t                            'eraNarrow': {\n\t                                '0': 'B',\n\t                                '0-alt-variant': 'BCE',\n\t                                '1': 'A',\n\t                                '1-alt-variant': 'CE'\n\t                            }\n\t                        },\n\t                        'dateFormats': {\n\t                            'full': 'EEEE, MMMM d, y',\n\t                            'long': 'MMMM d, y',\n\t                            'medium': 'MMM d, y',\n\t                            'short': 'M/d/yy'\n\t                        },\n\t                        'timeFormats': {\n\t                            'full': 'h:mm:ss a zzzz',\n\t                            'long': 'h:mm:ss a z',\n\t                            'medium': 'h:mm:ss a',\n\t                            'short': 'h:mm a'\n\t                        },\n\t                        'dateTimeFormats': {\n\t                            'full': \"{1} 'at' {0}\",\n\t                            'long': \"{1} 'at' {0}\",\n\t                            'medium': '{1}, {0}',\n\t                            'short': '{1}, {0}',\n\t                            'availableFormats': {\n\t                                'd': 'd',\n\t                                'E': 'ccc',\n\t                                'Ed': 'd E',\n\t                                'Ehm': 'E h:mm a',\n\t                                'EHm': 'E HH:mm',\n\t                                'Ehms': 'E h:mm:ss a',\n\t                                'EHms': 'E HH:mm:ss',\n\t                                'Gy': 'y G',\n\t                                'GyMMM': 'MMM y G',\n\t                                'GyMMMd': 'MMM d, y G',\n\t                                'GyMMMEd': 'E, MMM d, y G',\n\t                                'h': 'h a',\n\t                                'H': 'HH',\n\t                                'hm': 'h:mm a',\n\t                                'Hm': 'HH:mm',\n\t                                'hms': 'h:mm:ss a',\n\t                                'Hms': 'HH:mm:ss',\n\t                                'hmsv': 'h:mm:ss a v',\n\t                                'Hmsv': 'HH:mm:ss v',\n\t                                'hmv': 'h:mm a v',\n\t                                'Hmv': 'HH:mm v',\n\t                                'M': 'L',\n\t                                'Md': 'M/d',\n\t                                'MEd': 'E, M/d',\n\t                                'MMM': 'LLL',\n\t                                'MMMd': 'MMM d',\n\t                                'MMMEd': 'E, MMM d',\n\t                                'MMMMd': 'MMMM d',\n\t                                'ms': 'mm:ss',\n\t                                'y': 'y',\n\t                                'yM': 'M/y',\n\t                                'yMd': 'M/d/y',\n\t                                'yMEd': 'E, M/d/y',\n\t                                'yMMM': 'MMM y',\n\t                                'yMMMd': 'MMM d, y',\n\t                                'yMMMEd': 'E, MMM d, y',\n\t                                'yMMMM': 'MMMM y',\n\t                            },\n\t                        }\n\t                    }\n\t                },\n\t                'timeZoneNames': {\n\t                    \"hourFormat\": \"+HH:mm;-HH:mm\",\n\t                    \"gmtFormat\": \"GMT{0}\",\n\t                    \"gmtZeroFormat\": \"GMT\",\n\t                }\n\t            },\n\t            'numbers': {\n\t                'currencies': {\n\t                    'USD': {\n\t                        'displayName': 'US Dollar',\n\t                        'symbol': '$',\n\t                        'symbol-alt-narrow': '$'\n\t                    },\n\t                    'EUR': {\n\t                        'displayName': 'Euro',\n\t                        'symbol': '€',\n\t                        'symbol-alt-narrow': '€'\n\t                    },\n\t                    'GBP': {\n\t                        'displayName': 'British Pound',\n\t                        'symbol-alt-narrow': '£'\n\t                    },\n\t                },\n\t                'defaultNumberingSystem': 'latn',\n\t                'minimumGroupingDigits': '1',\n\t                'symbols-numberSystem-latn': {\n\t                    'decimal': '.',\n\t                    'group': ',',\n\t                    'list': ';',\n\t                    'percentSign': '%',\n\t                    'plusSign': '+',\n\t                    'minusSign': '-',\n\t                    'exponential': 'E',\n\t                    'superscriptingExponent': '×',\n\t                    'perMille': '‰',\n\t                    'infinity': '∞',\n\t                    'nan': 'NaN',\n\t                    'timeSeparator': ':'\n\t                },\n\t                'decimalFormats-numberSystem-latn': {\n\t                    'standard': '#,##0.###',\n\t                },\n\t                'percentFormats-numberSystem-latn': {\n\t                    'standard': '#,##0%'\n\t                },\n\t                'currencyFormats-numberSystem-latn': {\n\t                    'standard': '¤#,##0.00',\n\t                    'accounting': '¤#,##0.00;(¤#,##0.00)'\n\t                }\n\t            }\n\t        };\n\t        IntlBase.monthIndex = {\n\t            3: 'abbreviated',\n\t            4: 'wide',\n\t            5: 'narrow',\n\t            1: 'abbreviated'\n\t        };\n\t        IntlBase.month = 'months';\n\t        IntlBase.days = 'days';\n\t        IntlBase.patternMatcher = {\n\t            C: 'currency',\n\t            P: 'percent',\n\t            N: 'decimal',\n\t            A: 'currency'\n\t        };\n\t        function getResultantPattern(skeleton, dateObject, type) {\n\t            var resPattern;\n\t            var iType = type || 'date';\n\t            if (IntlBase.basicPatterns.indexOf(skeleton) !== -1) {\n\t                resPattern = util_1.getValue(iType + 'Formats.' + skeleton, dateObject);\n\t                if (iType === 'dateTime') {\n\t                    var dPattern = util_1.getValue('dateFormats.' + skeleton, dateObject);\n\t                    var tPattern = util_1.getValue('timeFormats.' + skeleton, dateObject);\n\t                    resPattern = resPattern.replace('{1}', dPattern).replace('{0}', tPattern);\n\t                }\n\t            }\n\t            else {\n\t                resPattern = util_1.getValue('dateTimeFormats.availableFormats.' + skeleton, dateObject);\n\t            }\n\t            return resPattern;\n\t        }\n\t        IntlBase.getResultantPattern = getResultantPattern;\n\t        function getDependables(cldr, culture, isNumber) {\n\t            var ret = {};\n\t            ret.parserObject = parser_base_1.ParserBase.getMainObject(cldr, culture) || IntlBase.defaultObject;\n\t            if (isNumber) {\n\t                ret.numericObject = util_1.getValue('numbers', ret.parserObject);\n\t            }\n\t            else {\n\t                ret.dateObject = util_1.getValue('dates.calendars.gregorian', ret.parserObject);\n\t            }\n\t            return ret;\n\t        }\n\t        IntlBase.getDependables = getDependables;\n\t        function getSymbolPattern(type, numSystem, obj, isAccount) {\n\t            return util_1.getValue(type + 'Formats-numberSystem-' +\n\t                numSystem + (isAccount ? '.accounting' : '.standard'), obj) || (isAccount ? util_1.getValue(type + 'Formats-numberSystem-' +\n\t                numSystem + '.standard', obj) : '');\n\t        }\n\t        IntlBase.getSymbolPattern = getSymbolPattern;\n\t        function getProperNumericSkeleton(skeleton) {\n\t            var matches = skeleton.match(IntlBase.formatRegex);\n\t            var ret = {};\n\t            var pattern = matches[1].toUpperCase();\n\t            ret.isAccount = (pattern === 'A');\n\t            ret.type = IntlBase.patternMatcher[pattern];\n\t            if (skeleton.length > 1) {\n\t                ret.fractionDigits = parseInt(matches[2], 10);\n\t            }\n\t            return ret;\n\t        }\n\t        IntlBase.getProperNumericSkeleton = getProperNumericSkeleton;\n\t        function getFormatData(pattern, needFraction, cSymbol, fractionOnly) {\n\t            var nData = fractionOnly ? {} : { nlead: '', nend: '' };\n\t            var match = pattern.match(IntlBase.customRegex);\n\t            if (match) {\n\t                if (!fractionOnly) {\n\t                    nData.nlead = changeCurrencySymbol(match[1], cSymbol);\n\t                    nData.nend = changeCurrencySymbol(match[10], cSymbol);\n\t                    nData.groupPattern = match[4];\n\t                }\n\t                var fraction = match[7];\n\t                if (fraction && needFraction) {\n\t                    var fmatch = fraction.match(fractionRegex);\n\t                    if (!util_1.isNullOrUndefined(fmatch)) {\n\t                        nData.minimumFraction = fmatch.length;\n\t                    }\n\t                    else {\n\t                        nData.minimumFraction = 0;\n\t                    }\n\t                    nData.maximumFraction = fraction.length - 1;\n\t                }\n\t            }\n\t            return nData;\n\t        }\n\t        IntlBase.getFormatData = getFormatData;\n\t        function changeCurrencySymbol(val, sym) {\n\t            if (val) {\n\t                return val.replace(IntlBase.defaultCurrency, sym);\n\t            }\n\t            return '';\n\t        }\n\t        function getCurrencySymbol(numericObject, currencyCode) {\n\t            return util_1.getValue('currencies.' + currencyCode + '.symbol', numericObject) || '$';\n\t        }\n\t        IntlBase.getCurrencySymbol = getCurrencySymbol;\n\t        function customFormat(format, dOptions, obj) {\n\t            var options = {};\n\t            var formatSplit = format.split(';');\n\t            var data = ['pData', 'nData', 'zeroData'];\n\t            for (var i = 0; i < formatSplit.length; i++) {\n\t                options[data[i]] = customNumberFormat(formatSplit[i], dOptions, obj);\n\t            }\n\t            if (util_1.isNullOrUndefined(options.nData)) {\n\t                options.nData = util_1.extend({}, options.pData);\n\t                options.nData.nlead = util_1.isNullOrUndefined(dOptions) ? '-' + options.nData.nlead : dOptions.minusSymbol + options.nData.nlead;\n\t            }\n\t            return options;\n\t        }\n\t        IntlBase.customFormat = customFormat;\n\t        function customNumberFormat(format, dOptions, numObject) {\n\t            var cOptions = { type: 'decimal', minimumFractionDigits: 0, maximumFractionDigits: 0 };\n\t            var pattern = format.match(IntlBase.customRegex);\n\t            if (util_1.isNullOrUndefined(pattern) || pattern[5] === '') {\n\t                util_1.throwError('Given Format is not valid or Cldr data not loaded');\n\t            }\n\t            cOptions.nlead = pattern[1];\n\t            cOptions.nend = pattern[10];\n\t            var integerPart = pattern[6];\n\t            cOptions.useGrouping = integerPart.indexOf(',') !== -1;\n\t            integerPart = integerPart.replace(/,/g, '');\n\t            var fractionPart = pattern[7];\n\t            if (integerPart.indexOf('0') !== -1) {\n\t                cOptions.minimumIntegerDigits = integerPart.length - integerPart.indexOf('0');\n\t            }\n\t            if (!util_1.isNullOrUndefined(fractionPart)) {\n\t                cOptions.minimumFractionDigits = fractionPart.lastIndexOf('0');\n\t                cOptions.maximumFractionDigits = fractionPart.lastIndexOf('#');\n\t                if (cOptions.minimumFractionDigits === -1) {\n\t                    cOptions.minimumFractionDigits = 0;\n\t                }\n\t                if (cOptions.maximumFractionDigits === -1 || cOptions.maximumFractionDigits < cOptions.minimumFractionDigits) {\n\t                    cOptions.maximumFractionDigits = cOptions.minimumFractionDigits;\n\t                }\n\t            }\n\t            if (!util_1.isNullOrUndefined(dOptions)) {\n\t                util_1.extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], '$', dOptions.currencySymbol));\n\t                if (!cOptions.isCurrency) {\n\t                    util_1.extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], '%', dOptions.percentSymbol));\n\t                }\n\t            }\n\t            else {\n\t                util_1.extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], '%', '%'));\n\t            }\n\t            if (!util_1.isNullOrUndefined(numObject)) {\n\t                var symbolPattern = getSymbolPattern(cOptions.type, dOptions.numberMapper.numberSystem, numObject, false);\n\t                if (cOptions.useGrouping) {\n\t                    cOptions.groupSeparator = dOptions.numberMapper.numberSymbols[mapper[2]];\n\t                    cOptions.groupData = number_formatter_1.NumberFormat.getGroupingDetails(symbolPattern.split(';')[0]);\n\t                }\n\t                cOptions.nlead = cOptions.nlead.replace(/\\'/g, '');\n\t                cOptions.nend = cOptions.nend.replace(/\\'/g, '');\n\t            }\n\t            return cOptions;\n\t        }\n\t        function isCurrencyPercent(parts, actual, symbol) {\n\t            var options = { nlead: parts[0], nend: parts[1] };\n\t            for (var i = 0; i < 2; i++) {\n\t                var part = parts[i];\n\t                var loc = part.indexOf(actual);\n\t                if ((loc !== -1) && ((loc < part.indexOf('\\'')) || (loc > part.lastIndexOf('\\'')))) {\n\t                    options[typeMapper[i]] = part.substr(0, loc) + symbol + part.substr(loc + 1);\n\t                    options[typeMapper[actual]] = true;\n\t                    options.type = options.isCurrency ? 'currency' : 'percent';\n\t                    break;\n\t                }\n\t            }\n\t            return options;\n\t        }\n\t        IntlBase.isCurrencyPercent = isCurrencyPercent;\n\t        function getDateSeparator(dateObj) {\n\t            var value = (util_1.getValue('dateFormats.short', dateObj) || '').match(/[d‏M‏]([^d‏M])[d‏M‏]/i);\n\t            return value ? value[1] : '/';\n\t        }\n\t        IntlBase.getDateSeparator = getDateSeparator;\n\t        function getActualDateTimeFormat(culture, options, cldr, isExcelFormat) {\n\t            var dependable = getDependables(cldr, culture);\n\t            var actualPattern = options.format || getResultantPattern(options.skeleton, dependable.dateObject, options.type);\n\t            if (isExcelFormat) {\n\t                actualPattern = actualPattern.replace(patternRegex, function (pattern) {\n\t                    return patternMatch[pattern];\n\t                });\n\t                if (actualPattern.indexOf('z') !== -1) {\n\t                    var tLength = actualPattern.match(/z/g).length;\n\t                    var timeZonePattern = void 0;\n\t                    var options_1 = { 'timeZone': {} };\n\t                    options_1.numMapper = parser_base_1.ParserBase.getNumberMapper(dependable.parserObject, parser_base_1.ParserBase.getNumberingSystem(cldr));\n\t                    options_1.timeZone = util_1.getValue('dates.timeZoneNames', dependable.parserObject);\n\t                    var value = new Date();\n\t                    var timezone = value.getTimezoneOffset();\n\t                    var pattern = (tLength < 4) ? '+H;-H' : options_1.timeZone.hourFormat;\n\t                    pattern = pattern.replace(/:/g, options_1.numMapper.timeSeparator);\n\t                    if (timezone === 0) {\n\t                        timeZonePattern = options_1.timeZone.gmtZeroFormat;\n\t                    }\n\t                    else {\n\t                        timeZonePattern = date_formatter_1.DateFormat.getTimeZoneValue(timezone, pattern);\n\t                        timeZonePattern = options_1.timeZone.gmtFormat.replace(/\\{0\\}/, timeZonePattern);\n\t                    }\n\t                    actualPattern = actualPattern.replace(/[z]+/, '\"' + timeZonePattern + '\"');\n\t                }\n\t                actualPattern = actualPattern.replace(/ $/, '');\n\t            }\n\t            return actualPattern;\n\t        }\n\t        IntlBase.getActualDateTimeFormat = getActualDateTimeFormat;\n\t        function getActualNumberFormat(culture, options, cldr) {\n\t            var dependable = getDependables(cldr, culture, true);\n\t            var parseOptions = { custom: true };\n\t            var minFrac;\n\t            if ((/(c|a)$/ig).test(options.format) && !options.minimumFractionDigits && !options.maximumFractionDigits) {\n\t                var dOptions = {};\n\t                dOptions.numberMapper = parser_base_1.ParserBase.getNumberMapper(dependable.parserObject, parser_base_1.ParserBase.getNumberingSystem(cldr), true);\n\t                var symbolPattern = getSymbolPattern('currency', dOptions.numberMapper.numberSystem, dependable.numericObject, (/a/i).test(options.format));\n\t                minFrac = getFormatData(symbolPattern.split(';')[0], true, '', true).minimumFraction;\n\t            }\n\t            var actualPattern;\n\t            if ((IntlBase.formatRegex.test(options.format)) || !(options.format)) {\n\t                util_1.extend(parseOptions, getProperNumericSkeleton(options.format || 'N'));\n\t                parseOptions.custom = false;\n\t                actualPattern = '###0';\n\t                if (parseOptions.fractionDigits || options.minimumFractionDigits || options.maximumFractionDigits || minFrac) {\n\t                    var defaultMinimum = 0;\n\t                    if (parseOptions.fractionDigits) {\n\t                        options.minimumFractionDigits = options.maximumFractionDigits = parseOptions.fractionDigits;\n\t                    }\n\t                    actualPattern = fractionDigitsPattern(actualPattern, minFrac || parseOptions.fractionDigits ||\n\t                        options.minimumFractionDigits || defaultMinimum, options.maximumFractionDigits || defaultMinimum);\n\t                }\n\t                if (options.minimumIntegerDigits) {\n\t                    actualPattern = minimumIntegerPattern(actualPattern, options.minimumIntegerDigits);\n\t                }\n\t                if (options.useGrouping) {\n\t                    actualPattern = groupingPattern(actualPattern);\n\t                }\n\t                if (parseOptions.type === 'currency' && !parseOptions.isAccount) {\n\t                    actualPattern = '$ ' + actualPattern;\n\t                }\n\t                else if (parseOptions.type === 'currency' && parseOptions.isAccount) {\n\t                    actualPattern = '$ ' + actualPattern + ';($ ' + actualPattern + ')';\n\t                }\n\t                if (parseOptions.type === 'percent') {\n\t                    actualPattern += ' %';\n\t                }\n\t            }\n\t            else {\n\t                actualPattern = options.format.replace(/\\'/g, '\"');\n\t            }\n\t            return actualPattern;\n\t        }\n\t        IntlBase.getActualNumberFormat = getActualNumberFormat;\n\t        function fractionDigitsPattern(pattern, minDigits, maxDigits) {\n\t            pattern += '.';\n\t            for (var a = 0; a < minDigits; a++) {\n\t                pattern += '0';\n\t            }\n\t            if (minDigits < maxDigits) {\n\t                var diff = maxDigits - minDigits;\n\t                for (var b = 0; b < diff; b++) {\n\t                    pattern += '#';\n\t                }\n\t            }\n\t            return pattern;\n\t        }\n\t        function minimumIntegerPattern(pattern, digits) {\n\t            var temp = pattern.split('.');\n\t            var integer = '';\n\t            for (var x = 0; x < digits; x++) {\n\t                integer += '0';\n\t            }\n\t            return temp[1] ? (integer + '.' + temp[1]) : integer;\n\t        }\n\t        function groupingPattern(pattern) {\n\t            var temp = pattern.split('.');\n\t            var integer = temp[0];\n\t            var no = 3 - integer.length % 3;\n\t            var hash = (no && no === 1) ? '#' : (no === 2 ? '##' : '');\n\t            integer = hash + integer;\n\t            pattern = '';\n\t            for (var x = integer.length - 1; x > 0; x = x - 3) {\n\t                pattern = ',' + integer[x - 2] + integer[x - 1] + integer[x] + pattern;\n\t            }\n\t            pattern = pattern.slice(1);\n\t            return temp[1] ? (pattern + '.' + temp[1]) : pattern;\n\t        }\n\t    })(IntlBase = exports.IntlBase || (exports.IntlBase = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(14), __webpack_require__(17), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, internationalization_1, intl_base_1, parser_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var errorText = {\n\t        'ms': 'minimumSignificantDigits',\n\t        'ls': 'maximumSignificantDigits',\n\t        'mf': 'minimumFractionDigits',\n\t        'lf': 'maximumFractionDigits',\n\t    };\n\t    var integerError = 'minimumIntegerDigits';\n\t    var percentSign = 'percentSign';\n\t    var minusSign = 'minusSign';\n\t    var spaceRegex = /\\s/;\n\t    var mapper = ['infinity', 'nan', 'group', 'decimal'];\n\t    var infinity = 'infinity';\n\t    var nan = 'nan';\n\t    var NumberFormat = (function () {\n\t        function NumberFormat() {\n\t        }\n\t        NumberFormat.numberFormatter = function (culture, option, cldr) {\n\t            var _this = this;\n\t            var fOptions = util_1.extend({}, option);\n\t            var cOptions = {};\n\t            var dOptions = {};\n\t            var symbolPattern;\n\t            var dependable = intl_base_1.IntlBase.getDependables(cldr, culture, true);\n\t            dOptions.numberMapper = parser_base_1.ParserBase.getNumberMapper(dependable.parserObject, parser_base_1.ParserBase.getNumberingSystem(cldr), true);\n\t            dOptions.currencySymbol = intl_base_1.IntlBase.getCurrencySymbol(dependable.numericObject, fOptions.currency || internationalization_1.defaultCurrencyCode);\n\t            dOptions.percentSymbol = dOptions.numberMapper.numberSymbols[percentSign];\n\t            dOptions.minusSymbol = dOptions.numberMapper.numberSymbols[minusSign];\n\t            var symbols = dOptions.numberMapper.numberSymbols;\n\t            if ((option.format) && !(intl_base_1.IntlBase.formatRegex.test(option.format))) {\n\t                cOptions = intl_base_1.IntlBase.customFormat(option.format, dOptions, dependable.numericObject);\n\t            }\n\t            else {\n\t                util_1.extend(fOptions, intl_base_1.IntlBase.getProperNumericSkeleton(option.format || 'N'));\n\t                fOptions.isCurrency = fOptions.type === 'currency';\n\t                fOptions.isPercent = fOptions.type === 'percent';\n\t                symbolPattern = intl_base_1.IntlBase.getSymbolPattern(fOptions.type, dOptions.numberMapper.numberSystem, dependable.numericObject, fOptions.isAccount);\n\t                fOptions.groupOne = this.checkValueRange(fOptions.maximumSignificantDigits, fOptions.minimumSignificantDigits, true);\n\t                this.checkValueRange(fOptions.maximumFractionDigits, fOptions.minimumFractionDigits, false, true);\n\t                if (!util_1.isUndefined(fOptions.fractionDigits)) {\n\t                    fOptions.minimumFractionDigits = fOptions.maximumFractionDigits = fOptions.fractionDigits;\n\t                }\n\t                if (util_1.isUndefined(fOptions.useGrouping)) {\n\t                    fOptions.useGrouping = true;\n\t                }\n\t                if (fOptions.isCurrency) {\n\t                    symbolPattern = symbolPattern.replace(/\\u00A4/g, intl_base_1.IntlBase.defaultCurrency);\n\t                }\n\t                var split = symbolPattern.split(';');\n\t                cOptions.nData = intl_base_1.IntlBase.getFormatData(split[1] || '-' + split[0], true, dOptions.currencySymbol);\n\t                cOptions.pData = intl_base_1.IntlBase.getFormatData(split[0], false, dOptions.currencySymbol);\n\t                if (fOptions.useGrouping) {\n\t                    fOptions.groupSeparator = symbols[mapper[2]];\n\t                    fOptions.groupData = this.getGroupingDetails(split[0]);\n\t                }\n\t                var minFrac = util_1.isUndefined(fOptions.minimumFractionDigits);\n\t                if (minFrac) {\n\t                    fOptions.minimumFractionDigits = cOptions.nData.minimumFraction;\n\t                }\n\t                if (util_1.isUndefined(fOptions.maximumFractionDigits)) {\n\t                    var mval = cOptions.nData.maximumFraction;\n\t                    fOptions.maximumFractionDigits = util_1.isUndefined(mval) && fOptions.isPercent ? 0 : mval;\n\t                }\n\t                var mfrac = fOptions.minimumFractionDigits;\n\t                var lfrac = fOptions.maximumFractionDigits;\n\t                if (!util_1.isUndefined(mfrac) && !util_1.isUndefined(lfrac)) {\n\t                    if (mfrac > lfrac) {\n\t                        fOptions.maximumFractionDigits = mfrac;\n\t                    }\n\t                }\n\t            }\n\t            util_1.extend(cOptions.nData, fOptions);\n\t            util_1.extend(cOptions.pData, fOptions);\n\t            return function (value) {\n\t                if (isNaN(value)) {\n\t                    return symbols[mapper[1]];\n\t                }\n\t                else if (!isFinite(value)) {\n\t                    return symbols[mapper[0]];\n\t                }\n\t                return _this.intNumberFormatter(value, cOptions, dOptions);\n\t            };\n\t        };\n\t        NumberFormat.getGroupingDetails = function (pattern) {\n\t            var ret = {};\n\t            var match = pattern.match(intl_base_1.IntlBase.negativeDataRegex);\n\t            if (match && match[4]) {\n\t                var pattern_1 = match[4];\n\t                var p = pattern_1.lastIndexOf(',');\n\t                if (p !== -1) {\n\t                    var temp = pattern_1.split('.')[0];\n\t                    ret.primary = (temp.length - p) - 1;\n\t                    var s = pattern_1.lastIndexOf(',', p - 1);\n\t                    if (s !== -1) {\n\t                        ret.secondary = p - 1 - s;\n\t                    }\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t        NumberFormat.checkValueRange = function (val1, val2, checkbothExist, isFraction) {\n\t            var decide = isFraction ? 'f' : 's';\n\t            var dint = 0;\n\t            var str1 = errorText['l' + decide];\n\t            var str2 = errorText['m' + decide];\n\t            if (!util_1.isUndefined(val1)) {\n\t                this.checkRange(val1, str1, isFraction);\n\t                dint++;\n\t            }\n\t            if (!util_1.isUndefined(val2)) {\n\t                this.checkRange(val2, str2, isFraction);\n\t                dint++;\n\t            }\n\t            if (dint === 2) {\n\t                if (val1 < val2) {\n\t                    util_1.throwError(str2 + 'specified must be less than the' + str1);\n\t                }\n\t                else {\n\t                    return true;\n\t                }\n\t            }\n\t            else if (checkbothExist && dint === 1) {\n\t                util_1.throwError('Both' + str2 + 'and' + str2 + 'must be present');\n\t            }\n\t            return false;\n\t        };\n\t        NumberFormat.checkRange = function (val, text, isFraction) {\n\t            var range = isFraction ? [0, 20] : [1, 21];\n\t            if (val < range[0] || val > range[1]) {\n\t                util_1.throwError(text + 'value must be within the range' + range[0] + 'to' + range[1]);\n\t            }\n\t        };\n\t        NumberFormat.intNumberFormatter = function (value, fOptions, dOptions) {\n\t            var curData;\n\t            if (value < 0) {\n\t                value = value * -1;\n\t                curData = fOptions.nData;\n\t            }\n\t            else if (value === 0) {\n\t                curData = fOptions.zeroData || fOptions.pData;\n\t            }\n\t            else {\n\t                curData = fOptions.pData;\n\t            }\n\t            var fValue = '';\n\t            if (curData.isPercent) {\n\t                value = value * 100;\n\t            }\n\t            if (curData.groupOne) {\n\t                fValue = this.processSignificantDigits(value, curData.minimumSignificantDigits, curData.maximumSignificantDigits);\n\t            }\n\t            else {\n\t                fValue = this.processFraction(value, curData.minimumFractionDigits, curData.maximumFractionDigits);\n\t                if (curData.minimumIntegerDigits) {\n\t                    fValue = this.processMinimumIntegers(fValue, curData.minimumIntegerDigits);\n\t                }\n\t            }\n\t            fValue = fValue.replace('.', dOptions.numberMapper.numberSymbols[mapper[3]]);\n\t            if (curData.useGrouping) {\n\t                fValue = this.groupNumbers(fValue, curData.groupData.primary, curData.groupSeparator || ',', dOptions.numberMapper.numberSymbols[mapper[3]] || '.', curData.groupData.secondary);\n\t            }\n\t            fValue = parser_base_1.ParserBase.convertValueParts(fValue, intl_base_1.IntlBase.latnParseRegex, dOptions.numberMapper.mapper);\n\t            return curData.nlead + fValue + curData.nend;\n\t        };\n\t        NumberFormat.processSignificantDigits = function (value, min, max) {\n\t            var temp = value + '';\n\t            var tn;\n\t            var length = temp.length;\n\t            if (length < min) {\n\t                return value.toPrecision(min);\n\t            }\n\t            else {\n\t                temp = value.toPrecision(max);\n\t                tn = +temp;\n\t                return tn + '';\n\t            }\n\t        };\n\t        NumberFormat.groupNumbers = function (val, level1, sep, decimalSymbol, level2) {\n\t            var flag = !util_1.isNullOrUndefined(level2) && level2 !== 0;\n\t            var split = val.split(decimalSymbol);\n\t            var prefix = split[0];\n\t            var length = prefix.length;\n\t            var str = '';\n\t            while (length > level1) {\n\t                str = prefix.slice(length - level1, length) + (str.length ?\n\t                    (sep + str) : '');\n\t                length -= level1;\n\t                if (flag) {\n\t                    level1 = level2;\n\t                    flag = false;\n\t                }\n\t            }\n\t            split[0] = prefix.slice(0, length) + (str.length ? sep : '') + str;\n\t            return split.join(decimalSymbol);\n\t        };\n\t        NumberFormat.processFraction = function (value, min, max) {\n\t            var temp = (value + '').split('.')[1];\n\t            var length = temp ? temp.length : 0;\n\t            if (min && length < min) {\n\t                var ret = '';\n\t                if (length === 0) {\n\t                    ret = value.toFixed(min);\n\t                }\n\t                else {\n\t                    ret += value;\n\t                    for (var j = 0; j < min - length; j++) {\n\t                        ret += '0';\n\t                    }\n\t                    return ret;\n\t                }\n\t                return value.toFixed(min);\n\t            }\n\t            else if (!util_1.isNullOrUndefined(max) && (length > max || max === 0)) {\n\t                return value.toFixed(max);\n\t            }\n\t            return value + '';\n\t        };\n\t        NumberFormat.processMinimumIntegers = function (value, min) {\n\t            var temp = value.split('.');\n\t            var lead = temp[0];\n\t            var len = lead.length;\n\t            if (len < min) {\n\t                for (var i = 0; i < min - len; i++) {\n\t                    lead = '0' + lead;\n\t                }\n\t                temp[0] = lead;\n\t            }\n\t            return temp.join('.');\n\t        };\n\t        return NumberFormat;\n\t    }());\n\t    exports.NumberFormat = NumberFormat;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(16), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, intl_base_1, parser_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var number = 'numbers';\n\t    var defNoSystem = 'defaultNumberingSystem';\n\t    var noSystem = 'numberingSystem';\n\t    var standalone = 'stand-alone';\n\t    var curWeekDay = 'curWeekDay';\n\t    var latnRegex = /^[0-9]*$/;\n\t    var abbreviateRegex = /\\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|ccc/;\n\t    var timeSetter = {\n\t        minute: 'setMinutes',\n\t        hour: 'setHours',\n\t        second: 'setSeconds',\n\t        day: 'setDate',\n\t        month: 'setMonth'\n\t    };\n\t    var month = 'months';\n\t    var datePartMatcher = {\n\t        'M': 'month',\n\t        'd': 'day',\n\t        'E': 'weekday',\n\t        'c': 'weekday',\n\t        'y': 'year',\n\t        'm': 'minute',\n\t        'h': 'hour',\n\t        'H': 'hour',\n\t        's': 'second',\n\t        'L': 'month',\n\t        'a': 'designator',\n\t        'z': 'timeZone',\n\t        'Z': 'timeZone',\n\t        'G': 'era'\n\t    };\n\t    var DateParser = (function () {\n\t        function DateParser() {\n\t        }\n\t        DateParser.dateParser = function (culture, option, cldr) {\n\t            var _this = this;\n\t            var dependable = intl_base_1.IntlBase.getDependables(cldr, culture);\n\t            var numOptions = parser_base_1.ParserBase.getCurrentNumericOptions(dependable.parserObject, parser_base_1.ParserBase.getNumberingSystem(cldr));\n\t            var parseOptions = {};\n\t            var resPattern = option.format || intl_base_1.IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type);\n\t            var regexString = '';\n\t            var hourOnly;\n\t            if (util_1.isUndefined(resPattern)) {\n\t                util_1.throwError('Format options or type given must be invalid');\n\t            }\n\t            else {\n\t                parseOptions = { pattern: resPattern, evalposition: {} };\n\t                var patternMatch = resPattern.match(intl_base_1.IntlBase.dateParseRegex) || [];\n\t                var length_1 = patternMatch.length;\n\t                var nRegx = numOptions.numericRegex;\n\t                for (var i = 0; i < length_1; i++) {\n\t                    var str = patternMatch[i];\n\t                    var len = str.length;\n\t                    var char = (str[0] === 'K') ? 'h' : str[0];\n\t                    var isNumber = void 0;\n\t                    var canUpdate = void 0;\n\t                    var charKey = datePartMatcher[char];\n\t                    var optional = (len === 2) ? '' : '?';\n\t                    switch (char) {\n\t                        case 'E':\n\t                        case 'c':\n\t                            var weekObject = parser_base_1.ParserBase.reverseObject(dependable.dateObject[intl_base_1.IntlBase.days][standalone][intl_base_1.IntlBase.monthIndex[len]]);\n\t                            regexString += '(' + Object.keys(weekObject).join('|') + ')';\n\t                            break;\n\t                        case 'M':\n\t                        case 'L':\n\t                        case 'd':\n\t                        case 'm':\n\t                        case 's':\n\t                        case 'h':\n\t                        case 'H':\n\t                            canUpdate = true;\n\t                            if ((char === 'M' || char === 'L') && len > 2) {\n\t                                parseOptions[charKey] = parser_base_1.ParserBase.reverseObject(dependable.dateObject[month][standalone][intl_base_1.IntlBase.monthIndex[len]]);\n\t                                regexString += '(' + Object.keys(parseOptions[charKey]).join('|') + ')';\n\t                            }\n\t                            else {\n\t                                isNumber = true;\n\t                                regexString += '(' + nRegx + nRegx + optional + ')';\n\t                            }\n\t                            if (char === 'h') {\n\t                                parseOptions.hour12 = true;\n\t                            }\n\t                            break;\n\t                        case 'y':\n\t                            canUpdate = isNumber = true;\n\t                            if (len === 2) {\n\t                                regexString += '(' + nRegx + nRegx + ')';\n\t                            }\n\t                            else {\n\t                                regexString += '(' + nRegx + '{' + len + ',})';\n\t                            }\n\t                            break;\n\t                        case 'a':\n\t                            canUpdate = true;\n\t                            parseOptions[charKey] = parser_base_1.ParserBase.reverseObject(util_1.getValue('dayPeriods.format.wide', dependable.dateObject));\n\t                            regexString += '(' + Object.keys(parseOptions[charKey]).join('|') + ')';\n\t                            break;\n\t                        case 'G':\n\t                            canUpdate = true;\n\t                            var eText = (len <= 3) ? 'eraAbbr' : (len === 4) ? 'eraNames' : 'eraNarrow';\n\t                            parseOptions[charKey] = parser_base_1.ParserBase.reverseObject(util_1.getValue('eras.' + eText, dependable.dateObject));\n\t                            regexString += '(' + Object.keys(parseOptions[charKey]).join('|') + '?)';\n\t                            break;\n\t                        case 'z':\n\t                            var tval = new Date().getTimezoneOffset();\n\t                            canUpdate = (tval !== 0);\n\t                            parseOptions[charKey] = util_1.getValue('dates.timeZoneNames', dependable.parserObject);\n\t                            var tzone = parseOptions[charKey];\n\t                            hourOnly = (len < 4);\n\t                            var hpattern = hourOnly ? '+H;-H' : tzone.hourFormat;\n\t                            regexString += '(' + this.parseTimeZoneRegx(hpattern, tzone, nRegx) + ')?';\n\t                            break;\n\t                        case '\\'':\n\t                            var iString = str.replace(/\\'/g, '');\n\t                            regexString += '(' + iString + ')?';\n\t                            break;\n\t                        default:\n\t                            regexString += '(.)?';\n\t                            break;\n\t                    }\n\t                    if (canUpdate) {\n\t                        parseOptions.evalposition[charKey] = { isNumber: isNumber, pos: i + 1, hourOnly: hourOnly };\n\t                    }\n\t                    if (i === length_1 - 1 && !util_1.isNullOrUndefined(regexString)) {\n\t                        parseOptions.parserRegex = new RegExp('^' + regexString + '$');\n\t                    }\n\t                }\n\t            }\n\t            return function (value) {\n\t                var parsedDateParts = _this.internalDateParse(value, parseOptions, numOptions);\n\t                if (util_1.isNullOrUndefined(parsedDateParts) || !Object.keys(parsedDateParts).length) {\n\t                    return null;\n\t                }\n\t                return _this.getDateObject(parsedDateParts);\n\t            };\n\t        };\n\t        DateParser.getDateObject = function (options, value) {\n\t            var res = value || new Date();\n\t            res.setMilliseconds(0);\n\t            var tKeys = ['hour', 'minute', 'second', 'month', 'day'];\n\t            var y = options.year;\n\t            var desig = options.designator;\n\t            var tzone = options.timeZone;\n\t            if (!util_1.isUndefined(y)) {\n\t                var len = (y + '').length;\n\t                if (len <= 2) {\n\t                    var century = Math.floor(res.getFullYear() / 100) * 100;\n\t                    y += century;\n\t                }\n\t                res.setFullYear(y);\n\t            }\n\t            for (var _i = 0, tKeys_1 = tKeys; _i < tKeys_1.length; _i++) {\n\t                var key = tKeys_1[_i];\n\t                var tValue = options[key];\n\t                if (!util_1.isUndefined(tValue)) {\n\t                    if (key === 'month') {\n\t                        tValue -= 1;\n\t                        if (tValue < 0 || tValue > 11) {\n\t                            return new Date('invalid');\n\t                        }\n\t                        var pDate = res.getDate();\n\t                        res.setDate(1);\n\t                        res[timeSetter[key]](tValue);\n\t                        var lDate = new Date(res.getFullYear(), tValue + 1, 0).getDate();\n\t                        res.setDate(pDate < lDate ? pDate : lDate);\n\t                    }\n\t                    else {\n\t                        if (key === 'day') {\n\t                            var lastDay = new Date(res.getFullYear(), res.getMonth() + 1, 0).getDate();\n\t                            if ((tValue < 1 || tValue > lastDay)) {\n\t                                return null;\n\t                            }\n\t                        }\n\t                        res[timeSetter[key]](tValue);\n\t                    }\n\t                }\n\t            }\n\t            if (!util_1.isUndefined(desig)) {\n\t                var hour = res.getHours();\n\t                if (desig === 'pm') {\n\t                    res.setHours(hour + (hour === 12 ? 0 : 12));\n\t                }\n\t                else if (hour === 12) {\n\t                    res.setHours(0);\n\t                }\n\t            }\n\t            if (!util_1.isUndefined(tzone)) {\n\t                var tzValue = tzone - res.getTimezoneOffset();\n\t                if (tzValue !== 0) {\n\t                    res.setMinutes(res.getMinutes() + tzValue);\n\t                }\n\t            }\n\t            return res;\n\t        };\n\t        DateParser.internalDateParse = function (value, parseOptions, num) {\n\t            var matches = value.match(parseOptions.parserRegex);\n\t            var retOptions = { 'hour': 0, 'minute': 0, 'second': 0 };\n\t            var nRegx = num.numericRegex;\n\t            if (util_1.isNullOrUndefined(matches)) {\n\t                return null;\n\t            }\n\t            else {\n\t                var props = Object.keys(parseOptions.evalposition);\n\t                for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n\t                    var prop = props_1[_i];\n\t                    var curObject = parseOptions.evalposition[prop];\n\t                    var matchString = matches[curObject.pos];\n\t                    if (curObject.isNumber) {\n\t                        retOptions[prop] = this.internalNumberParser(matchString, num);\n\t                    }\n\t                    else {\n\t                        if (prop === 'timeZone' && !util_1.isUndefined(matchString)) {\n\t                            var pos = curObject.pos;\n\t                            var val = void 0;\n\t                            var tmatch = matches[pos + 1];\n\t                            var flag = !util_1.isUndefined(tmatch);\n\t                            if (curObject.hourOnly) {\n\t                                val = this.getZoneValue(flag, tmatch, matches[pos + 4], num) * 60;\n\t                            }\n\t                            else {\n\t                                val = this.getZoneValue(flag, tmatch, matches[pos + 7], num) * 60;\n\t                                val += this.getZoneValue(flag, matches[pos + 4], matches[pos + 10], num);\n\t                            }\n\t                            if (!util_1.isNullOrUndefined(val)) {\n\t                                retOptions[prop] = val;\n\t                            }\n\t                        }\n\t                        else {\n\t                            retOptions[prop] = parseOptions[prop][matchString];\n\t                        }\n\t                    }\n\t                }\n\t                if (parseOptions.hour12) {\n\t                    retOptions.hour12 = true;\n\t                }\n\t            }\n\t            return retOptions;\n\t        };\n\t        DateParser.internalNumberParser = function (value, option) {\n\t            value = parser_base_1.ParserBase.convertValueParts(value, option.numberParseRegex, option.numericPair);\n\t            if (latnRegex.test(value)) {\n\t                return +value;\n\t            }\n\t            return null;\n\t        };\n\t        DateParser.parseTimeZoneRegx = function (hourFormat, tZone, nRegex) {\n\t            var pattern = tZone.gmtFormat;\n\t            var ret;\n\t            var result;\n\t            var cRegex = '(' + nRegex + ')' + '(' + nRegex + ')';\n\t            var splitStr;\n\t            ret = hourFormat.replace('+', '\\\\+');\n\t            if (hourFormat.indexOf('HH') !== -1) {\n\t                ret = ret.replace(/HH|mm/g, '(' + cRegex + ')');\n\t            }\n\t            else {\n\t                ret = ret.replace(/H|m/g, '(' + cRegex + '?)');\n\t            }\n\t            splitStr = (ret.split(';').map(function (str) {\n\t                return pattern.replace('{0}', str);\n\t            }));\n\t            ret = splitStr.join('|') + '|' + tZone.gmtZeroFormat;\n\t            return ret;\n\t        };\n\t        DateParser.getZoneValue = function (flag, val1, val2, num) {\n\t            var value = this.internalNumberParser(flag ? val1 : val2, num);\n\t            if (flag) {\n\t                return -value;\n\t            }\n\t            return value;\n\t        };\n\t        return DateParser;\n\t    }());\n\t    exports.DateParser = DateParser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(16), __webpack_require__(17)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, parser_base_1, intl_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var formatRegex = /(^[ncpa]{1})([0-1]?[0-9]|20)?$/i;\n\t    var parseRegex = /^([^0-9]*)(([0-9,]*[0-9]+)(\\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/;\n\t    var groupRegex = /,/g;\n\t    var latnDecimalRegex = /^[0-9]*(\\.[0-9]+)?$/;\n\t    var keys = ['minusSign', 'infinity'];\n\t    var NumberParser = (function () {\n\t        function NumberParser() {\n\t        }\n\t        NumberParser.numberParser = function (culture, option, cldr) {\n\t            var _this = this;\n\t            var dependable = intl_base_1.IntlBase.getDependables(cldr, culture, true);\n\t            var parseOptions = { custom: true };\n\t            var numOptions;\n\t            if ((intl_base_1.IntlBase.formatRegex.test(option.format)) || !(option.format)) {\n\t                util_1.extend(parseOptions, intl_base_1.IntlBase.getProperNumericSkeleton(option.format || 'N'));\n\t                parseOptions.custom = false;\n\t            }\n\t            else {\n\t                util_1.extend(parseOptions, intl_base_1.IntlBase.customFormat(option.format, null, null));\n\t            }\n\t            numOptions = parser_base_1.ParserBase.getCurrentNumericOptions(dependable.parserObject, parser_base_1.ParserBase.getNumberingSystem(cldr), true);\n\t            parseOptions.symbolRegex = parser_base_1.ParserBase.getSymbolRegex(Object.keys(numOptions.symbolMatch));\n\t            parseOptions.infinity = numOptions.symbolNumberSystem[keys[1]];\n\t            var symbolpattern = intl_base_1.IntlBase.getSymbolPattern(parseOptions.type, numOptions.numberSystem, dependable.numericObject, parseOptions.isAccount);\n\t            if (symbolpattern) {\n\t                symbolpattern = symbolpattern.replace(/\\u00A4/g, intl_base_1.IntlBase.defaultCurrency);\n\t                var split = symbolpattern.split(';');\n\t                parseOptions.nData = intl_base_1.IntlBase.getFormatData(split[1] || '-' + split[0], true, '');\n\t                parseOptions.pData = intl_base_1.IntlBase.getFormatData(split[0], true, '');\n\t            }\n\t            return function (value) {\n\t                return _this.getParsedNumber(value, parseOptions, numOptions);\n\t            };\n\t        };\n\t        NumberParser.getParsedNumber = function (value, options, numOptions) {\n\t            var isNegative;\n\t            var isPercent;\n\t            var tempValue;\n\t            var lead;\n\t            var end;\n\t            var ret;\n\t            if (value.indexOf(options.infinity) !== -1) {\n\t                return Infinity;\n\t            }\n\t            else {\n\t                value = parser_base_1.ParserBase.convertValueParts(value, options.symbolRegex, numOptions.symbolMatch);\n\t                value = parser_base_1.ParserBase.convertValueParts(value, numOptions.numberParseRegex, numOptions.numericPair);\n\t                if (value.indexOf('.') === 0) {\n\t                    value = '0' + value;\n\t                }\n\t                var matches = value.match(parseRegex);\n\t                if (util_1.isNullOrUndefined(matches)) {\n\t                    return NaN;\n\t                }\n\t                lead = matches[1];\n\t                tempValue = matches[2];\n\t                var exponent = matches[5];\n\t                end = matches[6];\n\t                isNegative = options.custom ? ((lead === options.nData.nlead) && (end === options.nData.nend)) :\n\t                    ((lead.indexOf(options.nData.nlead) !== -1) && (end.indexOf(options.nData.nend) !== -1));\n\t                isPercent = isNegative ?\n\t                    options.nData.isPercent :\n\t                    options.pData.isPercent;\n\t                tempValue = tempValue.replace(groupRegex, '');\n\t                if (exponent) {\n\t                    tempValue += exponent;\n\t                }\n\t                ret = +tempValue;\n\t                if (options.type === 'percent' || isPercent) {\n\t                    ret = ret / 100;\n\t                }\n\t                if (options.custom || options.fractionDigits) {\n\t                    ret = parseFloat(ret.toFixed(options.custom ?\n\t                        (isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits) : options.fractionDigits));\n\t                }\n\t                if (isNegative) {\n\t                    ret *= -1;\n\t                }\n\t                return ret;\n\t            }\n\t        };\n\t        return NumberParser;\n\t    }());\n\t    exports.NumberParser = NumberParser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(8), __webpack_require__(5), __webpack_require__(9), __webpack_require__(1), __webpack_require__(13), __webpack_require__(5), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, base_1, browser_1, dom_1, notify_property_change_1, event_handler_1, child_property_1, dom_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var defaultPosition = { left: 0, top: 0, bottom: 0, right: 0 };\n\t    var positionProp = ['offsetLeft', 'offsetTop'];\n\t    var axisMapper = ['x', 'y'];\n\t    var axisValueMapper = ['left', 'top'];\n\t    var Position = (function (_super) {\n\t        __extends(Position, _super);\n\t        function Position() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Position;\n\t    }(child_property_1.ChildProperty));\n\t    __decorate([\n\t        notify_property_change_1.Property(0)\n\t    ], Position.prototype, \"left\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(0)\n\t    ], Position.prototype, \"top\", void 0);\n\t    exports.Position = Position;\n\t    var Draggable = Draggable_1 = (function (_super) {\n\t        __extends(Draggable, _super);\n\t        function Draggable(element, options) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.dragLimit = Draggable_1.getDefaultPosition();\n\t            _this.borderWidth = Draggable_1.getDefaultPosition();\n\t            _this.padding = Draggable_1.getDefaultPosition();\n\t            _this.diffX = 0;\n\t            _this.diffY = 0;\n\t            _this.droppables = {};\n\t            _this.bind();\n\t            return _this;\n\t        }\n\t        Draggable.prototype.bind = function () {\n\t            this.toggleEvents();\n\t            if (browser_1.Browser.isIE) {\n\t                dom_2.addClass([this.element], 'e-block-touch');\n\t            }\n\t            this.droppables[this.scope] = {};\n\t        };\n\t        Draggable.getDefaultPosition = function () {\n\t            return util_1.extend({}, defaultPosition);\n\t        };\n\t        Draggable.prototype.toggleEvents = function (isUnWire) {\n\t            var ele;\n\t            if (!util_1.isUndefined(this.handle)) {\n\t                ele = dom_2.select(this.handle, this.element);\n\t            }\n\t            if (isUnWire) {\n\t                event_handler_1.EventHandler.remove(ele || this.element, browser_1.Browser.touchStartEvent, this.initialize);\n\t            }\n\t            else {\n\t                event_handler_1.EventHandler.add(ele || this.element, browser_1.Browser.touchStartEvent, this.initialize, this);\n\t            }\n\t        };\n\t        Draggable.prototype.initialize = function (evt) {\n\t            this.target = evt.currentTarget;\n\t            if (this.preventDefault && !util_1.isUndefined(evt.changedTouches)) {\n\t                evt.preventDefault();\n\t            }\n\t            if (this.abort) {\n\t                if (!util_1.isNullOrUndefined(dom_2.closest(evt.target, this.abort))) {\n\t                    return;\n\t                }\n\t            }\n\t            this.element.setAttribute('aria-grabbed', 'true');\n\t            var intCoord = this.getCoordinates(evt);\n\t            this.initialPosition = { x: intCoord.pageX, y: intCoord.pageY };\n\t            if (!this.clone) {\n\t                var pos = this.element.getBoundingClientRect();\n\t                this.relativeXPosition = intCoord.pageX - pos.left;\n\t                this.relativeYPosition = intCoord.pageY - pos.top;\n\t            }\n\t            event_handler_1.EventHandler.add(document, browser_1.Browser.touchMoveEvent, this.intDragStart, this);\n\t            event_handler_1.EventHandler.add(document, browser_1.Browser.touchEndEvent, this.intDestroy, this);\n\t            this.toggleEvents(true);\n\t            document.body.classList.add('e-prevent-select');\n\t            event_handler_1.EventHandler.trigger(document.documentElement, browser_1.Browser.touchStartEvent, evt);\n\t        };\n\t        Draggable.prototype.intDragStart = function (evt) {\n\t            var isChangeTouch = !util_1.isUndefined(evt.changedTouches);\n\t            if (isChangeTouch && (evt.changedTouches.length !== 1)) {\n\t                return;\n\t            }\n\t            var intCordinate = this.getCoordinates(evt);\n\t            var pos;\n\t            var styleProp = getComputedStyle(this.element);\n\t            this.margin = {\n\t                left: parseInt(styleProp.marginLeft, 10),\n\t                top: parseInt(styleProp.marginTop, 10),\n\t                right: parseInt(styleProp.marginRight, 10),\n\t                bottom: parseInt(styleProp.marginBottom, 10),\n\t            };\n\t            var element = this.element;\n\t            if (this.clone && this.dragTarget) {\n\t                var intClosest = dom_2.closest(evt.target, this.dragTarget);\n\t                if (!util_1.isNullOrUndefined(intClosest)) {\n\t                    element = intClosest;\n\t                }\n\t            }\n\t            this.offset = this.calculateParentPosition(element);\n\t            this.position = this.getMousePosition(evt);\n\t            var x = this.initialPosition.x - intCordinate.pageX;\n\t            var y = this.initialPosition.y - intCordinate.pageY;\n\t            var distance = Math.sqrt((x * x) + (y * y));\n\t            if (distance >= this.distance) {\n\t                var ele = this.getHelperElement(evt);\n\t                if (!ele || util_1.isNullOrUndefined(ele)) {\n\t                    return;\n\t                }\n\t                var dragTargetElement = this.helperElement = ele;\n\t                this.parentClientRect = this.calculateParentPosition(dragTargetElement.offsetParent);\n\t                if (this.dragStart) {\n\t                    var curTarget = this.getProperTargetElement(evt);\n\t                    this.trigger('dragStart', { event: evt, element: element, target: curTarget });\n\t                }\n\t                if (this.dragArea) {\n\t                    this.setDragArea();\n\t                }\n\t                else {\n\t                    this.dragLimit = { left: 0, right: 0, bottom: 0, top: 0 };\n\t                    this.borderWidth = { top: 0, left: 0 };\n\t                }\n\t                pos = { left: this.position.left - this.parentClientRect.left, top: this.position.top - this.parentClientRect.top };\n\t                if (this.clone && !this.enableTailMode) {\n\t                    this.diffX = this.position.left - this.offset.left;\n\t                    this.diffY = this.position.top - this.offset.top;\n\t                }\n\t                var posValue = this.getProcessedPositionValue({ top: (pos.top - this.diffY) + 'px',\n\t                    left: (pos.left - this.diffX) + 'px' });\n\t                dom_2.setStyleAttribute(dragTargetElement, {\n\t                    position: 'absolute', top: posValue.top, left: posValue.left\n\t                });\n\t                event_handler_1.EventHandler.remove(document, browser_1.Browser.touchMoveEvent, this.intDragStart);\n\t                event_handler_1.EventHandler.remove(document, browser_1.Browser.touchEndEvent, this.intDestroy);\n\t                if (dom_1.isVisible(dragTargetElement)) {\n\t                    event_handler_1.EventHandler.add(document, browser_1.Browser.touchMoveEvent, this.intDrag, this);\n\t                    event_handler_1.EventHandler.add(document, browser_1.Browser.touchEndEvent, this.intDragStop, this);\n\t                    this.setGlobalDroppables(false, this.element, dragTargetElement);\n\t                }\n\t                else {\n\t                    document.body.classList.remove('e-prevent-select');\n\t                }\n\t            }\n\t        };\n\t        Draggable.prototype.getProcessedPositionValue = function (value) {\n\t            if (this.axis) {\n\t                if (this.axis === 'x') {\n\t                    value.top = '0px';\n\t                }\n\t                else if (this.axis === 'y') {\n\t                    value.left = '0px';\n\t                }\n\t            }\n\t            if (this.queryPositionInfo) {\n\t                return this.queryPositionInfo(value);\n\t            }\n\t            return value;\n\t        };\n\t        Draggable.prototype.calculateParentPosition = function (ele) {\n\t            if (util_1.isNullOrUndefined(ele)) {\n\t                return { left: 0, top: 0 };\n\t            }\n\t            var rect = ele.getBoundingClientRect();\n\t            var style = getComputedStyle(ele);\n\t            return {\n\t                left: (rect.left + window.pageXOffset) - parseInt(style.marginLeft, 10),\n\t                top: (rect.top + window.pageYOffset) - parseInt(style.marginTop, 10)\n\t            };\n\t        };\n\t        Draggable.prototype.intDrag = function (evt) {\n\t            if (!util_1.isUndefined(evt.changedTouches) && (evt.changedTouches.length !== 1)) {\n\t                return;\n\t            }\n\t            var left;\n\t            var top;\n\t            this.position = this.getMousePosition(evt);\n\t            var docHeight = this.getDocumentWidthHeight('Height');\n\t            if (docHeight < this.position.top) {\n\t                this.position.top = docHeight;\n\t            }\n\t            var docWidth = this.getDocumentWidthHeight('Width');\n\t            if (docWidth < this.position.left) {\n\t                this.position.left = docWidth;\n\t            }\n\t            if (this.drag) {\n\t                var curTarget = this.getProperTargetElement(evt);\n\t                this.trigger('drag', { event: evt, element: this.element, target: curTarget });\n\t            }\n\t            var eleObj = this.checkTargetElement(evt);\n\t            if (eleObj.target && eleObj.instance) {\n\t                eleObj.instance.intOver(evt, eleObj.target);\n\t                eleObj.instance.dragData[this.scope] = this.droppables[this.scope];\n\t                this.hoverObject = eleObj;\n\t            }\n\t            else if (this.hoverObject) {\n\t                this.hoverObject.instance.intOut(evt, eleObj.target);\n\t                this.hoverObject.instance.dragData[this.scope] = null;\n\t                this.hoverObject = null;\n\t            }\n\t            var helperElement = this.droppables[this.scope].helper;\n\t            this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);\n\t            var tLeft = this.parentClientRect.left;\n\t            var tTop = this.parentClientRect.top;\n\t            var intCoord = this.getCoordinates(evt);\n\t            var pagex = intCoord.pageX;\n\t            var pagey = intCoord.pageY;\n\t            var dLeft = this.position.left - this.diffX;\n\t            var dTop = this.position.top - this.diffY;\n\t            if (this.dragArea) {\n\t                var styles = getComputedStyle(helperElement);\n\t                if (this.pageX !== pagex || this.skipDistanceCheck) {\n\t                    var helperWidth = helperElement.offsetWidth + (parseFloat(styles.marginLeft)\n\t                        + parseFloat(styles.marginRight));\n\t                    if (this.dragLimit.left > dLeft) {\n\t                        left = this.dragLimit.left;\n\t                    }\n\t                    else if (this.dragLimit.right < dLeft + helperWidth) {\n\t                        left = this.dragLimit.right - helperWidth;\n\t                    }\n\t                    else {\n\t                        left = dLeft;\n\t                    }\n\t                }\n\t                if (this.pageY !== pagey || this.skipDistanceCheck) {\n\t                    var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop)\n\t                        + parseFloat(styles.marginBottom));\n\t                    if (this.dragLimit.top > dTop) {\n\t                        top = this.dragLimit.top;\n\t                    }\n\t                    else if (this.dragLimit.bottom < dTop + helperHeight) {\n\t                        top = this.dragLimit.bottom - helperHeight;\n\t                    }\n\t                    else {\n\t                        top = dTop;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                left = dLeft;\n\t                top = dTop;\n\t            }\n\t            var iTop = tTop + this.borderWidth.top;\n\t            var iLeft = tLeft + this.borderWidth.left;\n\t            var dragValue = this.getProcessedPositionValue({ top: (top - iTop) + 'px', left: (left - iLeft) + 'px' });\n\t            dom_2.setStyleAttribute(helperElement, { left: dragValue.left, top: dragValue.top });\n\t            this.position.left = left;\n\t            this.position.top = top;\n\t            this.pageX = pagex;\n\t            this.pageY = pagey;\n\t        };\n\t        Draggable.prototype.getDocumentWidthHeight = function (str) {\n\t            var docBody = document.body;\n\t            var docEle = document.documentElement;\n\t            var returnValue = Math.max(docBody['scroll' + str], docEle['scroll' + str], docBody['offset' + str], docEle['offset' + str], docEle['client' + str]);\n\t            return returnValue;\n\t        };\n\t        Draggable.prototype.intDragStop = function (evt) {\n\t            if (!util_1.isUndefined(evt.changedTouches) && (evt.changedTouches.length !== 1)) {\n\t                return;\n\t            }\n\t            var type = ['touchend', 'pointerup', 'mouseup'];\n\t            if (type.indexOf(evt.type) !== -1) {\n\t                if (this.dragStop) {\n\t                    var curTarget = this.getProperTargetElement(evt);\n\t                    this.trigger('dragStop', { event: evt, element: this.element, target: curTarget, helper: this.helperElement });\n\t                }\n\t                this.intDestroy(evt);\n\t            }\n\t            else {\n\t                this.element.setAttribute('aria-grabbed', 'false');\n\t            }\n\t            var eleObj = this.checkTargetElement(evt);\n\t            if (eleObj.target && eleObj.instance) {\n\t                eleObj.instance.dragStopCalled = true;\n\t                eleObj.instance.dragData[this.scope] = this.droppables[this.scope];\n\t                eleObj.instance.intDrop(evt, eleObj.target);\n\t            }\n\t            this.setGlobalDroppables(true);\n\t            document.body.classList.remove('e-prevent-select');\n\t        };\n\t        Draggable.prototype.intDestroy = function (evt) {\n\t            this.toggleEvents();\n\t            document.body.classList.remove('e-prevent-select');\n\t            this.element.setAttribute('aria-grabbed', 'false');\n\t            event_handler_1.EventHandler.remove(document, browser_1.Browser.touchMoveEvent, this.intDragStart);\n\t            event_handler_1.EventHandler.remove(document, browser_1.Browser.touchEndEvent, this.intDragStop);\n\t            event_handler_1.EventHandler.remove(document, browser_1.Browser.touchEndEvent, this.intDestroy);\n\t            event_handler_1.EventHandler.remove(document, browser_1.Browser.touchMoveEvent, this.intDrag);\n\t        };\n\t        Draggable.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        Draggable.prototype.getModuleName = function () {\n\t            return 'draggable';\n\t        };\n\t        Draggable.prototype.setDragArea = function () {\n\t            var eleWidthBound;\n\t            var eleHeightBound;\n\t            var top = 0;\n\t            var left = 0;\n\t            var ele;\n\t            var type = typeof this.dragArea;\n\t            if (type === 'string') {\n\t                ele = dom_2.select(this.dragArea);\n\t            }\n\t            else {\n\t                ele = this.dragArea;\n\t            }\n\t            if (ele) {\n\t                var elementArea = ele.getBoundingClientRect();\n\t                eleWidthBound = elementArea.width ? elementArea.width : elementArea.right - elementArea.left;\n\t                eleHeightBound = elementArea.height ? elementArea.height : elementArea.bottom - elementArea.top;\n\t                var keys = ['Top', 'Left', 'Bottom', 'Right'];\n\t                var styles = getComputedStyle(ele);\n\t                for (var i = 0; i < keys.length; i++) {\n\t                    var key = keys[i];\n\t                    var tborder = styles['border' + key + 'Width'];\n\t                    var tpadding = styles['padding' + key];\n\t                    var lowerKey = key.toLowerCase();\n\t                    this.borderWidth[lowerKey] = isNaN(parseFloat(tborder)) ? 0 : parseFloat(tborder);\n\t                    this.padding[lowerKey] = isNaN(parseFloat(tpadding)) ? 0 : parseFloat(tpadding);\n\t                }\n\t                top = elementArea.top;\n\t                left = elementArea.left;\n\t                this.dragLimit.left = left + this.borderWidth.left + this.padding.left;\n\t                this.dragLimit.top = top + this.borderWidth.top + this.padding.top;\n\t                this.dragLimit.right = left + eleWidthBound - (this.borderWidth.right + this.padding.right);\n\t                this.dragLimit.bottom = top + eleHeightBound - (this.borderWidth.bottom + this.padding.bottom);\n\t            }\n\t        };\n\t        Draggable.prototype.getProperTargetElement = function (evt) {\n\t            var intCoord = this.getCoordinates(evt);\n\t            var ele;\n\t            var prevStyle = this.helperElement.style.display || '';\n\t            if (util_1.compareElementParent(evt.target, this.helperElement) || evt.type.indexOf('touch') !== -1) {\n\t                this.helperElement.style.display = 'none';\n\t                ele = document.elementFromPoint(intCoord.clientX, intCoord.clientY);\n\t                this.helperElement.style.display = prevStyle;\n\t            }\n\t            else {\n\t                ele = evt.target;\n\t            }\n\t            return ele;\n\t        };\n\t        Draggable.prototype.getMousePosition = function (evt) {\n\t            var intCoord = this.getCoordinates(evt);\n\t            var pageX = this.clone ? intCoord.pageX : intCoord.pageX - this.relativeXPosition;\n\t            var pageY = this.clone ? intCoord.pageY : intCoord.pageY - this.relativeYPosition;\n\t            return {\n\t                left: pageX - (this.margin.left + this.cursorAt.left),\n\t                top: pageY - (this.margin.top + this.cursorAt.top)\n\t            };\n\t        };\n\t        Draggable.prototype.getCoordinates = function (evt) {\n\t            if (evt.type.indexOf('touch') > -1) {\n\t                return evt.changedTouches[0];\n\t            }\n\t            return evt;\n\t        };\n\t        Draggable.prototype.getHelperElement = function (evt) {\n\t            var element;\n\t            if (this.clone) {\n\t                if (this.helper) {\n\t                    element = this.helper({ sender: evt, element: this.target });\n\t                }\n\t                else {\n\t                    element = dom_2.createElement('div', { className: 'e-drag-helper e-block-touch', innerHTML: 'Draggable' });\n\t                    document.body.appendChild(element);\n\t                }\n\t            }\n\t            else {\n\t                element = this.element;\n\t            }\n\t            return element;\n\t        };\n\t        Draggable.prototype.setGlobalDroppables = function (reset, drag, helper) {\n\t            this.droppables[this.scope] = reset ? null : {\n\t                draggable: drag,\n\t                helper: helper,\n\t                draggedElement: this.element\n\t            };\n\t        };\n\t        Draggable.prototype.checkTargetElement = function (evt) {\n\t            var target = this.getProperTargetElement(evt);\n\t            var dropIns = this.getDropInstance(target);\n\t            if (!dropIns && target && !util_1.isNullOrUndefined(target.parentNode)) {\n\t                var parent_1 = dom_2.closest(target.parentNode, '.e-droppable') || target.parentElement;\n\t                if (parent_1) {\n\t                    dropIns = this.getDropInstance(parent_1);\n\t                }\n\t            }\n\t            return { target: target, instance: dropIns };\n\t        };\n\t        Draggable.prototype.getDropInstance = function (ele) {\n\t            var name = 'getModuleName';\n\t            var drop;\n\t            var eleInst = ele && ele.ej2_instances;\n\t            if (eleInst) {\n\t                for (var _i = 0, eleInst_1 = eleInst; _i < eleInst_1.length; _i++) {\n\t                    var inst = eleInst_1[_i];\n\t                    if (inst[name]() === 'droppable') {\n\t                        drop = inst;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return drop;\n\t        };\n\t        Draggable.prototype.destroy = function () {\n\t            this.toggleEvents(true);\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        return Draggable;\n\t    }(base_1.Base));\n\t    __decorate([\n\t        notify_property_change_1.Complex({}, Position)\n\t    ], Draggable.prototype, \"cursorAt\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(true)\n\t    ], Draggable.prototype, \"clone\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Draggable.prototype, \"dragArea\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Draggable.prototype, \"drag\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Draggable.prototype, \"dragStart\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Draggable.prototype, \"dragStop\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(1)\n\t    ], Draggable.prototype, \"distance\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Draggable.prototype, \"handle\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Draggable.prototype, \"abort\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Draggable.prototype, \"helper\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property('default')\n\t    ], Draggable.prototype, \"scope\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property('')\n\t    ], Draggable.prototype, \"dragTarget\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Draggable.prototype, \"axis\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Draggable.prototype, \"queryPositionInfo\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(false)\n\t    ], Draggable.prototype, \"enableTailMode\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(false)\n\t    ], Draggable.prototype, \"skipDistanceCheck\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(true)\n\t    ], Draggable.prototype, \"preventDefault\", void 0);\n\t    Draggable = Draggable_1 = __decorate([\n\t        notify_property_change_1.NotifyPropertyChanges\n\t    ], Draggable);\n\t    exports.Draggable = Draggable;\n\t    var Draggable_1;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(8), __webpack_require__(5), __webpack_require__(9), __webpack_require__(1), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, base_1, browser_1, dom_1, notify_property_change_1, event_handler_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Droppable = (function (_super) {\n\t        __extends(Droppable, _super);\n\t        function Droppable(element, options) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.mouseOver = false;\n\t            _this.dragData = {};\n\t            _this.dragStopCalled = false;\n\t            _this.bind();\n\t            return _this;\n\t        }\n\t        Droppable.prototype.bind = function () {\n\t            this.wireEvents();\n\t        };\n\t        Droppable.prototype.wireEvents = function () {\n\t            event_handler_1.EventHandler.add(this.element, browser_1.Browser.touchEndEvent, this.intDrop, this);\n\t        };\n\t        Droppable.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        Droppable.prototype.getModuleName = function () {\n\t            return 'droppable';\n\t        };\n\t        Droppable.prototype.intOver = function (event, element) {\n\t            if (!this.mouseOver) {\n\t                this.trigger('over', { event: event, target: element });\n\t                this.mouseOver = true;\n\t            }\n\t        };\n\t        Droppable.prototype.intOut = function (event, element) {\n\t            if (this.mouseOver) {\n\t                this.trigger('out', { evt: event, target: element });\n\t                this.mouseOver = false;\n\t            }\n\t        };\n\t        Droppable.prototype.intDrop = function (evt, element) {\n\t            if (!this.dragStopCalled) {\n\t                return;\n\t            }\n\t            else {\n\t                this.dragStopCalled = false;\n\t            }\n\t            var accept = true;\n\t            var drag = this.dragData[this.scope];\n\t            var isDrag = drag ? (drag.helper && dom_1.isVisible(drag.helper)) : false;\n\t            var area;\n\t            if (isDrag) {\n\t                area = this.isDropArea(evt, drag.helper, element);\n\t                if (this.accept) {\n\t                    accept = dom_1.matches(drag.helper, this.accept);\n\t                }\n\t            }\n\t            if (isDrag && this.drop && area.canDrop && accept) {\n\t                this.trigger('drop', { event: evt, target: area.target, droppedElement: drag.helper, dragData: drag });\n\t            }\n\t        };\n\t        Droppable.prototype.isDropArea = function (evt, helper, element) {\n\t            var area = { canDrop: true, target: element || evt.target };\n\t            var isTouch = evt.type === 'touchend';\n\t            if (isTouch || area.target === helper) {\n\t                helper.style.display = 'none';\n\t                var coord = isTouch ? (evt.changedTouches[0]) : evt;\n\t                var ele = document.elementFromPoint(coord.clientX, coord.clientY);\n\t                area.canDrop = false;\n\t                area.canDrop = util_1.compareElementParent(ele, this.element);\n\t                if (area.canDrop) {\n\t                    area.target = ele;\n\t                }\n\t                helper.style.display = '';\n\t            }\n\t            return area;\n\t        };\n\t        Droppable.prototype.destroy = function () {\n\t            event_handler_1.EventHandler.remove(this.element, browser_1.Browser.touchEndEvent, this.intDrop);\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        return Droppable;\n\t    }(base_1.Base));\n\t    __decorate([\n\t        notify_property_change_1.Property()\n\t    ], Droppable.prototype, \"accept\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property('default')\n\t    ], Droppable.prototype, \"scope\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Droppable.prototype, \"drop\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Droppable.prototype, \"over\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Droppable.prototype, \"out\", void 0);\n\t    Droppable = __decorate([\n\t        notify_property_change_1.NotifyPropertyChanges\n\t    ], Droppable);\n\t    exports.Droppable = Droppable;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, notify_property_change_1, base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var keyCode = {\n\t        'backspace': 8,\n\t        'tab': 9,\n\t        'enter': 13,\n\t        'shift': 16,\n\t        'control': 17,\n\t        'alt': 18,\n\t        'pause': 19,\n\t        'capslock': 20,\n\t        'space': 32,\n\t        'escape': 27,\n\t        'pageup': 33,\n\t        'pagedown': 34,\n\t        'end': 35,\n\t        'home': 36,\n\t        'leftarrow': 37,\n\t        'uparrow': 38,\n\t        'rightarrow': 39,\n\t        'downarrow': 40,\n\t        'insert': 45,\n\t        'delete': 46,\n\t        'f1': 112,\n\t        'f2': 113,\n\t        'f3': 114,\n\t        'f4': 115,\n\t        'f5': 116,\n\t        'f6': 117,\n\t        'f7': 118,\n\t        'f8': 119,\n\t        'f9': 120,\n\t        'f10': 121,\n\t        'f11': 122,\n\t        'f12': 123,\n\t        'semicolon': 186,\n\t        'plus': 187,\n\t        'comma': 188,\n\t        'minus': 189,\n\t        'dot': 190,\n\t        'forwardslash': 191,\n\t        'graveaccent': 192,\n\t        'openbracket': 219,\n\t        'backslash': 220,\n\t        'closebracket': 221,\n\t        'singlequote': 222\n\t    };\n\t    var KeyboardEvents = KeyboardEvents_1 = (function (_super) {\n\t        __extends(KeyboardEvents, _super);\n\t        function KeyboardEvents(element, options) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.keyPressHandler = function (e) {\n\t                var isAltKey = e.altKey;\n\t                var isCtrlKey = e.ctrlKey;\n\t                var isShiftKey = e.shiftKey;\n\t                var curkeyCode = e.which;\n\t                var keys = Object.keys(_this.keyConfigs);\n\t                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                    var key = keys_1[_i];\n\t                    var configCollection = _this.keyConfigs[key].split(',');\n\t                    for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {\n\t                        var rconfig = configCollection_1[_a];\n\t                        var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());\n\t                        if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey &&\n\t                            isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {\n\t                            e.action = key;\n\t                            if (_this.keyAction) {\n\t                                _this.keyAction(e);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            };\n\t            _this.bind();\n\t            return _this;\n\t        }\n\t        KeyboardEvents.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        KeyboardEvents.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        ;\n\t        KeyboardEvents.prototype.bind = function () {\n\t            this.wireEvents();\n\t        };\n\t        KeyboardEvents.prototype.getModuleName = function () {\n\t            return 'keyboard';\n\t        };\n\t        KeyboardEvents.prototype.wireEvents = function () {\n\t            this.element.addEventListener(this.eventName, this.keyPressHandler);\n\t        };\n\t        KeyboardEvents.prototype.unwireEvents = function () {\n\t            this.element.removeEventListener(this.eventName, this.keyPressHandler);\n\t        };\n\t        KeyboardEvents.getKeyConfigData = function (config) {\n\t            if (config in this.configCache) {\n\t                return this.configCache[config];\n\t            }\n\t            var keys = config.toLowerCase().split('+');\n\t            var keyData = {\n\t                altKey: (keys.indexOf('alt') !== -1 ? true : false),\n\t                ctrlKey: (keys.indexOf('ctrl') !== -1 ? true : false),\n\t                shiftKey: (keys.indexOf('shift') !== -1 ? true : false),\n\t                keyCode: null\n\t            };\n\t            if (keys[keys.length - 1].length > 1 && !!Number(keys[keys.length - 1])) {\n\t                keyData.keyCode = Number(keys[keys.length - 1]);\n\t            }\n\t            else {\n\t                keyData.keyCode = KeyboardEvents_1.getKeyCode(keys[keys.length - 1]);\n\t            }\n\t            KeyboardEvents_1.configCache[config] = keyData;\n\t            return keyData;\n\t        };\n\t        KeyboardEvents.getKeyCode = function (keyVal) {\n\t            return keyCode[keyVal] || keyVal.toUpperCase().charCodeAt(0);\n\t        };\n\t        return KeyboardEvents;\n\t    }(base_1.Base));\n\t    KeyboardEvents.configCache = {};\n\t    __decorate([\n\t        notify_property_change_1.Property({})\n\t    ], KeyboardEvents.prototype, \"keyConfigs\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property('keyup')\n\t    ], KeyboardEvents.prototype, \"eventName\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], KeyboardEvents.prototype, \"keyAction\", void 0);\n\t    KeyboardEvents = KeyboardEvents_1 = __decorate([\n\t        notify_property_change_1.NotifyPropertyChanges\n\t    ], KeyboardEvents);\n\t    exports.KeyboardEvents = KeyboardEvents;\n\t    var KeyboardEvents_1;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, internationalization_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var L10n = (function () {\n\t        function L10n(controlName, localeStrings, locale) {\n\t            this.controlName = controlName;\n\t            this.localeStrings = localeStrings;\n\t            this.setLocale(locale || internationalization_1.defaultCulture);\n\t        }\n\t        L10n.prototype.setLocale = function (locale) {\n\t            var intLocale = this.intGetControlConstant(L10n.locale, locale);\n\t            this.currentLocale = intLocale || this.localeStrings;\n\t        };\n\t        L10n.load = function (localeObject) {\n\t            this.locale = util_1.extend(this.locale, localeObject, {}, true);\n\t        };\n\t        L10n.prototype.getConstant = function (prop) {\n\t            return this.currentLocale[prop] || this.localeStrings[prop] || '';\n\t        };\n\t        L10n.prototype.intGetControlConstant = function (curObject, locale) {\n\t            if (curObject[locale]) {\n\t                return curObject[locale][this.controlName];\n\t            }\n\t            return null;\n\t        };\n\t        return L10n;\n\t    }());\n\t    L10n.locale = {};\n\t    exports.L10n = L10n;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SvgRenderer = (function () {\n\t        function SvgRenderer(rootID) {\n\t            this.svgLink = 'http://www.w3.org/2000/svg';\n\t            this.rootId = rootID;\n\t        }\n\t        SvgRenderer.prototype.getOptionValue = function (options, key) {\n\t            return options[key];\n\t        };\n\t        SvgRenderer.prototype.createSvg = function (options) {\n\t            if (util_1.isNullOrUndefined(options.id)) {\n\t                options.id = this.rootId + '_svg';\n\t            }\n\t            this.svgObj = document.getElementById(options.id);\n\t            if (util_1.isNullOrUndefined(document.getElementById(options.id))) {\n\t                this.svgObj = document.createElementNS(this.svgLink, 'svg');\n\t            }\n\t            this.svgObj = this.setElementAttributes(options, this.svgObj);\n\t            this.setSVGSize(options.width, options.height);\n\t            return this.svgObj;\n\t        };\n\t        SvgRenderer.prototype.setSVGSize = function (width, height) {\n\t            var element = document.getElementById(this.rootId);\n\t            var size = !util_1.isNullOrUndefined(element) ? element.getBoundingClientRect() : null;\n\t            if (util_1.isNullOrUndefined(this.width) || this.width <= 0) {\n\t                this.svgObj.setAttribute('width', width ? width.toString() : size.width.toString());\n\t            }\n\t            else {\n\t                this.svgObj.setAttribute('width', this.width.toString());\n\t            }\n\t            if (util_1.isNullOrUndefined(this.height) || this.height <= 0) {\n\t                this.svgObj.setAttribute('height', height ? height.toString() : '450');\n\t            }\n\t            else {\n\t                this.svgObj.setAttribute('height', this.height.toString());\n\t            }\n\t        };\n\t        SvgRenderer.prototype.drawPath = function (options) {\n\t            var path = document.getElementById(options.id);\n\t            if (path === null) {\n\t                path = document.createElementNS(this.svgLink, 'path');\n\t            }\n\t            path = this.setElementAttributes(options, path);\n\t            return path;\n\t        };\n\t        SvgRenderer.prototype.drawLine = function (options) {\n\t            var line = document.getElementById(options.id);\n\t            if (line === null) {\n\t                line = document.createElementNS(this.svgLink, 'line');\n\t            }\n\t            line = this.setElementAttributes(options, line);\n\t            return line;\n\t        };\n\t        SvgRenderer.prototype.drawRectangle = function (options) {\n\t            var rectangle = document.getElementById(options.id);\n\t            if (rectangle === null) {\n\t                rectangle = document.createElementNS(this.svgLink, 'rect');\n\t            }\n\t            rectangle = this.setElementAttributes(options, rectangle);\n\t            return rectangle;\n\t        };\n\t        SvgRenderer.prototype.drawCircle = function (options) {\n\t            var circle = document.getElementById(options.id);\n\t            if (circle === null) {\n\t                circle = document.createElementNS(this.svgLink, 'circle');\n\t            }\n\t            circle = this.setElementAttributes(options, circle);\n\t            return circle;\n\t        };\n\t        SvgRenderer.prototype.drawPolyline = function (options) {\n\t            var polyline = document.getElementById(options.id);\n\t            if (polyline === null) {\n\t                polyline = document.createElementNS(this.svgLink, 'polyline');\n\t            }\n\t            polyline = this.setElementAttributes(options, polyline);\n\t            return polyline;\n\t        };\n\t        SvgRenderer.prototype.drawEllipse = function (options) {\n\t            var ellipse = document.getElementById(options.id);\n\t            if (ellipse === null) {\n\t                ellipse = document.createElementNS(this.svgLink, 'ellipse');\n\t            }\n\t            ellipse = this.setElementAttributes(options, ellipse);\n\t            return ellipse;\n\t        };\n\t        SvgRenderer.prototype.drawPolygon = function (options) {\n\t            var polygon = document.getElementById(options.id);\n\t            if (polygon === null) {\n\t                polygon = document.createElementNS(this.svgLink, 'polygon');\n\t            }\n\t            polygon = this.setElementAttributes(options, polygon);\n\t            return polygon;\n\t        };\n\t        SvgRenderer.prototype.drawImage = function (options) {\n\t            var img = document.createElementNS(this.svgLink, 'image');\n\t            img.setAttributeNS(null, 'height', options.height.toString());\n\t            img.setAttributeNS(null, 'width', options.width.toString());\n\t            img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', options.href);\n\t            img.setAttributeNS(null, 'x', options.x.toString());\n\t            img.setAttributeNS(null, 'y', options.y.toString());\n\t            img.setAttributeNS(null, 'id', options.id);\n\t            img.setAttributeNS(null, 'visibility', options.visibility);\n\t            if (!util_1.isNullOrUndefined(this.getOptionValue(options, 'clip-path'))) {\n\t                img.setAttributeNS(null, 'clip-path', this.getOptionValue(options, 'clip-path'));\n\t            }\n\t            if (!util_1.isNullOrUndefined(options.preserveAspectRatio)) {\n\t                img.setAttributeNS(null, 'preserveAspectRatio', options.preserveAspectRatio);\n\t            }\n\t            return img;\n\t        };\n\t        SvgRenderer.prototype.createText = function (options, label) {\n\t            var text = document.createElementNS(this.svgLink, 'text');\n\t            text = this.setElementAttributes(options, text);\n\t            if (!util_1.isNullOrUndefined(label)) {\n\t                text.textContent = label;\n\t            }\n\t            return text;\n\t        };\n\t        SvgRenderer.prototype.createTSpan = function (options, label) {\n\t            var tSpan = document.createElementNS(this.svgLink, 'tspan');\n\t            tSpan = this.setElementAttributes(options, tSpan);\n\t            if (!util_1.isNullOrUndefined(label)) {\n\t                tSpan.textContent = label;\n\t            }\n\t            return tSpan;\n\t        };\n\t        SvgRenderer.prototype.createTitle = function (text) {\n\t            var title = document.createElementNS(this.svgLink, 'title');\n\t            title.textContent = text;\n\t            return title;\n\t        };\n\t        SvgRenderer.prototype.createDefs = function () {\n\t            var defs = document.createElementNS(this.svgLink, 'defs');\n\t            return defs;\n\t        };\n\t        SvgRenderer.prototype.createClipPath = function (options) {\n\t            var clipPath = document.createElementNS(this.svgLink, 'clipPath');\n\t            clipPath = this.setElementAttributes(options, clipPath);\n\t            return clipPath;\n\t        };\n\t        SvgRenderer.prototype.createForeignObject = function (options) {\n\t            var foreignObject = document.createElementNS(this.svgLink, 'foreignObject');\n\t            foreignObject = this.setElementAttributes(options, foreignObject);\n\t            return foreignObject;\n\t        };\n\t        SvgRenderer.prototype.createGroup = function (options) {\n\t            var group = document.createElementNS(this.svgLink, 'g');\n\t            group = this.setElementAttributes(options, group);\n\t            return group;\n\t        };\n\t        SvgRenderer.prototype.createPattern = function (options, element) {\n\t            var pattern = document.createElementNS(this.svgLink, element);\n\t            pattern = this.setElementAttributes(options, pattern);\n\t            return pattern;\n\t        };\n\t        SvgRenderer.prototype.createRadialGradient = function (colors, name, options) {\n\t            var colorName;\n\t            if (!util_1.isNullOrUndefined(colors[0].colorStop)) {\n\t                var newOptions = {\n\t                    'id': this.rootId + '_' + name + 'radialGradient',\n\t                    'cx': options.cx + '%',\n\t                    'cy': options.cy + '%',\n\t                    'r': options.r + '%',\n\t                    'fx': options.fx + '%',\n\t                    'fy': options.fy + '%'\n\t                };\n\t                this.drawGradient('radialGradient', newOptions, colors);\n\t                colorName = 'url(#' + this.rootId + '_' + name + 'radialGradient)';\n\t            }\n\t            else {\n\t                colorName = colors[0].color.toString();\n\t            }\n\t            return colorName;\n\t        };\n\t        SvgRenderer.prototype.createLinearGradient = function (colors, name, options) {\n\t            var colorName;\n\t            if (!util_1.isNullOrUndefined(colors[0].colorStop)) {\n\t                var newOptions = {\n\t                    'id': this.rootId + '_' + name + 'linearGradient',\n\t                    'x1': options.x1 + '%',\n\t                    'y1': options.y1 + '%',\n\t                    'x2': options.x2 + '%',\n\t                    'y2': options.y2 + '%'\n\t                };\n\t                this.drawGradient('linearGradient', newOptions, colors);\n\t                colorName = 'url(#' + this.rootId + '_' + name + 'linearGradient)';\n\t            }\n\t            else {\n\t                colorName = colors[0].color.toString();\n\t            }\n\t            return colorName;\n\t        };\n\t        SvgRenderer.prototype.drawGradient = function (gradientType, options, colors) {\n\t            var defs = this.createDefs();\n\t            var gradient = document.createElementNS(this.svgLink, gradientType);\n\t            gradient = this.setElementAttributes(options, gradient);\n\t            for (var i = 0; i < colors.length; i++) {\n\t                var stop_1 = document.createElementNS(this.svgLink, 'stop');\n\t                stop_1.setAttribute('offset', colors[i].colorStop);\n\t                stop_1.setAttribute('stop-color', colors[i].color);\n\t                stop_1.setAttribute('stop-opacity', '1');\n\t                gradient.appendChild(stop_1);\n\t            }\n\t            defs.appendChild(gradient);\n\t            return defs;\n\t        };\n\t        SvgRenderer.prototype.drawClipPath = function (options) {\n\t            var defs = this.createDefs();\n\t            var clipPath = this.createClipPath({ 'id': options.id });\n\t            var rect = this.drawRectangle(options);\n\t            clipPath.appendChild(rect);\n\t            defs.appendChild(clipPath);\n\t            return defs;\n\t        };\n\t        SvgRenderer.prototype.drawCircularClipPath = function (options) {\n\t            var defs = this.createDefs();\n\t            var clipPath = this.createClipPath({ 'id': options.id });\n\t            var circle = this.drawCircle(options);\n\t            clipPath.appendChild(circle);\n\t            defs.appendChild(clipPath);\n\t            return defs;\n\t        };\n\t        SvgRenderer.prototype.setElementAttributes = function (options, element) {\n\t            var keys = Object.keys(options);\n\t            for (var i = 0; i < keys.length; i++) {\n\t                element.setAttribute(keys[i], options[keys[i]]);\n\t            }\n\t            return element;\n\t        };\n\t        return SvgRenderer;\n\t    }());\n\t    exports.SvgRenderer = SvgRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(9), __webpack_require__(8), __webpack_require__(6), __webpack_require__(13), __webpack_require__(1)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, notify_property_change_1, browser_1, base_1, child_property_1, event_handler_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SwipeSettings = (function (_super) {\n\t        __extends(SwipeSettings, _super);\n\t        function SwipeSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SwipeSettings;\n\t    }(child_property_1.ChildProperty));\n\t    __decorate([\n\t        notify_property_change_1.Property(50)\n\t    ], SwipeSettings.prototype, \"swipeThresholdDistance\", void 0);\n\t    exports.SwipeSettings = SwipeSettings;\n\t    var swipeRegex = /(Up|Down)/;\n\t    var Touch = (function (_super) {\n\t        __extends(Touch, _super);\n\t        function Touch(element, options) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.startEvent = function (evt) {\n\t                var point = (evt.changedTouches ? evt.changedTouches[0] : evt);\n\t                _this.isTouchMoved = false;\n\t                _this.movedDirection = '';\n\t                _this.startPoint = _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };\n\t                _this.startEventData = point;\n\t                _this.hScrollLocked = _this.vScrollLocked = false;\n\t                _this.tStampStart = Date.now();\n\t                _this.timeOutTapHold = setTimeout(function () { _this.tapHoldEvent(evt); }, _this.tapHoldThreshold);\n\t                event_handler_1.EventHandler.add(_this.element, browser_1.Browser.touchMoveEvent, _this.moveEvent, _this);\n\t                event_handler_1.EventHandler.add(_this.element, browser_1.Browser.touchEndEvent, _this.endEvent, _this);\n\t            };\n\t            _this.moveEvent = function (evt) {\n\t                var point = evt.changedTouches ? evt.changedTouches[0] : evt;\n\t                _this.movedPoint = point;\n\t                _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);\n\t                var eScrollArgs = {};\n\t                if (_this.isTouchMoved) {\n\t                    clearTimeout(_this.timeOutTapHold);\n\t                    _this.calcScrollPoints(evt);\n\t                    var scrollArg = {\n\t                        startEvents: _this.startEventData,\n\t                        originalEvent: evt, startX: _this.startPoint.clientX,\n\t                        startY: _this.startPoint.clientY, distanceX: _this.distanceX,\n\t                        distanceY: _this.distanceY, scrollDirection: _this.scrollDirection,\n\t                        velocity: _this.getVelocity(point)\n\t                    };\n\t                    eScrollArgs = util_1.extend(eScrollArgs, {}, scrollArg);\n\t                    _this.trigger('scroll', eScrollArgs);\n\t                    _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };\n\t                }\n\t            };\n\t            _this.endEvent = function (evt) {\n\t                clearTimeout(_this.timeOutTapHold);\n\t                var point = evt;\n\t                if (evt.changedTouches) {\n\t                    point = evt.changedTouches[0];\n\t                }\n\t                _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);\n\t                _this.endPoint = point;\n\t                var dblTapTriggred = false;\n\t                var eDblTapArgs;\n\t                var eTapArgs;\n\t                var eSwipeArgs;\n\t                var tDistance = _this.swipeSettings.swipeThresholdDistance;\n\t                _this.calcPoints(evt);\n\t                var swipeArgs = {\n\t                    originalEvent: evt,\n\t                    startEvents: _this.startEventData,\n\t                    startX: _this.startPoint.clientX,\n\t                    startY: _this.startPoint.clientY,\n\t                    distanceX: _this.distanceX, distanceY: _this.distanceY, swipeDirection: _this.movedDirection,\n\t                    velocity: _this.getVelocity(point)\n\t                };\n\t                if (!_this.isTouchMoved) {\n\t                    eDblTapArgs = util_1.extend(eDblTapArgs, _this.defaultArgs, {});\n\t                    if (!util_1.isNullOrUndefined(_this.lastTapTime) && (new Date().getTime() - _this.lastTapTime) < _this.doubleTapThreshold) {\n\t                        clearTimeout(_this.timeOutTap);\n\t                        dblTapTriggred = true;\n\t                        _this.trigger('doubleTap', eDblTapArgs);\n\t                    }\n\t                    if (!dblTapTriggred) {\n\t                        eTapArgs = util_1.extend(eTapArgs, _this.defaultArgs, {});\n\t                        _this.timeOutTap = setTimeout(function () {\n\t                            _this.trigger('tap', eTapArgs);\n\t                        }, (typeof _this.doubleTap !== 'function' ? 0 : _this.doubleTapThreshold));\n\t                    }\n\t                }\n\t                else {\n\t                    eSwipeArgs = util_1.extend(eSwipeArgs, _this.defaultArgs, swipeArgs);\n\t                    var canTrigger = false;\n\t                    var ele = _this.element;\n\t                    var scrollBool = _this.isScrollable(ele);\n\t                    var moved = swipeRegex.test(_this.movedDirection);\n\t                    if ((tDistance < _this.distanceX && !moved) || (tDistance < _this.distanceY && moved)) {\n\t                        if (!scrollBool) {\n\t                            canTrigger = true;\n\t                        }\n\t                        else {\n\t                            canTrigger = _this.checkSwipe(ele, moved);\n\t                        }\n\t                    }\n\t                    if (canTrigger) {\n\t                        _this.trigger('swipe', eSwipeArgs);\n\t                    }\n\t                }\n\t                _this.lastTapTime = new Date().getTime();\n\t                event_handler_1.EventHandler.remove(_this.element, browser_1.Browser.touchMoveEvent, _this.moveEvent);\n\t                event_handler_1.EventHandler.remove(_this.element, browser_1.Browser.touchEndEvent, _this.endEvent);\n\t            };\n\t            _this.bind();\n\t            return _this;\n\t        }\n\t        Touch.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        Touch.prototype.bind = function () {\n\t            this.wireEvents();\n\t            if (browser_1.Browser.isIE) {\n\t                this.element.classList.add('e-block-touch');\n\t            }\n\t        };\n\t        Touch.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        Touch.prototype.wireEvents = function () {\n\t            event_handler_1.EventHandler.add(this.element, browser_1.Browser.touchStartEvent, this.startEvent, this);\n\t        };\n\t        Touch.prototype.unwireEvents = function () {\n\t            event_handler_1.EventHandler.remove(this.element, browser_1.Browser.touchStartEvent, this.startEvent);\n\t        };\n\t        Touch.prototype.getModuleName = function () {\n\t            return 'touch';\n\t        };\n\t        Touch.prototype.isScrollable = function (element) {\n\t            var eleStyle = getComputedStyle(element);\n\t            var style = eleStyle.overflow + eleStyle.overflowX + eleStyle.overflowY;\n\t            if ((/(auto|scroll)/).test(style)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Touch.prototype.tapHoldEvent = function (evt) {\n\t            var eTapArgs;\n\t            event_handler_1.EventHandler.remove(this.element, browser_1.Browser.touchMoveEvent, this.moveEvent);\n\t            event_handler_1.EventHandler.remove(this.element, browser_1.Browser.touchEndEvent, this.endEvent);\n\t            eTapArgs = { originalEvent: evt };\n\t            this.trigger('tapHold', eTapArgs);\n\t        };\n\t        Touch.prototype.calcPoints = function (evt) {\n\t            var point = evt.changedTouches ? evt.changedTouches[0] : evt;\n\t            this.defaultArgs = { originalEvent: evt };\n\t            this.distanceX = Math.abs((Math.abs(point.clientX) - Math.abs(this.startPoint.clientX)));\n\t            this.distanceY = Math.abs((Math.abs(point.clientY) - Math.abs(this.startPoint.clientY)));\n\t            if (this.distanceX > this.distanceY) {\n\t                this.movedDirection = (point.clientX > this.startPoint.clientX) ? 'Right' : 'Left';\n\t            }\n\t            else {\n\t                this.movedDirection = (point.clientY < this.startPoint.clientY) ? 'Up' : 'Down';\n\t            }\n\t        };\n\t        Touch.prototype.calcScrollPoints = function (evt) {\n\t            var point = evt.changedTouches ? evt.changedTouches[0] : evt;\n\t            this.defaultArgs = { originalEvent: evt };\n\t            this.distanceX = Math.abs((Math.abs(point.clientX) - Math.abs(this.lastMovedPoint.clientX)));\n\t            this.distanceY = Math.abs((Math.abs(point.clientY) - Math.abs(this.lastMovedPoint.clientY)));\n\t            if ((this.distanceX > this.distanceY || this.hScrollLocked === true) && this.vScrollLocked === false) {\n\t                this.scrollDirection = (point.clientX > this.lastMovedPoint.clientX) ? 'Right' : 'Left';\n\t                this.hScrollLocked = true;\n\t            }\n\t            else {\n\t                this.scrollDirection = (point.clientY < this.lastMovedPoint.clientY) ? 'Up' : 'Down';\n\t                this.vScrollLocked = true;\n\t            }\n\t        };\n\t        Touch.prototype.getVelocity = function (pnt) {\n\t            var newX = pnt.clientX;\n\t            var newY = pnt.clientY;\n\t            var newT = Date.now();\n\t            var xDist = newX - this.startPoint.clientX;\n\t            var yDist = newY - this.startPoint.clientX;\n\t            var interval = newT - this.tStampStart;\n\t            return Math.sqrt(xDist * xDist + yDist * yDist) / interval;\n\t        };\n\t        Touch.prototype.checkSwipe = function (ele, flag) {\n\t            var keys = ['scroll', 'offset'];\n\t            var temp = flag ? ['Height', 'Top'] : ['Width', 'Left'];\n\t            if ((ele[keys[0] + temp[0]] <= ele[keys[1] + temp[0]])) {\n\t                return true;\n\t            }\n\t            return (ele[keys[0] + temp[1]] === 0) ||\n\t                (ele[keys[1] + temp[0]] + ele[keys[0] + temp[1]] >= ele[keys[0] + temp[0]]);\n\t        };\n\t        return Touch;\n\t    }(base_1.Base));\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Touch.prototype, \"tap\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Touch.prototype, \"doubleTap\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Touch.prototype, \"tapHold\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Touch.prototype, \"swipe\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Event()\n\t    ], Touch.prototype, \"scroll\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(500)\n\t    ], Touch.prototype, \"doubleTapThreshold\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Property(750)\n\t    ], Touch.prototype, \"tapHoldThreshold\", void 0);\n\t    __decorate([\n\t        notify_property_change_1.Complex({}, SwipeSettings)\n\t    ], Touch.prototype, \"swipeSettings\", void 0);\n\t    Touch = __decorate([\n\t        notify_property_change_1.NotifyPropertyChanges\n\t    ], Touch);\n\t    exports.Touch = Touch;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(28), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, template_1, dom_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HAS_ROW = /^[\\n\\r.]+\\<tr|^\\<tr/;\n\t    function compile(templateString, helper) {\n\t        var compiler = engineObj.compile(templateString, helper);\n\t        return function (data, component, propName) {\n\t            var result = compiler(data, component, propName);\n\t            if (typeof result === 'string') {\n\t                var ele = dom_1.createElement((HAS_ROW.test(result) ? 'table' : 'div'), { innerHTML: result });\n\t                return ele.childNodes;\n\t            }\n\t            else {\n\t                return result;\n\t            }\n\t        };\n\t    }\n\t    exports.compile = compile;\n\t    function setTemplateEngine(classObj) {\n\t        engineObj.compile = classObj.compile;\n\t    }\n\t    exports.setTemplateEngine = setTemplateEngine;\n\t    function getTemplateEngine() {\n\t        return engineObj.compile;\n\t    }\n\t    exports.getTemplateEngine = getTemplateEngine;\n\t    var Engine = (function () {\n\t        function Engine() {\n\t        }\n\t        Engine.prototype.compile = function (templateString, helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            return template_1.compile(templateString, helper);\n\t        };\n\t        return Engine;\n\t    }());\n\t    var engineObj = { compile: new Engine().compile };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var LINES = new RegExp('\\\\n|\\\\r|\\\\s\\\\s+', 'g');\n\t    var QUOTES = new RegExp(/'|\"/g);\n\t    var IF_STMT = new RegExp('if ?\\\\(');\n\t    var ELSE_STMT = new RegExp('else');\n\t    var FOR_STMT = new RegExp('for ?\\\\(');\n\t    var IF_OR_FOR = new RegExp('(\\/if|\\/for)');\n\t    var CALL_FUNCTION = new RegExp('\\\\((.*)\\\\)', '');\n\t    var NOT_NUMBER = new RegExp('^[0-9]+$', 'g');\n\t    var WORD = new RegExp('[\\\\w\"\\'.\\\\s+]+', 'g');\n\t    var DBL_QUOTED_STR = new RegExp('\"(.*?)\"', 'g');\n\t    var exp = new RegExp('\\\\${([^}]*)}', 'g');\n\t    function expression(value) {\n\t        if (value) {\n\t            exp = value;\n\t        }\n\t        return exp;\n\t    }\n\t    exports.expression = expression;\n\t    function compile(template, helper) {\n\t        var argName = 'data';\n\t        var evalExpResult = evalExp(template, argName, helper);\n\t        var fnCode = \"var str=\\\"\" + evalExpResult + \"\\\"; return str;\";\n\t        var fn = new Function(argName, fnCode);\n\t        return fn.bind(helper);\n\t    }\n\t    exports.compile = compile;\n\t    function evalExp(str, nameSpace, helper) {\n\t        var localKeys = [];\n\t        return str.replace(LINES, '').replace(DBL_QUOTED_STR, '\\'$1\\'').replace(exp, function (match, cnt, offset, matchStr) {\n\t            var matches = cnt.match(CALL_FUNCTION);\n\t            if (matches) {\n\t                var rlStr = matches[1];\n\t                if (IF_STMT.test(cnt)) {\n\t                    cnt = '\"; ' + cnt.replace(matches[1], rlStr.replace(WORD, function (str) {\n\t                        str = str.trim();\n\t                        return addNameSpace(str, !(QUOTES.test(str)) && (localKeys.indexOf(str) === -1), nameSpace, localKeys);\n\t                    })) + '{ \\n str = str + \"';\n\t                }\n\t                else if (FOR_STMT.test(cnt)) {\n\t                    var rlStr_1 = matches[1].split(' of ');\n\t                    cnt = '\"; ' + cnt.replace(matches[1], function (mtc) {\n\t                        localKeys.push(rlStr_1[0]);\n\t                        localKeys.push(rlStr_1[0] + 'Index');\n\t                        return 'var i=0; i < ' + addNameSpace(rlStr_1[1], true, nameSpace, localKeys) + '.length; i++';\n\t                    }) + '{ \\n ' + rlStr_1[0] + '= ' + addNameSpace(rlStr_1[1], true, nameSpace, localKeys)\n\t                        + '[i]; \\n var ' + rlStr_1[0] + 'Index=i; \\n str = str + \"';\n\t                }\n\t                else {\n\t                    var fnStr = cnt.split('(');\n\t                    var fNameSpace = (helper && helper.hasOwnProperty(fnStr[0]) ? 'this.' : 'global');\n\t                    fNameSpace = (/\\./.test(fnStr[0]) ? '' : fNameSpace);\n\t                    cnt = '\" + ' + (fNameSpace === 'global' ? '' : fNameSpace) +\n\t                        cnt.replace(rlStr, addNameSpace(matches[1].replace(',', nameSpace + '.'), (fNameSpace === 'global' ? false : true), nameSpace, localKeys)) +\n\t                        '+\"';\n\t                }\n\t            }\n\t            else if (ELSE_STMT.test(cnt)) {\n\t                cnt = '\"; ' + cnt.replace(ELSE_STMT, '} else { \\n str = str + \"');\n\t            }\n\t            else if (!!cnt.match(IF_OR_FOR)) {\n\t                cnt = cnt.replace(IF_OR_FOR, '\"; \\n } \\n str = str + \"');\n\t            }\n\t            else {\n\t                cnt = '\"+' + addNameSpace(cnt, (localKeys.indexOf(cnt) === -1), nameSpace, localKeys) + '+\"';\n\t            }\n\t            return cnt;\n\t        });\n\t    }\n\t    function addNameSpace(str, addNS, nameSpace, ignoreList) {\n\t        return ((addNS && !(NOT_NUMBER.test(str)) && ignoreList.indexOf(str.split('.')[0]) === -1) ? nameSpace + '.' + str : str);\n\t    }\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlZTE0ZDA2MDUxMTQxYWViZjdlNyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50LWhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FqYXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZG9tLmpzIiwid2VicGFjazovLy8uL3NyYy9iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbm90aWZ5LXByb3BlcnR5LWNoYW5nZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FudmFzLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZS1sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoaWxkLXByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcm5hdGlvbmFsaXphdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50bC9kYXRlLWZvcm1hdHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50bC9wYXJzZXItYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50bC9pbnRsLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGwvbnVtYmVyLWZvcm1hdHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50bC9kYXRlLXBhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50bC9udW1iZXItcGFyc2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9kcmFnZ2FibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Ryb3BwYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMva2V5Ym9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2wxMG4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N2Zy1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdG91Y2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RlbXBsYXRlLWVuZ2luZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGVtcGxhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNWQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O2lFQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDMUJEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLFlBQVk7QUFDM0M7QUFDQTtBQUNBLDRDQUEyQyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUM3TkQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBK0U7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDO0FBQzVDLDZDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQSwrREFBOEQscUJBQXFCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLDZFQUE0RSxnQkFBZ0I7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELDBCQUEwQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBd0UsZ0JBQWdCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDLElBQUk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ2xTRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHNCQUFzQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsdUJBQXVCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQix3QkFBd0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLHFCQUFxQixFQUFFO0FBQ3pGLDRCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFD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Z0NBQStCLFVBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsT0FBTztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSyx1REFBdUQ7QUFDNUQsRUFBQzs7Ozs7OztpRUNwaUJEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DLGtCQUFrQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixlQUFlO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUMxT0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLHNDQUFzQztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IsY0FBYztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBK0QsYUFBYTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMscUJBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWlELHFCQUFxQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUFzQyx1REFBdUQ7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCx3REFBd0Q7QUFDcEgscURBQW9ELDJDQUEyQztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxtRkFBbUY7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0w7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDN0JEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsbUJBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsbUJBQW1CO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELG1CQUFtQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUMxT0Q7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsZ0VBQStELHlCQUF5QixFQUFFO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUErRDtBQUMvRDtBQUNBLDZDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFrRjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDOU9EO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRkFBeUYsb0JBQW9CO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsYUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0wsc0JBQXFCO0FBQ3JCLEVBQUM7Ozs7Ozs7aUVDcENEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUE4QixJQUFJLElBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0QsWUFBWTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxzQkFBcUIsT0FBTztBQUM1QjtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBLHlDQUF3Qyx5RUFBeUU7QUFDakgsc0JBQXFCLE1BQU07QUFDM0IsZ0NBQStCLGtDQUFrQztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCLDhCQUE4QixPQUFPO0FBQzlEO0FBQ0E7QUFDQSxpREFBZ0QsS0FBSztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQyIsImZpbGUiOiJlajItYmFzZS51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGVlMTRkMDYwNTExNDFhZWJmN2U3IiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9hamF4XCIsIFwiLi9hbmltYXRpb25cIiwgXCIuL2Jhc2VcIiwgXCIuL2Jyb3dzZXJcIiwgXCIuL2NhbnZhcy1yZW5kZXJlclwiLCBcIi4vY29tcG9uZW50XCIsIFwiLi9jaGlsZC1wcm9wZXJ0eVwiLCBcIi4vZHJhZ2dhYmxlXCIsIFwiLi9kcm9wcGFibGVcIiwgXCIuL2V2ZW50LWhhbmRsZXJcIiwgXCIuL2ludGVybmF0aW9uYWxpemF0aW9uXCIsIFwiLi9rZXlib2FyZFwiLCBcIi4vbDEwblwiLCBcIi4vbW9kdWxlLWxvYWRlclwiLCBcIi4vbm90aWZ5LXByb3BlcnR5LWNoYW5nZVwiLCBcIi4vc3ZnLXJlbmRlcmVyXCIsIFwiLi90b3VjaFwiLCBcIi4vdGVtcGxhdGUtZW5naW5lXCIsIFwiLi91dGlsXCIsIFwiLi9kb21cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBhamF4XzEsIGFuaW1hdGlvbl8xLCBiYXNlXzEsIGJyb3dzZXJfMSwgY2FudmFzX3JlbmRlcmVyXzEsIGNvbXBvbmVudF8xLCBjaGlsZF9wcm9wZXJ0eV8xLCBkcmFnZ2FibGVfMSwgZHJvcHBhYmxlXzEsIGV2ZW50X2hhbmRsZXJfMSwgaW50ZXJuYXRpb25hbGl6YXRpb25fMSwga2V5Ym9hcmRfMSwgbDEwbl8xLCBtb2R1bGVfbG9hZGVyXzEsIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMSwgc3ZnX3JlbmRlcmVyXzEsIHRvdWNoXzEsIHRlbXBsYXRlX2VuZ2luZV8xLCB1dGlsXzEsIGRvbV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChhamF4XzEpO1xuICAgIF9fZXhwb3J0KGFuaW1hdGlvbl8xKTtcbiAgICBfX2V4cG9ydChiYXNlXzEpO1xuICAgIF9fZXhwb3J0KGJyb3dzZXJfMSk7XG4gICAgX19leHBvcnQoY2FudmFzX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNvbXBvbmVudF8xKTtcbiAgICBfX2V4cG9ydChjaGlsZF9wcm9wZXJ0eV8xKTtcbiAgICBfX2V4cG9ydChkcmFnZ2FibGVfMSk7XG4gICAgX19leHBvcnQoZHJvcHBhYmxlXzEpO1xuICAgIF9fZXhwb3J0KGV2ZW50X2hhbmRsZXJfMSk7XG4gICAgX19leHBvcnQoaW50ZXJuYXRpb25hbGl6YXRpb25fMSk7XG4gICAgX19leHBvcnQoa2V5Ym9hcmRfMSk7XG4gICAgX19leHBvcnQobDEwbl8xKTtcbiAgICBfX2V4cG9ydChtb2R1bGVfbG9hZGVyXzEpO1xuICAgIF9fZXhwb3J0KG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMSk7XG4gICAgX19leHBvcnQoc3ZnX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHRvdWNoXzEpO1xuICAgIF9fZXhwb3J0KHRlbXBsYXRlX2VuZ2luZV8xKTtcbiAgICBfX2V4cG9ydCh1dGlsXzEpO1xuICAgIF9fZXhwb3J0KGRvbV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFdmVudEhhbmRsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFdmVudEhhbmRsZXIoKSB7XG4gICAgICAgIH1cbiAgICAgICAgRXZlbnRIYW5kbGVyLmFkZE9yR2V0RXZlbnREYXRhID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICgnX19ldmVudExpc3QnIGluIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5fX2V2ZW50TGlzdC5ldmVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Ll9fZXZlbnRMaXN0ID0ge307XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuX19ldmVudExpc3QuZXZlbnRzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV2ZW50SGFuZGxlci5hZGQgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBsaXN0ZW5lciwgYmluZFRvLCBpbnREZWJvdW5jZSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50RGF0YSA9IEV2ZW50SGFuZGxlci5hZGRPckdldEV2ZW50RGF0YShlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZUxpc3RlbmVyO1xuICAgICAgICAgICAgaWYgKGludERlYm91bmNlKSB7XG4gICAgICAgICAgICAgICAgZGVib3VuY2VMaXN0ZW5lciA9IHV0aWxfMS5kZWJvdW5jZShsaXN0ZW5lciwgaW50RGVib3VuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVib3VuY2VMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJpbmRUbykge1xuICAgICAgICAgICAgICAgIGRlYm91bmNlTGlzdGVuZXIgPSBkZWJvdW5jZUxpc3RlbmVyLmJpbmQoYmluZFRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBldmVudCA9IGV2ZW50TmFtZS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZXZlbnRbaV0sXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICAgICAgICAgICAgICAgICAgZGVib3VuY2U6IGRlYm91bmNlTGlzdGVuZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRbaV0sIGRlYm91bmNlTGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlYm91bmNlTGlzdGVuZXI7XG4gICAgICAgIH07XG4gICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICAgICAgdmFyIGV2ZW50RGF0YSA9IEV2ZW50SGFuZGxlci5hZGRPckdldEV2ZW50RGF0YShlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGV2ZW50TmFtZS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaikge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIHZhciBkZWJvdW5jZUxpc3RlbmVyO1xuICAgICAgICAgICAgICAgIGlmIChldmVudERhdGEgJiYgZXZlbnREYXRhLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudERhdGEuc29tZShmdW5jdGlvbiAoeCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgubmFtZSA9PT0gZXZlbnRbal0gJiYgeC5saXN0ZW5lciA9PT0gbGlzdGVuZXIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleCA9IGksIGRlYm91bmNlTGlzdGVuZXIgPSB4LmRlYm91bmNlLCB0cnVlKSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudERhdGEuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50W2pdLCBkZWJvdW5jZUxpc3RlbmVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGV2ZW50Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgX2xvb3BfMShqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLmNsZWFyRXZlbnRzID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBldmVudERhdGE7XG4gICAgICAgICAgICB2YXIgY29weURhdGE7XG4gICAgICAgICAgICBldmVudERhdGEgPSBFdmVudEhhbmRsZXIuYWRkT3JHZXRFdmVudERhdGEoZWxlbWVudCk7XG4gICAgICAgICAgICBjb3B5RGF0YSA9IHV0aWxfMS5leHRlbmQoW10sIGNvcHlEYXRhLCBldmVudERhdGEpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3B5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihjb3B5RGF0YVtpXS5uYW1lLCBjb3B5RGF0YVtpXS5kZWJvdW5jZSk7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnRQcm9wKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnREYXRhID0gRXZlbnRIYW5kbGVyLmFkZE9yR2V0RXZlbnREYXRhKGVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGZuID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnREYXRhXzEgPSBldmVudERhdGE7IF9pIDwgZXZlbnREYXRhXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBldmVudERhdGFfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50XzEubmFtZSA9PT0gZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50XzEuZGVib3VuY2UuY2FsbCh0aGlzLCBldmVudFByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV2ZW50SGFuZGxlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXZlbnRIYW5kbGVyID0gRXZlbnRIYW5kbGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ldmVudC1oYW5kbGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIGluc3RhbmNlcyA9ICdlajJfaW5zdGFuY2VzJztcbiAgICB2YXIgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShjbGFzc0Z1bmN0aW9uLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGFycmF5UGFyYW0gPSBwYXJhbXM7XG4gICAgICAgIGFycmF5UGFyYW0udW5zaGlmdCh1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjbGFzc0Z1bmN0aW9uLCBhcnJheVBhcmFtKSk7XG4gICAgfVxuICAgIGV4cG9ydHMuY3JlYXRlSW5zdGFuY2UgPSBjcmVhdGVJbnN0YW5jZTtcbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoaGFuZGxlcikge1xuICAgICAgICB2YXIgdW5iaW5kO1xuICAgICAgICB2YXIgbnVtID0gbmV3IFVpbnQxNkFycmF5KDUpO1xuICAgICAgICB2YXIgaW50Q3J5cHRvID0gd2luZG93Lm1zQ3J5cHRvIHx8IHdpbmRvdy5jcnlwdG87XG4gICAgICAgIGludENyeXB0by5nZXRSYW5kb21WYWx1ZXMobnVtKTtcbiAgICAgICAgdmFyIHNlY3JldCA9ICdlajInICsgY29tYmluZUFycmF5KG51bSk7XG4gICAgICAgIHZhciBtZXNzYWdlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gd2luZG93ICYmIHR5cGVvZiBldmVudC5kYXRhID09PSAnc3RyaW5nJyAmJiBldmVudC5kYXRhLmxlbmd0aCA8PSAzMiAmJiBldmVudC5kYXRhID09PSBzZWNyZXQpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgdW5iaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHNlY3JldCwgJyonKTtcbiAgICAgICAgcmV0dXJuIHVuYmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBleHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBmdW5jdGlvbiBnZXRWYWx1ZShuYW1lU3BhY2UsIG9iaikge1xuICAgICAgICB2YXIgdmFsdWUgPSBvYmo7XG4gICAgICAgIHZhciBzcGxpdHMgPSBuYW1lU3BhY2Uuc3BsaXQoJy4nKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGxpdHMubGVuZ3RoICYmICFpc1VuZGVmaW5lZCh2YWx1ZSk7IGkrKykge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZVtzcGxpdHNbaV1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRWYWx1ZSA9IGdldFZhbHVlO1xuICAgIGZ1bmN0aW9uIHNldFZhbHVlKG5hbWVTcGFjZSwgdmFsdWUsIG9iaikge1xuICAgICAgICB2YXIga2V5cyA9IG5hbWVTcGFjZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgc3RhcnQgPSBvYmogfHwge307XG4gICAgICAgIHZhciBmcm9tT2JqID0gc3RhcnQ7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZnJvbU9ialtrZXldID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHt9IDogdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc051bGxPclVuZGVmaW5lZChmcm9tT2JqW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgZnJvbU9ialtrZXldID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcm9tT2JqID0gZnJvbU9ialtrZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFydDtcbiAgICB9XG4gICAgZXhwb3J0cy5zZXRWYWx1ZSA9IHNldFZhbHVlO1xuICAgIGZ1bmN0aW9uIGRlbGV0ZU9iamVjdChvYmosIGtleSkge1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgfVxuICAgIGV4cG9ydHMuZGVsZXRlT2JqZWN0ID0gZGVsZXRlT2JqZWN0O1xuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICAgICAgICB2YXIgb2JqQ29uID0ge307XG4gICAgICAgIHJldHVybiAoIWlzTnVsbE9yVW5kZWZpbmVkKG9iaikgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBvYmpDb24uY29uc3RydWN0b3IpO1xuICAgIH1cbiAgICBleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4gICAgZnVuY3Rpb24gZ2V0RW51bVZhbHVlKGVudW1PYmplY3QsIGVudW1WYWx1ZSkge1xuICAgICAgICByZXR1cm4gZW51bU9iamVjdFtlbnVtVmFsdWVdO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEVudW1WYWx1ZSA9IGdldEVudW1WYWx1ZTtcbiAgICBmdW5jdGlvbiBtZXJnZShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoZGVzdGluYXRpb24pKSB7XG4gICAgICAgICAgICB2YXIgdGVtck9iaiA9IHNvdXJjZTtcbiAgICAgICAgICAgIHZhciB0ZW1wUHJvcCA9IGRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkZXN0aW5hdGlvbik7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRlbXJPYmpba2V5XSA9IHRlbXBQcm9wW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5tZXJnZSA9IG1lcmdlO1xuICAgIGZ1bmN0aW9uIGV4dGVuZChjb3BpZWQsIGZpcnN0LCBzZWNvbmQsIGRlZXApIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvcGllZCB8fCB7fTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChkZWVwKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBsZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIGlmICghYXJndW1lbnRzXzFbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iajEgPSBhcmd1bWVudHNfMVtpXTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG9iajEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBzcmMgPSByZXN1bHRba2V5XTtcbiAgICAgICAgICAgICAgICB2YXIgY29weSA9IG9iajFba2V5XTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmU7XG4gICAgICAgICAgICAgICAgaWYgKGRlZXAgJiYgaXNPYmplY3QoY29weSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBpc09iamVjdChzcmMpID8gc3JjIDoge307XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gZXh0ZW5kKHt9LCBjbG9uZSwgY29weSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNvcHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhcmd1bWVudHNfMSA9IGFyZ3VtZW50cztcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBleHBvcnRzLmV4dGVuZCA9IGV4dGVuZDtcbiAgICBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbDtcbiAgICB9XG4gICAgZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuICAgIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB2YWx1ZSk7XG4gICAgfVxuICAgIGV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcbiAgICBmdW5jdGlvbiBnZXRVbmlxdWVJRChkZWZpbmVkTmFtZSkge1xuICAgICAgICByZXR1cm4gZGVmaW5lZE5hbWUgKyAnXycgKyB1aWQrKztcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVbmlxdWVJRCA9IGdldFVuaXF1ZUlEO1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGV2ZW50RnVuY3Rpb24sIGRlbGF5KSB7XG4gICAgICAgIHZhciBvdXQ7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRGdW5jdGlvbi5hcHBseShfdGhpcywgYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG91dCk7XG4gICAgICAgICAgICBvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCBkZWxheSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGV4cG9ydHMuZGVib3VuY2UgPSBkZWJvdW5jZTtcbiAgICBmdW5jdGlvbiBxdWVyeVBhcmFtcyhkYXRhKSB7XG4gICAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMiA9IGtleXM7IF9pIDwga2V5c18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNfMltfaV07XG4gICAgICAgICAgICBhcnJheS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCcnICsgZGF0YVtrZXldKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5LmpvaW4oJyYnKTtcbiAgICB9XG4gICAgZXhwb3J0cy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zO1xuICAgIGZ1bmN0aW9uIGlzT2JqZWN0QXJyYXkodmFsdWUpIHtcbiAgICAgICAgdmFyIHBhcnNlciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gICAgICAgIGlmIChwYXJzZXIuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZXIuY2FsbCh2YWx1ZVswXSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBleHBvcnRzLmlzT2JqZWN0QXJyYXkgPSBpc09iamVjdEFycmF5O1xuICAgIGZ1bmN0aW9uIGNvbXBhcmVFbGVtZW50UGFyZW50KGNoaWxkLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBjaGlsZDtcbiAgICAgICAgaWYgKG5vZGUgPT09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSA9PT0gZG9jdW1lbnQgfHwgIW5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlRWxlbWVudFBhcmVudChub2RlLnBhcmVudE5vZGUsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5jb21wYXJlRWxlbWVudFBhcmVudCA9IGNvbXBhcmVFbGVtZW50UGFyZW50O1xuICAgIGZ1bmN0aW9uIHRocm93RXJyb3IobWVzc2FnZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBlLm1lc3NhZ2UgKyAnXFxuJyArIGUuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy50aHJvd0Vycm9yID0gdGhyb3dFcnJvcjtcbiAgICBmdW5jdGlvbiBwcmludChlbGVtZW50LCBwcmludFdpbmRvdykge1xuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciBsaW5rcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5xdWVyeVNlbGVjdG9yQWxsKCdsaW5rLCBzdHlsZScpKTtcbiAgICAgICAgdmFyIHJlZmVyZW5jZSA9ICcnO1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQocHJpbnRXaW5kb3cpKSB7XG4gICAgICAgICAgICBwcmludFdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAncHJpbnQnLCAnaGVpZ2h0PTQ1Mix3aWR0aD0xMDI0LHRhYmJhcj1ubycpO1xuICAgICAgICB9XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChlbGVtZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaW5rcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgcmVmZXJlbmNlICs9IGxpbmtzW2ldLm91dGVySFRNTDtcbiAgICAgICAgfVxuICAgICAgICBwcmludFdpbmRvdy5kb2N1bWVudC53cml0ZSgnPCFET0NUWVBFIGh0bWw+IDxodG1sPjxoZWFkPicgKyByZWZlcmVuY2UgKyAnPC9oZWFkPjxib2R5PicgKyBkaXYuaW5uZXJIVE1MICtcbiAgICAgICAgICAgICc8c2NyaXB0PiAoZnVuY3Rpb24oKSB7IHdpbmRvdy5yZWFkeSA9IHRydWU7IH0pKCk7IDwvc2NyaXB0PicgKyAnPC9ib2R5PjwvaHRtbD4nKTtcbiAgICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcbiAgICAgICAgcHJpbnRXaW5kb3cuZm9jdXMoKTtcbiAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHByaW50V2luZG93LnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgcHJpbnRXaW5kb3cucHJpbnQoKTtcbiAgICAgICAgICAgICAgICBwcmludFdpbmRvdy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MDApO1xuICAgICAgICByZXR1cm4gcHJpbnRXaW5kb3c7XG4gICAgfVxuICAgIGV4cG9ydHMucHJpbnQgPSBwcmludDtcbiAgICBmdW5jdGlvbiBmb3JtYXRVbml0KHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZSArICcnO1xuICAgICAgICBpZiAocmVzdWx0ID09PSAnYXV0bycgfHwgcmVzdWx0LmluZGV4T2YoJyUnKSAhPT0gLTEgfHwgcmVzdWx0LmluZGV4T2YoJ3B4JykgIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAncHgnO1xuICAgIH1cbiAgICBleHBvcnRzLmZvcm1hdFVuaXQgPSBmb3JtYXRVbml0O1xuICAgIGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsZW1lbnQsIGNvbXBvbmVudCkge1xuICAgICAgICB2YXIgZWxlbSA9ICh0eXBlb2YgKGVsZW1lbnQpID09PSAnc3RyaW5nJykgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpIDogZWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1baW5zdGFuY2VzXSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGVsZW1baW5zdGFuY2VzXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5zdCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdCBpbnN0YW5jZW9mIGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0SW5zdGFuY2UgPSBnZXRJbnN0YW5jZTtcbiAgICBmdW5jdGlvbiBhZGRJbnN0YW5jZShlbGVtZW50LCBpbnN0YW5jZSkge1xuICAgICAgICB2YXIgZWxlbSA9ICh0eXBlb2YgKGVsZW1lbnQpID09PSAnc3RyaW5nJykgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpIDogZWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1baW5zdGFuY2VzXSkge1xuICAgICAgICAgICAgZWxlbVtpbnN0YW5jZXNdLnB1c2goaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWxlbVtpbnN0YW5jZXNdID0gW2luc3RhbmNlXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmFkZEluc3RhbmNlID0gYWRkSW5zdGFuY2U7XG4gICAgZnVuY3Rpb24gY29tYmluZUFycmF5KG51bSkge1xuICAgICAgICB2YXIgcmV0ID0gJyc7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgICAgICByZXQgKz0gKGkgPyAnLCcgOiAnJykgKyBudW1baV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBoZWFkZXJSZWdleCA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ207XG4gICAgdmFyIGRlZmF1bHRUeXBlID0gJ0dFVCc7XG4gICAgdmFyIEFqYXggPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBamF4KG9wdGlvbnMsIHR5cGUsIGFzeW5jKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cmwgPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGUgPyB0eXBlLnRvVXBwZXJDYXNlKCkgOiBkZWZhdWx0VHlwZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPSAhdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKGFzeW5jKSA/IGFzeW5jIDogdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICAgICAgdXRpbF8xLm1lcmdlKHRoaXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLnR5cGUgPyB0aGlzLnR5cGUudG9VcHBlckNhc2UoKSA6IGRlZmF1bHRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIEFqYXgucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChkYXRhKSA/IHRoaXMuZGF0YSA6IGRhdGE7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5odHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIF90aGlzLmh0dHBSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsgX3RoaXMuc3RhdGVDaGFuZ2UocmVzb2x2ZSwgcmVqZWN0KTsgfTtcbiAgICAgICAgICAgICAgICBfdGhpcy5odHRwUmVxdWVzdC5vcGVuKF90aGlzLnR5cGUsIF90aGlzLnVybCwgX3RoaXMubW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoX3RoaXMuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgX3RoaXMuY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmJlZm9yZVNlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYmVmb3JlU2VuZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5odHRwUmVxdWVzdC5zZW5kKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoX3RoaXMuZGF0YSkgPyBfdGhpcy5kYXRhIDogbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICBBamF4LnByb3RvdHlwZS5zdWNjZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VjY2VzcyhkYXRhLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICBBamF4LnByb3RvdHlwZS5mYWlsdXJlSGFuZGxlciA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRmFpbHVyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25GYWlsdXJlKHRoaXMuaHR0cFJlcXVlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlYXNvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQWpheC5wcm90b3R5cGUuc3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuaHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVR5cGUgJiYgdGhpcy5kYXRhVHlwZS50b0xvd2VyQ2FzZSgpID09PSAnanNvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmh0dHBSZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5odHRwUmVxdWVzdC5zdGF0dXMgPT09IDIwMCB8fCB0aGlzLmh0dHBSZXF1ZXN0LnN0YXR1cyA9PT0gMzA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5zdWNjZXNzSGFuZGxlcihkYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKHRoaXMuZmFpbHVyZUhhbmRsZXIodGhpcy5odHRwUmVxdWVzdC5zdGF0dXNUZXh0KSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWpheC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VIZWFkZXIgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzO1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBoZWFkZXJSZWdleC5leGVjKHRoaXMuaHR0cFJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuICAgICAgICAgICAgd2hpbGUgKGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbaGVhZGVyc1sxXS50b0xvd2VyQ2FzZSgpXSA9IGhlYWRlcnNbMl07XG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlclJlZ2V4LmV4ZWModGhpcy5odHRwUmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFkZXIgPSByZXNwb25zZUhlYWRlcnNba2V5LnRvTG93ZXJDYXNlKCldO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChoZWFkZXIpID8gbnVsbCA6IGhlYWRlcjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFqYXg7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFqYXggPSBBamF4O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hamF4LmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9kb21cIiwgXCIuL2Jhc2VcIiwgXCIuL2Jyb3dzZXJcIiwgXCIuL2V2ZW50LWhhbmRsZXJcIiwgXCIuL25vdGlmeS1wcm9wZXJ0eS1jaGFuZ2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBkb21fMSwgYmFzZV8xLCBicm93c2VyXzEsIGV2ZW50X2hhbmRsZXJfMSwgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBbmltYXRpb24gPSBBbmltYXRpb25fMSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBbmltYXRpb24sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFuaW1hdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCB1bmRlZmluZWQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lYXNpbmcgPSB7XG4gICAgICAgICAgICAgICAgZWFzZTogJ2N1YmljLWJlemllcigwLjI1MCwgMC4xMDAsIDAuMjUwLCAxLjAwMCknLFxuICAgICAgICAgICAgICAgIGxpbmVhcjogJ2N1YmljLWJlemllcigwLjI1MCwgMC4yNTAsIDAuNzUwLCAwLjc1MCknLFxuICAgICAgICAgICAgICAgIGVhc2VJbjogJ2N1YmljLWJlemllcigwLjQyMCwgMC4wMDAsIDEuMDAwLCAxLjAwMCknLFxuICAgICAgICAgICAgICAgIGVhc2VPdXQ6ICdjdWJpYy1iZXppZXIoMC4wMDAsIDAuMDAwLCAwLjU4MCwgMS4wMDApJyxcbiAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6ICdjdWJpYy1iZXppZXIoMC40MjAsIDAuMDAwLCAwLjU4MCwgMS4wMDApJyxcbiAgICAgICAgICAgICAgICBlbGFzdGljSW5PdXQ6ICdjdWJpYy1iZXppZXIoMC41LC0wLjU4LDAuMzgsMS44MSknLFxuICAgICAgICAgICAgICAgIGVsYXN0aWNJbjogJ2N1YmljLWJlemllcigwLjE3LDAuNjcsMC41OSwxLjgxKScsXG4gICAgICAgICAgICAgICAgZWxhc3RpY091dDogJ2N1YmljLWJlemllcigwLjcsLTAuNzUsMC45OSwxLjAxKSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQW5pbWF0aW9uLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSAhb3B0aW9ucyA/IHt9IDogb3B0aW9ucztcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZWwob3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9tXzEuc2VsZWN0QWxsKGVsZW1lbnQsIGRvY3VtZW50KSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRfMSA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5lbGVtZW50ID0gZWxlbWVudF8xO1xuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25fMS5kZWxheUFuaW1hdGlvbihtb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kZWwuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uXzEuZGVsYXlBbmltYXRpb24obW9kZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBbmltYXRpb24uc3RvcCA9IGZ1bmN0aW9uIChlbGVtZW50LCBtb2RlbCkge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5hbmltYXRpb24gPSAnJztcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdlLWFuaW1hdGUnKTtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25JZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGlvbi1pZCcpO1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZyYW1lSWQgPSBwYXJzZUludChhbmltYXRpb25JZCwgMTApO1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lSWQpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdlLWFuaW1hdGlvbi1pZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vZGVsICYmIG1vZGVsLmVuZCkge1xuICAgICAgICAgICAgICAgIG1vZGVsLmVuZC5jYWxsKHRoaXMsIG1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQW5pbWF0aW9uLmRlbGF5QW5pbWF0aW9uID0gZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgICAgICBpZiAobW9kZWwuZGVsYXkpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgQW5pbWF0aW9uXzEuYXBwbHlBbmltYXRpb24obW9kZWwpOyB9LCBtb2RlbC5kZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBBbmltYXRpb25fMS5hcHBseUFuaW1hdGlvbihtb2RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFuaW1hdGlvbi5hcHBseUFuaW1hdGlvbiA9IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIG1vZGVsLnRpbWVTdGFtcCA9IDA7XG4gICAgICAgICAgICB2YXIgc3RlcCA9IDA7XG4gICAgICAgICAgICB2YXIgdGltZXJJZCA9IDA7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lID0gMDtcbiAgICAgICAgICAgIHZhciBwcmV2VGltZVN0YW1wID0gMDtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IG1vZGVsLmR1cmF0aW9uO1xuICAgICAgICAgICAgbW9kZWwuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2UtYW5pbWF0ZScsICd0cnVlJyk7XG4gICAgICAgICAgICB2YXIgc3RhcnRBbmltYXRpb24gPSBmdW5jdGlvbiAodGltZVN0YW1wKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVTdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlRpbWVTdGFtcCA9IHByZXZUaW1lU3RhbXAgPT09IDAgPyB0aW1lU3RhbXAgOiBwcmV2VGltZVN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwudGltZVN0YW1wID0gKHRpbWVTdGFtcCArIG1vZGVsLnRpbWVTdGFtcCkgLSBwcmV2VGltZVN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlRpbWVTdGFtcCA9IHRpbWVTdGFtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RlcCAmJiBtb2RlbC5iZWdpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmJlZ2luLmNhbGwoX3RoaXMsIG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAgPSBzdGVwICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmcgPSBtb2RlbC50aW1lU3RhbXAgLyBzdGVwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLnRpbWVTdGFtcCA8IGR1cmF0aW9uICYmIG1vZGVsLnRpbWVTdGFtcCArIGF2ZyA8IGR1cmF0aW9uICYmIG1vZGVsLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gbW9kZWwubmFtZSArICcgJyArIG1vZGVsLmR1cmF0aW9uICsgJ21zICcgKyBtb2RlbC50aW1pbmdGdW5jdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwucHJvZ3Jlc3MuY2FsbChfdGhpcywgbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RhcnRBbmltYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGltZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2UtYW5pbWF0aW9uLWlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2UtYW5pbWF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5lbmQuY2FsbChfdGhpcywgbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGFydEFuaW1hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZS1hbmltYXRpb24taWQnLCB0aW1lcklkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVySWQpO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZS1hbmltYXRpb24taWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLmZhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmZhaWwuY2FsbChfdGhpcywgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc3RhcnRBbmltYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgQW5pbWF0aW9uLnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSB8fCB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVsYXk6IG9wdGlvbnMuZGVsYXkgfHwgdGhpcy5kZWxheSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiB0aGlzLmR1cmF0aW9uKSxcbiAgICAgICAgICAgICAgICBiZWdpbjogb3B0aW9ucy5iZWdpbiB8fCB0aGlzLmJlZ2luLFxuICAgICAgICAgICAgICAgIGVuZDogb3B0aW9ucy5lbmQgfHwgdGhpcy5lbmQsXG4gICAgICAgICAgICAgICAgZmFpbDogb3B0aW9ucy5mYWlsIHx8IHRoaXMuZmFpbCxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogb3B0aW9ucy5wcm9ncmVzcyB8fCB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiB0aGlzLmVhc2luZ1tvcHRpb25zLnRpbWluZ0Z1bmN0aW9uXSA/IHRoaXMuZWFzaW5nW29wdGlvbnMudGltaW5nRnVuY3Rpb25dIDpcbiAgICAgICAgICAgICAgICAgICAgKG9wdGlvbnMudGltaW5nRnVuY3Rpb24gfHwgdGhpcy5lYXNpbmdbdGhpcy50aW1pbmdGdW5jdGlvbl0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBBbmltYXRpb24ucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgfTtcbiAgICAgICAgQW5pbWF0aW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhbmltYXRpb24nO1xuICAgICAgICB9O1xuICAgICAgICBBbmltYXRpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBbmltYXRpb247XG4gICAgfShiYXNlXzEuQmFzZSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoJ0ZhZGVJbicpXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSg0MDApXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoJ2Vhc2UnKVxuICAgIF0sIEFuaW1hdGlvbi5wcm90b3R5cGUsIFwidGltaW5nRnVuY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KDApXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJkZWxheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuRXZlbnQoKVxuICAgIF0sIEFuaW1hdGlvbi5wcm90b3R5cGUsIFwicHJvZ3Jlc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBBbmltYXRpb24ucHJvdG90eXBlLCBcImJlZ2luXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5FdmVudCgpXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJlbmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBBbmltYXRpb24ucHJvdG90eXBlLCBcImZhaWxcIiwgdm9pZCAwKTtcbiAgICBBbmltYXRpb24gPSBBbmltYXRpb25fMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgQW5pbWF0aW9uKTtcbiAgICBleHBvcnRzLkFuaW1hdGlvbiA9IEFuaW1hdGlvbjtcbiAgICBmdW5jdGlvbiByaXBwbGVFZmZlY3QoZWxlbWVudCwgcmlwcGxlT3B0aW9ucywgZG9uZSkge1xuICAgICAgICB2YXIgcmlwcGxlTW9kZWwgPSBnZXRSaXBwbGVNb2RlbChyaXBwbGVPcHRpb25zKTtcbiAgICAgICAgaWYgKHJpcHBsZU1vZGVsLnJpcHBsZUZsYWcgPT09IGZhbHNlIHx8IChyaXBwbGVNb2RlbC5yaXBwbGVGbGFnID09PSB1bmRlZmluZWQgJiYgIWV4cG9ydHMuaXNSaXBwbGVFbmFibGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIEZ1bmN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXJpcHBsZScsICd0cnVlJyk7XG4gICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKGVsZW1lbnQsICdtb3VzZWRvd24nLCByaXBwbGVIYW5kbGVyLCB7IHBhcmVudDogZWxlbWVudCwgcmlwcGxlT3B0aW9uczogcmlwcGxlTW9kZWwgfSk7XG4gICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKGVsZW1lbnQsICdtb3VzZXVwJywgcmlwcGxlVXBIYW5kbGVyLCB7IHBhcmVudDogZWxlbWVudCwgcmlwcGxlT3B0aW9uczogcmlwcGxlTW9kZWwsIGRvbmU6IGRvbmUgfSk7XG4gICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKGVsZW1lbnQsICdtb3VzZWxlYXZlJywgcmlwcGxlTGVhdmVIYW5kbGVyLCB7IHBhcmVudDogZWxlbWVudCwgcmlwcGxlT3B0aW9uczogcmlwcGxlTW9kZWwgfSk7XG4gICAgICAgIGlmIChicm93c2VyXzEuQnJvd3Nlci5pc1BvaW50ZXIpIHtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKGVsZW1lbnQsICd0cmFuc2l0aW9uZW5kJywgcmlwcGxlTGVhdmVIYW5kbGVyLCB7IHBhcmVudDogZWxlbWVudCwgcmlwcGxlT3B0aW9uczogcmlwcGxlTW9kZWwgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1yaXBwbGUnKTtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZW1lbnQsICdtb3VzZWRvd24nLCByaXBwbGVIYW5kbGVyKTtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZW1lbnQsICdtb3VzZXVwJywgcmlwcGxlVXBIYW5kbGVyKTtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZW1lbnQsICdtb3VzZWxlYXZlJywgcmlwcGxlTGVhdmVIYW5kbGVyKTtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZW1lbnQsICd0cmFuc2l0aW9uZW5kJywgcmlwcGxlTGVhdmVIYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMucmlwcGxlRWZmZWN0ID0gcmlwcGxlRWZmZWN0O1xuICAgIGZ1bmN0aW9uIGdldFJpcHBsZU1vZGVsKHJpcHBsZU9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJpcHBsZU1vZGVsID0ge1xuICAgICAgICAgICAgc2VsZWN0b3I6IHJpcHBsZU9wdGlvbnMgJiYgcmlwcGxlT3B0aW9ucy5zZWxlY3RvciA/IHJpcHBsZU9wdGlvbnMuc2VsZWN0b3IgOiBudWxsLFxuICAgICAgICAgICAgaWdub3JlOiByaXBwbGVPcHRpb25zICYmIHJpcHBsZU9wdGlvbnMuaWdub3JlID8gcmlwcGxlT3B0aW9ucy5pZ25vcmUgOiBudWxsLFxuICAgICAgICAgICAgcmlwcGxlRmxhZzogcmlwcGxlT3B0aW9ucyAmJiByaXBwbGVPcHRpb25zLnJpcHBsZUZsYWcsXG4gICAgICAgICAgICBpc0NlbnRlclJpcHBsZTogcmlwcGxlT3B0aW9ucyAmJiByaXBwbGVPcHRpb25zLmlzQ2VudGVyUmlwcGxlLFxuICAgICAgICAgICAgZHVyYXRpb246IHJpcHBsZU9wdGlvbnMgJiYgcmlwcGxlT3B0aW9ucy5kdXJhdGlvbiA/IHJpcHBsZU9wdGlvbnMuZHVyYXRpb24gOiAzNTBcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJpcHBsZU1vZGVsO1xuICAgIH1cbiAgICBmdW5jdGlvbiByaXBwbGVIYW5kbGVyKGUpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IChlLnRhcmdldCk7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMucmlwcGxlT3B0aW9ucy5zZWxlY3RvcjtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBzZWxlY3RvciA/IGRvbV8xLmNsb3Nlc3QodGFyZ2V0LCBzZWxlY3RvcikgOiB0YXJnZXQ7XG4gICAgICAgIGlmICghZWxlbWVudCB8fCAodGhpcy5yaXBwbGVPcHRpb25zICYmIGRvbV8xLmNsb3Nlc3QodGFyZ2V0LCB0aGlzLnJpcHBsZU9wdGlvbnMuaWdub3JlKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIG9mZnNldFggPSBlLnBhZ2VYIC0gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgICAgICB2YXIgb2Zmc2V0WSA9IGUucGFnZVkgLSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgdmFyIHBhZ2VYID0gTWF0aC5tYXgoTWF0aC5hYnMob2Zmc2V0WCAtIG9mZnNldC5sZWZ0KSwgTWF0aC5hYnMob2Zmc2V0WCAtIG9mZnNldC5yaWdodCkpO1xuICAgICAgICB2YXIgcGFnZVkgPSBNYXRoLm1heChNYXRoLmFicyhvZmZzZXRZIC0gb2Zmc2V0LnRvcCksIE1hdGguYWJzKG9mZnNldFkgLSBvZmZzZXQuYm90dG9tKSk7XG4gICAgICAgIHZhciByYWRpdXMgPSBNYXRoLnNxcnQocGFnZVggKiBwYWdlWCArIHBhZ2VZICogcGFnZVkpO1xuICAgICAgICB2YXIgZGlhbWV0ZXIgPSByYWRpdXMgKiAyICsgJ3B4JztcbiAgICAgICAgdmFyIHggPSBvZmZzZXRYIC0gb2Zmc2V0LmxlZnQgLSByYWRpdXM7XG4gICAgICAgIHZhciB5ID0gb2Zmc2V0WSAtIG9mZnNldC50b3AgLSByYWRpdXM7XG4gICAgICAgIGlmICh0aGlzLnJpcHBsZU9wdGlvbnMgJiYgdGhpcy5yaXBwbGVPcHRpb25zLmlzQ2VudGVyUmlwcGxlKSB7XG4gICAgICAgICAgICB4ID0gMDtcbiAgICAgICAgICAgIHkgPSAwO1xuICAgICAgICAgICAgZGlhbWV0ZXIgPSAnMTAwJSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJpcHBsZScpO1xuICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLnJpcHBsZU9wdGlvbnMuZHVyYXRpb24udG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHN0eWxlcyA9ICd3aWR0aDogJyArIGRpYW1ldGVyICsgJztoZWlnaHQ6ICcgKyBkaWFtZXRlciArICc7bGVmdDogJyArIHggKyAncHg7dG9wOiAnICsgeSArICdweDsnICtcbiAgICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uOiAnICsgZHVyYXRpb24gKyAnbXM7JztcbiAgICAgICAgdmFyIHJpcHBsZUVsZW1lbnQgPSBkb21fMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcmlwcGxlLWVsZW1lbnQnLCBzdHlsZXM6IHN0eWxlcyB9KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChyaXBwbGVFbGVtZW50KTtcbiAgICAgICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUocmlwcGxlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgnb3BhY2l0eScpO1xuICAgICAgICByaXBwbGVFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKSc7XG4gICAgICAgIGlmIChlbGVtZW50ICE9PSB0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5hZGQoZWxlbWVudCwgJ21vdXNlbGVhdmUnLCByaXBwbGVMZWF2ZUhhbmRsZXIsIHsgcGFyZW50OiB0aGlzLnBhcmVudCwgcmlwcGxlT3B0aW9uczogdGhpcy5yaXBwbGVPcHRpb25zIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJpcHBsZVVwSGFuZGxlcihlKSB7XG4gICAgICAgIHJlbW92ZVJpcHBsZShlLCB0aGlzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmlwcGxlTGVhdmVIYW5kbGVyKGUpIHtcbiAgICAgICAgcmVtb3ZlUmlwcGxlKGUsIHRoaXMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVSaXBwbGUoZSwgZXZlbnRBcmdzKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IGV2ZW50QXJncy5yaXBwbGVPcHRpb25zLmR1cmF0aW9uO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gZXZlbnRBcmdzLnJpcHBsZU9wdGlvbnMuc2VsZWN0b3I7XG4gICAgICAgIHZhciBlbGVtZW50ID0gc2VsZWN0b3IgPyBkb21fMS5jbG9zZXN0KHRhcmdldCwgc2VsZWN0b3IpIDogdGFyZ2V0O1xuICAgICAgICBpZiAoIWVsZW1lbnQgfHwgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZignZS1yaXBwbGUnKSA9PT0gLTEpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJpcHBsZUVsZW1lbnRzID0gZG9tXzEuc2VsZWN0QWxsKCcuZS1yaXBwbGUtZWxlbWVudCcsIGVsZW1lbnQpO1xuICAgICAgICB2YXIgcmlwcGxlRWxlbWVudCA9IHJpcHBsZUVsZW1lbnRzW3JpcHBsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAocmlwcGxlRWxlbWVudCkge1xuICAgICAgICAgICAgcmlwcGxlRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50QXJncy5wYXJlbnQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZW1lbnQsICdtb3VzZWxlYXZlJywgcmlwcGxlTGVhdmVIYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyaXBwbGVFbGVtZW50ICYmIHJpcHBsZUVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHJpcHBsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyaXBwbGVFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLXJpcHBsZS1lbGVtZW50JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJpcHBsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50QXJncy5kb25lKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRBcmdzLmRvbmUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgZXhwb3J0cy5pc1JpcHBsZUVuYWJsZWQgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBlbmFibGVSaXBwbGUoaXNSaXBwbGUpIHtcbiAgICAgICAgZXhwb3J0cy5pc1JpcHBsZUVuYWJsZWQgPSBpc1JpcHBsZTtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuaXNSaXBwbGVFbmFibGVkO1xuICAgIH1cbiAgICBleHBvcnRzLmVuYWJsZVJpcHBsZSA9IGVuYWJsZVJpcHBsZTtcbiAgICB2YXIgQW5pbWF0aW9uXzE7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FuaW1hdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2V2ZW50LWhhbmRsZXJcIiwgXCIuL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBldmVudF9oYW5kbGVyXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWUsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICAgICAgICBpZiAodHlwZW9mIChwcm9wZXJ0aWVzKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gKHByb3BlcnRpZXMuaW5uZXJIVE1MID8gcHJvcGVydGllcy5pbm5lckhUTUwgOiAnJyk7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHByb3BlcnRpZXMuY2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBwcm9wZXJ0aWVzLmlkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLnN0eWxlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBwcm9wZXJ0aWVzLnN0eWxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuYXR0cnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXR0cmlidXRlcyhlbGVtZW50LCBwcm9wZXJ0aWVzLmF0dHJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcbiAgICBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50cywgY2xhc3Nlcykge1xuICAgICAgICB2YXIgY2xhc3NMaXN0ID0gZ2V0Q2xhc3NMaXN0KGNsYXNzZXMpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBjbGFzc0xpc3RfMSA9IGNsYXNzTGlzdDsgX2IgPCBjbGFzc0xpc3RfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NMaXN0XzFbX2JdO1xuICAgICAgICAgICAgICAgIGlmICghZWxlLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICB9XG4gICAgZXhwb3J0cy5hZGRDbGFzcyA9IGFkZENsYXNzO1xuICAgIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnRzLCBjbGFzc2VzKSB7XG4gICAgICAgIHZhciBjbGFzc0xpc3QgPSBnZXRDbGFzc0xpc3QoY2xhc3Nlcyk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBlbGVtZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSBfYVtfaV07XG4gICAgICAgICAgICBpZiAoZWxlLmNsYXNzTmFtZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIGNsYXNzTGlzdF8yID0gY2xhc3NMaXN0OyBfYiA8IGNsYXNzTGlzdF8yLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NMaXN0XzJbX2JdO1xuICAgICAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgfVxuICAgIGV4cG9ydHMucmVtb3ZlQ2xhc3MgPSByZW1vdmVDbGFzcztcbiAgICBmdW5jdGlvbiBnZXRDbGFzc0xpc3QoY2xhc3Nlcykge1xuICAgICAgICB2YXIgY2xhc3NMaXN0ID0gW107XG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5wdXNoKGNsYXNzZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xhc3NMaXN0ID0gY2xhc3NlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xhc3NMaXN0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1Zpc2libGUoZWxlbWVudCkge1xuICAgICAgICB2YXIgZWxlID0gZWxlbWVudDtcbiAgICAgICAgcmV0dXJuIChlbGUuc3R5bGUudmlzaWJpbGl0eSA9PT0gJycgJiYgZWxlLm9mZnNldFdpZHRoID4gMCk7XG4gICAgfVxuICAgIGV4cG9ydHMuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xuICAgIGZ1bmN0aW9uIHByZXBlbmQoZnJvbUVsZW1lbnRzLCB0b0VsZW1lbnQpIHtcbiAgICAgICAgdmFyIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBmcm9tRWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgZG9jRnJhZy5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICB9XG4gICAgICAgIHRvRWxlbWVudC5pbnNlcnRCZWZvcmUoZG9jRnJhZywgdG9FbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgcmV0dXJuIGZyb21FbGVtZW50cztcbiAgICB9XG4gICAgZXhwb3J0cy5wcmVwZW5kID0gcHJlcGVuZDtcbiAgICBmdW5jdGlvbiBhcHBlbmQoZnJvbUVsZW1lbnRzLCB0b0VsZW1lbnQpIHtcbiAgICAgICAgdmFyIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBmcm9tRWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgZG9jRnJhZy5hcHBlbmRDaGlsZChlbGUpO1xuICAgICAgICB9XG4gICAgICAgIHRvRWxlbWVudC5hcHBlbmRDaGlsZChkb2NGcmFnKTtcbiAgICAgICAgcmV0dXJuIGZyb21FbGVtZW50cztcbiAgICB9XG4gICAgZXhwb3J0cy5hcHBlbmQgPSBhcHBlbmQ7XG4gICAgZnVuY3Rpb24gZGV0YWNoKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgIHJldHVybiBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgICBleHBvcnRzLmRldGFjaCA9IGRldGFjaDtcbiAgICBmdW5jdGlvbiByZW1vdmUoZWxlbWVudCkge1xuICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5jbGVhckV2ZW50cyhlbGVtZW50KTtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gICAgZXhwb3J0cy5yZW1vdmUgPSByZW1vdmU7XG4gICAgZnVuY3Rpb24gYXR0cmlidXRlcyhlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7XG4gICAgICAgIHZhciBlbGUgPSBlbGVtZW50O1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlO1xuICAgIH1cbiAgICBleHBvcnRzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgIGZ1bmN0aW9uIHNlbGVjdChzZWxlY3RvciwgY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSB7IGNvbnRleHQgPSBkb2N1bWVudDsgfVxuICAgICAgICByZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9XG4gICAgZXhwb3J0cy5zZWxlY3QgPSBzZWxlY3Q7XG4gICAgZnVuY3Rpb24gc2VsZWN0QWxsKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHsgY29udGV4dCA9IGRvY3VtZW50OyB9XG4gICAgICAgIHZhciBub2RlTGlzdCA9IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgIHJldHVybiBub2RlTGlzdDtcbiAgICB9XG4gICAgZXhwb3J0cy5zZWxlY3RBbGwgPSBzZWxlY3RBbGw7XG4gICAgZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgICB2YXIgZWwgPSBlbGVtZW50O1xuICAgICAgICBpZiAodHlwZW9mIGVsLmNsb3Nlc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBlbC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIGlmIChtYXRjaGVzKGVsLCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGV4cG9ydHMuY2xvc2VzdCA9IGNsb3Nlc3Q7XG4gICAgZnVuY3Rpb24gc2libGluZ3MoZWxlbWVudCkge1xuICAgICAgICB2YXIgc2libGluZ3MgPSBbXTtcbiAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbGVtZW50LnBhcmVudE5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgY2hpbGROb2Rlc18xID0gY2hpbGROb2RlczsgX2kgPCBjaGlsZE5vZGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgY3VyTm9kZSA9IGNoaWxkTm9kZXNfMVtfaV07XG4gICAgICAgICAgICBpZiAoY3VyTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgZWxlbWVudCAhPT0gY3VyTm9kZSkge1xuICAgICAgICAgICAgICAgIHNpYmxpbmdzLnB1c2goY3VyTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpYmxpbmdzO1xuICAgIH1cbiAgICBleHBvcnRzLnNpYmxpbmdzID0gc2libGluZ3M7XG4gICAgZnVuY3Rpb24gZ2V0QXR0cmlidXRlT3JEZWZhdWx0KGVsZW1lbnQsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgYXR0clZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3BlcnR5KTtcbiAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChhdHRyVmFsKSkge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcGVydHksIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYXR0clZhbCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdHRyVmFsO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEF0dHJpYnV0ZU9yRGVmYXVsdCA9IGdldEF0dHJpYnV0ZU9yRGVmYXVsdDtcbiAgICBmdW5jdGlvbiBzZXRTdHlsZUF0dHJpYnV0ZShlbGVtZW50LCBhdHRycykge1xuICAgICAgICBpZiAoYXR0cnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnNldFN0eWxlQXR0cmlidXRlID0gc2V0U3R5bGVBdHRyaWJ1dGU7XG4gICAgZnVuY3Rpb24gY2xhc3NMaXN0KGVsZW1lbnQsIGFkZENsYXNzZXMsIHJlbW92ZUNsYXNzZXMpIHtcbiAgICAgICAgYWRkQ2xhc3MoW2VsZW1lbnRdLCBhZGRDbGFzc2VzKTtcbiAgICAgICAgcmVtb3ZlQ2xhc3MoW2VsZW1lbnRdLCByZW1vdmVDbGFzc2VzKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jbGFzc0xpc3QgPSBjbGFzc0xpc3Q7XG4gICAgZnVuY3Rpb24gbWF0Y2hlcyhlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IGVsZW1lbnQubWF0Y2hlcyB8fCBlbGVtZW50Lm1zTWF0Y2hlc1NlbGVjdG9yIHx8IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMuY2FsbChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW10uaW5kZXhPZi5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBlbGVtZW50KSAhPT0gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5tYXRjaGVzID0gbWF0Y2hlcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZG9tLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiLCBcIi4vZG9tXCIsIFwiLi9vYnNlcnZlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgZG9tXzEsIG9ic2VydmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhc2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXNlKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMub2xkUHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmZpbmFsVXBkYXRlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICAgICAgdGhpcy5jaGlsZENoYW5nZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICB0aGlzLm1vZGVsT2JzZXJ2ZXIgPSBuZXcgb2JzZXJ2ZXJfMS5PYnNlcnZlcih0aGlzKTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMob3B0aW9ucywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgQmFzZS5wcm90b3R5cGUuc2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChwcm9wLCBtdXRlT25DaGFuZ2UpIHtcbiAgICAgICAgICAgIHZhciBwcmV2RGV0ZWN0aW9uID0gdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlO1xuICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gISFtdXRlT25DaGFuZ2U7XG4gICAgICAgICAgICB1dGlsXzEubWVyZ2UodGhpcywgcHJvcCk7XG4gICAgICAgICAgICBpZiAobXV0ZU9uQ2hhbmdlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLm1lcmdlKHRoaXMuY2hhbmdlZFByb3BlcnRpZXMsIHByb3ApO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmluYWxVcGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMub2xkUHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gcHJldkRldGVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBCYXNlLmNhbGxDaGlsZERhdGFCaW5kID0gZnVuY3Rpb24gKG9iaiwgcGFyZW50KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRba2V5XSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBwYXJlbnRba2V5XTsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmpfMSA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpfMS5kYXRhQmluZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqXzEuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50W2tleV0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhc2UucHJvdG90eXBlLmNsZWFyQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZmluYWxVcGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMub2xkUHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jaGlsZENoYW5nZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICAgIH07XG4gICAgICAgIEJhc2UucHJvdG90eXBlLmRhdGFCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgQmFzZS5jYWxsQ2hpbGREYXRhQmluZCh0aGlzLmNoaWxkQ2hhbmdlZFByb3BlcnRpZXMsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMuY2hhbmdlZFByb3BlcnRpZXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2RGV0ZWN0aW9uID0gdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlO1xuICAgICAgICAgICAgICAgIHZhciBuZXdDaGFuZ2VzID0gdGhpcy5jaGFuZ2VkUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICB2YXIgb2xkQ2hhbmdlcyA9IHRoaXMub2xkUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2hhbmdlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5vblByb3BlcnR5Q2hhbmdlZChuZXdDaGFuZ2VzLCBvbGRDaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2UgPSBwcmV2RGV0ZWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIEJhc2UucHJvdG90eXBlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbGRQcm9wZXJ0aWVzW2tleV0gPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZFByb3BlcnRpZXNba2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5maW5hbFVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5maW5hbFVwZGF0ZSA9IHV0aWxfMS5zZXRJbW1lZGlhdGUodGhpcy5kYXRhQmluZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBCYXNlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5tb2RlbE9ic2VydmVyLm9uKGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2UucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsT2JzZXJ2ZXIub2ZmKGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2UucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBldmVudFByb3ApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZEZXRlY3Rpb24gPSB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbE9ic2VydmVyLm5vdGlmeShldmVudE5hbWUsIGV2ZW50UHJvcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gcHJldkRldGVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmFzZS5wcm90b3R5cGUuYWRkSW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kdWxlQ2xhc3MgPSAnZS0nICsgdGhpcy5nZXRNb2R1bGVOYW1lKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGRvbV8xLmFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBbJ2UtY29udHJvbCcsIG1vZHVsZUNsYXNzXSk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmVsZW1lbnQuZWoyX2luc3RhbmNlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZWoyX2luc3RhbmNlcy5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgW3RoaXNdLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXNlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5lajJfaW5zdGFuY2VzID1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZWoyX2luc3RhbmNlcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGkgIT09IF90aGlzOyB9KTtcbiAgICAgICAgICAgIGRvbV8xLnJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBbJ2UtJyArIHRoaXMuZ2V0TW9kdWxlTmFtZSgpXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmVqMl9pbnN0YW5jZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZG9tXzEucmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFsnZS1jb250cm9sJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhckNoYW5nZXMoKTtcbiAgICAgICAgICAgIHRoaXMubW9kZWxPYnNlcnZlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhc2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhc2UgPSBCYXNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9iYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBPYnNlcnZlcihjb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmJvdW5kZWRFdmVudHMgPSB7fTtcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIDtcbiAgICAgICAgT2JzZXJ2ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKHByb3BlcnR5LCBoYW5kbGVyLCBjb250ZXh0KSB7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNudHh0ID0gY29udGV4dCB8fCB0aGlzLmNvbnRleHQ7XG4gICAgICAgICAgICBpZiAodGhpcy5ub3RFeGlzdChwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kZWRFdmVudHNbcHJvcGVydHldID0gW3sgaGFuZGxlcjogaGFuZGxlciwgY29udGV4dDogY250eHQgfV07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSGFuZGxlclByZXNlbnQodGhpcy5ib3VuZGVkRXZlbnRzW3Byb3BlcnR5XSwgaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kZWRFdmVudHNbcHJvcGVydHldLnB1c2goeyBoYW5kbGVyOiBoYW5kbGVyLCBjb250ZXh0OiBjbnR4dCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgT2JzZXJ2ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChwcm9wZXJ0eSwgaGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMubm90RXhpc3QocHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGN1ck9iamVjdCA9IHV0aWxfMS5nZXRWYWx1ZShwcm9wZXJ0eSwgdGhpcy5ib3VuZGVkRXZlbnRzKTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJPYmplY3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIgPT09IGN1ck9iamVjdFtpXS5oYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJPYmplY3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ib3VuZGVkRXZlbnRzW3Byb3BlcnR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgT2JzZXJ2ZXIucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSwgYXJndW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5vdEV4aXN0KHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmd1bWVudCkge1xuICAgICAgICAgICAgICAgIGFyZ3VtZW50Lm5hbWUgPSBwcm9wZXJ0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJPYmplY3QgPSB1dGlsXzEuZ2V0VmFsdWUocHJvcGVydHksIHRoaXMuYm91bmRlZEV2ZW50cykuc2xpY2UoMCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGN1ck9iamVjdF8xID0gY3VyT2JqZWN0OyBfaSA8IGN1ck9iamVjdF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXIgPSBjdXJPYmplY3RfMVtfaV07XG4gICAgICAgICAgICAgICAgY3VyLmhhbmRsZXIuY2FsbChjdXIuY29udGV4dCwgYXJndW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYm91bmRlZEV2ZW50cyA9IHRoaXMuY29udGV4dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgT2JzZXJ2ZXIucHJvdG90eXBlLm5vdEV4aXN0ID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdW5kZWRFdmVudHMuaGFzT3duUHJvcGVydHkocHJvcCkgPT09IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBPYnNlcnZlci5wcm90b3R5cGUuaXNIYW5kbGVyUHJlc2VudCA9IGZ1bmN0aW9uIChib3VuZGVkRXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGJvdW5kZWRFdmVudHNfMSA9IGJvdW5kZWRFdmVudHM7IF9pIDwgYm91bmRlZEV2ZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXIgPSBib3VuZGVkRXZlbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjdXIuaGFuZGxlciA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYnNlcnZlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuT2JzZXJ2ZXIgPSBPYnNlcnZlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvb2JzZXJ2ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSRUdYX01PQklMRSA9IC9hbmRyb2lkfHdlYm9zfGlwaG9uZXxpcGFkfGlwb2R8YmxhY2tiZXJyeXxpZW1vYmlsZXxvcGVyYSBtaW5pfG1vYmlsZS9pO1xuICAgIHZhciBSRUdYX0lFID0gL21zaWV8dHJpZGVudC9pO1xuICAgIHZhciBSRUdYX0lFMTEgPSAvVHJpZGVudFxcLzdcXC4vO1xuICAgIHZhciBSRUdYX0lPUyA9IC8oaXBhZHxpcGhvbmV8aXBvZCB0b3VjaCkvaTtcbiAgICB2YXIgUkVHWF9JT1M3ID0gLyhpcGFkfGlwaG9uZXxpcG9kIHRvdWNoKTsuKm9zIDdfXFxkfChpcGFkfGlwaG9uZXxpcG9kIHRvdWNoKTsuKm9zIDhfXFxkL2k7XG4gICAgdmFyIFJFR1hfQU5EUk9JRCA9IC9hbmRyb2lkL2k7XG4gICAgdmFyIFJFR1hfV0lORE9XUyA9IC90cmlkZW50fHdpbmRvd3MgcGhvbmV8ZWRnZS9pO1xuICAgIHZhciBSRUdYX1ZFUlNJT04gPSAvKHZlcnNpb24pWyBcXC9dKFtcXHcuXSspL2k7XG4gICAgdmFyIFJFR1hfQlJPV1NFUiA9IHtcbiAgICAgICAgT1BFUkE6IC8ob3BlcmF8b3ByKSg/Oi4qdmVyc2lvbnwpWyBcXC9dKFtcXHcuXSspL2ksXG4gICAgICAgIEVER0U6IC8oZWRnZSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS9pLFxuICAgICAgICBDSFJPTUU6IC8oY2hyb21lfGNyaW9zKVsgXFwvXShbXFx3Ll0rKS9pLFxuICAgICAgICBQQU5USE9NRUpTOiAvKHBoYW50b21qcylbIFxcL10oW1xcdy5dKykvaSxcbiAgICAgICAgU0FGQVJJOiAvKHNhZmFyaSlbIFxcL10oW1xcdy5dKykvaSxcbiAgICAgICAgV0VCS0lUOiAvKHdlYmtpdClbIFxcL10oW1xcdy5dKykvaSxcbiAgICAgICAgTVNJRTogLyhtc2llfHRyaWRlbnQpIChbXFx3Ll0rKS9pLFxuICAgICAgICBNT1pJTExBOiAvKG1vemlsbGEpKD86Lio/IHJ2OihbXFx3Ll0rKXwpL2lcbiAgICB9O1xuICAgIHdpbmRvdy5icm93c2VyRGV0YWlscyA9IHdpbmRvdy5icm93c2VyRGV0YWlscyB8fCB7fTtcbiAgICB2YXIgQnJvd3NlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJyb3dzZXIoKSB7XG4gICAgICAgIH1cbiAgICAgICAgQnJvd3Nlci5leHRyYWN0QnJvd3NlckRldGFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBicm93c2VySW5mbyA9IHsgY3VsdHVyZToge30gfTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoUkVHWF9CUk9XU0VSKTtcbiAgICAgICAgICAgIHZhciBjbGllbnRJbmZvID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGNsaWVudEluZm8gPSBCcm93c2VyLnVzZXJBZ2VudC5tYXRjaChSRUdYX0JST1dTRVJba2V5XSk7XG4gICAgICAgICAgICAgICAgaWYgKGNsaWVudEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJvd3NlckluZm8ubmFtZSA9IChjbGllbnRJbmZvWzFdLnRvTG93ZXJDYXNlKCkgPT09ICdvcHInID8gJ29wZXJhJyA6IGNsaWVudEluZm9bMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyb3dzZXJJbmZvLm5hbWUgPSAoY2xpZW50SW5mb1sxXS50b0xvd2VyQ2FzZSgpID09PSAnY3Jpb3MnID8gJ2Nocm9tZScgOiBicm93c2VySW5mby5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgYnJvd3NlckluZm8udmVyc2lvbiA9IGNsaWVudEluZm9bMl07XG4gICAgICAgICAgICAgICAgICAgIGJyb3dzZXJJbmZvLmN1bHR1cmUubmFtZSA9IGJyb3dzZXJJbmZvLmN1bHR1cmUubGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIUJyb3dzZXIudXNlckFnZW50Lm1hdGNoKFJFR1hfSUUxMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXJJbmZvLm5hbWUgPSAnbXNpZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdmVyc2lvbiA9IEJyb3dzZXIudXNlckFnZW50Lm1hdGNoKFJFR1hfVkVSU0lPTik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VySW5mby5uYW1lID09PSAnc2FmYXJpJyAmJiB2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicm93c2VySW5mby52ZXJzaW9uID0gdmVyc2lvblsyXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnJvd3NlckluZm87XG4gICAgICAgIH07XG4gICAgICAgIEJyb3dzZXIuZ2V0RXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBldmVudHMgPSB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNQb2ludGVyOiAncG9pbnRlcmRvd24nLCBpc1RvdWNoOiAndG91Y2hzdGFydCcsIGlzRGV2aWNlOiAnbW91c2Vkb3duJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbW92ZToge1xuICAgICAgICAgICAgICAgICAgICBpc1BvaW50ZXI6ICdwb2ludGVybW92ZScsIGlzVG91Y2g6ICd0b3VjaG1vdmUnLCBpc0RldmljZTogJ21vdXNlbW92ZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuZDoge1xuICAgICAgICAgICAgICAgICAgICBpc1BvaW50ZXI6ICdwb2ludGVydXAnLCBpc1RvdWNoOiAndG91Y2hlbmQnLCBpc0RldmljZTogJ21vdXNldXAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiAoQnJvd3Nlci5pc1BvaW50ZXIgPyBldmVudHNbZXZlbnRdLmlzUG9pbnRlciA6XG4gICAgICAgICAgICAgICAgKEJyb3dzZXIuaXNUb3VjaCA/IGV2ZW50c1tldmVudF0uaXNUb3VjaCArICghQnJvd3Nlci5pc0RldmljZSA/ICcgJyArIGV2ZW50c1tldmVudF0uaXNEZXZpY2UgOiAnJylcbiAgICAgICAgICAgICAgICAgICAgOiBldmVudHNbZXZlbnRdLmlzRGV2aWNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIEJyb3dzZXIuZ2V0VG91Y2hTdGFydEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEJyb3dzZXIuZ2V0RXZlbnQoJ3N0YXJ0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIEJyb3dzZXIuZ2V0VG91Y2hFbmRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBCcm93c2VyLmdldEV2ZW50KCdlbmQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQnJvd3Nlci5nZXRUb3VjaE1vdmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBCcm93c2VyLmdldEV2ZW50KCdtb3ZlJyk7XG4gICAgICAgIH07XG4gICAgICAgIEJyb3dzZXIuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoa2V5LCByZWdYKSB7XG4gICAgICAgICAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB3aW5kb3cuYnJvd3NlckRldGFpbHM7XG4gICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBicm93c2VyRGV0YWlsc1trZXldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXJEZXRhaWxzW2tleV0gPSByZWdYLnRlc3QoQnJvd3Nlci51c2VyQWdlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXJEZXRhaWxzW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcInVzZXJBZ2VudFwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQnJvd3Nlci51QTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh1QSkge1xuICAgICAgICAgICAgICAgIEJyb3dzZXIudUEgPSB1QTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYnJvd3NlckRldGFpbHMgPSB7fTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlciwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEuaXNVbmRlZmluZWQod2luZG93LmJyb3dzZXJEZXRhaWxzLmluZm8pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnJvd3NlckRldGFpbHMuaW5mbyA9IEJyb3dzZXIuZXh0cmFjdEJyb3dzZXJEZXRhaWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5icm93c2VyRGV0YWlscy5pbmZvO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcImlzSUVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJyb3dzZXIuZ2V0VmFsdWUoJ2lzSUUnLCBSRUdYX0lFKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlciwgXCJpc1RvdWNoXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEuaXNVbmRlZmluZWQod2luZG93LmJyb3dzZXJEZXRhaWxzLmlzVG91Y2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnJvd3NlckRldGFpbHMuaXNUb3VjaCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmJyb3dzZXJEZXRhaWxzLmlzVG91Y2g7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJyb3dzZXIsIFwiaXNQb2ludGVyXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEuaXNVbmRlZmluZWQod2luZG93LmJyb3dzZXJEZXRhaWxzLmlzUG9pbnRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5icm93c2VyRGV0YWlscy5pc1BvaW50ZXIgPSAoJ3BvaW50ZXJFbmFibGVkJyBpbiB3aW5kb3cubmF2aWdhdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5icm93c2VyRGV0YWlscy5pc1BvaW50ZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJyb3dzZXIsIFwiaXNNU1BvaW50ZXJcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZCh3aW5kb3cuYnJvd3NlckRldGFpbHMuaXNNU1BvaW50ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnJvd3NlckRldGFpbHMuaXNNU1BvaW50ZXIgPSAoJ21zUG9pbnRlckVuYWJsZWQnIGluIHdpbmRvdy5uYXZpZ2F0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmJyb3dzZXJEZXRhaWxzLmlzTVNQb2ludGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcImlzRGV2aWNlXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCcm93c2VyLmdldFZhbHVlKCdpc0RldmljZScsIFJFR1hfTU9CSUxFKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlciwgXCJpc0lvc1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQnJvd3Nlci5nZXRWYWx1ZSgnaXNJb3MnLCBSRUdYX0lPUyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJyb3dzZXIsIFwiaXNJb3M3XCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCcm93c2VyLmdldFZhbHVlKCdpc0lvczcnLCBSRUdYX0lPUzcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcImlzQW5kcm9pZFwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQnJvd3Nlci5nZXRWYWx1ZSgnaXNBbmRyb2lkJywgUkVHWF9BTkRST0lEKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlciwgXCJpc1dlYlZpZXdcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZCh3aW5kb3cuYnJvd3NlckRldGFpbHMuaXNXZWJWaWV3KSkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYnJvd3NlckRldGFpbHMuaXNXZWJWaWV3ID0gISh1dGlsXzEuaXNVbmRlZmluZWQod2luZG93LmNvcmRvdmEpICYmIHV0aWxfMS5pc1VuZGVmaW5lZCh3aW5kb3cuUGhvbmVHYXApXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB1dGlsXzEuaXNVbmRlZmluZWQod2luZG93LnBob25lZ2FwKSAmJiB3aW5kb3cuZm9yZ2UgIT09ICdvYmplY3QnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5icm93c2VyRGV0YWlscy5pc1dlYlZpZXc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnJvd3NlckRldGFpbHMuaXNXZWJWaWV3O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcImlzV2luZG93c1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQnJvd3Nlci5nZXRWYWx1ZSgnaXNXaW5kb3dzJywgUkVHWF9XSU5ET1dTKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlciwgXCJ0b3VjaFN0YXJ0RXZlbnRcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZCh3aW5kb3cuYnJvd3NlckRldGFpbHMudG91Y2hTdGFydEV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmJyb3dzZXJEZXRhaWxzLnRvdWNoU3RhcnRFdmVudCA9IEJyb3dzZXIuZ2V0VG91Y2hTdGFydEV2ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnJvd3NlckRldGFpbHMudG91Y2hTdGFydEV2ZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcInRvdWNoTW92ZUV2ZW50XCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEuaXNVbmRlZmluZWQod2luZG93LmJyb3dzZXJEZXRhaWxzLnRvdWNoTW92ZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmJyb3dzZXJEZXRhaWxzLnRvdWNoTW92ZUV2ZW50ID0gQnJvd3Nlci5nZXRUb3VjaE1vdmVFdmVudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmJyb3dzZXJEZXRhaWxzLnRvdWNoTW92ZUV2ZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyLCBcInRvdWNoRW5kRXZlbnRcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZCh3aW5kb3cuYnJvd3NlckRldGFpbHMudG91Y2hFbmRFdmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5icm93c2VyRGV0YWlscy50b3VjaEVuZEV2ZW50ID0gQnJvd3Nlci5nZXRUb3VjaEVuZEV2ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnJvd3NlckRldGFpbHMudG91Y2hFbmRFdmVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gQnJvd3NlcjtcbiAgICB9KCkpO1xuICAgIEJyb3dzZXIudUEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIGV4cG9ydHMuQnJvd3NlciA9IEJyb3dzZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGZ1bmN0aW9uIGdldE9iamVjdChpbnN0YW5jZSwgY3VyS2V5LCBkZWZhdWx0VmFsdWUsIHR5cGUpIHtcbiAgICAgICAgaWYgKCFpbnN0YW5jZS5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGN1cktleSkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnByb3BlcnRpZXNbY3VyS2V5XSA9IHV0aWxfMS5jcmVhdGVJbnN0YW5jZSh0eXBlLCBbaW5zdGFuY2UsIGN1cktleSwgZGVmYXVsdFZhbHVlXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnByb3BlcnRpZXNbY3VyS2V5XTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0QXJyYXkoaW5zdGFuY2UsIGN1cktleSwgZGVmYXVsdFZhbHVlLCB0eXBlLCBpc1NldHRlciwgaXNGYWN0b3J5KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGxlbiA9IGRlZmF1bHRWYWx1ZS5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjdXJUeXBlID0gdHlwZTtcbiAgICAgICAgICAgIGlmIChpc0ZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBjdXJUeXBlID0gdHlwZShkZWZhdWx0VmFsdWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluc3QgPSB1dGlsXzEuY3JlYXRlSW5zdGFuY2UoY3VyVHlwZSwgW2luc3RhbmNlLCBjdXJLZXksIHt9LCB0cnVlXSk7XG4gICAgICAgICAgICAgICAgaW5zdC5zZXRQcm9wZXJ0aWVzKGRlZmF1bHRWYWx1ZVtpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaW5zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh1dGlsXzEuY3JlYXRlSW5zdGFuY2UoY3VyVHlwZSwgW2luc3RhbmNlLCBjdXJLZXksIGRlZmF1bHRWYWx1ZVtpXSwgdHJ1ZV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eUdldHRlcihkZWZhdWx0VmFsdWUsIGN1cktleSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoY3VyS2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllc1tjdXJLZXldID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1tjdXJLZXldO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eVNldHRlcihkZWZhdWx0VmFsdWUsIGN1cktleSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzW2N1cktleV0gIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFZhbCA9IHRoaXMucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShjdXJLZXkpID8gdGhpcy5wcm9wZXJ0aWVzW2N1cktleV0gOiBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2hhbmdlcyhjdXJLZXksIG5ld1ZhbHVlLCBvbGRWYWwpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllc1tjdXJLZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBsZXhHZXR0ZXIoZGVmYXVsdFZhbHVlLCBjdXJLZXksIHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRPYmplY3QodGhpcywgY3VyS2V5LCBkZWZhdWx0VmFsdWUsIHR5cGUpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wbGV4U2V0dGVyKGRlZmF1bHRWYWx1ZSwgY3VyS2V5LCB0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgIGdldE9iamVjdCh0aGlzLCBjdXJLZXksIGRlZmF1bHRWYWx1ZSwgdHlwZSkuc2V0UHJvcGVydGllcyhuZXdWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBsZXhGYWN0b3J5R2V0dGVyKGRlZmF1bHRWYWx1ZSwgY3VyS2V5LCB0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3VyVHlwZSA9IHR5cGUoe30pO1xuICAgICAgICAgICAgcmV0dXJuIGdldE9iamVjdCh0aGlzLCBjdXJLZXksIGRlZmF1bHRWYWx1ZSwgY3VyVHlwZSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBsZXhGYWN0b3J5U2V0dGVyKGRlZmF1bHRWYWx1ZSwgY3VyS2V5LCB0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjdXJUeXBlID0gdHlwZShuZXdWYWx1ZSk7XG4gICAgICAgICAgICBnZXRPYmplY3QodGhpcywgY3VyS2V5LCBkZWZhdWx0VmFsdWUsIGN1clR5cGUpLnNldFByb3BlcnRpZXMobmV3VmFsdWUpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wbGV4QXJyYXlHZXR0ZXIoZGVmYXVsdFZhbHVlLCBjdXJLZXksIHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGN1cktleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmQ29sbGVjdGlvbiA9IGdldE9iamVjdEFycmF5KHRoaXMsIGN1cktleSwgZGVmYXVsdFZhbHVlLCB0eXBlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzW2N1cktleV0gPSBkZWZDb2xsZWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1tjdXJLZXldO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wbGV4QXJyYXlTZXR0ZXIoZGVmYXVsdFZhbHVlLCBjdXJLZXksIHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlQ29sbGVjdGlvbiA9IGdldE9iamVjdEFycmF5KHRoaXMsIGN1cktleSwgZGVmYXVsdFZhbHVlLCB0eXBlLCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgbmV3VmFsQ29sbGVjdGlvbiA9IGdldE9iamVjdEFycmF5KHRoaXMsIGN1cktleSwgbmV3VmFsdWUsIHR5cGUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2hhbmdlcyhjdXJLZXksIG5ld1ZhbENvbGxlY3Rpb24sIG9sZFZhbHVlQ29sbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXNbY3VyS2V5XSA9IG5ld1ZhbENvbGxlY3Rpb247XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBsZXhBcnJheUZhY3RvcnlTZXR0ZXIoZGVmYXVsdFZhbHVlLCBjdXJLZXksIHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlQ29sbGVjdGlvbiA9IGdldE9iamVjdEFycmF5KHRoaXMsIGN1cktleSwgZGVmYXVsdFZhbHVlLCB0eXBlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgbmV3VmFsQ29sbGVjdGlvbiA9IGdldE9iamVjdEFycmF5KHRoaXMsIGN1cktleSwgbmV3VmFsdWUsIHR5cGUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2hhbmdlcyhjdXJLZXksIG5ld1ZhbENvbGxlY3Rpb24sIG9sZFZhbHVlQ29sbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXNbY3VyS2V5XSA9IG5ld1ZhbENvbGxlY3Rpb247XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBsZXhBcnJheUZhY3RvcnlHZXR0ZXIoZGVmYXVsdFZhbHVlLCBjdXJLZXksIHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdXJUeXBlID0gdHlwZSh7fSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShjdXJLZXkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZkNvbGxlY3Rpb24gPSBnZXRPYmplY3RBcnJheSh0aGlzLCBjdXJLZXksIGRlZmF1bHRWYWx1ZSwgY3VyVHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllc1tjdXJLZXldID0gZGVmQ29sbGVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXNbY3VyS2V5XTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gUHJvcGVydHkoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICAgICAgc2V0OiBwcm9wZXJ0eVNldHRlcihkZWZhdWx0VmFsdWUsIGtleSksXG4gICAgICAgICAgICAgICAgZ2V0OiBwcm9wZXJ0eUdldHRlcihkZWZhdWx0VmFsdWUsIGtleSksXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHByb3BlcnR5RGVzY3JpcHRvcik7XG4gICAgICAgICAgICBhZGRQcm9wZXJ0eUNvbGxlY3Rpb24odGFyZ2V0LCBrZXksICdwcm9wJywgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5Qcm9wZXJ0eSA9IFByb3BlcnR5O1xuICAgIGZ1bmN0aW9uIENvbXBsZXgoZGVmYXVsdFZhbHVlLCB0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICAgICAgc2V0OiBjb21wbGV4U2V0dGVyKGRlZmF1bHRWYWx1ZSwga2V5LCB0eXBlKSxcbiAgICAgICAgICAgICAgICBnZXQ6IGNvbXBsZXhHZXR0ZXIoZGVmYXVsdFZhbHVlLCBrZXksIHR5cGUpLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBwcm9wZXJ0eURlc2NyaXB0b3IpO1xuICAgICAgICAgICAgYWRkUHJvcGVydHlDb2xsZWN0aW9uKHRhcmdldCwga2V5LCAnY29tcGxleFByb3AnLCBkZWZhdWx0VmFsdWUsIHR5cGUpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBleHBvcnRzLkNvbXBsZXggPSBDb21wbGV4O1xuICAgIGZ1bmN0aW9uIENvbXBsZXhGYWN0b3J5KHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5RGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgICAgICBzZXQ6IGNvbXBsZXhGYWN0b3J5U2V0dGVyKHt9LCBrZXksIHR5cGUpLFxuICAgICAgICAgICAgICAgIGdldDogY29tcGxleEZhY3RvcnlHZXR0ZXIoe30sIGtleSwgdHlwZSksXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHByb3BlcnR5RGVzY3JpcHRvcik7XG4gICAgICAgICAgICBhZGRQcm9wZXJ0eUNvbGxlY3Rpb24odGFyZ2V0LCBrZXksICdjb21wbGV4UHJvcCcsIHt9LCB0eXBlKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5Db21wbGV4RmFjdG9yeSA9IENvbXBsZXhGYWN0b3J5O1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oZGVmYXVsdFZhbHVlLCB0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICAgICAgc2V0OiBjb21wbGV4QXJyYXlTZXR0ZXIoZGVmYXVsdFZhbHVlLCBrZXksIHR5cGUpLFxuICAgICAgICAgICAgICAgIGdldDogY29tcGxleEFycmF5R2V0dGVyKGRlZmF1bHRWYWx1ZSwga2V5LCB0eXBlKSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgcHJvcGVydHlEZXNjcmlwdG9yKTtcbiAgICAgICAgICAgIGFkZFByb3BlcnR5Q29sbGVjdGlvbih0YXJnZXQsIGtleSwgJ2NvbFByb3AnLCBkZWZhdWx0VmFsdWUsIHR5cGUpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBleHBvcnRzLkNvbGxlY3Rpb24gPSBDb2xsZWN0aW9uO1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb25GYWN0b3J5KHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5RGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgICAgICBzZXQ6IGNvbXBsZXhBcnJheUZhY3RvcnlTZXR0ZXIoW10sIGtleSwgdHlwZSksXG4gICAgICAgICAgICAgICAgZ2V0OiBjb21wbGV4QXJyYXlGYWN0b3J5R2V0dGVyKFtdLCBrZXksIHR5cGUpLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBwcm9wZXJ0eURlc2NyaXB0b3IpO1xuICAgICAgICAgICAgYWRkUHJvcGVydHlDb2xsZWN0aW9uKHRhcmdldCwga2V5LCAnY29sUHJvcCcsIHt9LCB0eXBlKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5Db2xsZWN0aW9uRmFjdG9yeSA9IENvbGxlY3Rpb25GYWN0b3J5O1xuICAgIGZ1bmN0aW9uIEV2ZW50KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnREZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMucHJvcGVydGllc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxDb250ZXh0ID0gZ2V0UGFyZW50Q29udGV4dCh0aGlzLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZChvbGRWYWx1ZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZXh0LmNvbnRleHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihmaW5hbENvbnRleHQucHJlZml4LCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbnRleHQuY29udGV4dC5hZGRFdmVudExpc3RlbmVyKGZpbmFsQ29udGV4dC5wcmVmaXgsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllc1trZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldDogcHJvcGVydHlHZXR0ZXIodW5kZWZpbmVkLCBrZXkpLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBldmVudERlc2NyaXB0b3IpO1xuICAgICAgICAgICAgYWRkUHJvcGVydHlDb2xsZWN0aW9uKHRhcmdldCwga2V5LCAnZXZlbnQnKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5FdmVudCA9IEV2ZW50O1xuICAgIGZ1bmN0aW9uIE5vdGlmeVByb3BlcnR5Q2hhbmdlcyhjbGFzc0NvbnN0cnVjdG9yKSB7XG4gICAgfVxuICAgIGV4cG9ydHMuTm90aWZ5UHJvcGVydHlDaGFuZ2VzID0gTm90aWZ5UHJvcGVydHlDaGFuZ2VzO1xuICAgIGZ1bmN0aW9uIGFkZFByb3BlcnR5Q29sbGVjdGlvbih0YXJnZXQsIGtleSwgcHJvcGVydHlUeXBlLCBkZWZhdWx0VmFsdWUsIHR5cGUpIHtcbiAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZCh0YXJnZXQucHJvcExpc3QpKSB7XG4gICAgICAgICAgICB0YXJnZXQucHJvcExpc3QgPSB7XG4gICAgICAgICAgICAgICAgcHJvcHM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbXBsZXhQcm9wczogW10sXG4gICAgICAgICAgICAgICAgY29sUHJvcHM6IFtdLFxuICAgICAgICAgICAgICAgIGV2ZW50czogW10sXG4gICAgICAgICAgICAgICAgcHJvcE5hbWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb21wbGV4UHJvcE5hbWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb2xQcm9wTmFtZXM6IFtdLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZXM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldC5wcm9wTGlzdFtwcm9wZXJ0eVR5cGUgKyAncyddLnB1c2goe1xuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBrZXksXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIHRhcmdldC5wcm9wTGlzdFtwcm9wZXJ0eVR5cGUgKyAnTmFtZXMnXS5wdXNoKGtleSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJ1aWxkZXJQcm9wZXJ0aWVzKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAodXRpbF8xLmlzVW5kZWZpbmVkKGNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRlck9iamVjdCkpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRlck9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSwgcHJvcENvbGxlY3Rpb25zOiBbXSwgYWRkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9wZXJ0eUFycmF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wQ29sbGVjdGlvbnMucHVzaCh1dGlsXzEuZXh0ZW5kKHt9LCB0aGlzLnByb3BlcnRpZXMsIHt9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciByZXggPSAvY29tcGxleC87XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoY29tcG9uZW50LnByb3RvdHlwZS5wcm9wTGlzdCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXgudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQucHJvdG90eXBlLmJ1aWxkZXJPYmplY3RbcHJvcC5wcm9wZXJ0eU5hbWVdID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkVHlwZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS5tZXJnZShjaGlsZFR5cGUsIGdldEJ1aWxkZXJQcm9wZXJ0aWVzKHByb3AudHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKGNoaWxkVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkVHlwZS5pc1Byb3BlcnR5QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFZhbHVlID0gdXRpbF8xLmV4dGVuZCh7fSwgY2hpbGRUeXBlLnByb3BlcnRpZXMsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBWYWx1ZSA9IGNoaWxkVHlwZS5wcm9wQ29sbGVjdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllc1twcm9wLnByb3BlcnR5TmFtZV0gPSB0ZW1wVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRUeXBlLnByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZFR5cGUucHJvcENvbGxlY3Rpb25zID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRUeXBlLmlzUHJvcGVydHlBcnJheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRlck9iamVjdFtwcm9wLnByb3BlcnR5TmFtZV0gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnRpZXNbcHJvcC5wcm9wZXJ0eU5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gY29tcG9uZW50LnByb3RvdHlwZS5wcm9wTGlzdFtrZXldOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShwcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRlck9iamVjdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ3JlYXRlQnVpbGRlcihjb21wb25lbnQpIHtcbiAgICAgICAgdmFyIGJ1aWxkZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbnN0YW5jZUZ1bmN0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICghYnVpbGRlckZ1bmN0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnY3JlYXRlJykpIHtcbiAgICAgICAgICAgICAgICBidWlsZGVyRnVuY3Rpb24ucHJvdG90eXBlID0gZ2V0QnVpbGRlclByb3BlcnRpZXMoY29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICBidWlsZGVyRnVuY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSB1dGlsXzEuZXh0ZW5kKHt9LCB7fSwgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgY29tcG9uZW50KHRlbXAsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgYnVpbGRlckZ1bmN0aW9uKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaW5zdGFuY2VGdW5jdGlvbjtcbiAgICB9XG4gICAgZXhwb3J0cy5DcmVhdGVCdWlsZGVyID0gQ3JlYXRlQnVpbGRlcjtcbiAgICBmdW5jdGlvbiBnZXRQYXJlbnRDb250ZXh0KGNvbnRleHQsIHByZWZpeCkge1xuICAgICAgICBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eSgncGFyZW50T2JqJykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBjb250ZXh0OiBjb250ZXh0LCBwcmVmaXg6IHByZWZpeCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGN1clRleHQgPSB1dGlsXzEuZ2V0VmFsdWUoJ3Byb3BOYW1lJywgY29udGV4dCk7XG4gICAgICAgICAgICBpZiAoY3VyVGV4dCkge1xuICAgICAgICAgICAgICAgIHByZWZpeCA9IGN1clRleHQgKyAnLScgKyBwcmVmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2V0UGFyZW50Q29udGV4dCh1dGlsXzEuZ2V0VmFsdWUoJ3BhcmVudE9iaicsIGNvbnRleHQpLCBwcmVmaXgpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ub3RpZnktcHJvcGVydHktY2hhbmdlLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2FudmFzUmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDYW52YXNSZW5kZXJlcihyb290SUQpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdElkID0gcm9vdElEO1xuICAgICAgICB9XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5nZXRPcHRpb25WYWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zLCBrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVDYW52YXMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGNhbnZhc09iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgY2FudmFzT2JqLnNldEF0dHJpYnV0ZSgnaWQnLCB0aGlzLnJvb3RJZCArICdfY2FudmFzJyk7XG4gICAgICAgICAgICB0aGlzLmN0eCA9IGNhbnZhc09iai5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgdGhpcy5jYW52YXNPYmogPSBjYW52YXNPYmo7XG4gICAgICAgICAgICB0aGlzLnNldENhbnZhc1NpemUob3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzT2JqO1xuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuc2V0Q2FudmFzU2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucm9vdElkKTtcbiAgICAgICAgICAgIHZhciBzaXplID0gIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChlbGVtZW50KSA/IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBudWxsO1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLndpZHRoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzT2JqLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCA/IHdpZHRoLnRvU3RyaW5nKCkgOiBzaXplLndpZHRoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNPYmouc2V0QXR0cmlidXRlKCd3aWR0aCcsIHRoaXMud2lkdGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzT2JqLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaGVpZ2h0ID8gaGVpZ2h0LnRvU3RyaW5nKCkgOiAnNDUwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc09iai5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHRoaXMuaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSB0aGlzLmdldE9wdGlvblZhbHVlKG9wdGlvbnMsICdzdHJva2Utd2lkdGgnKTtcbiAgICAgICAgICAgIHZhciBkYXNoQXJyYXkgPSB0aGlzLmdldE9wdGlvblZhbHVlKG9wdGlvbnMsICdzdHJva2UtZGFzaGFycmF5Jyk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChkYXNoQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhc2hBcnJheVN0cmluZyA9IGRhc2hBcnJheS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNldExpbmVEYXNoKFtwYXJzZUludChkYXNoQXJyYXlTdHJpbmdbMF0sIDEwKSwgcGFyc2VJbnQoZGFzaEFycmF5U3RyaW5nWzFdLCAxMCldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnc3Ryb2tlJyk7XG4gICAgICAgIH07XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3TGluZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0aW9ucywgJ3N0cm9rZS13aWR0aCcpO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBvcHRpb25zLnN0cm9rZTtcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhvcHRpb25zLngxLCBvcHRpb25zLnkxKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyhvcHRpb25zLngyLCBvcHRpb25zLnkyKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhVXJsID0gdGhpcy5jYW52YXNPYmoudG9EYXRhVVJMKCk7XG4gICAgICAgIH07XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3UmVjdGFuZ2xlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjYW52YXNDdHggPSB0aGlzLmN0eDtcbiAgICAgICAgICAgIHZhciBjb3JuZXJSYWRpdXMgPSBvcHRpb25zLnJ4O1xuICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0aW9ucywgJ29wYWNpdHknKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJlY3Qob3B0aW9ucy54LCBvcHRpb25zLnksIG9wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChjb3JuZXJSYWRpdXMgIT09IG51bGwgJiYgY29ybmVyUmFkaXVzID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdDb3JuZXJSYWRpdXMob3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5maWxsID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5maWxsID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gb3B0aW9ucy5maWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KG9wdGlvbnMueCwgb3B0aW9ucy55LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eCA9IGNhbnZhc0N0eDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVVybCA9IHRoaXMuY2FudmFzT2JqLnRvRGF0YVVSTCgpO1xuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZHJhd0Nvcm5lclJhZGl1cyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgY29ybmVyUmFkaXVzID0gb3B0aW9ucy5yeDtcbiAgICAgICAgICAgIHZhciB4ID0gb3B0aW9ucy54O1xuICAgICAgICAgICAgdmFyIHkgPSBvcHRpb25zLnk7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBvcHRpb25zLndpZHRoO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZmlsbCA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5maWxsID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuZmlsbDtcbiAgICAgICAgICAgIGlmICh3aWR0aCA8IDIgKiBjb3JuZXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICBjb3JuZXJSYWRpdXMgPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVpZ2h0IDwgMiAqIGNvcm5lclJhZGl1cykge1xuICAgICAgICAgICAgICAgIGNvcm5lclJhZGl1cyA9IGhlaWdodCAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh4ICsgd2lkdGggLSBjb3JuZXJSYWRpdXMsIHkpO1xuICAgICAgICAgICAgdGhpcy5jdHguYXJjVG8oeCArIHdpZHRoLCB5LCB4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIGNvcm5lclJhZGl1cyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5hcmNUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIHgsIHkgKyBoZWlnaHQsIGNvcm5lclJhZGl1cyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5hcmNUbyh4LCB5ICsgaGVpZ2h0LCB4LCB5LCBjb3JuZXJSYWRpdXMpO1xuICAgICAgICAgICAgdGhpcy5jdHguYXJjVG8oeCwgeSwgeCArIHdpZHRoLCB5LCBjb3JuZXJSYWRpdXMpO1xuICAgICAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVVybCA9IHRoaXMuY2FudmFzT2JqLnRvRGF0YVVSTCgpO1xuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbiAob3B0aW9ucywgY2FudmFzVHJhbnNsYXRlKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IG9wdGlvbnMuZDtcbiAgICAgICAgICAgIHZhciBkYXRhU3BsaXQgPSBwYXRoLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICB2YXIgYm9yZGVyV2lkdGggPSB0aGlzLmdldE9wdGlvblZhbHVlKG9wdGlvbnMsICdzdHJva2Utd2lkdGgnKTtcbiAgICAgICAgICAgIHZhciBjYW52YXNDdHggPSB0aGlzLmN0eDtcbiAgICAgICAgICAgIHZhciBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgaWYgKGNhbnZhc1RyYW5zbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShjYW52YXNUcmFuc2xhdGVbMF0sIGNhbnZhc1RyYW5zbGF0ZVsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IG9wdGlvbnMub3BhY2l0eSA/IG9wdGlvbnMub3BhY2l0eSA6IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0aW9ucywgJ2ZpbGwtb3BhY2l0eScpO1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKG9wdGlvbnMpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhU3BsaXQubGVuZ3RoOyBpID0gaSArIDMpIHtcbiAgICAgICAgICAgICAgICB2YXIgeDEgPSBwYXJzZUZsb2F0KGRhdGFTcGxpdFtpICsgMV0pO1xuICAgICAgICAgICAgICAgIHZhciB5MSA9IHBhcnNlRmxvYXQoZGF0YVNwbGl0W2kgKyAyXSk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhU3BsaXRbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuaW5uZXJSICYmICFvcHRpb25zLmN4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHgxLCB5MSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuaW5uZXJSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHgxLCB5MSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYzEgPSBwYXJzZUZsb2F0KGRhdGFTcGxpdFtpICsgM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMyID0gcGFyc2VGbG9hdChkYXRhU3BsaXRbaSArIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjMyA9IHBhcnNlRmxvYXQoZGF0YVNwbGl0W2kgKyA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYzQgPSBwYXJzZUZsb2F0KGRhdGFTcGxpdFtpICsgNl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYmV6aWVyQ3VydmVUbyh4MSwgeTEsIGMxLCBjMiwgYzMsIGM0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpICsgNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5pbm5lclIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5hcmMob3B0aW9ucy5jeCwgb3B0aW9ucy5jeSwgb3B0aW9ucy5yYWRpdXMsIDAsIDIgKiBNYXRoLlBJLCBvcHRpb25zLmNvdW50ZXJDbG9ja1dpc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKG9wdGlvbnMueCwgb3B0aW9ucy55KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKG9wdGlvbnMueCwgb3B0aW9ucy55LCBvcHRpb25zLnJhZGl1cywgb3B0aW9ucy5zdGFydCwgb3B0aW9ucy5lbmQsIG9wdGlvbnMuY291bnRlckNsb2NrV2lzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyhvcHRpb25zLngsIG9wdGlvbnMueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmFyYyhvcHRpb25zLngsIG9wdGlvbnMueSwgb3B0aW9ucy5yYWRpdXMsIG9wdGlvbnMuc3RhcnQsIG9wdGlvbnMuZW5kLCBvcHRpb25zLmNvdW50ZXJDbG9ja1dpc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmFyYyhvcHRpb25zLngsIG9wdGlvbnMueSwgb3B0aW9ucy5pbm5lclIsIG9wdGlvbnMuZW5kLCBvcHRpb25zLnN0YXJ0LCAhb3B0aW9ucy5jb3VudGVyQ2xvY2tXaXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSArIDU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZpbGwgIT09ICdub25lJyAmJiBvcHRpb25zLmZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuZmlsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYm9yZGVyV2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eCA9IGNhbnZhc0N0eDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVVybCA9IHRoaXMuY2FudmFzT2JqLnRvRGF0YVVSTCgpO1xuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RleHQgPSBmdW5jdGlvbiAob3B0aW9ucywgbGFiZWwpIHtcbiAgICAgICAgICAgIHZhciBmb250V2VpZ2h0ID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnZm9udC13ZWlnaHQnKTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKGZvbnRXZWlnaHQpICYmIGZvbnRXZWlnaHQudG9Mb3dlckNhc2UoKSA9PT0gJ3JlZ3VsYXInKSB7XG4gICAgICAgICAgICAgICAgZm9udFdlaWdodCA9ICdub3JtYWwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnZm9udC1zaXplJyk7XG4gICAgICAgICAgICB2YXIgZm9udEZhbWlseSA9IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0aW9ucywgJ2ZvbnQtZmFtaWx5Jyk7XG4gICAgICAgICAgICB2YXIgZm9udFN0eWxlID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnZm9udC1zdHlsZScpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgZm9udCA9IChmb250U3R5bGUgKyAnICcgKyBmb250V2VpZ2h0ICsgJyAnICsgZm9udFNpemUgKyAnICcgKyBmb250RmFtaWx5KTtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmdldE9wdGlvblZhbHVlKG9wdGlvbnMsICd0ZXh0LWFuY2hvcicpO1xuICAgICAgICAgICAgdmFyIG9wYWNpdHkgPSBvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhY2l0eSA6IDE7XG4gICAgICAgICAgICBpZiAoYW5jaG9yID09PSAnbWlkZGxlJykge1xuICAgICAgICAgICAgICAgIGFuY2hvciA9ICdjZW50ZXInO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gb3B0aW9ucy5maWxsO1xuICAgICAgICAgICAgdGhpcy5jdHguZm9udCA9IGZvbnQ7XG4gICAgICAgICAgICB0aGlzLmN0eC50ZXh0QWxpZ24gPSBhbmNob3I7XG4gICAgICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IG9wYWNpdHk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iYXNlbGluZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnRleHRCYXNlbGluZSA9IG9wdGlvbnMuYmFzZWxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHh0bG5ndGggPSAwO1xuICAgICAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKG9wdGlvbnMueCArICh0eHRsbmd0aCAvIDIpLCBvcHRpb25zLnkpO1xuICAgICAgICAgICAgdGhpcy5jdHgucm90YXRlKG9wdGlvbnMubGFiZWxSb3RhdGlvbiAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFRleHQobGFiZWwsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhVXJsID0gdGhpcy5jYW52YXNPYmoudG9EYXRhVVJMKCk7XG4gICAgICAgIH07XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3Q2lyY2xlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjYW52YXNDdHggPSB0aGlzLmN0eDtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHguYXJjKG9wdGlvbnMuY3gsIG9wdGlvbnMuY3ksIG9wdGlvbnMuciwgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gb3B0aW9ucy5maWxsO1xuICAgICAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBvcHRpb25zLm9wYWNpdHk7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZXMob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4ID0gY2FudmFzQ3R4O1xuICAgICAgICAgICAgdGhpcy5kYXRhVXJsID0gdGhpcy5jYW52YXNPYmoudG9EYXRhVVJMKCk7XG4gICAgICAgIH07XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3UG9seWxpbmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB2YXIgcG9pbnRzID0gb3B0aW9ucy5wb2ludHMuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBvaW50c1tpXS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChwb2ludFswXSk7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSBwYXJzZUZsb2F0KHBvaW50WzFdKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnc3Ryb2tlLXdpZHRoJyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IG9wdGlvbnMuc3Ryb2tlO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmRhdGFVcmwgPSB0aGlzLmNhbnZhc09iai50b0RhdGFVUkwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmRyYXdFbGxpcHNlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjYW52YXNDdHggPSB0aGlzLmN0eDtcbiAgICAgICAgICAgIHZhciBjaXJjdW1mZXJlbmNlID0gTWF0aC5tYXgob3B0aW9ucy5yeCwgb3B0aW9ucy5yeSk7XG4gICAgICAgICAgICB2YXIgc2NhbGVYID0gb3B0aW9ucy5yeCAvIGNpcmN1bWZlcmVuY2U7XG4gICAgICAgICAgICB2YXIgc2NhbGVZID0gb3B0aW9ucy5yeSAvIGNpcmN1bWZlcmVuY2U7XG4gICAgICAgICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShvcHRpb25zLmN4LCBvcHRpb25zLmN5KTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNjYWxlKHNjYWxlWCwgc2NhbGVZKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmFyYygwLCAwLCBjaXJjdW1mZXJlbmNlLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gb3B0aW9ucy5maWxsO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbCgpO1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnc3Ryb2tlLXdpZHRoJyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IG9wdGlvbnMuc3Ryb2tlO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eCA9IGNhbnZhc0N0eDtcbiAgICAgICAgICAgIHRoaXMuZGF0YVVybCA9IHRoaXMuY2FudmFzT2JqLnRvRGF0YVVSTCgpO1xuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZHJhd0ltYWdlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIHZhciBpbWFnZU9iaiA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQob3B0aW9ucy5ocmVmKSkge1xuICAgICAgICAgICAgICAgIGltYWdlT2JqLnNyYyA9IG9wdGlvbnMuaHJlZjtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoaW1hZ2VPYmosIG9wdGlvbnMueCwgb3B0aW9ucy55LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmRhdGFVcmwgPSB0aGlzLmNhbnZhc09iai50b0RhdGFVUkwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZUxpbmVhckdyYWRpZW50ID0gZnVuY3Rpb24gKGNvbG9ycykge1xuICAgICAgICAgICAgdmFyIG15R3JhZGllbnQ7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChjb2xvcnNbMF0uY29sb3JTdG9wKSkge1xuICAgICAgICAgICAgICAgIG15R3JhZGllbnQgPSB0aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAwLCB0aGlzLmNhbnZhc09iai5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5zZXRHcmFkaWVudFZhbHVlcyhjb2xvcnMsIG15R3JhZGllbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgICAgICB9O1xuICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlUmFkaWFsR3JhZGllbnQgPSBmdW5jdGlvbiAoY29sb3JzKSB7XG4gICAgICAgICAgICB2YXIgbXlHcmFkaWVudDtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbG9yc1swXS5jb2xvclN0b3ApKSB7XG4gICAgICAgICAgICAgICAgbXlHcmFkaWVudCA9IHRoaXMuY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KDAsIDAsIDAsIDAsIDAsIHRoaXMuY2FudmFzT2JqLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sb3JOYW1lID0gdGhpcy5zZXRHcmFkaWVudFZhbHVlcyhjb2xvcnMsIG15R3JhZGllbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbG9yTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnNldEdyYWRpZW50VmFsdWVzID0gZnVuY3Rpb24gKGNvbG9ycywgbXlHcmFkaWVudCkge1xuICAgICAgICAgICAgdmFyIGNvbG9yTmFtZTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbG9yc1swXS5jb2xvclN0b3ApKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gY29sb3JzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnNbaV0uY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdDb2xvclN0b3AgPSAoY29sb3JzW2ldLmNvbG9yU3RvcCkuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcENvbG9yID0gcGFyc2VJbnQobmV3Q29sb3JTdG9wLCAxMCkgLyAxMDA7XG4gICAgICAgICAgICAgICAgICAgIG15R3JhZGllbnQuYWRkQ29sb3JTdG9wKHN0b3BDb2xvciwgY29sb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xvck5hbWUgPSBteUdyYWRpZW50LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2xvck5hbWUgPSBjb2xvcnNbMF0uY29sb3IudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YVVybCA9IHRoaXMuY2FudmFzT2JqLnRvRGF0YVVSTCgpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbG9yTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnNldEVsZW1lbnRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gT2JqZWN0LmtleXMob3B0aW9ucykubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIG9wdGlvbnNba2V5XTsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXlzW2ldLCB2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVDYW52YXNBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMob3B0aW9ucywgdGhpcy5jYW52YXNPYmopO1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuY3R4O1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kYXRhVXJsKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbWdfMSA9IG5ldyBJbWFnZTtcbiAgICAgICAgICAgICAgICBpbWdfMS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nXzEsIDAsIDApO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW1nXzEuc3JjID0gdGhpcy5kYXRhVXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2FudmFzUmVuZGVyZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNhbnZhc1JlbmRlcmVyID0gQ2FudmFzUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NhbnZhcy1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3V0aWxcIiwgXCIuL21vZHVsZS1sb2FkZXJcIiwgXCIuL2Jhc2VcIiwgXCIuL29ic2VydmVyXCIsIFwiLi9jaGlsZC1wcm9wZXJ0eVwiLCBcIi4vbm90aWZ5LXByb3BlcnR5LWNoYW5nZVwiLCBcIi4vaW50ZXJuYXRpb25hbGl6YXRpb25cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB1dGlsXzEsIG1vZHVsZV9sb2FkZXJfMSwgYmFzZV8xLCBvYnNlcnZlcl8xLCBjaGlsZF9wcm9wZXJ0eV8xLCBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEsIGludGVybmF0aW9uYWxpemF0aW9uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbXBvbmVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDb21wb25lbnQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENvbXBvbmVudChvcHRpb25zLCBzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgc2VsZWN0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5uZWVkc0lEID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKF90aGlzLmVuYWJsZVJ0bCkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKHsgJ2VuYWJsZVJ0bCc6IGludGVybmF0aW9uYWxpemF0aW9uXzEucmlnaHRUb0xlZnQgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKF90aGlzLmxvY2FsZSkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKHsgJ2xvY2FsZSc6IGludGVybmF0aW9uYWxpemF0aW9uXzEuZGVmYXVsdEN1bHR1cmUgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5tb2R1bGVMb2FkZXIgPSBuZXcgbW9kdWxlX2xvYWRlcl8xLk1vZHVsZUxvYWRlcihfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5sb2NhbE9ic2VydmVyID0gbmV3IG9ic2VydmVyXzEuT2JzZXJ2ZXIoX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuZGV0ZWN0RnVuY3Rpb24gPSBuZXcgRnVuY3Rpb24oJ2FyZ3MnLCAndmFyIHByb3AgPSBPYmplY3Qua2V5cyhhcmdzKTsgaWYocHJvcC5sZW5ndGgpe3RoaXNbcHJvcFswXV0gPSBhcmdzW3Byb3BbMF1dO30nKTtcbiAgICAgICAgICAgIGludGVybmF0aW9uYWxpemF0aW9uXzEub25JbnRsQ2hhbmdlLm9uKCdub3RpZnlFeHRlcm5hbENoYW5nZScsIF90aGlzLmRldGVjdEZ1bmN0aW9uLCBfdGhpcyk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuZW5hYmxlUGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgX3RoaXMuc2V0UGVyc2lzdERhdGEuYmluZChfdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXBwZW5kVG8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDb21wb25lbnQucHJvdG90eXBlLnJlcXVpcmVkTW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBDb21wb25lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9jYWxPYnNlcnZlci5kZXN0cm95KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWZyZXNoaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkZXN0cm95ZWQnLCB7IGNhbmNlbDogZmFsc2UgfSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubW9kdWxlTG9hZGVyLmNsZWFuKCk7XG4gICAgICAgICAgICBpbnRlcm5hdGlvbmFsaXphdGlvbl8xLm9uSW50bENoYW5nZS5vZmYoJ25vdGlmeUV4dGVybmFsQ2hhbmdlJywgdGhpcy5kZXRlY3RGdW5jdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdERhdGEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubW9kdWxlTG9hZGVyLmNsZWFuKCk7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsT2JzZXJ2ZXIgPSBuZXcgb2JzZXJ2ZXJfMS5PYnNlcnZlcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucHJlUmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmluamVjdE1vZHVsZXMoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5hcHBlbmRUbyA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoc2VsZWN0b3IpICYmIHR5cGVvZiAoc2VsZWN0b3IpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBzZWxlY3RvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uZWVkc0lEICYmICF0aGlzLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gdXRpbF8xLmdldFVuaXF1ZUlEKHRoaXMuZ2V0TW9kdWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGluc3QgPSB1dGlsXzEuZ2V0VmFsdWUoJ2VqMl9pbnN0YW5jZXMnLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICghaW5zdCB8fCBpbnN0LmluZGV4T2YodGhpcykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuYWRkSW5zdGFuY2UuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVSZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQZXJzaXN0ZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlUGVyc2lzdERhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pbmplY3RNb2R1bGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NyZWF0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5kYXRhQmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5qZWN0TW9kdWxlcygpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kYXRhQmluZC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIENvbXBvbmVudC5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbE9ic2VydmVyLm9uKGV2ZW50LCBoYW5kbGVyLCBjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnRfMSA9IGV2ZW50OyBfaSA8IGV2ZW50XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmcgPSBldmVudF8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbE9ic2VydmVyLm9uKGFyZy5ldmVudCwgYXJnLmhhbmRsZXIsIGFyZy5jb250ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbXBvbmVudC5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxPYnNlcnZlci5vZmYoZXZlbnQsIGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBldmVudF8yID0gZXZlbnQ7IF9pIDwgZXZlbnRfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZyA9IGV2ZW50XzJbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsT2JzZXJ2ZXIub2ZmKGFyZy5ldmVudCwgYXJnLmhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAocHJvcGVydHksIGFyZ3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxPYnNlcnZlci5ub3RpZnkocHJvcGVydHksIGFyZ3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5nZXRJbmplY3RlZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RlZE1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgQ29tcG9uZW50LkluamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtb2R1bGVMaXN0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIG1vZHVsZUxpc3RbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wcm90b3R5cGUuaW5qZWN0ZWRNb2R1bGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm90b3R5cGUuaW5qZWN0ZWRNb2R1bGVzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm90b3R5cGUuaW5qZWN0ZWRNb2R1bGVzLmluZGV4T2YobW9kdWxlTGlzdFtpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvdG90eXBlLmluamVjdGVkTW9kdWxlcy5wdXNoKG1vZHVsZUxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5pbmplY3RNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5qZWN0ZWRNb2R1bGVzICYmIHRoaXMuaW5qZWN0ZWRNb2R1bGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kdWxlTG9hZGVyLmluamVjdCh0aGlzLnJlcXVpcmVkTW9kdWxlcygpLCB0aGlzLmluamVjdGVkTW9kdWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbXBvbmVudC5wcm90b3R5cGUubWVyZ2VQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuZ2V0TW9kdWxlTmFtZSgpICsgdGhpcy5lbGVtZW50LmlkKTtcbiAgICAgICAgICAgIGlmICghKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChkYXRhKSB8fCAoZGF0YSA9PT0gJycpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyhKU09OLnBhcnNlKGRhdGEpLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmdldE1vZHVsZU5hbWUoKSArIHRoaXMuZWxlbWVudC5pZCwgdGhpcy5nZXRQZXJzaXN0RGF0YSgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5jbGVhclRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlTmFtZSkge1xuICAgICAgICB9O1xuICAgICAgICBDb21wb25lbnQucHJvdG90eXBlLmFkZE9uUGVyc2lzdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBlcnNpc3RPYmogPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgb3B0aW9uc18xID0gb3B0aW9uczsgX2kgPCBvcHRpb25zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IG9wdGlvbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIG9ialZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIG9ialZhbHVlID0gdXRpbF8xLmdldFZhbHVlKGtleSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQob2JqVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRWYWx1ZShrZXksIHRoaXMuZ2V0QWN0dWFsUHJvcGVydGllcyhvYmpWYWx1ZSksIHBlcnNpc3RPYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwZXJzaXN0T2JqLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRBY3R1YWxQcm9wZXJ0aWVzKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb21wb25lbnQucHJvdG90eXBlLmdldEFjdHVhbFByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgY2hpbGRfcHJvcGVydHlfMS5DaGlsZFByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5nZXRWYWx1ZSgncHJvcGVydGllcycsIG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb21wb25lbnQucHJvdG90eXBlLmlnbm9yZU9uUGVyc2lzdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pdGVyYXRlSnNvblByb3BlcnRpZXModGhpcy5wcm9wZXJ0aWVzLCBvcHRpb25zKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbXBvbmVudC5wcm90b3R5cGUuaXRlcmF0ZUpzb25Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaiwgaWdub3JlTGlzdCkge1xuICAgICAgICAgICAgdmFyIG5ld09iaiA9IHt9O1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZUxpc3QuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0xpc3QgPSBpZ25vcmVMaXN0LmZpbHRlcihmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoa2V5ICsgJy4nKS50ZXN0KHN0cik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZShrZXkgKyAnLicsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqW2tleV0gPSB0aGlzXzEuaXRlcmF0ZUpzb25Qcm9wZXJ0aWVzKHRoaXNfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKHZhbHVlKSwgbmV3TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmpba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG9iaik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3T2JqO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29tcG9uZW50O1xuICAgIH0oYmFzZV8xLkJhc2UpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIENvbXBvbmVudC5wcm90b3R5cGUsIFwiZW5hYmxlUGVyc2lzdGVuY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KClcbiAgICBdLCBDb21wb25lbnQucHJvdG90eXBlLCBcImVuYWJsZVJ0bFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoKVxuICAgIF0sIENvbXBvbmVudC5wcm90b3R5cGUsIFwibG9jYWxlXCIsIHZvaWQgMCk7XG4gICAgQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBDb21wb25lbnQpO1xuICAgIGV4cG9ydHMuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTU9EVUxFX1NVRkZJWCA9ICdNb2R1bGUnO1xuICAgIHZhciBNb2R1bGVMb2FkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBNb2R1bGVMb2FkZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRlZE1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIDtcbiAgICAgICAgTW9kdWxlTG9hZGVyLnByb3RvdHlwZS5pbmplY3QgPSBmdW5jdGlvbiAocmVxdWlyZWRNb2R1bGVzLCBtb2R1bGVMaXN0KSB7XG4gICAgICAgICAgICB2YXIgcmVxTGVuZ3RoID0gcmVxdWlyZWRNb2R1bGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChyZXFMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZGVkTW9kdWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVW51c2VkTW9kdWxlKHJlcXVpcmVkTW9kdWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGwgPSByZXF1aXJlZE1vZHVsZXNbaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtb2R1bGVMaXN0XzEgPSBtb2R1bGVMaXN0OyBfaSA8IG1vZHVsZUxpc3RfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG1vZHVsZUxpc3RfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2ROYW1lID0gbW9kbC5tZW1iZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2R1bGUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUoKSA9PT0gbW9kbC5tZW1iZXIgJiYgIXRoaXMuaXNNb2R1bGVMb2FkZWQobW9kTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2R1bGVPYmplY3QgPSB1dGlsXzEuY3JlYXRlSW5zdGFuY2UobW9kdWxlLCBtb2RsLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lbWJlck5hbWUgPSB0aGlzLmdldE1lbWJlck5hbWUobW9kTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kbC5pc1Byb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnNldFZhbHVlKG1lbWJlck5hbWUsIG1vZHVsZSwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnNldFZhbHVlKG1lbWJlck5hbWUsIG1vZHVsZU9iamVjdCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvYWRlZE1vZHVsZSA9IG1vZGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWRNb2R1bGUubWVtYmVyID0gbWVtYmVyTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkTW9kdWxlcy5wdXNoKGxvYWRlZE1vZHVsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1vZHVsZUxvYWRlci5wcm90b3R5cGUuY2xlYW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5sb2FkZWRNb2R1bGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBtb2R1bGVzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghbW9kdWxlcy5pc1Byb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5nZXRWYWx1ZShtb2R1bGVzLm1lbWJlciwgdGhpcy5wYXJlbnQpLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxvYWRlZE1vZHVsZXMgPSBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgTW9kdWxlTG9hZGVyLnByb3RvdHlwZS5jbGVhclVudXNlZE1vZHVsZSA9IGZ1bmN0aW9uIChtb2R1bGVMaXN0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHVzZWRNb2R1bGVzID0gbW9kdWxlTGlzdC5tYXAoZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gX3RoaXMuZ2V0TWVtYmVyTmFtZShhcmcubWVtYmVyKTsgfSk7XG4gICAgICAgICAgICB2YXIgcmVtb3ZhYmxlTW9kdWxlID0gdGhpcy5sb2FkZWRNb2R1bGVzLmZpbHRlcihmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZWRNb2R1bGVzLmluZGV4T2YobW9kdWxlLm1lbWJlcikgPT09IC0xO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJlbW92YWJsZU1vZHVsZV8xID0gcmVtb3ZhYmxlTW9kdWxlOyBfaSA8IHJlbW92YWJsZU1vZHVsZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBtb2QgPSByZW1vdmFibGVNb2R1bGVfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFtb2QuaXNQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuZ2V0VmFsdWUobW9kLm1lbWJlciwgdGhpcy5wYXJlbnQpLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRNb2R1bGVzLnNwbGljZSh0aGlzLmxvYWRlZE1vZHVsZXMuaW5kZXhPZihtb2QpLCAxKTtcbiAgICAgICAgICAgICAgICB1dGlsXzEuZGVsZXRlT2JqZWN0KHRoaXMucGFyZW50LCBtb2QubWVtYmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTW9kdWxlTG9hZGVyLnByb3RvdHlwZS5nZXRNZW1iZXJOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lWzBdLnRvTG93ZXJDYXNlKCkgKyBuYW1lLnN1YnN0cmluZygxKSArIE1PRFVMRV9TVUZGSVg7XG4gICAgICAgIH07XG4gICAgICAgIE1vZHVsZUxvYWRlci5wcm90b3R5cGUuaXNNb2R1bGVMb2FkZWQgPSBmdW5jdGlvbiAobW9kTmFtZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMubG9hZGVkTW9kdWxlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbW9kID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChtb2QubWVtYmVyID09PSB0aGlzLmdldE1lbWJlck5hbWUobW9kTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTW9kdWxlTG9hZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Nb2R1bGVMb2FkZXIgPSBNb2R1bGVMb2FkZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL21vZHVsZS1sb2FkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiLCBcIi4vYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDaGlsZFByb3BlcnR5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2hpbGRQcm9wZXJ0eShwYXJlbnQsIHByb3BOYW1lLCBkZWZhdWx0VmFsdWUsIGlzQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkUHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jaGlsZENoYW5nZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICB0aGlzLm9sZFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZmluYWxVcGRhdGUgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgICAgICB0aGlzLmNhbGxDaGlsZERhdGFCaW5kID0gdXRpbF8xLmdldFZhbHVlKCdjYWxsQ2hpbGREYXRhQmluZCcsIGJhc2VfMS5CYXNlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50T2JqID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5jb250cm9sUGFyZW50ID0gdGhpcy5wYXJlbnRPYmouY29udHJvbFBhcmVudCB8fCB0aGlzLnBhcmVudE9iajtcbiAgICAgICAgICAgIHRoaXMucHJvcE5hbWUgPSBwcm9wTmFtZTtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyhkZWZhdWx0VmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pc1BhcmVudEFycmF5ID0gaXNBcnJheTtcbiAgICAgICAgfVxuICAgICAgICBDaGlsZFByb3BlcnR5LnByb3RvdHlwZS51cGRhdGVDaGFuZ2UgPSBmdW5jdGlvbiAodmFsLCBwcm9wTmFtZSkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50T2JqLmNoaWxkQ2hhbmdlZFByb3BlcnRpZXNbcHJvcE5hbWVdID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGFyZW50T2JqLmNoaWxkQ2hhbmdlZFByb3BlcnRpZXNbcHJvcE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50T2JqLnVwZGF0ZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50T2JqLnVwZGF0ZUNoYW5nZSh2YWwsIHRoaXMucGFyZW50T2JqLnByb3BOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hpbGRQcm9wZXJ0eS5wcm90b3R5cGUudXBkYXRlVGltZU91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudE9iai51cGRhdGVUaW1lT3V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRPYmouZmluYWxVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE9iai51cGRhdGVUaW1lT3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE9iai5maW5hbFVwZGF0ZSA9IHV0aWxfMS5zZXRJbW1lZGlhdGUodGhpcy5wYXJlbnRPYmouZGF0YUJpbmQuYmluZCh0aGlzLnBhcmVudE9iaikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGlsZFByb3BlcnR5LnByb3RvdHlwZS5jbGVhckNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmFsVXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoYW5nZShmYWxzZSwgdGhpcy5wcm9wTmFtZSk7XG4gICAgICAgICAgICB0aGlzLm9sZFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hpbGRQcm9wZXJ0eS5wcm90b3R5cGUuc2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChwcm9wLCBtdXRlT25DaGFuZ2UpIHtcbiAgICAgICAgICAgIGlmIChtdXRlT25DaGFuZ2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEubWVyZ2UodGhpcywgcHJvcCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGFuZ2UoZmFsc2UsIHRoaXMucHJvcE5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGFuZ2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEubWVyZ2UodGhpcywgcHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoaWxkUHJvcGVydHkucHJvdG90eXBlLmRhdGFCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jYWxsQ2hpbGREYXRhQmluZCh0aGlzLmNoaWxkQ2hhbmdlZFByb3BlcnRpZXMsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYXJlbnRBcnJheSkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJJbmRleCA9IHRoaXMucGFyZW50T2JqW3RoaXMucHJvcE5hbWVdLmluZGV4T2YodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuY2hhbmdlZFByb3BlcnRpZXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuc2V0VmFsdWUodGhpcy5wcm9wTmFtZSArICcuJyArIGN1ckluZGV4LCB0aGlzLmNoYW5nZWRQcm9wZXJ0aWVzLCB0aGlzLnBhcmVudE9iai5jaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRWYWx1ZSh0aGlzLnByb3BOYW1lICsgJy4nICsgY3VySW5kZXgsIHRoaXMub2xkUHJvcGVydGllcywgdGhpcy5wYXJlbnRPYmoub2xkUHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRPYmouY2hhbmdlZFByb3BlcnRpZXNbdGhpcy5wcm9wTmFtZV0gPSB0aGlzLmNoYW5nZWRQcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50T2JqLm9sZFByb3BlcnRpZXNbdGhpcy5wcm9wTmFtZV0gPSB0aGlzLm9sZFByb3BlcnRpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2hhbmdlcygpO1xuICAgICAgICB9O1xuICAgICAgICBDaGlsZFByb3BlcnR5LnByb3RvdHlwZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uIChrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbFBhcmVudC5pc1Byb3RlY3RlZE9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbGRQcm9wZXJ0aWVzW2tleV0gPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZFByb3BlcnRpZXNba2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGFuZ2UodHJ1ZSwgdGhpcy5wcm9wTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmZpbmFsVXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRpbWVPdXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENoaWxkUHJvcGVydHk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNoaWxkUHJvcGVydHkgPSBDaGlsZFByb3BlcnR5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGlsZC1wcm9wZXJ0eS5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9pbnRsL2RhdGUtZm9ybWF0dGVyXCIsIFwiLi9pbnRsL251bWJlci1mb3JtYXR0ZXJcIiwgXCIuL2ludGwvZGF0ZS1wYXJzZXJcIiwgXCIuL2ludGwvbnVtYmVyLXBhcnNlclwiLCBcIi4vaW50bC9pbnRsLWJhc2VcIiwgXCIuL3V0aWxcIiwgXCIuL29ic2VydmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZGF0ZV9mb3JtYXR0ZXJfMSwgbnVtYmVyX2Zvcm1hdHRlcl8xLCBkYXRlX3BhcnNlcl8xLCBudW1iZXJfcGFyc2VyXzEsIGludGxfYmFzZV8xLCB1dGlsXzEsIG9ic2VydmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5vbkludGxDaGFuZ2UgPSBuZXcgb2JzZXJ2ZXJfMS5PYnNlcnZlcigpO1xuICAgIGV4cG9ydHMucmlnaHRUb0xlZnQgPSBmYWxzZTtcbiAgICBleHBvcnRzLmNsZHJEYXRhID0ge307XG4gICAgZXhwb3J0cy5kZWZhdWx0Q3VsdHVyZSA9ICdlbi1VUyc7XG4gICAgZXhwb3J0cy5kZWZhdWx0Q3VycmVuY3lDb2RlID0gJ1VTRCc7XG4gICAgdmFyIG1hcHBlciA9IFsnbnVtZXJpY09iamVjdCcsICdkYXRlT2JqZWN0J107XG4gICAgdmFyIEludGVybmF0aW9uYWxpemF0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW50ZXJuYXRpb25hbGl6YXRpb24oY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIGlmIChjdWx0dXJlTmFtZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VsdHVyZSA9IGN1bHR1cmVOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIEludGVybmF0aW9uYWxpemF0aW9uLnByb3RvdHlwZS5nZXREYXRlRm9ybWF0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRlX2Zvcm1hdHRlcl8xLkRhdGVGb3JtYXQuZGF0ZUZvcm1hdCh0aGlzLmdldEN1bHR1cmUoKSwgb3B0aW9ucyB8fCB7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246ICdzaG9ydCcgfSwgZXhwb3J0cy5jbGRyRGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVybmF0aW9uYWxpemF0aW9uLnByb3RvdHlwZS5nZXROdW1iZXJGb3JtYXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgIW9wdGlvbnMuY3VycmVuY3kpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmN1cnJlbmN5ID0gZXhwb3J0cy5kZWZhdWx0Q3VycmVuY3lDb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bWJlcl9mb3JtYXR0ZXJfMS5OdW1iZXJGb3JtYXQubnVtYmVyRm9ybWF0dGVyKHRoaXMuZ2V0Q3VsdHVyZSgpLCBvcHRpb25zIHx8IHt9LCBleHBvcnRzLmNsZHJEYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJuYXRpb25hbGl6YXRpb24ucHJvdG90eXBlLmdldERhdGVQYXJzZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGVfcGFyc2VyXzEuRGF0ZVBhcnNlci5kYXRlUGFyc2VyKHRoaXMuZ2V0Q3VsdHVyZSgpLCBvcHRpb25zIHx8IHsgc2tlbGV0b246ICdzaG9ydCcsIHR5cGU6ICdkYXRlJyB9LCBleHBvcnRzLmNsZHJEYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJuYXRpb25hbGl6YXRpb24ucHJvdG90eXBlLmdldE51bWJlclBhcnNlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyX3BhcnNlcl8xLk51bWJlclBhcnNlci5udW1iZXJQYXJzZXIodGhpcy5nZXRDdWx0dXJlKCksIG9wdGlvbnMgfHwgeyBmb3JtYXQ6ICdOJyB9LCBleHBvcnRzLmNsZHJEYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJuYXRpb25hbGl6YXRpb24ucHJvdG90eXBlLmZvcm1hdE51bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROdW1iZXJGb3JtYXQob3B0aW9uKSh2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVybmF0aW9uYWxpemF0aW9uLnByb3RvdHlwZS5mb3JtYXREYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERhdGVGb3JtYXQob3B0aW9uKSh2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVybmF0aW9uYWxpemF0aW9uLnByb3RvdHlwZS5wYXJzZURhdGUgPSBmdW5jdGlvbiAodmFsdWUsIG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0ZVBhcnNlcihvcHRpb24pKHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJuYXRpb25hbGl6YXRpb24ucHJvdG90eXBlLnBhcnNlTnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE51bWJlclBhcnNlcihvcHRpb24pKHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJuYXRpb25hbGl6YXRpb24ucHJvdG90eXBlLmdldERhdGVQYXR0ZXJuID0gZnVuY3Rpb24gKG9wdGlvbiwgaXNFeGNlbEZvcm1hdCkge1xuICAgICAgICAgICAgcmV0dXJuIGludGxfYmFzZV8xLkludGxCYXNlLmdldEFjdHVhbERhdGVUaW1lRm9ybWF0KHRoaXMuZ2V0Q3VsdHVyZSgpLCBvcHRpb24sIGV4cG9ydHMuY2xkckRhdGEsIGlzRXhjZWxGb3JtYXQpO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlcm5hdGlvbmFsaXphdGlvbi5wcm90b3R5cGUuZ2V0TnVtYmVyUGF0dGVybiA9IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXRBY3R1YWxOdW1iZXJGb3JtYXQodGhpcy5nZXRDdWx0dXJlKCksIG9wdGlvbiwgZXhwb3J0cy5jbGRyRGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVybmF0aW9uYWxpemF0aW9uLnByb3RvdHlwZS5nZXRDdWx0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VsdHVyZSB8fCBleHBvcnRzLmRlZmF1bHRDdWx0dXJlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW50ZXJuYXRpb25hbGl6YXRpb247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkludGVybmF0aW9uYWxpemF0aW9uID0gSW50ZXJuYXRpb25hbGl6YXRpb247XG4gICAgZnVuY3Rpb24gc2V0Q3VsdHVyZShjdWx0dXJlTmFtZSkge1xuICAgICAgICBleHBvcnRzLmRlZmF1bHRDdWx0dXJlID0gY3VsdHVyZU5hbWU7XG4gICAgICAgIGV4cG9ydHMub25JbnRsQ2hhbmdlLm5vdGlmeSgnbm90aWZ5RXh0ZXJuYWxDaGFuZ2UnLCB7ICdsb2NhbGUnOiBleHBvcnRzLmRlZmF1bHRDdWx0dXJlIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLnNldEN1bHR1cmUgPSBzZXRDdWx0dXJlO1xuICAgIGZ1bmN0aW9uIHNldEN1cnJlbmN5Q29kZShjdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgZXhwb3J0cy5kZWZhdWx0Q3VycmVuY3lDb2RlID0gY3VycmVuY3lDb2RlO1xuICAgIH1cbiAgICBleHBvcnRzLnNldEN1cnJlbmN5Q29kZSA9IHNldEN1cnJlbmN5Q29kZTtcbiAgICBmdW5jdGlvbiBsb2FkQ2xkcigpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGRhdGFbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGRhdGFfMSA9IGRhdGE7IF9hIDwgZGF0YV8xLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgdmFyIG9iaiA9IGRhdGFfMVtfYV07XG4gICAgICAgICAgICB1dGlsXzEuZXh0ZW5kKGV4cG9ydHMuY2xkckRhdGEsIG9iaiwge30sIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMubG9hZENsZHIgPSBsb2FkQ2xkcjtcbiAgICBmdW5jdGlvbiBlbmFibGVSdGwoc3RhdHVzKSB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IHZvaWQgMCkgeyBzdGF0dXMgPSB0cnVlOyB9XG4gICAgICAgIGV4cG9ydHMucmlnaHRUb0xlZnQgPSBzdGF0dXM7XG4gICAgICAgIGV4cG9ydHMub25JbnRsQ2hhbmdlLm5vdGlmeSgnbm90aWZ5RXh0ZXJuYWxDaGFuZ2UnLCB7IGVuYWJsZVJ0bDogZXhwb3J0cy5yaWdodFRvTGVmdCB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5lbmFibGVSdGwgPSBlbmFibGVSdGw7XG4gICAgZnVuY3Rpb24gZ2V0TnVtZXJpY09iamVjdChsb2NhbGUsIHR5cGUpIHtcbiAgICAgICAgdmFyIG51bU9iamVjdCA9IGludGxfYmFzZV8xLkludGxCYXNlLmdldERlcGVuZGFibGVzKGV4cG9ydHMuY2xkckRhdGEsIGxvY2FsZSwgdHJ1ZSlbbWFwcGVyWzBdXTtcbiAgICAgICAgdmFyIGRhdGVPYmplY3QgPSBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXREZXBlbmRhYmxlcyhleHBvcnRzLmNsZHJEYXRhLCBsb2NhbGUpW21hcHBlclsxXV07XG4gICAgICAgIHZhciBudW1TeXN0ZW0gPSB1dGlsXzEuZ2V0VmFsdWUoJ2RlZmF1bHROdW1iZXJpbmdTeXN0ZW0nLCBudW1PYmplY3QpO1xuICAgICAgICB2YXIgc3ltYlBhdHRlcm4gPSB1dGlsXzEuZ2V0VmFsdWUoJ3N5bWJvbHMtbnVtYmVyU3lzdGVtLScgKyBudW1TeXN0ZW0sIG51bU9iamVjdCk7XG4gICAgICAgIHZhciBwYXR0ZXJuID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0U3ltYm9sUGF0dGVybih0eXBlIHx8ICdkZWNpbWFsJywgbnVtU3lzdGVtLCBudW1PYmplY3QsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHV0aWxfMS5leHRlbmQoc3ltYlBhdHRlcm4sIGludGxfYmFzZV8xLkludGxCYXNlLmdldEZvcm1hdERhdGEocGF0dGVybiwgdHJ1ZSwgJycsIHRydWUpLCB7ICdkYXRlU2VwYXJhdG9yJzogaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0RGF0ZVNlcGFyYXRvcihkYXRlT2JqZWN0KSB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXROdW1lcmljT2JqZWN0ID0gZ2V0TnVtZXJpY09iamVjdDtcbiAgICBmdW5jdGlvbiBnZXREZWZhdWx0RGF0ZU9iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIGludGxfYmFzZV8xLkludGxCYXNlLmdldERlcGVuZGFibGVzKGV4cG9ydHMuY2xkckRhdGEsICcnLCBmYWxzZSlbbWFwcGVyWzFdXTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXREZWZhdWx0RGF0ZU9iamVjdCA9IGdldERlZmF1bHREYXRlT2JqZWN0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbnRlcm5hdGlvbmFsaXphdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9wYXJzZXItYmFzZVwiLCBcIi4vaW50bC1iYXNlXCIsIFwiLi4vdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHBhcnNlcl9iYXNlXzEsIGludGxfYmFzZV8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIGFiYnJldmlhdGVSZWdleEdsb2JhbCA9IC9cXC9NTU1NTXxNTU1NfE1NTXxhfExMTHxFRUVFRXxFRUVFfEV8S3xjY2N8Ryt8eisvZ2k7XG4gICAgdmFyIHN0YW5kYWxvbmUgPSAnc3RhbmQtYWxvbmUnO1xuICAgIHZhciB3ZWVrZGF5S2V5ID0gWydzdW4nLCAnbW9uJywgJ3R1ZScsICd3ZWQnLCAndGh1JywgJ2ZyaScsICdzYXQnXTtcbiAgICBleHBvcnRzLmJhc2ljUGF0dGVybnMgPSBbJ3Nob3J0JywgJ21lZGl1bScsICdsb25nJywgJ2Z1bGwnXTtcbiAgICB2YXIgdGltZVNldHRlciA9IHtcbiAgICAgICAgbTogJ2dldE1pbnV0ZXMnLFxuICAgICAgICBoOiAnZ2V0SG91cnMnLFxuICAgICAgICBIOiAnZ2V0SG91cnMnLFxuICAgICAgICBzOiAnZ2V0U2Vjb25kcycsXG4gICAgICAgIGQ6ICdnZXREYXRlJyxcbiAgICB9O1xuICAgIHZhciBkYXRlUGFydE1hdGNoZXIgPSB7XG4gICAgICAgICdNJzogJ21vbnRoJyxcbiAgICAgICAgJ2QnOiAnZGF5JyxcbiAgICAgICAgJ0UnOiAnd2Vla2RheScsXG4gICAgICAgICdjJzogJ3dlZWtkYXknLFxuICAgICAgICAneSc6ICd5ZWFyJyxcbiAgICAgICAgJ20nOiAnbWludXRlJyxcbiAgICAgICAgJ2gnOiAnaG91cicsXG4gICAgICAgICdIJzogJ2hvdXInLFxuICAgICAgICAncyc6ICdzZWNvbmQnLFxuICAgICAgICAnTCc6ICdtb250aCcsXG4gICAgICAgICdhJzogJ2Rlc2lnbmF0b3InLFxuICAgICAgICAneic6ICd0aW1lWm9uZScsXG4gICAgICAgICdaJzogJ3RpbWVab25lJyxcbiAgICAgICAgJ0cnOiAnZXJhJ1xuICAgIH07XG4gICAgdmFyIHRpbWVTZXBhcmF0b3IgPSAndGltZVNlcGFyYXRvcic7XG4gICAgdmFyIERhdGVGb3JtYXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRlRm9ybWF0KCkge1xuICAgICAgICB9XG4gICAgICAgIERhdGVGb3JtYXQuZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIChjdWx0dXJlLCBvcHRpb24sIGNsZHIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVwZW5kYWJsZSA9IGludGxfYmFzZV8xLkludGxCYXNlLmdldERlcGVuZGFibGVzKGNsZHIsIGN1bHR1cmUpO1xuICAgICAgICAgICAgdmFyIGZvcm1hdE9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciByZXNQYXR0ZXJuID0gb3B0aW9uLmZvcm1hdCB8fCBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXRSZXN1bHRhbnRQYXR0ZXJuKG9wdGlvbi5za2VsZXRvbiwgZGVwZW5kYWJsZS5kYXRlT2JqZWN0LCBvcHRpb24udHlwZSk7XG4gICAgICAgICAgICBmb3JtYXRPcHRpb25zLmRhdGVTZXBlcmF0b3IgPSBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXREYXRlU2VwYXJhdG9yKGRlcGVuZGFibGUuZGF0ZU9iamVjdCk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzVW5kZWZpbmVkKHJlc1BhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnRocm93RXJyb3IoJ0Zvcm1hdCBvcHRpb25zIG9yIHR5cGUgZ2l2ZW4gbXVzdCBiZSBpbnZhbGlkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXRPcHRpb25zLnBhdHRlcm4gPSByZXNQYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGZvcm1hdE9wdGlvbnMubnVtTWFwcGVyID0gcGFyc2VyX2Jhc2VfMS5QYXJzZXJCYXNlLmdldE51bWJlck1hcHBlcihkZXBlbmRhYmxlLnBhcnNlck9iamVjdCwgcGFyc2VyX2Jhc2VfMS5QYXJzZXJCYXNlLmdldE51bWJlcmluZ1N5c3RlbShjbGRyKSk7XG4gICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5NYXRjaCA9IHJlc1BhdHRlcm4ubWF0Y2goYWJicmV2aWF0ZVJlZ2V4R2xvYmFsKSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHBhdHRlcm5NYXRjaF8xID0gcGF0dGVybk1hdGNoOyBfaSA8IHBhdHRlcm5NYXRjaF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gcGF0dGVybk1hdGNoXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gc3RyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXIgPSBzdHJbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnSycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIgPSAnaCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJLZXkgPSBkYXRlUGFydE1hdGNoZXJbY2hhcl07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2hhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXRPcHRpb25zLndlZWtkYXkgPSBkZXBlbmRhYmxlLmRhdGVPYmplY3RbaW50bF9iYXNlXzEuSW50bEJhc2UuZGF5c11bc3RhbmRhbG9uZV1baW50bF9iYXNlXzEuSW50bEJhc2UubW9udGhJbmRleFtsZW5dXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0T3B0aW9ucy5tb250aCA9IGRlcGVuZGFibGUuZGF0ZU9iamVjdFtpbnRsX2Jhc2VfMS5JbnRsQmFzZS5tb250aF1bc3RhbmRhbG9uZV1baW50bF9iYXNlXzEuSW50bEJhc2UubW9udGhJbmRleFtsZW5dXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdE9wdGlvbnMuZGVzaWduYXRvciA9IHV0aWxfMS5nZXRWYWx1ZSgnZGF5UGVyaW9kcy5mb3JtYXQud2lkZScsIGRlcGVuZGFibGUuZGF0ZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdHJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZVRleHQgPSAobGVuIDw9IDMpID8gJ2VyYUFiYnInIDogKGxlbiA9PT0gNCkgPyAnZXJhTmFtZXMnIDogJ2VyYU5hcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0T3B0aW9ucy5lcmEgPSB1dGlsXzEuZ2V0VmFsdWUoJ2VyYXMuJyArIGVUZXh0LCBkZXBlbmRhYmxlLmRhdGVPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0T3B0aW9ucy50aW1lWm9uZSA9IHV0aWxfMS5nZXRWYWx1ZSgnZGF0ZXMudGltZVpvbmVOYW1lcycsIGRlcGVuZGFibGUucGFyc2VyT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUuZ2V0RGF0ZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmludERhdGVGb3JtYXR0ZXIodmFsdWUsIGZvcm1hdE9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZUZvcm1hdC5pbnREYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcGF0dGVybiA9IG9wdGlvbnMucGF0dGVybjtcbiAgICAgICAgICAgIHZhciByZXQgPSAnJztcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gcGF0dGVybi5tYXRjaChpbnRsX2Jhc2VfMS5JbnRsQmFzZS5kYXRlUGFyc2VSZWdleCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1hdGNoZXNfMSA9IG1hdGNoZXM7IF9pIDwgbWF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG1hdGNoZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aF8xID0gbWF0Y2gubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBjaGFyID0gbWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdLJykge1xuICAgICAgICAgICAgICAgICAgICBjaGFyID0gJ2gnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY3VydmFsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBpc051bWJlciA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc051bWJlciA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc3RyID0gJyc7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChjaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZhbCA9IHZhbHVlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aF8xID4gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCArPSBvcHRpb25zLm1vbnRoW2N1cnZhbF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc051bWJlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ICs9IG9wdGlvbnMud2Vla2RheVt3ZWVrZGF5S2V5W3ZhbHVlLmdldERheSgpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2gnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOdW1iZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VydmFsID0gdmFsdWVbdGltZVNldHRlcltjaGFyXV0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnaCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJ2YWwgPSBjdXJ2YWwgJSAxMiB8fCAxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NOdW1iZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc3RyICs9IHZhbHVlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoXzEgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzdHIgPSBjdXJzdHIuc3Vic3RyKGN1cnN0ci5sZW5ndGggLSAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXNpZyA9IHZhbHVlLmdldEhvdXJzKCkgPCAxMiA/ICdhbScgOiAncG0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ICs9IG9wdGlvbnMuZGVzaWduYXRvcltkZXNpZ107XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjID0gdmFsdWUuZ2V0RnVsbFllYXIoKSA8IDAgPyAwIDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCArPSBvcHRpb25zLmVyYVtkZWNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcJyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgKz0gKG1hdGNoID09PSAnXFwnXFwnJykgPyAnXFwnJyA6IG1hdGNoLnJlcGxhY2UoL1xcJy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneic6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXpvbmUgPSB2YWx1ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5fMSA9IChsZW5ndGhfMSA8IDQpID8gJytIOy1IJyA6IG9wdGlvbnMudGltZVpvbmUuaG91ckZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5fMSA9IHBhdHRlcm5fMS5yZXBsYWNlKC86L2csIG9wdGlvbnMubnVtTWFwcGVyLnRpbWVTZXBhcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWV6b25lID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ICs9IG9wdGlvbnMudGltZVpvbmUuZ210WmVyb0Zvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NOdW1iZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnN0ciA9IHRoaXMuZ2V0VGltZVpvbmVWYWx1ZSh0aW1lem9uZSwgcGF0dGVybl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnN0ciA9IG9wdGlvbnMudGltZVpvbmUuZ210Rm9ybWF0LnJlcGxhY2UoL1xcezBcXH0vLCBjdXJzdHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzonOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ICs9IG9wdGlvbnMubnVtTWFwcGVyLm51bWJlclN5bWJvbHNbdGltZVNlcGFyYXRvcl07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnLyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgKz0gb3B0aW9ucy5kYXRlU2VwZXJhdG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgKz0gbWF0Y2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc051bWJlcikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc3RyID0gdGhpcy5jaGVja1R3b2RpZ2l0TnVtYmVyKGN1cnZhbCwgbGVuZ3RoXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc051bWJlcikge1xuICAgICAgICAgICAgICAgICAgICByZXQgKz0gcGFyc2VyX2Jhc2VfMS5QYXJzZXJCYXNlLmNvbnZlcnRWYWx1ZVBhcnRzKGN1cnN0ciwgaW50bF9iYXNlXzEuSW50bEJhc2UubGF0blBhcnNlUmVnZXgsIG9wdGlvbnMubnVtTWFwcGVyLm1hcHBlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZUZvcm1hdC5jaGVja1R3b2RpZ2l0TnVtYmVyID0gZnVuY3Rpb24gKHZhbCwgbGVuKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gdmFsICsgJyc7XG4gICAgICAgICAgICBpZiAobGVuID09PSAyICYmIHJldC5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzAnICsgcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZUZvcm1hdC5nZXRUaW1lWm9uZVZhbHVlID0gZnVuY3Rpb24gKHRWYWwsIHBhdHRlcm4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc3BsdCA9IHBhdHRlcm4uc3BsaXQoJzsnKTtcbiAgICAgICAgICAgIHZhciBjdXJQYXR0ZXJuID0gc3BsdFt0VmFsID4gMCA/IDEgOiAwXTtcbiAgICAgICAgICAgIHZhciBubyA9IE1hdGguYWJzKHRWYWwpO1xuICAgICAgICAgICAgcmV0dXJuIGN1clBhdHRlcm4gPSBjdXJQYXR0ZXJuLnJlcGxhY2UoL0hIP3xtbS9nLCBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIGlzaG91ciA9IHN0ci5pbmRleE9mKCdIJykgIT09IC0xO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jaGVja1R3b2RpZ2l0TnVtYmVyKE1hdGguZmxvb3IoaXNob3VyID8gKG5vIC8gNjApIDogKG5vICUgNjApKSwgbGVuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGF0ZUZvcm1hdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGF0ZUZvcm1hdCA9IERhdGVGb3JtYXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2ludGwvZGF0ZS1mb3JtYXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSB7XG4gICAgICAgICdsYXRuJzoge1xuICAgICAgICAgICAgJ19kaWdpdHMnOiAnMDEyMzQ1Njc4OScsXG4gICAgICAgICAgICAnX3R5cGUnOiAnbnVtZXJpYydcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGxhdG5SZWdleCA9IC9eWzAtOV0qJC87XG4gICAgdmFyIGRlZmF1bHROdW1iZXJTeW1ib2xzID0ge1xuICAgICAgICAnZGVjaW1hbCc6ICcuJyxcbiAgICAgICAgJ2dyb3VwJzogJywnLFxuICAgICAgICAncGVyY2VudFNpZ24nOiAnJScsXG4gICAgICAgICdwbHVzU2lnbic6ICcrJyxcbiAgICAgICAgJ21pbnVzU2lnbic6ICctJyxcbiAgICAgICAgJ2luZmluaXR5JzogJ+KInicsXG4gICAgICAgICduYW4nOiAnTmFOJyxcbiAgICAgICAgJ2V4cG9uZW50aWFsJzogJ0UnXG4gICAgfTtcbiAgICB2YXIgbGF0bk51bWJlclN5c3RlbSA9IFswLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5XTtcbiAgICB2YXIgUGFyc2VyQmFzZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhcnNlckJhc2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgUGFyc2VyQmFzZS5nZXRNYWluT2JqZWN0ID0gZnVuY3Rpb24gKG9iaiwgY05hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuZ2V0VmFsdWUoJ21haW4uJyArIGNOYW1lLCBvYmopO1xuICAgICAgICB9O1xuICAgICAgICBQYXJzZXJCYXNlLmdldE51bWJlcmluZ1N5c3RlbSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuZ2V0VmFsdWUoJ3N1cHBsZW1lbnRhbC5udW1iZXJpbmdTeXN0ZW1zJywgb2JqKSB8fCB0aGlzLm51bWJlcmluZ1N5c3RlbXM7XG4gICAgICAgIH07XG4gICAgICAgIFBhcnNlckJhc2UucmV2ZXJzZU9iamVjdCA9IGZ1bmN0aW9uIChwcm9wLCBrZXlzKSB7XG4gICAgICAgICAgICB2YXIgcHJvcEtleXMgPSBrZXlzIHx8IE9iamVjdC5rZXlzKHByb3ApO1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwcm9wS2V5c18xID0gcHJvcEtleXM7IF9pIDwgcHJvcEtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gcHJvcEtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFyZXMuaGFzT3duUHJvcGVydHkocHJvcFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXNbcHJvcFtrZXldXSA9IGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9O1xuICAgICAgICBQYXJzZXJCYXNlLmdldFN5bWJvbFJlZ2V4ID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgICAgICB2YXIgcmVnZXhTdHIgPSBwcm9wcy5tYXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFxcW1xcXVxcL1xcXFxdKS9nLCAnXFxcXCQxJyk7XG4gICAgICAgICAgICB9KS5qb2luKCd8Jyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleFN0ciwgJ2cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFyc2VyQmFzZS5nZXRTeW1ib2xNYXRjaCA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hLZXlzID0gT2JqZWN0LmtleXMoZGVmYXVsdE51bWJlclN5bWJvbHMpO1xuICAgICAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtYXRjaEtleXNfMSA9IG1hdGNoS2V5czsgX2kgPCBtYXRjaEtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbWF0Y2hLZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHJldFtwcm9wW2tleV1dID0gZGVmYXVsdE51bWJlclN5bWJvbHNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgICAgIFBhcnNlckJhc2UuY29uc3RydWN0UmVnZXggPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdmFsLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciByZXQgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gbGVuIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXQgKz0gdmFsW2ldICsgJ3wnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ICs9IHZhbFtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgICAgICBQYXJzZXJCYXNlLmNvbnZlcnRWYWx1ZVBhcnRzID0gZnVuY3Rpb24gKHZhbHVlLCByZWdleCwgb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShyZWdleCwgZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmpbc3RyXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYXJzZXJCYXNlLmdldERlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0ge307XG4gICAgICAgICAgICByZXQub2JqID0gdXRpbF8xLmdldFZhbHVlKCdudW1iZXJzJywgb2JqKTtcbiAgICAgICAgICAgIHJldC5uU3lzdGVtID0gdXRpbF8xLmdldFZhbHVlKCdkZWZhdWx0TnVtYmVyaW5nU3lzdGVtJywgcmV0Lm9iaik7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgICAgICBQYXJzZXJCYXNlLmdldEN1cnJlbnROdW1lcmljT3B0aW9ucyA9IGZ1bmN0aW9uIChjdXJPYmosIG51bWJlclN5c3RlbSwgbmVlZFN5bWJvbHMpIHtcbiAgICAgICAgICAgIHZhciByZXQgPSB7fTtcbiAgICAgICAgICAgIHZhciBjdXIgPSB0aGlzLmdldERlZmF1bHROdW1iZXJpbmdTeXN0ZW0oY3VyT2JqKTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKGN1ci5uU3lzdGVtKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWdpdHMgPSB1dGlsXzEuZ2V0VmFsdWUoY3VyLm5TeXN0ZW0gKyAnLl9kaWdpdHMnLCBudW1iZXJTeXN0ZW0pO1xuICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKGRpZ2l0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0Lm51bWVyaWNQYWlyID0gdGhpcy5yZXZlcnNlT2JqZWN0KGRpZ2l0cywgbGF0bk51bWJlclN5c3RlbSk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5udW1iZXJQYXJzZVJlZ2V4ID0gbmV3IFJlZ0V4cCh0aGlzLmNvbnN0cnVjdFJlZ2V4KGRpZ2l0cyksICdnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5udW1lcmljUmVnZXggPSAnWycgKyBkaWdpdHNbMF0gKyAnLScgKyBkaWdpdHNbOV0gKyAnXSc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWVkU3ltYm9scykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0Lm51bWVyaWNSZWdleCA9IGRpZ2l0c1swXSArICctJyArIGRpZ2l0c1s5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5zeW1ib2xOdW1iZXJTeXN0ZW0gPSB1dGlsXzEuZ2V0VmFsdWUoJ3N5bWJvbHMtbnVtYmVyU3lzdGVtLScgKyBjdXIublN5c3RlbSwgY3VyLm9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuc3ltYm9sTWF0Y2ggPSB0aGlzLmdldFN5bWJvbE1hdGNoKHJldC5zeW1ib2xOdW1iZXJTeXN0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0Lm51bWJlclN5c3RlbSA9IGN1ci5uU3lzdGVtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgUGFyc2VyQmFzZS5nZXROdW1iZXJNYXBwZXIgPSBmdW5jdGlvbiAoY3VyT2JqLCBudW1iZXJTeXN0ZW0sIGlzTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0geyBtYXBwZXI6IHt9IH07XG4gICAgICAgICAgICB2YXIgY3VyID0gdGhpcy5nZXREZWZhdWx0TnVtYmVyaW5nU3lzdGVtKGN1ck9iaik7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc1VuZGVmaW5lZChjdXIublN5c3RlbSkpIHtcbiAgICAgICAgICAgICAgICByZXQubnVtYmVyU3lzdGVtID0gY3VyLm5TeXN0ZW07XG4gICAgICAgICAgICAgICAgcmV0Lm51bWJlclN5bWJvbHMgPSB1dGlsXzEuZ2V0VmFsdWUoJ3N5bWJvbHMtbnVtYmVyU3lzdGVtLScgKyBjdXIublN5c3RlbSwgY3VyLm9iaik7XG4gICAgICAgICAgICAgICAgcmV0LnRpbWVTZXBhcmF0b3IgPSB1dGlsXzEuZ2V0VmFsdWUoJ3RpbWVTZXBhcmF0b3InLCByZXQubnVtYmVyU3ltYm9scyk7XG4gICAgICAgICAgICAgICAgdmFyIGRpZ2l0cyA9IHV0aWxfMS5nZXRWYWx1ZShjdXIublN5c3RlbSArICcuX2RpZ2l0cycsIG51bWJlclN5c3RlbSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQoZGlnaXRzKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGxhdG5OdW1iZXJTeXN0ZW1fMSA9IGxhdG5OdW1iZXJTeXN0ZW07IF9pIDwgbGF0bk51bWJlclN5c3RlbV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBsYXRuTnVtYmVyU3lzdGVtXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0Lm1hcHBlcltpXSA9IGRpZ2l0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYXJzZXJCYXNlO1xuICAgIH0oKSk7XG4gICAgUGFyc2VyQmFzZS5uUGFpciA9ICdudW1lcmljUGFpcic7XG4gICAgUGFyc2VyQmFzZS5uUmVnZXggPSAnbnVtZXJpY1JlZ2V4JztcbiAgICBQYXJzZXJCYXNlLm51bWJlcmluZ1N5c3RlbXMgPSBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtO1xuICAgIGV4cG9ydHMuUGFyc2VyQmFzZSA9IFBhcnNlckJhc2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2ludGwvcGFyc2VyLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL3V0aWxcIiwgXCIuL3BhcnNlci1iYXNlXCIsIFwiLi9kYXRlLWZvcm1hdHRlclwiLCBcIi4vbnVtYmVyLWZvcm1hdHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgcGFyc2VyX2Jhc2VfMSwgZGF0ZV9mb3JtYXR0ZXJfMSwgbnVtYmVyX2Zvcm1hdHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbnRsQmFzZTtcbiAgICAoZnVuY3Rpb24gKEludGxCYXNlKSB7XG4gICAgICAgIEludGxCYXNlLm5lZ2F0aXZlRGF0YVJlZ2V4ID0gL14oKCdbXiddKyd8Jyd8W14qI0AwLC5FXSkqKShcXCouKT8oKChbIyxdKlswLF0qMCspKFxcLjAqWzAtOV0qIyopPyl8KFsjLF0qQCsjKikpKEVcXCs/MCspPygoJ1teJ10rJ3wnJ3xbXiojQDAsLkVdKSopJC87XG4gICAgICAgIEludGxCYXNlLmN1c3RvbVJlZ2V4ID0gL14oKCdbXiddKyd8Jyd8W14qI0AwLC5dKSopKFxcKi4pPygoKFswIyxdKlswLF0qWzAjXSopKFxcLlswI10qKT8pfChbIyxdKkArIyopKShFXFwrPzArKT8oKCdbXiddKyd8Jyd8W14qI0AwLC5FXSkqKSQvO1xuICAgICAgICBJbnRsQmFzZS5sYXRuUGFyc2VSZWdleCA9IC8wfDF8MnwzfDR8NXw2fDd8OHw5L2c7XG4gICAgICAgIHZhciBmcmFjdGlvblJlZ2V4ID0gL1swLTldL2c7XG4gICAgICAgIEludGxCYXNlLmRlZmF1bHRDdXJyZW5jeSA9ICckJztcbiAgICAgICAgdmFyIG1hcHBlciA9IFsnaW5maW5pdHknLCAnbmFuJywgJ2dyb3VwJywgJ2RlY2ltYWwnXTtcbiAgICAgICAgdmFyIHBhdHRlcm5SZWdleCA9IC9HfE18THxIfGN8J3wgYXx5eXx5fEVFRUV8RS9nO1xuICAgICAgICB2YXIgcGF0dGVybk1hdGNoID0ge1xuICAgICAgICAgICAgJ0cnOiAnJyxcbiAgICAgICAgICAgICdNJzogJ20nLFxuICAgICAgICAgICAgJ0wnOiAnbScsXG4gICAgICAgICAgICAnSCc6ICdoJyxcbiAgICAgICAgICAgICdjJzogJ2QnLFxuICAgICAgICAgICAgJ1xcJyc6ICdcIicsXG4gICAgICAgICAgICAnIGEnOiAnIEFNL1BNJyxcbiAgICAgICAgICAgICd5eSc6ICd5eScsXG4gICAgICAgICAgICAneSc6ICd5eXl5JyxcbiAgICAgICAgICAgICdFRUVFJzogJ2RkZGQnLFxuICAgICAgICAgICAgJ0UnOiAnZGRkJ1xuICAgICAgICB9O1xuICAgICAgICBJbnRsQmFzZS5mb3JtYXRSZWdleCA9IC8oXltuY3BhXXsxfSkoWzAtMV0/WzAtOV18MjApPyQvaTtcbiAgICAgICAgdmFyIHR5cGVNYXBwZXIgPSB7XG4gICAgICAgICAgICAnJCc6ICdpc0N1cnJlbmN5JyxcbiAgICAgICAgICAgICclJzogJ2lzUGVyY2VudCcsXG4gICAgICAgICAgICAnLSc6ICdpc05lZ2F0aXZlJyxcbiAgICAgICAgICAgIDA6ICdubGVhZCcsXG4gICAgICAgICAgICAxOiAnbmVuZCdcbiAgICAgICAgfTtcbiAgICAgICAgSW50bEJhc2UuZGF0ZVBhcnNlUmVnZXggPSAvKFthLXpdKVxcMSp8JyhbXiddfCcnKSsnfCcnfC4vZ2k7XG4gICAgICAgIEludGxCYXNlLmJhc2ljUGF0dGVybnMgPSBbJ3Nob3J0JywgJ21lZGl1bScsICdsb25nJywgJ2Z1bGwnXTtcbiAgICAgICAgSW50bEJhc2UuZGVmYXVsdE9iamVjdCA9IHtcbiAgICAgICAgICAgICdkYXRlcyc6IHtcbiAgICAgICAgICAgICAgICAnY2FsZW5kYXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAnZ3JlZ29yaWFuJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ21vbnRocyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RhbmQtYWxvbmUnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhYmJyZXZpYXRlZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxJzogJ0phbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICdGZWInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzMnOiAnTWFyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc0JzogJ0FwcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnNSc6ICdNYXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzYnOiAnSnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc3JzogJ0p1bCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnOCc6ICdBdWcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzknOiAnU2VwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxMCc6ICdPY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzExJzogJ05vdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMTInOiAnRGVjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFycm93Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEnOiAnSicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICdGJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICczJzogJ00nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzQnOiAnQScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnNSc6ICdNJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc2JzogJ0onLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzcnOiAnSicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnOCc6ICdBJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc5JzogJ1MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEwJzogJ08nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzExJzogJ04nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEyJzogJ0QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3aWRlJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEnOiAnSmFudWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICdGZWJydWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMyc6ICdNYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnNCc6ICdBcHJpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnNSc6ICdNYXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzYnOiAnSnVuZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnNyc6ICdKdWx5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc4JzogJ0F1Z3VzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnOSc6ICdTZXB0ZW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEwJzogJ09jdG9iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzExJzogJ05vdmVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxMic6ICdEZWNlbWJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRheXNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RhbmQtYWxvbmVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFiYnJldmlhdGVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3VuXCI6IFwiU3VuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1vblwiOiBcIk1vblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0dWVcIjogXCJUdWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2VkXCI6IFwiV2VkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRodVwiOiBcIlRodVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmcmlcIjogXCJGcmlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2F0XCI6IFwiU2F0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYXJyb3dcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdW5cIjogXCJTXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1vblwiOiBcIk1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHVlXCI6IFwiVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWRcIjogXCJXXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRodVwiOiBcIlRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZnJpXCI6IFwiRlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzYXRcIjogXCJTXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzaG9ydFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN1blwiOiBcIlN1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1vblwiOiBcIk1vXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR1ZVwiOiBcIlR1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlZFwiOiBcIldlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRodVwiOiBcIlRoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZyaVwiOiBcIkZyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNhdFwiOiBcIlNhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aWRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3VuXCI6IFwiU3VuZGF5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1vblwiOiBcIk1vbmRheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0dWVcIjogXCJUdWVzZGF5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlZFwiOiBcIldlZG5lc2RheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0aHVcIjogXCJUaHVyc2RheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmcmlcIjogXCJGcmlkYXlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2F0XCI6IFwiU2F0dXJkYXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF5UGVyaW9kc1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmb3JtYXRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndpZGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbVwiOiBcIkFNXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBtXCI6IFwiUE1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcmFzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcmFOYW1lcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzAnOiAnQmVmb3JlIENocmlzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcwLWFsdC12YXJpYW50JzogJ0JlZm9yZSBDb21tb24gRXJhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEnOiAnQW5ubyBEb21pbmknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjEtYWx0LXZhcmlhbnRcIjogXCJDb21tb24gRXJhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcmFBYmJyJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMCc6ICdCQycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcwLWFsdC12YXJpYW50JzogJ0JDRScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxJzogJ0FEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEtYWx0LXZhcmlhbnQnOiAnQ0UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXJhTmFycm93Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMCc6ICdCJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzAtYWx0LXZhcmlhbnQnOiAnQkNFJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEnOiAnQScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxLWFsdC12YXJpYW50JzogJ0NFJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0ZUZvcm1hdHMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Z1bGwnOiAnRUVFRSwgTU1NTSBkLCB5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbG9uZyc6ICdNTU1NIGQsIHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZWRpdW0nOiAnTU1NIGQsIHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaG9ydCc6ICdNL2QveXknXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RpbWVGb3JtYXRzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmdWxsJzogJ2g6bW06c3MgYSB6enp6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbG9uZyc6ICdoOm1tOnNzIGEgeicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lZGl1bSc6ICdoOm1tOnNzIGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaG9ydCc6ICdoOm1tIGEnXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGVUaW1lRm9ybWF0cyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnVsbCc6IFwiezF9ICdhdCcgezB9XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xvbmcnOiBcInsxfSAnYXQnIHswfVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZWRpdW0nOiAnezF9LCB7MH0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaG9ydCc6ICd7MX0sIHswfScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2F2YWlsYWJsZUZvcm1hdHMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkJzogJ2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRSc6ICdjY2MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRWQnOiAnZCBFJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VobSc6ICdFIGg6bW0gYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFSG0nOiAnRSBISDptbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdFaG1zJzogJ0UgaDptbTpzcyBhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0VIbXMnOiAnRSBISDptbTpzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdHeSc6ICd5IEcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnR3lNTU0nOiAnTU1NIHkgRycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdHeU1NTWQnOiAnTU1NIGQsIHkgRycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdHeU1NTUVkJzogJ0UsIE1NTSBkLCB5IEcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaCc6ICdoIGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSCc6ICdISCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdobSc6ICdoOm1tIGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSG0nOiAnSEg6bW0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaG1zJzogJ2g6bW06c3MgYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdIbXMnOiAnSEg6bW06c3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaG1zdic6ICdoOm1tOnNzIGEgdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdIbXN2JzogJ0hIOm1tOnNzIHYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaG12JzogJ2g6bW0gYSB2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0htdic6ICdISDptbSB2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ00nOiAnTCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNZCc6ICdNL2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTUVkJzogJ0UsIE0vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNTU0nOiAnTExMJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01NTWQnOiAnTU1NIGQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTU1NRWQnOiAnRSwgTU1NIGQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTU1NTWQnOiAnTU1NTSBkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21zJzogJ21tOnNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3knOiAneScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd5TSc6ICdNL3knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneU1kJzogJ00vZC95JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3lNRWQnOiAnRSwgTS9kL3knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneU1NTSc6ICdNTU0geScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd5TU1NZCc6ICdNTU0gZCwgeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd5TU1NRWQnOiAnRSwgTU1NIGQsIHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneU1NTU0nOiAnTU1NTSB5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAndGltZVpvbmVOYW1lcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJob3VyRm9ybWF0XCI6IFwiK0hIOm1tOy1ISDptbVwiLFxuICAgICAgICAgICAgICAgICAgICBcImdtdEZvcm1hdFwiOiBcIkdNVHswfVwiLFxuICAgICAgICAgICAgICAgICAgICBcImdtdFplcm9Gb3JtYXRcIjogXCJHTVRcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ251bWJlcnMnOiB7XG4gICAgICAgICAgICAgICAgJ2N1cnJlbmNpZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgICdVU0QnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGlzcGxheU5hbWUnOiAnVVMgRG9sbGFyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wnOiAnJCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3ltYm9sLWFsdC1uYXJyb3cnOiAnJCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0VVUic6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5TmFtZSc6ICdFdXJvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wnOiAn4oKsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wtYWx0LW5hcnJvdyc6ICfigqwnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdHQlAnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnZGlzcGxheU5hbWUnOiAnQnJpdGlzaCBQb3VuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3ltYm9sLWFsdC1uYXJyb3cnOiAnwqMnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnZGVmYXVsdE51bWJlcmluZ1N5c3RlbSc6ICdsYXRuJyxcbiAgICAgICAgICAgICAgICAnbWluaW11bUdyb3VwaW5nRGlnaXRzJzogJzEnLFxuICAgICAgICAgICAgICAgICdzeW1ib2xzLW51bWJlclN5c3RlbS1sYXRuJzoge1xuICAgICAgICAgICAgICAgICAgICAnZGVjaW1hbCc6ICcuJyxcbiAgICAgICAgICAgICAgICAgICAgJ2dyb3VwJzogJywnLFxuICAgICAgICAgICAgICAgICAgICAnbGlzdCc6ICc7JyxcbiAgICAgICAgICAgICAgICAgICAgJ3BlcmNlbnRTaWduJzogJyUnLFxuICAgICAgICAgICAgICAgICAgICAncGx1c1NpZ24nOiAnKycsXG4gICAgICAgICAgICAgICAgICAgICdtaW51c1NpZ24nOiAnLScsXG4gICAgICAgICAgICAgICAgICAgICdleHBvbmVudGlhbCc6ICdFJyxcbiAgICAgICAgICAgICAgICAgICAgJ3N1cGVyc2NyaXB0aW5nRXhwb25lbnQnOiAnw5cnLFxuICAgICAgICAgICAgICAgICAgICAncGVyTWlsbGUnOiAn4oCwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2luZmluaXR5JzogJ+KInicsXG4gICAgICAgICAgICAgICAgICAgICduYW4nOiAnTmFOJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVTZXBhcmF0b3InOiAnOidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdkZWNpbWFsRm9ybWF0cy1udW1iZXJTeXN0ZW0tbGF0bic6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3N0YW5kYXJkJzogJyMsIyMwLiMjIycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAncGVyY2VudEZvcm1hdHMtbnVtYmVyU3lzdGVtLWxhdG4nOiB7XG4gICAgICAgICAgICAgICAgICAgICdzdGFuZGFyZCc6ICcjLCMjMCUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnY3VycmVuY3lGb3JtYXRzLW51bWJlclN5c3RlbS1sYXRuJzoge1xuICAgICAgICAgICAgICAgICAgICAnc3RhbmRhcmQnOiAnwqQjLCMjMC4wMCcsXG4gICAgICAgICAgICAgICAgICAgICdhY2NvdW50aW5nJzogJ8KkIywjIzAuMDA7KMKkIywjIzAuMDApJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSW50bEJhc2UubW9udGhJbmRleCA9IHtcbiAgICAgICAgICAgIDM6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgICA0OiAnd2lkZScsXG4gICAgICAgICAgICA1OiAnbmFycm93JyxcbiAgICAgICAgICAgIDE6ICdhYmJyZXZpYXRlZCdcbiAgICAgICAgfTtcbiAgICAgICAgSW50bEJhc2UubW9udGggPSAnbW9udGhzJztcbiAgICAgICAgSW50bEJhc2UuZGF5cyA9ICdkYXlzJztcbiAgICAgICAgSW50bEJhc2UucGF0dGVybk1hdGNoZXIgPSB7XG4gICAgICAgICAgICBDOiAnY3VycmVuY3knLFxuICAgICAgICAgICAgUDogJ3BlcmNlbnQnLFxuICAgICAgICAgICAgTjogJ2RlY2ltYWwnLFxuICAgICAgICAgICAgQTogJ2N1cnJlbmN5J1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBnZXRSZXN1bHRhbnRQYXR0ZXJuKHNrZWxldG9uLCBkYXRlT2JqZWN0LCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgcmVzUGF0dGVybjtcbiAgICAgICAgICAgIHZhciBpVHlwZSA9IHR5cGUgfHwgJ2RhdGUnO1xuICAgICAgICAgICAgaWYgKEludGxCYXNlLmJhc2ljUGF0dGVybnMuaW5kZXhPZihza2VsZXRvbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzUGF0dGVybiA9IHV0aWxfMS5nZXRWYWx1ZShpVHlwZSArICdGb3JtYXRzLicgKyBza2VsZXRvbiwgZGF0ZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgaWYgKGlUeXBlID09PSAnZGF0ZVRpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkUGF0dGVybiA9IHV0aWxfMS5nZXRWYWx1ZSgnZGF0ZUZvcm1hdHMuJyArIHNrZWxldG9uLCBkYXRlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRQYXR0ZXJuID0gdXRpbF8xLmdldFZhbHVlKCd0aW1lRm9ybWF0cy4nICsgc2tlbGV0b24sIGRhdGVPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXNQYXR0ZXJuID0gcmVzUGF0dGVybi5yZXBsYWNlKCd7MX0nLCBkUGF0dGVybikucmVwbGFjZSgnezB9JywgdFBhdHRlcm4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc1BhdHRlcm4gPSB1dGlsXzEuZ2V0VmFsdWUoJ2RhdGVUaW1lRm9ybWF0cy5hdmFpbGFibGVGb3JtYXRzLicgKyBza2VsZXRvbiwgZGF0ZU9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzUGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBJbnRsQmFzZS5nZXRSZXN1bHRhbnRQYXR0ZXJuID0gZ2V0UmVzdWx0YW50UGF0dGVybjtcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGVwZW5kYWJsZXMoY2xkciwgY3VsdHVyZSwgaXNOdW1iZXIpIHtcbiAgICAgICAgICAgIHZhciByZXQgPSB7fTtcbiAgICAgICAgICAgIHJldC5wYXJzZXJPYmplY3QgPSBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UuZ2V0TWFpbk9iamVjdChjbGRyLCBjdWx0dXJlKSB8fCBJbnRsQmFzZS5kZWZhdWx0T2JqZWN0O1xuICAgICAgICAgICAgaWYgKGlzTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0Lm51bWVyaWNPYmplY3QgPSB1dGlsXzEuZ2V0VmFsdWUoJ251bWJlcnMnLCByZXQucGFyc2VyT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldC5kYXRlT2JqZWN0ID0gdXRpbF8xLmdldFZhbHVlKCdkYXRlcy5jYWxlbmRhcnMuZ3JlZ29yaWFuJywgcmV0LnBhcnNlck9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIEludGxCYXNlLmdldERlcGVuZGFibGVzID0gZ2V0RGVwZW5kYWJsZXM7XG4gICAgICAgIGZ1bmN0aW9uIGdldFN5bWJvbFBhdHRlcm4odHlwZSwgbnVtU3lzdGVtLCBvYmosIGlzQWNjb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5nZXRWYWx1ZSh0eXBlICsgJ0Zvcm1hdHMtbnVtYmVyU3lzdGVtLScgK1xuICAgICAgICAgICAgICAgIG51bVN5c3RlbSArIChpc0FjY291bnQgPyAnLmFjY291bnRpbmcnIDogJy5zdGFuZGFyZCcpLCBvYmopIHx8IChpc0FjY291bnQgPyB1dGlsXzEuZ2V0VmFsdWUodHlwZSArICdGb3JtYXRzLW51bWJlclN5c3RlbS0nICtcbiAgICAgICAgICAgICAgICBudW1TeXN0ZW0gKyAnLnN0YW5kYXJkJywgb2JqKSA6ICcnKTtcbiAgICAgICAgfVxuICAgICAgICBJbnRsQmFzZS5nZXRTeW1ib2xQYXR0ZXJuID0gZ2V0U3ltYm9sUGF0dGVybjtcbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvcGVyTnVtZXJpY1NrZWxldG9uKHNrZWxldG9uKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHNrZWxldG9uLm1hdGNoKEludGxCYXNlLmZvcm1hdFJlZ2V4KTtcbiAgICAgICAgICAgIHZhciByZXQgPSB7fTtcbiAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gbWF0Y2hlc1sxXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0LmlzQWNjb3VudCA9IChwYXR0ZXJuID09PSAnQScpO1xuICAgICAgICAgICAgcmV0LnR5cGUgPSBJbnRsQmFzZS5wYXR0ZXJuTWF0Y2hlcltwYXR0ZXJuXTtcbiAgICAgICAgICAgIGlmIChza2VsZXRvbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmV0LmZyYWN0aW9uRGlnaXRzID0gcGFyc2VJbnQobWF0Y2hlc1syXSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBJbnRsQmFzZS5nZXRQcm9wZXJOdW1lcmljU2tlbGV0b24gPSBnZXRQcm9wZXJOdW1lcmljU2tlbGV0b247XG4gICAgICAgIGZ1bmN0aW9uIGdldEZvcm1hdERhdGEocGF0dGVybiwgbmVlZEZyYWN0aW9uLCBjU3ltYm9sLCBmcmFjdGlvbk9ubHkpIHtcbiAgICAgICAgICAgIHZhciBuRGF0YSA9IGZyYWN0aW9uT25seSA/IHt9IDogeyBubGVhZDogJycsIG5lbmQ6ICcnIH07XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBwYXR0ZXJuLm1hdGNoKEludGxCYXNlLmN1c3RvbVJlZ2V4KTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGlmICghZnJhY3Rpb25Pbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIG5EYXRhLm5sZWFkID0gY2hhbmdlQ3VycmVuY3lTeW1ib2wobWF0Y2hbMV0sIGNTeW1ib2wpO1xuICAgICAgICAgICAgICAgICAgICBuRGF0YS5uZW5kID0gY2hhbmdlQ3VycmVuY3lTeW1ib2wobWF0Y2hbMTBdLCBjU3ltYm9sKTtcbiAgICAgICAgICAgICAgICAgICAgbkRhdGEuZ3JvdXBQYXR0ZXJuID0gbWF0Y2hbNF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBmcmFjdGlvbiA9IG1hdGNoWzddO1xuICAgICAgICAgICAgICAgIGlmIChmcmFjdGlvbiAmJiBuZWVkRnJhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZtYXRjaCA9IGZyYWN0aW9uLm1hdGNoKGZyYWN0aW9uUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChmbWF0Y2gpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuRGF0YS5taW5pbXVtRnJhY3Rpb24gPSBmbWF0Y2gubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbkRhdGEubWluaW11bUZyYWN0aW9uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuRGF0YS5tYXhpbXVtRnJhY3Rpb24gPSBmcmFjdGlvbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuRGF0YTtcbiAgICAgICAgfVxuICAgICAgICBJbnRsQmFzZS5nZXRGb3JtYXREYXRhID0gZ2V0Rm9ybWF0RGF0YTtcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlQ3VycmVuY3lTeW1ib2wodmFsLCBzeW0pIHtcbiAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsLnJlcGxhY2UoSW50bEJhc2UuZGVmYXVsdEN1cnJlbmN5LCBzeW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbmN5U3ltYm9sKG51bWVyaWNPYmplY3QsIGN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5nZXRWYWx1ZSgnY3VycmVuY2llcy4nICsgY3VycmVuY3lDb2RlICsgJy5zeW1ib2wnLCBudW1lcmljT2JqZWN0KSB8fCAnJCc7XG4gICAgICAgIH1cbiAgICAgICAgSW50bEJhc2UuZ2V0Q3VycmVuY3lTeW1ib2wgPSBnZXRDdXJyZW5jeVN5bWJvbDtcbiAgICAgICAgZnVuY3Rpb24gY3VzdG9tRm9ybWF0KGZvcm1hdCwgZE9wdGlvbnMsIG9iaikge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JtYXRTcGxpdCA9IGZvcm1hdC5zcGxpdCgnOycpO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBbJ3BEYXRhJywgJ25EYXRhJywgJ3plcm9EYXRhJ107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm1hdFNwbGl0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1tkYXRhW2ldXSA9IGN1c3RvbU51bWJlckZvcm1hdChmb3JtYXRTcGxpdFtpXSwgZE9wdGlvbnMsIG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbnMubkRhdGEpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5uRGF0YSA9IHV0aWxfMS5leHRlbmQoe30sIG9wdGlvbnMucERhdGEpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubkRhdGEubmxlYWQgPSB1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoZE9wdGlvbnMpID8gJy0nICsgb3B0aW9ucy5uRGF0YS5ubGVhZCA6IGRPcHRpb25zLm1pbnVzU3ltYm9sICsgb3B0aW9ucy5uRGF0YS5ubGVhZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIEludGxCYXNlLmN1c3RvbUZvcm1hdCA9IGN1c3RvbUZvcm1hdDtcbiAgICAgICAgZnVuY3Rpb24gY3VzdG9tTnVtYmVyRm9ybWF0KGZvcm1hdCwgZE9wdGlvbnMsIG51bU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGNPcHRpb25zID0geyB0eXBlOiAnZGVjaW1hbCcsIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMCwgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH07XG4gICAgICAgICAgICB2YXIgcGF0dGVybiA9IGZvcm1hdC5tYXRjaChJbnRsQmFzZS5jdXN0b21SZWdleCk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKHBhdHRlcm4pIHx8IHBhdHRlcm5bNV0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnRocm93RXJyb3IoJ0dpdmVuIEZvcm1hdCBpcyBub3QgdmFsaWQgb3IgQ2xkciBkYXRhIG5vdCBsb2FkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNPcHRpb25zLm5sZWFkID0gcGF0dGVyblsxXTtcbiAgICAgICAgICAgIGNPcHRpb25zLm5lbmQgPSBwYXR0ZXJuWzEwXTtcbiAgICAgICAgICAgIHZhciBpbnRlZ2VyUGFydCA9IHBhdHRlcm5bNl07XG4gICAgICAgICAgICBjT3B0aW9ucy51c2VHcm91cGluZyA9IGludGVnZXJQYXJ0LmluZGV4T2YoJywnKSAhPT0gLTE7XG4gICAgICAgICAgICBpbnRlZ2VyUGFydCA9IGludGVnZXJQYXJ0LnJlcGxhY2UoLywvZywgJycpO1xuICAgICAgICAgICAgdmFyIGZyYWN0aW9uUGFydCA9IHBhdHRlcm5bN107XG4gICAgICAgICAgICBpZiAoaW50ZWdlclBhcnQuaW5kZXhPZignMCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNPcHRpb25zLm1pbmltdW1JbnRlZ2VyRGlnaXRzID0gaW50ZWdlclBhcnQubGVuZ3RoIC0gaW50ZWdlclBhcnQuaW5kZXhPZignMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoZnJhY3Rpb25QYXJ0KSkge1xuICAgICAgICAgICAgICAgIGNPcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyA9IGZyYWN0aW9uUGFydC5sYXN0SW5kZXhPZignMCcpO1xuICAgICAgICAgICAgICAgIGNPcHRpb25zLm1heGltdW1GcmFjdGlvbkRpZ2l0cyA9IGZyYWN0aW9uUGFydC5sYXN0SW5kZXhPZignIycpO1xuICAgICAgICAgICAgICAgIGlmIChjT3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNPcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjT3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgPT09IC0xIHx8IGNPcHRpb25zLm1heGltdW1GcmFjdGlvbkRpZ2l0cyA8IGNPcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cykge1xuICAgICAgICAgICAgICAgICAgICBjT3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSBjT3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQoZE9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLmV4dGVuZChjT3B0aW9ucywgaXNDdXJyZW5jeVBlcmNlbnQoW2NPcHRpb25zLm5sZWFkLCBjT3B0aW9ucy5uZW5kXSwgJyQnLCBkT3B0aW9ucy5jdXJyZW5jeVN5bWJvbCkpO1xuICAgICAgICAgICAgICAgIGlmICghY09wdGlvbnMuaXNDdXJyZW5jeSkge1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuZXh0ZW5kKGNPcHRpb25zLCBpc0N1cnJlbmN5UGVyY2VudChbY09wdGlvbnMubmxlYWQsIGNPcHRpb25zLm5lbmRdLCAnJScsIGRPcHRpb25zLnBlcmNlbnRTeW1ib2wpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuZXh0ZW5kKGNPcHRpb25zLCBpc0N1cnJlbmN5UGVyY2VudChbY09wdGlvbnMubmxlYWQsIGNPcHRpb25zLm5lbmRdLCAnJScsICclJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQobnVtT2JqZWN0KSkge1xuICAgICAgICAgICAgICAgIHZhciBzeW1ib2xQYXR0ZXJuID0gZ2V0U3ltYm9sUGF0dGVybihjT3B0aW9ucy50eXBlLCBkT3B0aW9ucy5udW1iZXJNYXBwZXIubnVtYmVyU3lzdGVtLCBudW1PYmplY3QsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoY09wdGlvbnMudXNlR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY09wdGlvbnMuZ3JvdXBTZXBhcmF0b3IgPSBkT3B0aW9ucy5udW1iZXJNYXBwZXIubnVtYmVyU3ltYm9sc1ttYXBwZXJbMl1dO1xuICAgICAgICAgICAgICAgICAgICBjT3B0aW9ucy5ncm91cERhdGEgPSBudW1iZXJfZm9ybWF0dGVyXzEuTnVtYmVyRm9ybWF0LmdldEdyb3VwaW5nRGV0YWlscyhzeW1ib2xQYXR0ZXJuLnNwbGl0KCc7JylbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjT3B0aW9ucy5ubGVhZCA9IGNPcHRpb25zLm5sZWFkLnJlcGxhY2UoL1xcJy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgY09wdGlvbnMubmVuZCA9IGNPcHRpb25zLm5lbmQucmVwbGFjZSgvXFwnL2csICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpc0N1cnJlbmN5UGVyY2VudChwYXJ0cywgYWN0dWFsLCBzeW1ib2wpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0geyBubGVhZDogcGFydHNbMF0sIG5lbmQ6IHBhcnRzWzFdIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGxvYyA9IHBhcnQuaW5kZXhPZihhY3R1YWwpO1xuICAgICAgICAgICAgICAgIGlmICgobG9jICE9PSAtMSkgJiYgKChsb2MgPCBwYXJ0LmluZGV4T2YoJ1xcJycpKSB8fCAobG9jID4gcGFydC5sYXN0SW5kZXhPZignXFwnJykpKSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW3R5cGVNYXBwZXJbaV1dID0gcGFydC5zdWJzdHIoMCwgbG9jKSArIHN5bWJvbCArIHBhcnQuc3Vic3RyKGxvYyArIDEpO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW3R5cGVNYXBwZXJbYWN0dWFsXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUgPSBvcHRpb25zLmlzQ3VycmVuY3kgPyAnY3VycmVuY3knIDogJ3BlcmNlbnQnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBJbnRsQmFzZS5pc0N1cnJlbmN5UGVyY2VudCA9IGlzQ3VycmVuY3lQZXJjZW50O1xuICAgICAgICBmdW5jdGlvbiBnZXREYXRlU2VwYXJhdG9yKGRhdGVPYmopIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICh1dGlsXzEuZ2V0VmFsdWUoJ2RhdGVGb3JtYXRzLnNob3J0JywgZGF0ZU9iaikgfHwgJycpLm1hdGNoKC9bZOKAj03igI9dKFteZOKAj01dKVtk4oCPTeKAj10vaSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZVsxXSA6ICcvJztcbiAgICAgICAgfVxuICAgICAgICBJbnRsQmFzZS5nZXREYXRlU2VwYXJhdG9yID0gZ2V0RGF0ZVNlcGFyYXRvcjtcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWN0dWFsRGF0ZVRpbWVGb3JtYXQoY3VsdHVyZSwgb3B0aW9ucywgY2xkciwgaXNFeGNlbEZvcm1hdCkge1xuICAgICAgICAgICAgdmFyIGRlcGVuZGFibGUgPSBnZXREZXBlbmRhYmxlcyhjbGRyLCBjdWx0dXJlKTtcbiAgICAgICAgICAgIHZhciBhY3R1YWxQYXR0ZXJuID0gb3B0aW9ucy5mb3JtYXQgfHwgZ2V0UmVzdWx0YW50UGF0dGVybihvcHRpb25zLnNrZWxldG9uLCBkZXBlbmRhYmxlLmRhdGVPYmplY3QsIG9wdGlvbnMudHlwZSk7XG4gICAgICAgICAgICBpZiAoaXNFeGNlbEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIGFjdHVhbFBhdHRlcm4gPSBhY3R1YWxQYXR0ZXJuLnJlcGxhY2UocGF0dGVyblJlZ2V4LCBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0dGVybk1hdGNoW3BhdHRlcm5dO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChhY3R1YWxQYXR0ZXJuLmluZGV4T2YoJ3onKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRMZW5ndGggPSBhY3R1YWxQYXR0ZXJuLm1hdGNoKC96L2cpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVab25lUGF0dGVybiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnNfMSA9IHsgJ3RpbWVab25lJzoge30gfTtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc18xLm51bU1hcHBlciA9IHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXROdW1iZXJNYXBwZXIoZGVwZW5kYWJsZS5wYXJzZXJPYmplY3QsIHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXROdW1iZXJpbmdTeXN0ZW0oY2xkcikpO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zXzEudGltZVpvbmUgPSB1dGlsXzEuZ2V0VmFsdWUoJ2RhdGVzLnRpbWVab25lTmFtZXMnLCBkZXBlbmRhYmxlLnBhcnNlck9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lem9uZSA9IHZhbHVlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gKHRMZW5ndGggPCA0KSA/ICcrSDstSCcgOiBvcHRpb25zXzEudGltZVpvbmUuaG91ckZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IHBhdHRlcm4ucmVwbGFjZSgvOi9nLCBvcHRpb25zXzEubnVtTWFwcGVyLnRpbWVTZXBhcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZXpvbmUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVab25lUGF0dGVybiA9IG9wdGlvbnNfMS50aW1lWm9uZS5nbXRaZXJvRm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVpvbmVQYXR0ZXJuID0gZGF0ZV9mb3JtYXR0ZXJfMS5EYXRlRm9ybWF0LmdldFRpbWVab25lVmFsdWUodGltZXpvbmUsIHBhdHRlcm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVpvbmVQYXR0ZXJuID0gb3B0aW9uc18xLnRpbWVab25lLmdtdEZvcm1hdC5yZXBsYWNlKC9cXHswXFx9LywgdGltZVpvbmVQYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhY3R1YWxQYXR0ZXJuID0gYWN0dWFsUGF0dGVybi5yZXBsYWNlKC9bel0rLywgJ1wiJyArIHRpbWVab25lUGF0dGVybiArICdcIicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY3R1YWxQYXR0ZXJuID0gYWN0dWFsUGF0dGVybi5yZXBsYWNlKC8gJC8sICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY3R1YWxQYXR0ZXJuO1xuICAgICAgICB9XG4gICAgICAgIEludGxCYXNlLmdldEFjdHVhbERhdGVUaW1lRm9ybWF0ID0gZ2V0QWN0dWFsRGF0ZVRpbWVGb3JtYXQ7XG4gICAgICAgIGZ1bmN0aW9uIGdldEFjdHVhbE51bWJlckZvcm1hdChjdWx0dXJlLCBvcHRpb25zLCBjbGRyKSB7XG4gICAgICAgICAgICB2YXIgZGVwZW5kYWJsZSA9IGdldERlcGVuZGFibGVzKGNsZHIsIGN1bHR1cmUsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHBhcnNlT3B0aW9ucyA9IHsgY3VzdG9tOiB0cnVlIH07XG4gICAgICAgICAgICB2YXIgbWluRnJhYztcbiAgICAgICAgICAgIGlmICgoLyhjfGEpJC9pZykudGVzdChvcHRpb25zLmZvcm1hdCkgJiYgIW9wdGlvbnMubWluaW11bUZyYWN0aW9uRGlnaXRzICYmICFvcHRpb25zLm1heGltdW1GcmFjdGlvbkRpZ2l0cykge1xuICAgICAgICAgICAgICAgIHZhciBkT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIGRPcHRpb25zLm51bWJlck1hcHBlciA9IHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXROdW1iZXJNYXBwZXIoZGVwZW5kYWJsZS5wYXJzZXJPYmplY3QsIHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXROdW1iZXJpbmdTeXN0ZW0oY2xkciksIHRydWUpO1xuICAgICAgICAgICAgICAgIHZhciBzeW1ib2xQYXR0ZXJuID0gZ2V0U3ltYm9sUGF0dGVybignY3VycmVuY3knLCBkT3B0aW9ucy5udW1iZXJNYXBwZXIubnVtYmVyU3lzdGVtLCBkZXBlbmRhYmxlLm51bWVyaWNPYmplY3QsICgvYS9pKS50ZXN0KG9wdGlvbnMuZm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgbWluRnJhYyA9IGdldEZvcm1hdERhdGEoc3ltYm9sUGF0dGVybi5zcGxpdCgnOycpWzBdLCB0cnVlLCAnJywgdHJ1ZSkubWluaW11bUZyYWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFjdHVhbFBhdHRlcm47XG4gICAgICAgICAgICBpZiAoKEludGxCYXNlLmZvcm1hdFJlZ2V4LnRlc3Qob3B0aW9ucy5mb3JtYXQpKSB8fCAhKG9wdGlvbnMuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5leHRlbmQocGFyc2VPcHRpb25zLCBnZXRQcm9wZXJOdW1lcmljU2tlbGV0b24ob3B0aW9ucy5mb3JtYXQgfHwgJ04nKSk7XG4gICAgICAgICAgICAgICAgcGFyc2VPcHRpb25zLmN1c3RvbSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGFjdHVhbFBhdHRlcm4gPSAnIyMjMCc7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlT3B0aW9ucy5mcmFjdGlvbkRpZ2l0cyB8fCBvcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyB8fCBvcHRpb25zLm1heGltdW1GcmFjdGlvbkRpZ2l0cyB8fCBtaW5GcmFjKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0TWluaW11bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZU9wdGlvbnMuZnJhY3Rpb25EaWdpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubWluaW11bUZyYWN0aW9uRGlnaXRzID0gb3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSBwYXJzZU9wdGlvbnMuZnJhY3Rpb25EaWdpdHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsUGF0dGVybiA9IGZyYWN0aW9uRGlnaXRzUGF0dGVybihhY3R1YWxQYXR0ZXJuLCBtaW5GcmFjIHx8IHBhcnNlT3B0aW9ucy5mcmFjdGlvbkRpZ2l0cyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHMgfHwgZGVmYXVsdE1pbmltdW0sIG9wdGlvbnMubWF4aW11bUZyYWN0aW9uRGlnaXRzIHx8IGRlZmF1bHRNaW5pbXVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWluaW11bUludGVnZXJEaWdpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsUGF0dGVybiA9IG1pbmltdW1JbnRlZ2VyUGF0dGVybihhY3R1YWxQYXR0ZXJuLCBvcHRpb25zLm1pbmltdW1JbnRlZ2VyRGlnaXRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsUGF0dGVybiA9IGdyb3VwaW5nUGF0dGVybihhY3R1YWxQYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlT3B0aW9ucy50eXBlID09PSAnY3VycmVuY3knICYmICFwYXJzZU9wdGlvbnMuaXNBY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbFBhdHRlcm4gPSAnJCAnICsgYWN0dWFsUGF0dGVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VPcHRpb25zLnR5cGUgPT09ICdjdXJyZW5jeScgJiYgcGFyc2VPcHRpb25zLmlzQWNjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBhY3R1YWxQYXR0ZXJuID0gJyQgJyArIGFjdHVhbFBhdHRlcm4gKyAnOygkICcgKyBhY3R1YWxQYXR0ZXJuICsgJyknO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFyc2VPcHRpb25zLnR5cGUgPT09ICdwZXJjZW50Jykge1xuICAgICAgICAgICAgICAgICAgICBhY3R1YWxQYXR0ZXJuICs9ICcgJSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0dWFsUGF0dGVybiA9IG9wdGlvbnMuZm9ybWF0LnJlcGxhY2UoL1xcJy9nLCAnXCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY3R1YWxQYXR0ZXJuO1xuICAgICAgICB9XG4gICAgICAgIEludGxCYXNlLmdldEFjdHVhbE51bWJlckZvcm1hdCA9IGdldEFjdHVhbE51bWJlckZvcm1hdDtcbiAgICAgICAgZnVuY3Rpb24gZnJhY3Rpb25EaWdpdHNQYXR0ZXJuKHBhdHRlcm4sIG1pbkRpZ2l0cywgbWF4RGlnaXRzKSB7XG4gICAgICAgICAgICBwYXR0ZXJuICs9ICcuJztcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbWluRGlnaXRzOyBhKyspIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9ICcwJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5EaWdpdHMgPCBtYXhEaWdpdHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IG1heERpZ2l0cyAtIG1pbkRpZ2l0cztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGRpZmY7IGIrKykge1xuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9ICcjJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtaW5pbXVtSW50ZWdlclBhdHRlcm4ocGF0dGVybiwgZGlnaXRzKSB7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IHBhdHRlcm4uc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIHZhciBpbnRlZ2VyID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGRpZ2l0czsgeCsrKSB7XG4gICAgICAgICAgICAgICAgaW50ZWdlciArPSAnMCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGVtcFsxXSA/IChpbnRlZ2VyICsgJy4nICsgdGVtcFsxXSkgOiBpbnRlZ2VyO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdyb3VwaW5nUGF0dGVybihwYXR0ZXJuKSB7XG4gICAgICAgICAgICB2YXIgdGVtcCA9IHBhdHRlcm4uc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIHZhciBpbnRlZ2VyID0gdGVtcFswXTtcbiAgICAgICAgICAgIHZhciBubyA9IDMgLSBpbnRlZ2VyLmxlbmd0aCAlIDM7XG4gICAgICAgICAgICB2YXIgaGFzaCA9IChubyAmJiBubyA9PT0gMSkgPyAnIycgOiAobm8gPT09IDIgPyAnIyMnIDogJycpO1xuICAgICAgICAgICAgaW50ZWdlciA9IGhhc2ggKyBpbnRlZ2VyO1xuICAgICAgICAgICAgcGF0dGVybiA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGludGVnZXIubGVuZ3RoIC0gMTsgeCA+IDA7IHggPSB4IC0gMykge1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAnLCcgKyBpbnRlZ2VyW3ggLSAyXSArIGludGVnZXJbeCAtIDFdICsgaW50ZWdlclt4XSArIHBhdHRlcm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXR0ZXJuID0gcGF0dGVybi5zbGljZSgxKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wWzFdID8gKHBhdHRlcm4gKyAnLicgKyB0ZW1wWzFdKSA6IHBhdHRlcm47XG4gICAgICAgIH1cbiAgICB9KShJbnRsQmFzZSA9IGV4cG9ydHMuSW50bEJhc2UgfHwgKGV4cG9ydHMuSW50bEJhc2UgPSB7fSkpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbnRsL2ludGwtYmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vdXRpbFwiLCBcIi4uL2ludGVybmF0aW9uYWxpemF0aW9uXCIsIFwiLi9pbnRsLWJhc2VcIiwgXCIuL3BhcnNlci1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xLCBpbnRlcm5hdGlvbmFsaXphdGlvbl8xLCBpbnRsX2Jhc2VfMSwgcGFyc2VyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgZXJyb3JUZXh0ID0ge1xuICAgICAgICAnbXMnOiAnbWluaW11bVNpZ25pZmljYW50RGlnaXRzJyxcbiAgICAgICAgJ2xzJzogJ21heGltdW1TaWduaWZpY2FudERpZ2l0cycsXG4gICAgICAgICdtZic6ICdtaW5pbXVtRnJhY3Rpb25EaWdpdHMnLFxuICAgICAgICAnbGYnOiAnbWF4aW11bUZyYWN0aW9uRGlnaXRzJyxcbiAgICB9O1xuICAgIHZhciBpbnRlZ2VyRXJyb3IgPSAnbWluaW11bUludGVnZXJEaWdpdHMnO1xuICAgIHZhciBwZXJjZW50U2lnbiA9ICdwZXJjZW50U2lnbic7XG4gICAgdmFyIG1pbnVzU2lnbiA9ICdtaW51c1NpZ24nO1xuICAgIHZhciBzcGFjZVJlZ2V4ID0gL1xccy87XG4gICAgdmFyIG1hcHBlciA9IFsnaW5maW5pdHknLCAnbmFuJywgJ2dyb3VwJywgJ2RlY2ltYWwnXTtcbiAgICB2YXIgaW5maW5pdHkgPSAnaW5maW5pdHknO1xuICAgIHZhciBuYW4gPSAnbmFuJztcbiAgICB2YXIgTnVtYmVyRm9ybWF0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtYmVyRm9ybWF0KCkge1xuICAgICAgICB9XG4gICAgICAgIE51bWJlckZvcm1hdC5udW1iZXJGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoY3VsdHVyZSwgb3B0aW9uLCBjbGRyKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGZPcHRpb25zID0gdXRpbF8xLmV4dGVuZCh7fSwgb3B0aW9uKTtcbiAgICAgICAgICAgIHZhciBjT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIGRPcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgc3ltYm9sUGF0dGVybjtcbiAgICAgICAgICAgIHZhciBkZXBlbmRhYmxlID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0RGVwZW5kYWJsZXMoY2xkciwgY3VsdHVyZSwgdHJ1ZSk7XG4gICAgICAgICAgICBkT3B0aW9ucy5udW1iZXJNYXBwZXIgPSBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UuZ2V0TnVtYmVyTWFwcGVyKGRlcGVuZGFibGUucGFyc2VyT2JqZWN0LCBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UuZ2V0TnVtYmVyaW5nU3lzdGVtKGNsZHIpLCB0cnVlKTtcbiAgICAgICAgICAgIGRPcHRpb25zLmN1cnJlbmN5U3ltYm9sID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0Q3VycmVuY3lTeW1ib2woZGVwZW5kYWJsZS5udW1lcmljT2JqZWN0LCBmT3B0aW9ucy5jdXJyZW5jeSB8fCBpbnRlcm5hdGlvbmFsaXphdGlvbl8xLmRlZmF1bHRDdXJyZW5jeUNvZGUpO1xuICAgICAgICAgICAgZE9wdGlvbnMucGVyY2VudFN5bWJvbCA9IGRPcHRpb25zLm51bWJlck1hcHBlci5udW1iZXJTeW1ib2xzW3BlcmNlbnRTaWduXTtcbiAgICAgICAgICAgIGRPcHRpb25zLm1pbnVzU3ltYm9sID0gZE9wdGlvbnMubnVtYmVyTWFwcGVyLm51bWJlclN5bWJvbHNbbWludXNTaWduXTtcbiAgICAgICAgICAgIHZhciBzeW1ib2xzID0gZE9wdGlvbnMubnVtYmVyTWFwcGVyLm51bWJlclN5bWJvbHM7XG4gICAgICAgICAgICBpZiAoKG9wdGlvbi5mb3JtYXQpICYmICEoaW50bF9iYXNlXzEuSW50bEJhc2UuZm9ybWF0UmVnZXgudGVzdChvcHRpb24uZm9ybWF0KSkpIHtcbiAgICAgICAgICAgICAgICBjT3B0aW9ucyA9IGludGxfYmFzZV8xLkludGxCYXNlLmN1c3RvbUZvcm1hdChvcHRpb24uZm9ybWF0LCBkT3B0aW9ucywgZGVwZW5kYWJsZS5udW1lcmljT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5leHRlbmQoZk9wdGlvbnMsIGludGxfYmFzZV8xLkludGxCYXNlLmdldFByb3Blck51bWVyaWNTa2VsZXRvbihvcHRpb24uZm9ybWF0IHx8ICdOJykpO1xuICAgICAgICAgICAgICAgIGZPcHRpb25zLmlzQ3VycmVuY3kgPSBmT3B0aW9ucy50eXBlID09PSAnY3VycmVuY3knO1xuICAgICAgICAgICAgICAgIGZPcHRpb25zLmlzUGVyY2VudCA9IGZPcHRpb25zLnR5cGUgPT09ICdwZXJjZW50JztcbiAgICAgICAgICAgICAgICBzeW1ib2xQYXR0ZXJuID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0U3ltYm9sUGF0dGVybihmT3B0aW9ucy50eXBlLCBkT3B0aW9ucy5udW1iZXJNYXBwZXIubnVtYmVyU3lzdGVtLCBkZXBlbmRhYmxlLm51bWVyaWNPYmplY3QsIGZPcHRpb25zLmlzQWNjb3VudCk7XG4gICAgICAgICAgICAgICAgZk9wdGlvbnMuZ3JvdXBPbmUgPSB0aGlzLmNoZWNrVmFsdWVSYW5nZShmT3B0aW9ucy5tYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMsIGZPcHRpb25zLm1pbmltdW1TaWduaWZpY2FudERpZ2l0cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlUmFuZ2UoZk9wdGlvbnMubWF4aW11bUZyYWN0aW9uRGlnaXRzLCBmT3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHMsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc1VuZGVmaW5lZChmT3B0aW9ucy5mcmFjdGlvbkRpZ2l0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgZk9wdGlvbnMubWluaW11bUZyYWN0aW9uRGlnaXRzID0gZk9wdGlvbnMubWF4aW11bUZyYWN0aW9uRGlnaXRzID0gZk9wdGlvbnMuZnJhY3Rpb25EaWdpdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEuaXNVbmRlZmluZWQoZk9wdGlvbnMudXNlR3JvdXBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZPcHRpb25zLnVzZUdyb3VwaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZPcHRpb25zLmlzQ3VycmVuY3kpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sUGF0dGVybiA9IHN5bWJvbFBhdHRlcm4ucmVwbGFjZSgvXFx1MDBBNC9nLCBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5kZWZhdWx0Q3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc3BsaXQgPSBzeW1ib2xQYXR0ZXJuLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgICAgICAgY09wdGlvbnMubkRhdGEgPSBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXRGb3JtYXREYXRhKHNwbGl0WzFdIHx8ICctJyArIHNwbGl0WzBdLCB0cnVlLCBkT3B0aW9ucy5jdXJyZW5jeVN5bWJvbCk7XG4gICAgICAgICAgICAgICAgY09wdGlvbnMucERhdGEgPSBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXRGb3JtYXREYXRhKHNwbGl0WzBdLCBmYWxzZSwgZE9wdGlvbnMuY3VycmVuY3lTeW1ib2wpO1xuICAgICAgICAgICAgICAgIGlmIChmT3B0aW9ucy51c2VHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICBmT3B0aW9ucy5ncm91cFNlcGFyYXRvciA9IHN5bWJvbHNbbWFwcGVyWzJdXTtcbiAgICAgICAgICAgICAgICAgICAgZk9wdGlvbnMuZ3JvdXBEYXRhID0gdGhpcy5nZXRHcm91cGluZ0RldGFpbHMoc3BsaXRbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWluRnJhYyA9IHV0aWxfMS5pc1VuZGVmaW5lZChmT3B0aW9ucy5taW5pbXVtRnJhY3Rpb25EaWdpdHMpO1xuICAgICAgICAgICAgICAgIGlmIChtaW5GcmFjKSB7XG4gICAgICAgICAgICAgICAgICAgIGZPcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyA9IGNPcHRpb25zLm5EYXRhLm1pbmltdW1GcmFjdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZChmT3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtdmFsID0gY09wdGlvbnMubkRhdGEubWF4aW11bUZyYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBmT3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSB1dGlsXzEuaXNVbmRlZmluZWQobXZhbCkgJiYgZk9wdGlvbnMuaXNQZXJjZW50ID8gMCA6IG12YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtZnJhYyA9IGZPcHRpb25zLm1pbmltdW1GcmFjdGlvbkRpZ2l0cztcbiAgICAgICAgICAgICAgICB2YXIgbGZyYWMgPSBmT3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHM7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQobWZyYWMpICYmICF1dGlsXzEuaXNVbmRlZmluZWQobGZyYWMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZnJhYyA+IGxmcmFjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmT3B0aW9ucy5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSBtZnJhYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHV0aWxfMS5leHRlbmQoY09wdGlvbnMubkRhdGEsIGZPcHRpb25zKTtcbiAgICAgICAgICAgIHV0aWxfMS5leHRlbmQoY09wdGlvbnMucERhdGEsIGZPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzeW1ib2xzW21hcHBlclsxXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5bWJvbHNbbWFwcGVyWzBdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmludE51bWJlckZvcm1hdHRlcih2YWx1ZSwgY09wdGlvbnMsIGRPcHRpb25zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIE51bWJlckZvcm1hdC5nZXRHcm91cGluZ0RldGFpbHMgPSBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gcGF0dGVybi5tYXRjaChpbnRsX2Jhc2VfMS5JbnRsQmFzZS5uZWdhdGl2ZURhdGFSZWdleCk7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbNF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybl8xID0gbWF0Y2hbNF07XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBwYXR0ZXJuXzEubGFzdEluZGV4T2YoJywnKTtcbiAgICAgICAgICAgICAgICBpZiAocCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwYXR0ZXJuXzEuc3BsaXQoJy4nKVswXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnByaW1hcnkgPSAodGVtcC5sZW5ndGggLSBwKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gcGF0dGVybl8xLmxhc3RJbmRleE9mKCcsJywgcCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocyAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5zZWNvbmRhcnkgPSBwIC0gMSAtIHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgICAgICBOdW1iZXJGb3JtYXQuY2hlY2tWYWx1ZVJhbmdlID0gZnVuY3Rpb24gKHZhbDEsIHZhbDIsIGNoZWNrYm90aEV4aXN0LCBpc0ZyYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZGVjaWRlID0gaXNGcmFjdGlvbiA/ICdmJyA6ICdzJztcbiAgICAgICAgICAgIHZhciBkaW50ID0gMDtcbiAgICAgICAgICAgIHZhciBzdHIxID0gZXJyb3JUZXh0WydsJyArIGRlY2lkZV07XG4gICAgICAgICAgICB2YXIgc3RyMiA9IGVycm9yVGV4dFsnbScgKyBkZWNpZGVdO1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQodmFsMSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUmFuZ2UodmFsMSwgc3RyMSwgaXNGcmFjdGlvbik7XG4gICAgICAgICAgICAgICAgZGludCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNVbmRlZmluZWQodmFsMikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUmFuZ2UodmFsMiwgc3RyMiwgaXNGcmFjdGlvbik7XG4gICAgICAgICAgICAgICAgZGludCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpbnQgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsMSA8IHZhbDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnRocm93RXJyb3Ioc3RyMiArICdzcGVjaWZpZWQgbXVzdCBiZSBsZXNzIHRoYW4gdGhlJyArIHN0cjEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tib3RoRXhpc3QgJiYgZGludCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS50aHJvd0Vycm9yKCdCb3RoJyArIHN0cjIgKyAnYW5kJyArIHN0cjIgKyAnbXVzdCBiZSBwcmVzZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIE51bWJlckZvcm1hdC5jaGVja1JhbmdlID0gZnVuY3Rpb24gKHZhbCwgdGV4dCwgaXNGcmFjdGlvbikge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gaXNGcmFjdGlvbiA/IFswLCAyMF0gOiBbMSwgMjFdO1xuICAgICAgICAgICAgaWYgKHZhbCA8IHJhbmdlWzBdIHx8IHZhbCA+IHJhbmdlWzFdKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnRocm93RXJyb3IodGV4dCArICd2YWx1ZSBtdXN0IGJlIHdpdGhpbiB0aGUgcmFuZ2UnICsgcmFuZ2VbMF0gKyAndG8nICsgcmFuZ2VbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1iZXJGb3JtYXQuaW50TnVtYmVyRm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbHVlLCBmT3B0aW9ucywgZE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjdXJEYXRhO1xuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKiAtMTtcbiAgICAgICAgICAgICAgICBjdXJEYXRhID0gZk9wdGlvbnMubkRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGN1ckRhdGEgPSBmT3B0aW9ucy56ZXJvRGF0YSB8fCBmT3B0aW9ucy5wRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1ckRhdGEgPSBmT3B0aW9ucy5wRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmVmFsdWUgPSAnJztcbiAgICAgICAgICAgIGlmIChjdXJEYXRhLmlzUGVyY2VudCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKiAxMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VyRGF0YS5ncm91cE9uZSkge1xuICAgICAgICAgICAgICAgIGZWYWx1ZSA9IHRoaXMucHJvY2Vzc1NpZ25pZmljYW50RGlnaXRzKHZhbHVlLCBjdXJEYXRhLm1pbmltdW1TaWduaWZpY2FudERpZ2l0cywgY3VyRGF0YS5tYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZlZhbHVlID0gdGhpcy5wcm9jZXNzRnJhY3Rpb24odmFsdWUsIGN1ckRhdGEubWluaW11bUZyYWN0aW9uRGlnaXRzLCBjdXJEYXRhLm1heGltdW1GcmFjdGlvbkRpZ2l0cyk7XG4gICAgICAgICAgICAgICAgaWYgKGN1ckRhdGEubWluaW11bUludGVnZXJEaWdpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZlZhbHVlID0gdGhpcy5wcm9jZXNzTWluaW11bUludGVnZXJzKGZWYWx1ZSwgY3VyRGF0YS5taW5pbXVtSW50ZWdlckRpZ2l0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZlZhbHVlID0gZlZhbHVlLnJlcGxhY2UoJy4nLCBkT3B0aW9ucy5udW1iZXJNYXBwZXIubnVtYmVyU3ltYm9sc1ttYXBwZXJbM11dKTtcbiAgICAgICAgICAgIGlmIChjdXJEYXRhLnVzZUdyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZlZhbHVlID0gdGhpcy5ncm91cE51bWJlcnMoZlZhbHVlLCBjdXJEYXRhLmdyb3VwRGF0YS5wcmltYXJ5LCBjdXJEYXRhLmdyb3VwU2VwYXJhdG9yIHx8ICcsJywgZE9wdGlvbnMubnVtYmVyTWFwcGVyLm51bWJlclN5bWJvbHNbbWFwcGVyWzNdXSB8fCAnLicsIGN1ckRhdGEuZ3JvdXBEYXRhLnNlY29uZGFyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmVmFsdWUgPSBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UuY29udmVydFZhbHVlUGFydHMoZlZhbHVlLCBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5sYXRuUGFyc2VSZWdleCwgZE9wdGlvbnMubnVtYmVyTWFwcGVyLm1hcHBlcik7XG4gICAgICAgICAgICByZXR1cm4gY3VyRGF0YS5ubGVhZCArIGZWYWx1ZSArIGN1ckRhdGEubmVuZDtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtYmVyRm9ybWF0LnByb2Nlc3NTaWduaWZpY2FudERpZ2l0cyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWluLCBtYXgpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gdmFsdWUgKyAnJztcbiAgICAgICAgICAgIHZhciB0bjtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSB0ZW1wLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggPCBtaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUudG9QcmVjaXNpb24obWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXAgPSB2YWx1ZS50b1ByZWNpc2lvbihtYXgpO1xuICAgICAgICAgICAgICAgIHRuID0gK3RlbXA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRuICsgJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWJlckZvcm1hdC5ncm91cE51bWJlcnMgPSBmdW5jdGlvbiAodmFsLCBsZXZlbDEsIHNlcCwgZGVjaW1hbFN5bWJvbCwgbGV2ZWwyKSB7XG4gICAgICAgICAgICB2YXIgZmxhZyA9ICF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQobGV2ZWwyKSAmJiBsZXZlbDIgIT09IDA7XG4gICAgICAgICAgICB2YXIgc3BsaXQgPSB2YWwuc3BsaXQoZGVjaW1hbFN5bWJvbCk7XG4gICAgICAgICAgICB2YXIgcHJlZml4ID0gc3BsaXRbMF07XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gcHJlZml4Lmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcbiAgICAgICAgICAgIHdoaWxlIChsZW5ndGggPiBsZXZlbDEpIHtcbiAgICAgICAgICAgICAgICBzdHIgPSBwcmVmaXguc2xpY2UobGVuZ3RoIC0gbGV2ZWwxLCBsZW5ndGgpICsgKHN0ci5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICAoc2VwICsgc3RyKSA6ICcnKTtcbiAgICAgICAgICAgICAgICBsZW5ndGggLT0gbGV2ZWwxO1xuICAgICAgICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsMSA9IGxldmVsMjtcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwbGl0WzBdID0gcHJlZml4LnNsaWNlKDAsIGxlbmd0aCkgKyAoc3RyLmxlbmd0aCA/IHNlcCA6ICcnKSArIHN0cjtcbiAgICAgICAgICAgIHJldHVybiBzcGxpdC5qb2luKGRlY2ltYWxTeW1ib2wpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1iZXJGb3JtYXQucHJvY2Vzc0ZyYWN0aW9uID0gZnVuY3Rpb24gKHZhbHVlLCBtaW4sIG1heCkge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSAodmFsdWUgKyAnJykuc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSB0ZW1wID8gdGVtcC5sZW5ndGggOiAwO1xuICAgICAgICAgICAgaWYgKG1pbiAmJiBsZW5ndGggPCBtaW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSB2YWx1ZS50b0ZpeGVkKG1pbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXQgKz0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWluIC0gbGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCArPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQobWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQobWF4KSAmJiAobGVuZ3RoID4gbWF4IHx8IG1heCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUudG9GaXhlZChtYXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgJyc7XG4gICAgICAgIH07XG4gICAgICAgIE51bWJlckZvcm1hdC5wcm9jZXNzTWluaW11bUludGVnZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBtaW4pIHtcbiAgICAgICAgICAgIHZhciB0ZW1wID0gdmFsdWUuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIHZhciBsZWFkID0gdGVtcFswXTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBsZWFkLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW4gPCBtaW4pIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbiAtIGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYWQgPSAnMCcgKyBsZWFkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZW1wWzBdID0gbGVhZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0ZW1wLmpvaW4oJy4nKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE51bWJlckZvcm1hdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtYmVyRm9ybWF0ID0gTnVtYmVyRm9ybWF0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbnRsL251bWJlci1mb3JtYXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vaW50bC1iYXNlXCIsIFwiLi9wYXJzZXItYmFzZVwiLCBcIi4uL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbnRsX2Jhc2VfMSwgcGFyc2VyX2Jhc2VfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBudW1iZXIgPSAnbnVtYmVycyc7XG4gICAgdmFyIGRlZk5vU3lzdGVtID0gJ2RlZmF1bHROdW1iZXJpbmdTeXN0ZW0nO1xuICAgIHZhciBub1N5c3RlbSA9ICdudW1iZXJpbmdTeXN0ZW0nO1xuICAgIHZhciBzdGFuZGFsb25lID0gJ3N0YW5kLWFsb25lJztcbiAgICB2YXIgY3VyV2Vla0RheSA9ICdjdXJXZWVrRGF5JztcbiAgICB2YXIgbGF0blJlZ2V4ID0gL15bMC05XSokLztcbiAgICB2YXIgYWJicmV2aWF0ZVJlZ2V4ID0gL1xcL01NTU1NfE1NTU18TU1NfGF8TExMfEVFRUVFfEVFRUV8RXxjY2MvO1xuICAgIHZhciB0aW1lU2V0dGVyID0ge1xuICAgICAgICBtaW51dGU6ICdzZXRNaW51dGVzJyxcbiAgICAgICAgaG91cjogJ3NldEhvdXJzJyxcbiAgICAgICAgc2Vjb25kOiAnc2V0U2Vjb25kcycsXG4gICAgICAgIGRheTogJ3NldERhdGUnLFxuICAgICAgICBtb250aDogJ3NldE1vbnRoJ1xuICAgIH07XG4gICAgdmFyIG1vbnRoID0gJ21vbnRocyc7XG4gICAgdmFyIGRhdGVQYXJ0TWF0Y2hlciA9IHtcbiAgICAgICAgJ00nOiAnbW9udGgnLFxuICAgICAgICAnZCc6ICdkYXknLFxuICAgICAgICAnRSc6ICd3ZWVrZGF5JyxcbiAgICAgICAgJ2MnOiAnd2Vla2RheScsXG4gICAgICAgICd5JzogJ3llYXInLFxuICAgICAgICAnbSc6ICdtaW51dGUnLFxuICAgICAgICAnaCc6ICdob3VyJyxcbiAgICAgICAgJ0gnOiAnaG91cicsXG4gICAgICAgICdzJzogJ3NlY29uZCcsXG4gICAgICAgICdMJzogJ21vbnRoJyxcbiAgICAgICAgJ2EnOiAnZGVzaWduYXRvcicsXG4gICAgICAgICd6JzogJ3RpbWVab25lJyxcbiAgICAgICAgJ1onOiAndGltZVpvbmUnLFxuICAgICAgICAnRyc6ICdlcmEnXG4gICAgfTtcbiAgICB2YXIgRGF0ZVBhcnNlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERhdGVQYXJzZXIoKSB7XG4gICAgICAgIH1cbiAgICAgICAgRGF0ZVBhcnNlci5kYXRlUGFyc2VyID0gZnVuY3Rpb24gKGN1bHR1cmUsIG9wdGlvbiwgY2xkcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZXBlbmRhYmxlID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0RGVwZW5kYWJsZXMoY2xkciwgY3VsdHVyZSk7XG4gICAgICAgICAgICB2YXIgbnVtT3B0aW9ucyA9IHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXRDdXJyZW50TnVtZXJpY09wdGlvbnMoZGVwZW5kYWJsZS5wYXJzZXJPYmplY3QsIHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXROdW1iZXJpbmdTeXN0ZW0oY2xkcikpO1xuICAgICAgICAgICAgdmFyIHBhcnNlT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHJlc1BhdHRlcm4gPSBvcHRpb24uZm9ybWF0IHx8IGludGxfYmFzZV8xLkludGxCYXNlLmdldFJlc3VsdGFudFBhdHRlcm4ob3B0aW9uLnNrZWxldG9uLCBkZXBlbmRhYmxlLmRhdGVPYmplY3QsIG9wdGlvbi50eXBlKTtcbiAgICAgICAgICAgIHZhciByZWdleFN0cmluZyA9ICcnO1xuICAgICAgICAgICAgdmFyIGhvdXJPbmx5O1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc1VuZGVmaW5lZChyZXNQYXR0ZXJuKSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS50aHJvd0Vycm9yKCdGb3JtYXQgb3B0aW9ucyBvciB0eXBlIGdpdmVuIG11c3QgYmUgaW52YWxpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VPcHRpb25zID0geyBwYXR0ZXJuOiByZXNQYXR0ZXJuLCBldmFscG9zaXRpb246IHt9IH07XG4gICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5NYXRjaCA9IHJlc1BhdHRlcm4ubWF0Y2goaW50bF9iYXNlXzEuSW50bEJhc2UuZGF0ZVBhcnNlUmVnZXgpIHx8IFtdO1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGhfMSA9IHBhdHRlcm5NYXRjaC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIG5SZWd4ID0gbnVtT3B0aW9ucy5udW1lcmljUmVnZXg7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGhfMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBwYXR0ZXJuTWF0Y2hbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBzdHIubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhciA9IChzdHJbMF0gPT09ICdLJykgPyAnaCcgOiBzdHJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc051bWJlciA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhblVwZGF0ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJLZXkgPSBkYXRlUGFydE1hdGNoZXJbY2hhcl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25hbCA9IChsZW4gPT09IDIpID8gJycgOiAnPyc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2hhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2Vla09iamVjdCA9IHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5yZXZlcnNlT2JqZWN0KGRlcGVuZGFibGUuZGF0ZU9iamVjdFtpbnRsX2Jhc2VfMS5JbnRsQmFzZS5kYXlzXVtzdGFuZGFsb25lXVtpbnRsX2Jhc2VfMS5JbnRsQmFzZS5tb250aEluZGV4W2xlbl1dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0cmluZyArPSAnKCcgKyBPYmplY3Qua2V5cyh3ZWVrT2JqZWN0KS5qb2luKCd8JykgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5VcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY2hhciA9PT0gJ00nIHx8IGNoYXIgPT09ICdMJykgJiYgbGVuID4gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZU9wdGlvbnNbY2hhcktleV0gPSBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UucmV2ZXJzZU9iamVjdChkZXBlbmRhYmxlLmRhdGVPYmplY3RbbW9udGhdW3N0YW5kYWxvbmVdW2ludGxfYmFzZV8xLkludGxCYXNlLm1vbnRoSW5kZXhbbGVuXV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0cmluZyArPSAnKCcgKyBPYmplY3Qua2V5cyhwYXJzZU9wdGlvbnNbY2hhcktleV0pLmpvaW4oJ3wnKSArICcpJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhTdHJpbmcgKz0gJygnICsgblJlZ3ggKyBuUmVneCArIG9wdGlvbmFsICsgJyknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJ2gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlT3B0aW9ucy5ob3VyMTIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblVwZGF0ZSA9IGlzTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4U3RyaW5nICs9ICcoJyArIG5SZWd4ICsgblJlZ3ggKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0cmluZyArPSAnKCcgKyBuUmVneCArICd7JyArIGxlbiArICcsfSknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VPcHRpb25zW2NoYXJLZXldID0gcGFyc2VyX2Jhc2VfMS5QYXJzZXJCYXNlLnJldmVyc2VPYmplY3QodXRpbF8xLmdldFZhbHVlKCdkYXlQZXJpb2RzLmZvcm1hdC53aWRlJywgZGVwZW5kYWJsZS5kYXRlT2JqZWN0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhTdHJpbmcgKz0gJygnICsgT2JqZWN0LmtleXMocGFyc2VPcHRpb25zW2NoYXJLZXldKS5qb2luKCd8JykgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdHJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5VcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlVGV4dCA9IChsZW4gPD0gMykgPyAnZXJhQWJicicgOiAobGVuID09PSA0KSA/ICdlcmFOYW1lcycgOiAnZXJhTmFycm93JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZU9wdGlvbnNbY2hhcktleV0gPSBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UucmV2ZXJzZU9iamVjdCh1dGlsXzEuZ2V0VmFsdWUoJ2VyYXMuJyArIGVUZXh0LCBkZXBlbmRhYmxlLmRhdGVPYmplY3QpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0cmluZyArPSAnKCcgKyBPYmplY3Qua2V5cyhwYXJzZU9wdGlvbnNbY2hhcktleV0pLmpvaW4oJ3wnKSArICc/KSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd6JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHZhbCA9IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5VcGRhdGUgPSAodHZhbCAhPT0gMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VPcHRpb25zW2NoYXJLZXldID0gdXRpbF8xLmdldFZhbHVlKCdkYXRlcy50aW1lWm9uZU5hbWVzJywgZGVwZW5kYWJsZS5wYXJzZXJPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0em9uZSA9IHBhcnNlT3B0aW9uc1tjaGFyS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyT25seSA9IChsZW4gPCA0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHBhdHRlcm4gPSBob3VyT25seSA/ICcrSDstSCcgOiB0em9uZS5ob3VyRm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4U3RyaW5nICs9ICcoJyArIHRoaXMucGFyc2VUaW1lWm9uZVJlZ3goaHBhdHRlcm4sIHR6b25lLCBuUmVneCkgKyAnKT8nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFwnJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaVN0cmluZyA9IHN0ci5yZXBsYWNlKC9cXCcvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4U3RyaW5nICs9ICcoJyArIGlTdHJpbmcgKyAnKT8nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0cmluZyArPSAnKC4pPyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhblVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VPcHRpb25zLmV2YWxwb3NpdGlvbltjaGFyS2V5XSA9IHsgaXNOdW1iZXI6IGlzTnVtYmVyLCBwb3M6IGkgKyAxLCBob3VyT25seTogaG91ck9ubHkgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbGVuZ3RoXzEgLSAxICYmICF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQocmVnZXhTdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZU9wdGlvbnMucGFyc2VyUmVnZXggPSBuZXcgUmVnRXhwKCdeJyArIHJlZ2V4U3RyaW5nICsgJyQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkRGF0ZVBhcnRzID0gX3RoaXMuaW50ZXJuYWxEYXRlUGFyc2UodmFsdWUsIHBhcnNlT3B0aW9ucywgbnVtT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChwYXJzZWREYXRlUGFydHMpIHx8ICFPYmplY3Qua2V5cyhwYXJzZWREYXRlUGFydHMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldERhdGVPYmplY3QocGFyc2VkRGF0ZVBhcnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIERhdGVQYXJzZXIuZ2V0RGF0ZU9iamVjdCA9IGZ1bmN0aW9uIChvcHRpb25zLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHZhbHVlIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXMuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICAgICAgdmFyIHRLZXlzID0gWydob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCAnbW9udGgnLCAnZGF5J107XG4gICAgICAgICAgICB2YXIgeSA9IG9wdGlvbnMueWVhcjtcbiAgICAgICAgICAgIHZhciBkZXNpZyA9IG9wdGlvbnMuZGVzaWduYXRvcjtcbiAgICAgICAgICAgIHZhciB0em9uZSA9IG9wdGlvbnMudGltZVpvbmU7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc1VuZGVmaW5lZCh5KSkge1xuICAgICAgICAgICAgICAgIHZhciBsZW4gPSAoeSArICcnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA8PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50dXJ5ID0gTWF0aC5mbG9vcihyZXMuZ2V0RnVsbFllYXIoKSAvIDEwMCkgKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgIHkgKz0gY2VudHVyeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzLnNldEZ1bGxZZWFyKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0S2V5c18xID0gdEtleXM7IF9pIDwgdEtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gdEtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHRWYWx1ZSA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc1VuZGVmaW5lZCh0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdtb250aCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRWYWx1ZSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRWYWx1ZSA8IDAgfHwgdFZhbHVlID4gMTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwRGF0ZSA9IHJlcy5nZXREYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0RGF0ZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1t0aW1lU2V0dGVyW2tleV1dKHRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbERhdGUgPSBuZXcgRGF0ZShyZXMuZ2V0RnVsbFllYXIoKSwgdFZhbHVlICsgMSwgMCkuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNldERhdGUocERhdGUgPCBsRGF0ZSA/IHBEYXRlIDogbERhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2RheScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdERheSA9IG5ldyBEYXRlKHJlcy5nZXRGdWxsWWVhcigpLCByZXMuZ2V0TW9udGgoKSArIDEsIDApLmdldERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRWYWx1ZSA8IDEgfHwgdFZhbHVlID4gbGFzdERheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzW3RpbWVTZXR0ZXJba2V5XV0odFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKGRlc2lnKSkge1xuICAgICAgICAgICAgICAgIHZhciBob3VyID0gcmVzLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRlc2lnID09PSAncG0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIb3Vycyhob3VyICsgKGhvdXIgPT09IDEyID8gMCA6IDEyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIb3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc1VuZGVmaW5lZCh0em9uZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHpWYWx1ZSA9IHR6b25lIC0gcmVzLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHR6VmFsdWUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNldE1pbnV0ZXMocmVzLmdldE1pbnV0ZXMoKSArIHR6VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVQYXJzZXIuaW50ZXJuYWxEYXRlUGFyc2UgPSBmdW5jdGlvbiAodmFsdWUsIHBhcnNlT3B0aW9ucywgbnVtKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHZhbHVlLm1hdGNoKHBhcnNlT3B0aW9ucy5wYXJzZXJSZWdleCk7XG4gICAgICAgICAgICB2YXIgcmV0T3B0aW9ucyA9IHsgJ2hvdXInOiAwLCAnbWludXRlJzogMCwgJ3NlY29uZCc6IDAgfTtcbiAgICAgICAgICAgIHZhciBuUmVneCA9IG51bS5udW1lcmljUmVnZXg7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKG1hdGNoZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhwYXJzZU9wdGlvbnMuZXZhbHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByb3BzXzEgPSBwcm9wczsgX2kgPCBwcm9wc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHByb3BzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyT2JqZWN0ID0gcGFyc2VPcHRpb25zLmV2YWxwb3NpdGlvbltwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoU3RyaW5nID0gbWF0Y2hlc1tjdXJPYmplY3QucG9zXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1ck9iamVjdC5pc051bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0T3B0aW9uc1twcm9wXSA9IHRoaXMuaW50ZXJuYWxOdW1iZXJQYXJzZXIobWF0Y2hTdHJpbmcsIG51bSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RpbWVab25lJyAmJiAhdXRpbF8xLmlzVW5kZWZpbmVkKG1hdGNoU3RyaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBjdXJPYmplY3QucG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtYXRjaCA9IG1hdGNoZXNbcG9zICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsYWcgPSAhdXRpbF8xLmlzVW5kZWZpbmVkKHRtYXRjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ck9iamVjdC5ob3VyT25seSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLmdldFpvbmVWYWx1ZShmbGFnLCB0bWF0Y2gsIG1hdGNoZXNbcG9zICsgNF0sIG51bSkgKiA2MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMuZ2V0Wm9uZVZhbHVlKGZsYWcsIHRtYXRjaCwgbWF0Y2hlc1twb3MgKyA3XSwgbnVtKSAqIDYwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgKz0gdGhpcy5nZXRab25lVmFsdWUoZmxhZywgbWF0Y2hlc1twb3MgKyA0XSwgbWF0Y2hlc1twb3MgKyAxMF0sIG51bSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0T3B0aW9uc1twcm9wXSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRPcHRpb25zW3Byb3BdID0gcGFyc2VPcHRpb25zW3Byb3BdW21hdGNoU3RyaW5nXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFyc2VPcHRpb25zLmhvdXIxMikge1xuICAgICAgICAgICAgICAgICAgICByZXRPcHRpb25zLmhvdXIxMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldE9wdGlvbnM7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVQYXJzZXIuaW50ZXJuYWxOdW1iZXJQYXJzZXIgPSBmdW5jdGlvbiAodmFsdWUsIG9wdGlvbikge1xuICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJfYmFzZV8xLlBhcnNlckJhc2UuY29udmVydFZhbHVlUGFydHModmFsdWUsIG9wdGlvbi5udW1iZXJQYXJzZVJlZ2V4LCBvcHRpb24ubnVtZXJpY1BhaXIpO1xuICAgICAgICAgICAgaWYgKGxhdG5SZWdleC50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiArdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVBhcnNlci5wYXJzZVRpbWVab25lUmVneCA9IGZ1bmN0aW9uIChob3VyRm9ybWF0LCB0Wm9uZSwgblJlZ2V4KSB7XG4gICAgICAgICAgICB2YXIgcGF0dGVybiA9IHRab25lLmdtdEZvcm1hdDtcbiAgICAgICAgICAgIHZhciByZXQ7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIGNSZWdleCA9ICcoJyArIG5SZWdleCArICcpJyArICcoJyArIG5SZWdleCArICcpJztcbiAgICAgICAgICAgIHZhciBzcGxpdFN0cjtcbiAgICAgICAgICAgIHJldCA9IGhvdXJGb3JtYXQucmVwbGFjZSgnKycsICdcXFxcKycpO1xuICAgICAgICAgICAgaWYgKGhvdXJGb3JtYXQuaW5kZXhPZignSEgnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXQgPSByZXQucmVwbGFjZSgvSEh8bW0vZywgJygnICsgY1JlZ2V4ICsgJyknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldCA9IHJldC5yZXBsYWNlKC9IfG0vZywgJygnICsgY1JlZ2V4ICsgJz8pJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcGxpdFN0ciA9IChyZXQuc3BsaXQoJzsnKS5tYXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXR0ZXJuLnJlcGxhY2UoJ3swfScsIHN0cik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXQgPSBzcGxpdFN0ci5qb2luKCd8JykgKyAnfCcgKyB0Wm9uZS5nbXRaZXJvRm9ybWF0O1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVBhcnNlci5nZXRab25lVmFsdWUgPSBmdW5jdGlvbiAoZmxhZywgdmFsMSwgdmFsMiwgbnVtKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmludGVybmFsTnVtYmVyUGFyc2VyKGZsYWcgPyB2YWwxIDogdmFsMiwgbnVtKTtcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC12YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGVQYXJzZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGVQYXJzZXIgPSBEYXRlUGFyc2VyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbnRsL2RhdGUtcGFyc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi91dGlsXCIsIFwiLi9wYXJzZXItYmFzZVwiLCBcIi4vaW50bC1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xLCBwYXJzZXJfYmFzZV8xLCBpbnRsX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgZm9ybWF0UmVnZXggPSAvKF5bbmNwYV17MX0pKFswLTFdP1swLTldfDIwKT8kL2k7XG4gICAgdmFyIHBhcnNlUmVnZXggPSAvXihbXjAtOV0qKSgoWzAtOSxdKlswLTldKykoXFwuWzAtOV0rKT8pKFtFZV1bKy1dP1swLTldKyk/KFteMC05XSopJC87XG4gICAgdmFyIGdyb3VwUmVnZXggPSAvLC9nO1xuICAgIHZhciBsYXRuRGVjaW1hbFJlZ2V4ID0gL15bMC05XSooXFwuWzAtOV0rKT8kLztcbiAgICB2YXIga2V5cyA9IFsnbWludXNTaWduJywgJ2luZmluaXR5J107XG4gICAgdmFyIE51bWJlclBhcnNlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWJlclBhcnNlcigpIHtcbiAgICAgICAgfVxuICAgICAgICBOdW1iZXJQYXJzZXIubnVtYmVyUGFyc2VyID0gZnVuY3Rpb24gKGN1bHR1cmUsIG9wdGlvbiwgY2xkcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZXBlbmRhYmxlID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0RGVwZW5kYWJsZXMoY2xkciwgY3VsdHVyZSwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgcGFyc2VPcHRpb25zID0geyBjdXN0b206IHRydWUgfTtcbiAgICAgICAgICAgIHZhciBudW1PcHRpb25zO1xuICAgICAgICAgICAgaWYgKChpbnRsX2Jhc2VfMS5JbnRsQmFzZS5mb3JtYXRSZWdleC50ZXN0KG9wdGlvbi5mb3JtYXQpKSB8fCAhKG9wdGlvbi5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLmV4dGVuZChwYXJzZU9wdGlvbnMsIGludGxfYmFzZV8xLkludGxCYXNlLmdldFByb3Blck51bWVyaWNTa2VsZXRvbihvcHRpb24uZm9ybWF0IHx8ICdOJykpO1xuICAgICAgICAgICAgICAgIHBhcnNlT3B0aW9ucy5jdXN0b20gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5leHRlbmQocGFyc2VPcHRpb25zLCBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5jdXN0b21Gb3JtYXQob3B0aW9uLmZvcm1hdCwgbnVsbCwgbnVsbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnVtT3B0aW9ucyA9IHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXRDdXJyZW50TnVtZXJpY09wdGlvbnMoZGVwZW5kYWJsZS5wYXJzZXJPYmplY3QsIHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5nZXROdW1iZXJpbmdTeXN0ZW0oY2xkciksIHRydWUpO1xuICAgICAgICAgICAgcGFyc2VPcHRpb25zLnN5bWJvbFJlZ2V4ID0gcGFyc2VyX2Jhc2VfMS5QYXJzZXJCYXNlLmdldFN5bWJvbFJlZ2V4KE9iamVjdC5rZXlzKG51bU9wdGlvbnMuc3ltYm9sTWF0Y2gpKTtcbiAgICAgICAgICAgIHBhcnNlT3B0aW9ucy5pbmZpbml0eSA9IG51bU9wdGlvbnMuc3ltYm9sTnVtYmVyU3lzdGVtW2tleXNbMV1dO1xuICAgICAgICAgICAgdmFyIHN5bWJvbHBhdHRlcm4gPSBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXRTeW1ib2xQYXR0ZXJuKHBhcnNlT3B0aW9ucy50eXBlLCBudW1PcHRpb25zLm51bWJlclN5c3RlbSwgZGVwZW5kYWJsZS5udW1lcmljT2JqZWN0LCBwYXJzZU9wdGlvbnMuaXNBY2NvdW50KTtcbiAgICAgICAgICAgIGlmIChzeW1ib2xwYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgc3ltYm9scGF0dGVybiA9IHN5bWJvbHBhdHRlcm4ucmVwbGFjZSgvXFx1MDBBNC9nLCBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5kZWZhdWx0Q3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIHZhciBzcGxpdCA9IHN5bWJvbHBhdHRlcm4uc3BsaXQoJzsnKTtcbiAgICAgICAgICAgICAgICBwYXJzZU9wdGlvbnMubkRhdGEgPSBpbnRsX2Jhc2VfMS5JbnRsQmFzZS5nZXRGb3JtYXREYXRhKHNwbGl0WzFdIHx8ICctJyArIHNwbGl0WzBdLCB0cnVlLCAnJyk7XG4gICAgICAgICAgICAgICAgcGFyc2VPcHRpb25zLnBEYXRhID0gaW50bF9iYXNlXzEuSW50bEJhc2UuZ2V0Rm9ybWF0RGF0YShzcGxpdFswXSwgdHJ1ZSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRQYXJzZWROdW1iZXIodmFsdWUsIHBhcnNlT3B0aW9ucywgbnVtT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBOdW1iZXJQYXJzZXIuZ2V0UGFyc2VkTnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zLCBudW1PcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgaXNOZWdhdGl2ZTtcbiAgICAgICAgICAgIHZhciBpc1BlcmNlbnQ7XG4gICAgICAgICAgICB2YXIgdGVtcFZhbHVlO1xuICAgICAgICAgICAgdmFyIGxlYWQ7XG4gICAgICAgICAgICB2YXIgZW5kO1xuICAgICAgICAgICAgdmFyIHJldDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKG9wdGlvbnMuaW5maW5pdHkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2VyX2Jhc2VfMS5QYXJzZXJCYXNlLmNvbnZlcnRWYWx1ZVBhcnRzKHZhbHVlLCBvcHRpb25zLnN5bWJvbFJlZ2V4LCBudW1PcHRpb25zLnN5bWJvbE1hdGNoKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlcl9iYXNlXzEuUGFyc2VyQmFzZS5jb252ZXJ0VmFsdWVQYXJ0cyh2YWx1ZSwgbnVtT3B0aW9ucy5udW1iZXJQYXJzZVJlZ2V4LCBudW1PcHRpb25zLm51bWVyaWNQYWlyKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignLicpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJzAnICsgdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gdmFsdWUubWF0Y2gocGFyc2VSZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChtYXRjaGVzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZWFkID0gbWF0Y2hlc1sxXTtcbiAgICAgICAgICAgICAgICB0ZW1wVmFsdWUgPSBtYXRjaGVzWzJdO1xuICAgICAgICAgICAgICAgIHZhciBleHBvbmVudCA9IG1hdGNoZXNbNV07XG4gICAgICAgICAgICAgICAgZW5kID0gbWF0Y2hlc1s2XTtcbiAgICAgICAgICAgICAgICBpc05lZ2F0aXZlID0gb3B0aW9ucy5jdXN0b20gPyAoKGxlYWQgPT09IG9wdGlvbnMubkRhdGEubmxlYWQpICYmIChlbmQgPT09IG9wdGlvbnMubkRhdGEubmVuZCkpIDpcbiAgICAgICAgICAgICAgICAgICAgKChsZWFkLmluZGV4T2Yob3B0aW9ucy5uRGF0YS5ubGVhZCkgIT09IC0xKSAmJiAoZW5kLmluZGV4T2Yob3B0aW9ucy5uRGF0YS5uZW5kKSAhPT0gLTEpKTtcbiAgICAgICAgICAgICAgICBpc1BlcmNlbnQgPSBpc05lZ2F0aXZlID9cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5uRGF0YS5pc1BlcmNlbnQgOlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnBEYXRhLmlzUGVyY2VudDtcbiAgICAgICAgICAgICAgICB0ZW1wVmFsdWUgPSB0ZW1wVmFsdWUucmVwbGFjZShncm91cFJlZ2V4LCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBWYWx1ZSArPSBleHBvbmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0ID0gK3RlbXBWYWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50eXBlID09PSAncGVyY2VudCcgfHwgaXNQZXJjZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IHJldCAvIDEwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY3VzdG9tIHx8IG9wdGlvbnMuZnJhY3Rpb25EaWdpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gcGFyc2VGbG9hdChyZXQudG9GaXhlZChvcHRpb25zLmN1c3RvbSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAoaXNOZWdhdGl2ZSA/IG9wdGlvbnMubkRhdGEubWF4aW11bUZyYWN0aW9uRGlnaXRzIDogb3B0aW9ucy5wRGF0YS5tYXhpbXVtRnJhY3Rpb25EaWdpdHMpIDogb3B0aW9ucy5mcmFjdGlvbkRpZ2l0cykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNOZWdhdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXQgKj0gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOdW1iZXJQYXJzZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk51bWJlclBhcnNlciA9IE51bWJlclBhcnNlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW50bC9udW1iZXItcGFyc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYmFzZVwiLCBcIi4vYnJvd3NlclwiLCBcIi4vZG9tXCIsIFwiLi9ub3RpZnktcHJvcGVydHktY2hhbmdlXCIsIFwiLi9ldmVudC1oYW5kbGVyXCIsIFwiLi9jaGlsZC1wcm9wZXJ0eVwiLCBcIi4vZG9tXCIsIFwiLi91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgYmFzZV8xLCBicm93c2VyXzEsIGRvbV8xLCBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEsIGV2ZW50X2hhbmRsZXJfMSwgY2hpbGRfcHJvcGVydHlfMSwgZG9tXzIsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgZGVmYXVsdFBvc2l0aW9uID0geyBsZWZ0OiAwLCB0b3A6IDAsIGJvdHRvbTogMCwgcmlnaHQ6IDAgfTtcbiAgICB2YXIgcG9zaXRpb25Qcm9wID0gWydvZmZzZXRMZWZ0JywgJ29mZnNldFRvcCddO1xuICAgIHZhciBheGlzTWFwcGVyID0gWyd4JywgJ3knXTtcbiAgICB2YXIgYXhpc1ZhbHVlTWFwcGVyID0gWydsZWZ0JywgJ3RvcCddO1xuICAgIHZhciBQb3NpdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQb3NpdGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUG9zaXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBvc2l0aW9uO1xuICAgIH0oY2hpbGRfcHJvcGVydHlfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIFBvc2l0aW9uLnByb3RvdHlwZSwgXCJsZWZ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIFBvc2l0aW9uLnByb3RvdHlwZSwgXCJ0b3BcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlBvc2l0aW9uID0gUG9zaXRpb247XG4gICAgdmFyIERyYWdnYWJsZSA9IERyYWdnYWJsZV8xID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERyYWdnYWJsZSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRHJhZ2dhYmxlKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5kcmFnTGltaXQgPSBEcmFnZ2FibGVfMS5nZXREZWZhdWx0UG9zaXRpb24oKTtcbiAgICAgICAgICAgIF90aGlzLmJvcmRlcldpZHRoID0gRHJhZ2dhYmxlXzEuZ2V0RGVmYXVsdFBvc2l0aW9uKCk7XG4gICAgICAgICAgICBfdGhpcy5wYWRkaW5nID0gRHJhZ2dhYmxlXzEuZ2V0RGVmYXVsdFBvc2l0aW9uKCk7XG4gICAgICAgICAgICBfdGhpcy5kaWZmWCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5kaWZmWSA9IDA7XG4gICAgICAgICAgICBfdGhpcy5kcm9wcGFibGVzID0ge307XG4gICAgICAgICAgICBfdGhpcy5iaW5kKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVFdmVudHMoKTtcbiAgICAgICAgICAgIGlmIChicm93c2VyXzEuQnJvd3Nlci5pc0lFKSB7XG4gICAgICAgICAgICAgICAgZG9tXzIuYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sICdlLWJsb2NrLXRvdWNoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRyb3BwYWJsZXNbdGhpcy5zY29wZV0gPSB7fTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLmdldERlZmF1bHRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuZXh0ZW5kKHt9LCBkZWZhdWx0UG9zaXRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBEcmFnZ2FibGUucHJvdG90eXBlLnRvZ2dsZUV2ZW50cyA9IGZ1bmN0aW9uIChpc1VuV2lyZSkge1xuICAgICAgICAgICAgdmFyIGVsZTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKHRoaXMuaGFuZGxlKSkge1xuICAgICAgICAgICAgICAgIGVsZSA9IGRvbV8yLnNlbGVjdCh0aGlzLmhhbmRsZSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1VuV2lyZSkge1xuICAgICAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSB8fCB0aGlzLmVsZW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5pbml0aWFsaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKGVsZSB8fCB0aGlzLmVsZW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5pbml0aWFsaXplLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBldnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZlbnREZWZhdWx0ICYmICF1dGlsXzEuaXNVbmRlZmluZWQoZXZ0LmNoYW5nZWRUb3VjaGVzKSkge1xuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWJvcnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChkb21fMi5jbG9zZXN0KGV2dC50YXJnZXQsIHRoaXMuYWJvcnQpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1ncmFiYmVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHZhciBpbnRDb29yZCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXMoZXZ0KTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFBvc2l0aW9uID0geyB4OiBpbnRDb29yZC5wYWdlWCwgeTogaW50Q29vcmQucGFnZVkgfTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jbG9uZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZVhQb3NpdGlvbiA9IGludENvb3JkLnBhZ2VYIC0gcG9zLmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZVlQb3NpdGlvbiA9IGludENvb3JkLnBhZ2VZIC0gcG9zLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBicm93c2VyXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5pbnREcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMuaW50RGVzdHJveSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUV2ZW50cyh0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZS1wcmV2ZW50LXNlbGVjdCcpO1xuICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci50cmlnZ2VyKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBldnQpO1xuICAgICAgICB9O1xuICAgICAgICBEcmFnZ2FibGUucHJvdG90eXBlLmludERyYWdTdGFydCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHZhciBpc0NoYW5nZVRvdWNoID0gIXV0aWxfMS5pc1VuZGVmaW5lZChldnQuY2hhbmdlZFRvdWNoZXMpO1xuICAgICAgICAgICAgaWYgKGlzQ2hhbmdlVG91Y2ggJiYgKGV2dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggIT09IDEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGludENvcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXMoZXZ0KTtcbiAgICAgICAgICAgIHZhciBwb3M7XG4gICAgICAgICAgICB2YXIgc3R5bGVQcm9wID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogcGFyc2VJbnQoc3R5bGVQcm9wLm1hcmdpbkxlZnQsIDEwKSxcbiAgICAgICAgICAgICAgICB0b3A6IHBhcnNlSW50KHN0eWxlUHJvcC5tYXJnaW5Ub3AsIDEwKSxcbiAgICAgICAgICAgICAgICByaWdodDogcGFyc2VJbnQoc3R5bGVQcm9wLm1hcmdpblJpZ2h0LCAxMCksXG4gICAgICAgICAgICAgICAgYm90dG9tOiBwYXJzZUludChzdHlsZVByb3AubWFyZ2luQm90dG9tLCAxMCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5jbG9uZSAmJiB0aGlzLmRyYWdUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW50Q2xvc2VzdCA9IGRvbV8yLmNsb3Nlc3QoZXZ0LnRhcmdldCwgdGhpcy5kcmFnVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChpbnRDbG9zZXN0KSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gaW50Q2xvc2VzdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMuY2FsY3VsYXRlUGFyZW50UG9zaXRpb24oZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5nZXRNb3VzZVBvc2l0aW9uKGV2dCk7XG4gICAgICAgICAgICB2YXIgeCA9IHRoaXMuaW5pdGlhbFBvc2l0aW9uLnggLSBpbnRDb3JkaW5hdGUucGFnZVg7XG4gICAgICAgICAgICB2YXIgeSA9IHRoaXMuaW5pdGlhbFBvc2l0aW9uLnkgLSBpbnRDb3JkaW5hdGUucGFnZVk7XG4gICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xuICAgICAgICAgICAgaWYgKGRpc3RhbmNlID49IHRoaXMuZGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5nZXRIZWxwZXJFbGVtZW50KGV2dCk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGUgfHwgdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKGVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZHJhZ1RhcmdldEVsZW1lbnQgPSB0aGlzLmhlbHBlckVsZW1lbnQgPSBlbGU7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRDbGllbnRSZWN0ID0gdGhpcy5jYWxjdWxhdGVQYXJlbnRQb3NpdGlvbihkcmFnVGFyZ2V0RWxlbWVudC5vZmZzZXRQYXJlbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyVGFyZ2V0ID0gdGhpcy5nZXRQcm9wZXJUYXJnZXRFbGVtZW50KGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZHJhZ1N0YXJ0JywgeyBldmVudDogZXZ0LCBlbGVtZW50OiBlbGVtZW50LCB0YXJnZXQ6IGN1clRhcmdldCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ0FyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREcmFnQXJlYSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnTGltaXQgPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIHRvcDogMCB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvcmRlcldpZHRoID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zID0geyBsZWZ0OiB0aGlzLnBvc2l0aW9uLmxlZnQgLSB0aGlzLnBhcmVudENsaWVudFJlY3QubGVmdCwgdG9wOiB0aGlzLnBvc2l0aW9uLnRvcCAtIHRoaXMucGFyZW50Q2xpZW50UmVjdC50b3AgfTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9uZSAmJiAhdGhpcy5lbmFibGVUYWlsTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpZmZYID0gdGhpcy5wb3NpdGlvbi5sZWZ0IC0gdGhpcy5vZmZzZXQubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWZmWSA9IHRoaXMucG9zaXRpb24udG9wIC0gdGhpcy5vZmZzZXQudG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcG9zVmFsdWUgPSB0aGlzLmdldFByb2Nlc3NlZFBvc2l0aW9uVmFsdWUoeyB0b3A6IChwb3MudG9wIC0gdGhpcy5kaWZmWSkgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAocG9zLmxlZnQgLSB0aGlzLmRpZmZYKSArICdweCcgfSk7XG4gICAgICAgICAgICAgICAgZG9tXzIuc2V0U3R5bGVBdHRyaWJ1dGUoZHJhZ1RhcmdldEVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogcG9zVmFsdWUudG9wLCBsZWZ0OiBwb3NWYWx1ZS5sZWZ0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLmludERyYWdTdGFydCk7XG4gICAgICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMuaW50RGVzdHJveSk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbV8xLmlzVmlzaWJsZShkcmFnVGFyZ2V0RWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLmludERyYWcsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5pbnREcmFnU3RvcCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0R2xvYmFsRHJvcHBhYmxlcyhmYWxzZSwgdGhpcy5lbGVtZW50LCBkcmFnVGFyZ2V0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcHJldmVudC1zZWxlY3QnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuZ2V0UHJvY2Vzc2VkUG9zaXRpb25WYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXhpcykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF4aXMgPT09ICd4Jykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS50b3AgPSAnMHB4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5heGlzID09PSAneScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUubGVmdCA9ICcwcHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5UG9zaXRpb25JbmZvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlQb3NpdGlvbkluZm8odmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEcmFnZ2FibGUucHJvdG90eXBlLmNhbGN1bGF0ZVBhcmVudFBvc2l0aW9uID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChlbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGVmdDogKHJlY3QubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCkgLSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCksXG4gICAgICAgICAgICAgICAgdG9wOiAocmVjdC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQpIC0gcGFyc2VJbnQoc3R5bGUubWFyZ2luVG9wLCAxMClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuaW50RHJhZyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKGV2dC5jaGFuZ2VkVG91Y2hlcykgJiYgKGV2dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggIT09IDEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxlZnQ7XG4gICAgICAgICAgICB2YXIgdG9wO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMuZ2V0TW91c2VQb3NpdGlvbihldnQpO1xuICAgICAgICAgICAgdmFyIGRvY0hlaWdodCA9IHRoaXMuZ2V0RG9jdW1lbnRXaWR0aEhlaWdodCgnSGVpZ2h0Jyk7XG4gICAgICAgICAgICBpZiAoZG9jSGVpZ2h0IDwgdGhpcy5wb3NpdGlvbi50b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnRvcCA9IGRvY0hlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkb2NXaWR0aCA9IHRoaXMuZ2V0RG9jdW1lbnRXaWR0aEhlaWdodCgnV2lkdGgnKTtcbiAgICAgICAgICAgIGlmIChkb2NXaWR0aCA8IHRoaXMucG9zaXRpb24ubGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ubGVmdCA9IGRvY1dpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJUYXJnZXQgPSB0aGlzLmdldFByb3BlclRhcmdldEVsZW1lbnQoZXZ0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RyYWcnLCB7IGV2ZW50OiBldnQsIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCwgdGFyZ2V0OiBjdXJUYXJnZXQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWxlT2JqID0gdGhpcy5jaGVja1RhcmdldEVsZW1lbnQoZXZ0KTtcbiAgICAgICAgICAgIGlmIChlbGVPYmoudGFyZ2V0ICYmIGVsZU9iai5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGVsZU9iai5pbnN0YW5jZS5pbnRPdmVyKGV2dCwgZWxlT2JqLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgZWxlT2JqLmluc3RhbmNlLmRyYWdEYXRhW3RoaXMuc2NvcGVdID0gdGhpcy5kcm9wcGFibGVzW3RoaXMuc2NvcGVdO1xuICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJPYmplY3QgPSBlbGVPYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3Zlck9iamVjdC5pbnN0YW5jZS5pbnRPdXQoZXZ0LCBlbGVPYmoudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyT2JqZWN0Lmluc3RhbmNlLmRyYWdEYXRhW3RoaXMuc2NvcGVdID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyT2JqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWxwZXJFbGVtZW50ID0gdGhpcy5kcm9wcGFibGVzW3RoaXMuc2NvcGVdLmhlbHBlcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Q2xpZW50UmVjdCA9IHRoaXMuY2FsY3VsYXRlUGFyZW50UG9zaXRpb24odGhpcy5oZWxwZXJFbGVtZW50Lm9mZnNldFBhcmVudCk7XG4gICAgICAgICAgICB2YXIgdExlZnQgPSB0aGlzLnBhcmVudENsaWVudFJlY3QubGVmdDtcbiAgICAgICAgICAgIHZhciB0VG9wID0gdGhpcy5wYXJlbnRDbGllbnRSZWN0LnRvcDtcbiAgICAgICAgICAgIHZhciBpbnRDb29yZCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXMoZXZ0KTtcbiAgICAgICAgICAgIHZhciBwYWdleCA9IGludENvb3JkLnBhZ2VYO1xuICAgICAgICAgICAgdmFyIHBhZ2V5ID0gaW50Q29vcmQucGFnZVk7XG4gICAgICAgICAgICB2YXIgZExlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgLSB0aGlzLmRpZmZYO1xuICAgICAgICAgICAgdmFyIGRUb3AgPSB0aGlzLnBvc2l0aW9uLnRvcCAtIHRoaXMuZGlmZlk7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnQXJlYSkge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKGhlbHBlckVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VYICE9PSBwYWdleCB8fCB0aGlzLnNraXBEaXN0YW5jZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWxwZXJXaWR0aCA9IGhlbHBlckVsZW1lbnQub2Zmc2V0V2lkdGggKyAocGFyc2VGbG9hdChzdHlsZXMubWFyZ2luTGVmdClcbiAgICAgICAgICAgICAgICAgICAgICAgICsgcGFyc2VGbG9hdChzdHlsZXMubWFyZ2luUmlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ0xpbWl0LmxlZnQgPiBkTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHRoaXMuZHJhZ0xpbWl0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kcmFnTGltaXQucmlnaHQgPCBkTGVmdCArIGhlbHBlcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gdGhpcy5kcmFnTGltaXQucmlnaHQgLSBoZWxwZXJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBkTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWdlWSAhPT0gcGFnZXkgfHwgdGhpcy5za2lwRGlzdGFuY2VDaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVscGVySGVpZ2h0ID0gaGVscGVyRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAocGFyc2VGbG9hdChzdHlsZXMubWFyZ2luVG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBwYXJzZUZsb2F0KHN0eWxlcy5tYXJnaW5Cb3R0b20pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ0xpbWl0LnRvcCA+IGRUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHRoaXMuZHJhZ0xpbWl0LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRyYWdMaW1pdC5ib3R0b20gPCBkVG9wICsgaGVscGVySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSB0aGlzLmRyYWdMaW1pdC5ib3R0b20gLSBoZWxwZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBkVG9wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9IGRMZWZ0O1xuICAgICAgICAgICAgICAgIHRvcCA9IGRUb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaVRvcCA9IHRUb3AgKyB0aGlzLmJvcmRlcldpZHRoLnRvcDtcbiAgICAgICAgICAgIHZhciBpTGVmdCA9IHRMZWZ0ICsgdGhpcy5ib3JkZXJXaWR0aC5sZWZ0O1xuICAgICAgICAgICAgdmFyIGRyYWdWYWx1ZSA9IHRoaXMuZ2V0UHJvY2Vzc2VkUG9zaXRpb25WYWx1ZSh7IHRvcDogKHRvcCAtIGlUb3ApICsgJ3B4JywgbGVmdDogKGxlZnQgLSBpTGVmdCkgKyAncHgnIH0pO1xuICAgICAgICAgICAgZG9tXzIuc2V0U3R5bGVBdHRyaWJ1dGUoaGVscGVyRWxlbWVudCwgeyBsZWZ0OiBkcmFnVmFsdWUubGVmdCwgdG9wOiBkcmFnVmFsdWUudG9wIH0pO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24udG9wID0gdG9wO1xuICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHBhZ2V4O1xuICAgICAgICAgICAgdGhpcy5wYWdlWSA9IHBhZ2V5O1xuICAgICAgICB9O1xuICAgICAgICBEcmFnZ2FibGUucHJvdG90eXBlLmdldERvY3VtZW50V2lkdGhIZWlnaHQgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICB2YXIgZG9jQm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICB2YXIgZG9jRWxlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gTWF0aC5tYXgoZG9jQm9keVsnc2Nyb2xsJyArIHN0cl0sIGRvY0VsZVsnc2Nyb2xsJyArIHN0cl0sIGRvY0JvZHlbJ29mZnNldCcgKyBzdHJdLCBkb2NFbGVbJ29mZnNldCcgKyBzdHJdLCBkb2NFbGVbJ2NsaWVudCcgKyBzdHJdKTtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5pbnREcmFnU3RvcCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzVW5kZWZpbmVkKGV2dC5jaGFuZ2VkVG91Y2hlcykgJiYgKGV2dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggIT09IDEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHR5cGUgPSBbJ3RvdWNoZW5kJywgJ3BvaW50ZXJ1cCcsICdtb3VzZXVwJ107XG4gICAgICAgICAgICBpZiAodHlwZS5pbmRleE9mKGV2dC50eXBlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kcmFnU3RvcCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyVGFyZ2V0ID0gdGhpcy5nZXRQcm9wZXJUYXJnZXRFbGVtZW50KGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZHJhZ1N0b3AnLCB7IGV2ZW50OiBldnQsIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCwgdGFyZ2V0OiBjdXJUYXJnZXQsIGhlbHBlcjogdGhpcy5oZWxwZXJFbGVtZW50IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmludERlc3Ryb3koZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZ3JhYmJlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVsZU9iaiA9IHRoaXMuY2hlY2tUYXJnZXRFbGVtZW50KGV2dCk7XG4gICAgICAgICAgICBpZiAoZWxlT2JqLnRhcmdldCAmJiBlbGVPYmouaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBlbGVPYmouaW5zdGFuY2UuZHJhZ1N0b3BDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVsZU9iai5pbnN0YW5jZS5kcmFnRGF0YVt0aGlzLnNjb3BlXSA9IHRoaXMuZHJvcHBhYmxlc1t0aGlzLnNjb3BlXTtcbiAgICAgICAgICAgICAgICBlbGVPYmouaW5zdGFuY2UuaW50RHJvcChldnQsIGVsZU9iai50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRHbG9iYWxEcm9wcGFibGVzKHRydWUpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdlLXByZXZlbnQtc2VsZWN0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuaW50RGVzdHJveSA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRXZlbnRzKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcHJldmVudC1zZWxlY3QnKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZ3JhYmJlZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLmludERyYWdTdGFydCk7XG4gICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5pbnREcmFnU3RvcCk7XG4gICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5pbnREZXN0cm95KTtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBicm93c2VyXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5pbnREcmFnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZHJhZ2dhYmxlJztcbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5zZXREcmFnQXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVXaWR0aEJvdW5kO1xuICAgICAgICAgICAgdmFyIGVsZUhlaWdodEJvdW5kO1xuICAgICAgICAgICAgdmFyIHRvcCA9IDA7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IDA7XG4gICAgICAgICAgICB2YXIgZWxlO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdGhpcy5kcmFnQXJlYTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGVsZSA9IGRvbV8yLnNlbGVjdCh0aGlzLmRyYWdBcmVhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZSA9IHRoaXMuZHJhZ0FyZWE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRBcmVhID0gZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGVsZVdpZHRoQm91bmQgPSBlbGVtZW50QXJlYS53aWR0aCA/IGVsZW1lbnRBcmVhLndpZHRoIDogZWxlbWVudEFyZWEucmlnaHQgLSBlbGVtZW50QXJlYS5sZWZ0O1xuICAgICAgICAgICAgICAgIGVsZUhlaWdodEJvdW5kID0gZWxlbWVudEFyZWEuaGVpZ2h0ID8gZWxlbWVudEFyZWEuaGVpZ2h0IDogZWxlbWVudEFyZWEuYm90dG9tIC0gZWxlbWVudEFyZWEudG9wO1xuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gWydUb3AnLCAnTGVmdCcsICdCb3R0b20nLCAnUmlnaHQnXTtcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRib3JkZXIgPSBzdHlsZXNbJ2JvcmRlcicgKyBrZXkgKyAnV2lkdGgnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwYWRkaW5nID0gc3R5bGVzWydwYWRkaW5nJyArIGtleV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvcmRlcldpZHRoW2xvd2VyS2V5XSA9IGlzTmFOKHBhcnNlRmxvYXQodGJvcmRlcikpID8gMCA6IHBhcnNlRmxvYXQodGJvcmRlcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFkZGluZ1tsb3dlcktleV0gPSBpc05hTihwYXJzZUZsb2F0KHRwYWRkaW5nKSkgPyAwIDogcGFyc2VGbG9hdCh0cGFkZGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvcCA9IGVsZW1lbnRBcmVhLnRvcDtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gZWxlbWVudEFyZWEubGVmdDtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMaW1pdC5sZWZ0ID0gbGVmdCArIHRoaXMuYm9yZGVyV2lkdGgubGVmdCArIHRoaXMucGFkZGluZy5sZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0xpbWl0LnRvcCA9IHRvcCArIHRoaXMuYm9yZGVyV2lkdGgudG9wICsgdGhpcy5wYWRkaW5nLnRvcDtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMaW1pdC5yaWdodCA9IGxlZnQgKyBlbGVXaWR0aEJvdW5kIC0gKHRoaXMuYm9yZGVyV2lkdGgucmlnaHQgKyB0aGlzLnBhZGRpbmcucmlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0xpbWl0LmJvdHRvbSA9IHRvcCArIGVsZUhlaWdodEJvdW5kIC0gKHRoaXMuYm9yZGVyV2lkdGguYm90dG9tICsgdGhpcy5wYWRkaW5nLmJvdHRvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuZ2V0UHJvcGVyVGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHZhciBpbnRDb29yZCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXMoZXZ0KTtcbiAgICAgICAgICAgIHZhciBlbGU7XG4gICAgICAgICAgICB2YXIgcHJldlN0eWxlID0gdGhpcy5oZWxwZXJFbGVtZW50LnN0eWxlLmRpc3BsYXkgfHwgJyc7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmNvbXBhcmVFbGVtZW50UGFyZW50KGV2dC50YXJnZXQsIHRoaXMuaGVscGVyRWxlbWVudCkgfHwgZXZ0LnR5cGUuaW5kZXhPZigndG91Y2gnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGUgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGludENvb3JkLmNsaWVudFgsIGludENvb3JkLmNsaWVudFkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gcHJldlN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlID0gZXZ0LnRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGU7XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuZ2V0TW91c2VQb3NpdGlvbiA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHZhciBpbnRDb29yZCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXMoZXZ0KTtcbiAgICAgICAgICAgIHZhciBwYWdlWCA9IHRoaXMuY2xvbmUgPyBpbnRDb29yZC5wYWdlWCA6IGludENvb3JkLnBhZ2VYIC0gdGhpcy5yZWxhdGl2ZVhQb3NpdGlvbjtcbiAgICAgICAgICAgIHZhciBwYWdlWSA9IHRoaXMuY2xvbmUgPyBpbnRDb29yZC5wYWdlWSA6IGludENvb3JkLnBhZ2VZIC0gdGhpcy5yZWxhdGl2ZVlQb3NpdGlvbjtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGVmdDogcGFnZVggLSAodGhpcy5tYXJnaW4ubGVmdCArIHRoaXMuY3Vyc29yQXQubGVmdCksXG4gICAgICAgICAgICAgICAgdG9wOiBwYWdlWSAtICh0aGlzLm1hcmdpbi50b3AgKyB0aGlzLmN1cnNvckF0LnRvcClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUuaW5kZXhPZigndG91Y2gnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2dC5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBldnQ7XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuZ2V0SGVscGVyRWxlbWVudCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuY2xvbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuaGVscGVyKHsgc2VuZGVyOiBldnQsIGVsZW1lbnQ6IHRoaXMudGFyZ2V0IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGRvbV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1kcmFnLWhlbHBlciBlLWJsb2NrLXRvdWNoJywgaW5uZXJIVE1MOiAnRHJhZ2dhYmxlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuc2V0R2xvYmFsRHJvcHBhYmxlcyA9IGZ1bmN0aW9uIChyZXNldCwgZHJhZywgaGVscGVyKSB7XG4gICAgICAgICAgICB0aGlzLmRyb3BwYWJsZXNbdGhpcy5zY29wZV0gPSByZXNldCA/IG51bGwgOiB7XG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBkcmFnLFxuICAgICAgICAgICAgICAgIGhlbHBlcjogaGVscGVyLFxuICAgICAgICAgICAgICAgIGRyYWdnZWRFbGVtZW50OiB0aGlzLmVsZW1lbnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIERyYWdnYWJsZS5wcm90b3R5cGUuY2hlY2tUYXJnZXRFbGVtZW50ID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0UHJvcGVyVGFyZ2V0RWxlbWVudChldnQpO1xuICAgICAgICAgICAgdmFyIGRyb3BJbnMgPSB0aGlzLmdldERyb3BJbnN0YW5jZSh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKCFkcm9wSW5zICYmIHRhcmdldCAmJiAhdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldC5wYXJlbnROb2RlKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IGRvbV8yLmNsb3Nlc3QodGFyZ2V0LnBhcmVudE5vZGUsICcuZS1kcm9wcGFibGUnKSB8fCB0YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50XzEpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcElucyA9IHRoaXMuZ2V0RHJvcEluc3RhbmNlKHBhcmVudF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB0YXJnZXQ6IHRhcmdldCwgaW5zdGFuY2U6IGRyb3BJbnMgfTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5nZXREcm9wSW5zdGFuY2UgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9ICdnZXRNb2R1bGVOYW1lJztcbiAgICAgICAgICAgIHZhciBkcm9wO1xuICAgICAgICAgICAgdmFyIGVsZUluc3QgPSBlbGUgJiYgZWxlLmVqMl9pbnN0YW5jZXM7XG4gICAgICAgICAgICBpZiAoZWxlSW5zdCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlSW5zdF8xID0gZWxlSW5zdDsgX2kgPCBlbGVJbnN0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0ID0gZWxlSW5zdF8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RbbmFtZV0oKSA9PT0gJ2Ryb3BwYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3AgPSBpbnN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZHJvcDtcbiAgICAgICAgfTtcbiAgICAgICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVFdmVudHModHJ1ZSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERyYWdnYWJsZTtcbiAgICB9KGJhc2VfMS5CYXNlKSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Db21wbGV4KHt9LCBQb3NpdGlvbilcbiAgICBdLCBEcmFnZ2FibGUucHJvdG90eXBlLCBcImN1cnNvckF0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwiY2xvbmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KClcbiAgICBdLCBEcmFnZ2FibGUucHJvdG90eXBlLCBcImRyYWdBcmVhXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5FdmVudCgpXG4gICAgXSwgRHJhZ2dhYmxlLnByb3RvdHlwZSwgXCJkcmFnXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5FdmVudCgpXG4gICAgXSwgRHJhZ2dhYmxlLnByb3RvdHlwZSwgXCJkcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBEcmFnZ2FibGUucHJvdG90eXBlLCBcImRyYWdTdG9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwiZGlzdGFuY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KClcbiAgICBdLCBEcmFnZ2FibGUucHJvdG90eXBlLCBcImhhbmRsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwiYWJvcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KClcbiAgICBdLCBEcmFnZ2FibGUucHJvdG90eXBlLCBcImhlbHBlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoJ2RlZmF1bHQnKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwic2NvcGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwiZHJhZ1RhcmdldFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwiYXhpc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwicXVlcnlQb3NpdGlvbkluZm9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwiZW5hYmxlVGFpbE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERyYWdnYWJsZS5wcm90b3R5cGUsIFwic2tpcERpc3RhbmNlQ2hlY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KHRydWUpXG4gICAgXSwgRHJhZ2dhYmxlLnByb3RvdHlwZSwgXCJwcmV2ZW50RGVmYXVsdFwiLCB2b2lkIDApO1xuICAgIERyYWdnYWJsZSA9IERyYWdnYWJsZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBEcmFnZ2FibGUpO1xuICAgIGV4cG9ydHMuRHJhZ2dhYmxlID0gRHJhZ2dhYmxlO1xuICAgIHZhciBEcmFnZ2FibGVfMTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZHJhZ2dhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYmFzZVwiLCBcIi4vYnJvd3NlclwiLCBcIi4vZG9tXCIsIFwiLi9ub3RpZnktcHJvcGVydHktY2hhbmdlXCIsIFwiLi9ldmVudC1oYW5kbGVyXCIsIFwiLi91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgYmFzZV8xLCBicm93c2VyXzEsIGRvbV8xLCBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEsIGV2ZW50X2hhbmRsZXJfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEcm9wcGFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRHJvcHBhYmxlLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEcm9wcGFibGUoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLm1vdXNlT3ZlciA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuZHJhZ0RhdGEgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLmRyYWdTdG9wQ2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5iaW5kKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRHJvcHBhYmxlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BwYWJsZS5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5pbnREcm9wLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcHBhYmxlLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BwYWJsZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZHJvcHBhYmxlJztcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcHBhYmxlLnByb3RvdHlwZS5pbnRPdmVyID0gZnVuY3Rpb24gKGV2ZW50LCBlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubW91c2VPdmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdvdmVyJywgeyBldmVudDogZXZlbnQsIHRhcmdldDogZWxlbWVudCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlT3ZlciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERyb3BwYWJsZS5wcm90b3R5cGUuaW50T3V0ID0gZnVuY3Rpb24gKGV2ZW50LCBlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZU92ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ291dCcsIHsgZXZ0OiBldmVudCwgdGFyZ2V0OiBlbGVtZW50IH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubW91c2VPdmVyID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERyb3BwYWJsZS5wcm90b3R5cGUuaW50RHJvcCA9IGZ1bmN0aW9uIChldnQsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kcmFnU3RvcENhbGxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3BDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhY2NlcHQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGRyYWcgPSB0aGlzLmRyYWdEYXRhW3RoaXMuc2NvcGVdO1xuICAgICAgICAgICAgdmFyIGlzRHJhZyA9IGRyYWcgPyAoZHJhZy5oZWxwZXIgJiYgZG9tXzEuaXNWaXNpYmxlKGRyYWcuaGVscGVyKSkgOiBmYWxzZTtcbiAgICAgICAgICAgIHZhciBhcmVhO1xuICAgICAgICAgICAgaWYgKGlzRHJhZykge1xuICAgICAgICAgICAgICAgIGFyZWEgPSB0aGlzLmlzRHJvcEFyZWEoZXZ0LCBkcmFnLmhlbHBlciwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY2VwdCA9IGRvbV8xLm1hdGNoZXMoZHJhZy5oZWxwZXIsIHRoaXMuYWNjZXB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNEcmFnICYmIHRoaXMuZHJvcCAmJiBhcmVhLmNhbkRyb3AgJiYgYWNjZXB0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkcm9wJywgeyBldmVudDogZXZ0LCB0YXJnZXQ6IGFyZWEudGFyZ2V0LCBkcm9wcGVkRWxlbWVudDogZHJhZy5oZWxwZXIsIGRyYWdEYXRhOiBkcmFnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEcm9wcGFibGUucHJvdG90eXBlLmlzRHJvcEFyZWEgPSBmdW5jdGlvbiAoZXZ0LCBoZWxwZXIsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBhcmVhID0geyBjYW5Ecm9wOiB0cnVlLCB0YXJnZXQ6IGVsZW1lbnQgfHwgZXZ0LnRhcmdldCB9O1xuICAgICAgICAgICAgdmFyIGlzVG91Y2ggPSBldnQudHlwZSA9PT0gJ3RvdWNoZW5kJztcbiAgICAgICAgICAgIGlmIChpc1RvdWNoIHx8IGFyZWEudGFyZ2V0ID09PSBoZWxwZXIpIHtcbiAgICAgICAgICAgICAgICBoZWxwZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB2YXIgY29vcmQgPSBpc1RvdWNoID8gKGV2dC5jaGFuZ2VkVG91Y2hlc1swXSkgOiBldnQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoY29vcmQuY2xpZW50WCwgY29vcmQuY2xpZW50WSk7XG4gICAgICAgICAgICAgICAgYXJlYS5jYW5Ecm9wID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYXJlYS5jYW5Ecm9wID0gdXRpbF8xLmNvbXBhcmVFbGVtZW50UGFyZW50KGVsZSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoYXJlYS5jYW5Ecm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZWEudGFyZ2V0ID0gZWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWxwZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFyZWE7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BwYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5pbnREcm9wKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRHJvcHBhYmxlO1xuICAgIH0oYmFzZV8xLkJhc2UpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KClcbiAgICBdLCBEcm9wcGFibGUucHJvdG90eXBlLCBcImFjY2VwdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoJ2RlZmF1bHQnKVxuICAgIF0sIERyb3BwYWJsZS5wcm90b3R5cGUsIFwic2NvcGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBEcm9wcGFibGUucHJvdG90eXBlLCBcImRyb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBEcm9wcGFibGUucHJvdG90eXBlLCBcIm92ZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBEcm9wcGFibGUucHJvdG90eXBlLCBcIm91dFwiLCB2b2lkIDApO1xuICAgIERyb3BwYWJsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgRHJvcHBhYmxlKTtcbiAgICBleHBvcnRzLkRyb3BwYWJsZSA9IERyb3BwYWJsZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZHJvcHBhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm90aWZ5LXByb3BlcnR5LWNoYW5nZVwiLCBcIi4vYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMSwgYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBrZXlDb2RlID0ge1xuICAgICAgICAnYmFja3NwYWNlJzogOCxcbiAgICAgICAgJ3RhYic6IDksXG4gICAgICAgICdlbnRlcic6IDEzLFxuICAgICAgICAnc2hpZnQnOiAxNixcbiAgICAgICAgJ2NvbnRyb2wnOiAxNyxcbiAgICAgICAgJ2FsdCc6IDE4LFxuICAgICAgICAncGF1c2UnOiAxOSxcbiAgICAgICAgJ2NhcHNsb2NrJzogMjAsXG4gICAgICAgICdzcGFjZSc6IDMyLFxuICAgICAgICAnZXNjYXBlJzogMjcsXG4gICAgICAgICdwYWdldXAnOiAzMyxcbiAgICAgICAgJ3BhZ2Vkb3duJzogMzQsXG4gICAgICAgICdlbmQnOiAzNSxcbiAgICAgICAgJ2hvbWUnOiAzNixcbiAgICAgICAgJ2xlZnRhcnJvdyc6IDM3LFxuICAgICAgICAndXBhcnJvdyc6IDM4LFxuICAgICAgICAncmlnaHRhcnJvdyc6IDM5LFxuICAgICAgICAnZG93bmFycm93JzogNDAsXG4gICAgICAgICdpbnNlcnQnOiA0NSxcbiAgICAgICAgJ2RlbGV0ZSc6IDQ2LFxuICAgICAgICAnZjEnOiAxMTIsXG4gICAgICAgICdmMic6IDExMyxcbiAgICAgICAgJ2YzJzogMTE0LFxuICAgICAgICAnZjQnOiAxMTUsXG4gICAgICAgICdmNSc6IDExNixcbiAgICAgICAgJ2Y2JzogMTE3LFxuICAgICAgICAnZjcnOiAxMTgsXG4gICAgICAgICdmOCc6IDExOSxcbiAgICAgICAgJ2Y5JzogMTIwLFxuICAgICAgICAnZjEwJzogMTIxLFxuICAgICAgICAnZjExJzogMTIyLFxuICAgICAgICAnZjEyJzogMTIzLFxuICAgICAgICAnc2VtaWNvbG9uJzogMTg2LFxuICAgICAgICAncGx1cyc6IDE4NyxcbiAgICAgICAgJ2NvbW1hJzogMTg4LFxuICAgICAgICAnbWludXMnOiAxODksXG4gICAgICAgICdkb3QnOiAxOTAsXG4gICAgICAgICdmb3J3YXJkc2xhc2gnOiAxOTEsXG4gICAgICAgICdncmF2ZWFjY2VudCc6IDE5MixcbiAgICAgICAgJ29wZW5icmFja2V0JzogMjE5LFxuICAgICAgICAnYmFja3NsYXNoJzogMjIwLFxuICAgICAgICAnY2xvc2VicmFja2V0JzogMjIxLFxuICAgICAgICAnc2luZ2xlcXVvdGUnOiAyMjJcbiAgICB9O1xuICAgIHZhciBLZXlib2FyZEV2ZW50cyA9IEtleWJvYXJkRXZlbnRzXzEgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoS2V5Ym9hcmRFdmVudHMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEtleWJvYXJkRXZlbnRzKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBpc0FsdEtleSA9IGUuYWx0S2V5O1xuICAgICAgICAgICAgICAgIHZhciBpc0N0cmxLZXkgPSBlLmN0cmxLZXk7XG4gICAgICAgICAgICAgICAgdmFyIGlzU2hpZnRLZXkgPSBlLnNoaWZ0S2V5O1xuICAgICAgICAgICAgICAgIHZhciBjdXJrZXlDb2RlID0gZS53aGljaDtcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKF90aGlzLmtleUNvbmZpZ3MpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnQ29sbGVjdGlvbiA9IF90aGlzLmtleUNvbmZpZ3Nba2V5XS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGNvbmZpZ0NvbGxlY3Rpb25fMSA9IGNvbmZpZ0NvbGxlY3Rpb247IF9hIDwgY29uZmlnQ29sbGVjdGlvbl8xLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJjb25maWcgPSBjb25maWdDb2xsZWN0aW9uXzFbX2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJLZXlPYmogPSBLZXlib2FyZEV2ZW50c18xLmdldEtleUNvbmZpZ0RhdGEocmNvbmZpZy50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWx0S2V5ID09PSByS2V5T2JqLmFsdEtleSAmJiBpc0N0cmxLZXkgPT09IHJLZXlPYmouY3RybEtleSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2hpZnRLZXkgPT09IHJLZXlPYmouc2hpZnRLZXkgJiYgY3Vya2V5Q29kZSA9PT0gcktleU9iai5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hY3Rpb24gPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmtleUFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5rZXlBY3Rpb24oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmJpbmQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBLZXlib2FyZEV2ZW50cy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgS2V5Ym9hcmRFdmVudHMucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBLZXlib2FyZEV2ZW50cy5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBLZXlib2FyZEV2ZW50cy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAna2V5Ym9hcmQnO1xuICAgICAgICB9O1xuICAgICAgICBLZXlib2FyZEV2ZW50cy5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnROYW1lLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEtleWJvYXJkRXZlbnRzLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBLZXlib2FyZEV2ZW50cy5nZXRLZXlDb25maWdEYXRhID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZyBpbiB0aGlzLmNvbmZpZ0NhY2hlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnQ2FjaGVbY29uZmlnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBrZXlzID0gY29uZmlnLnRvTG93ZXJDYXNlKCkuc3BsaXQoJysnKTtcbiAgICAgICAgICAgIHZhciBrZXlEYXRhID0ge1xuICAgICAgICAgICAgICAgIGFsdEtleTogKGtleXMuaW5kZXhPZignYWx0JykgIT09IC0xID8gdHJ1ZSA6IGZhbHNlKSxcbiAgICAgICAgICAgICAgICBjdHJsS2V5OiAoa2V5cy5pbmRleE9mKCdjdHJsJykgIT09IC0xID8gdHJ1ZSA6IGZhbHNlKSxcbiAgICAgICAgICAgICAgICBzaGlmdEtleTogKGtleXMuaW5kZXhPZignc2hpZnQnKSAhPT0gLTEgPyB0cnVlIDogZmFsc2UpLFxuICAgICAgICAgICAgICAgIGtleUNvZGU6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoa2V5c1trZXlzLmxlbmd0aCAtIDFdLmxlbmd0aCA+IDEgJiYgISFOdW1iZXIoa2V5c1trZXlzLmxlbmd0aCAtIDFdKSkge1xuICAgICAgICAgICAgICAgIGtleURhdGEua2V5Q29kZSA9IE51bWJlcihrZXlzW2tleXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5RGF0YS5rZXlDb2RlID0gS2V5Ym9hcmRFdmVudHNfMS5nZXRLZXlDb2RlKGtleXNba2V5cy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBLZXlib2FyZEV2ZW50c18xLmNvbmZpZ0NhY2hlW2NvbmZpZ10gPSBrZXlEYXRhO1xuICAgICAgICAgICAgcmV0dXJuIGtleURhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEtleWJvYXJkRXZlbnRzLmdldEtleUNvZGUgPSBmdW5jdGlvbiAoa2V5VmFsKSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5Q29kZVtrZXlWYWxdIHx8IGtleVZhbC50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBLZXlib2FyZEV2ZW50cztcbiAgICB9KGJhc2VfMS5CYXNlKSk7XG4gICAgS2V5Ym9hcmRFdmVudHMuY29uZmlnQ2FjaGUgPSB7fTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KHt9KVxuICAgIF0sIEtleWJvYXJkRXZlbnRzLnByb3RvdHlwZSwgXCJrZXlDb25maWdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSgna2V5dXAnKVxuICAgIF0sIEtleWJvYXJkRXZlbnRzLnByb3RvdHlwZSwgXCJldmVudE5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBLZXlib2FyZEV2ZW50cy5wcm90b3R5cGUsIFwia2V5QWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgS2V5Ym9hcmRFdmVudHMgPSBLZXlib2FyZEV2ZW50c18xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBLZXlib2FyZEV2ZW50cyk7XG4gICAgZXhwb3J0cy5LZXlib2FyZEV2ZW50cyA9IEtleWJvYXJkRXZlbnRzO1xuICAgIHZhciBLZXlib2FyZEV2ZW50c18xO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9rZXlib2FyZC5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi91dGlsXCIsIFwiLi9pbnRlcm5hdGlvbmFsaXphdGlvblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgaW50ZXJuYXRpb25hbGl6YXRpb25fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTDEwbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEwxMG4oY29udHJvbE5hbWUsIGxvY2FsZVN0cmluZ3MsIGxvY2FsZSkge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sTmFtZSA9IGNvbnRyb2xOYW1lO1xuICAgICAgICAgICAgdGhpcy5sb2NhbGVTdHJpbmdzID0gbG9jYWxlU3RyaW5ncztcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxlKGxvY2FsZSB8fCBpbnRlcm5hdGlvbmFsaXphdGlvbl8xLmRlZmF1bHRDdWx0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBMMTBuLnByb3RvdHlwZS5zZXRMb2NhbGUgPSBmdW5jdGlvbiAobG9jYWxlKSB7XG4gICAgICAgICAgICB2YXIgaW50TG9jYWxlID0gdGhpcy5pbnRHZXRDb250cm9sQ29uc3RhbnQoTDEwbi5sb2NhbGUsIGxvY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhbGUgPSBpbnRMb2NhbGUgfHwgdGhpcy5sb2NhbGVTdHJpbmdzO1xuICAgICAgICB9O1xuICAgICAgICBMMTBuLmxvYWQgPSBmdW5jdGlvbiAobG9jYWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IHV0aWxfMS5leHRlbmQodGhpcy5sb2NhbGUsIGxvY2FsZU9iamVjdCwge30sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBMMTBuLnByb3RvdHlwZS5nZXRDb25zdGFudCA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50TG9jYWxlW3Byb3BdIHx8IHRoaXMubG9jYWxlU3RyaW5nc1twcm9wXSB8fCAnJztcbiAgICAgICAgfTtcbiAgICAgICAgTDEwbi5wcm90b3R5cGUuaW50R2V0Q29udHJvbENvbnN0YW50ID0gZnVuY3Rpb24gKGN1ck9iamVjdCwgbG9jYWxlKSB7XG4gICAgICAgICAgICBpZiAoY3VyT2JqZWN0W2xvY2FsZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyT2JqZWN0W2xvY2FsZV1bdGhpcy5jb250cm9sTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEwxMG47XG4gICAgfSgpKTtcbiAgICBMMTBuLmxvY2FsZSA9IHt9O1xuICAgIGV4cG9ydHMuTDEwbiA9IEwxMG47XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2wxMG4uanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3ZnUmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdmdSZW5kZXJlcihyb290SUQpIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnTGluayA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgICAgICAgICB0aGlzLnJvb3RJZCA9IHJvb3RJRDtcbiAgICAgICAgfVxuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZ2V0T3B0aW9uVmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucywga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uc1trZXldO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlU3ZnID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQob3B0aW9ucy5pZCkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmlkID0gdGhpcy5yb290SWQgKyAnX3N2Zyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN2Z09iaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuaWQpO1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLnN2Z0xpbmssICdzdmcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqID0gdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlcyhvcHRpb25zLCB0aGlzLnN2Z09iaik7XG4gICAgICAgICAgICB0aGlzLnNldFNWR1NpemUob3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuc2V0U1ZHU2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucm9vdElkKTtcbiAgICAgICAgICAgIHZhciBzaXplID0gIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChlbGVtZW50KSA/IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBudWxsO1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLndpZHRoKSB8fCB0aGlzLndpZHRoIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGggPyB3aWR0aC50b1N0cmluZygpIDogc2l6ZS53aWR0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0aGlzLndpZHRoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmhlaWdodCkgfHwgdGhpcy5oZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaGVpZ2h0ID8gaGVpZ2h0LnRvU3RyaW5nKCkgOiAnNDUwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHRoaXMuaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHBhdGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKTtcbiAgICAgICAgICAgIGlmIChwYXRoID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLnN2Z0xpbmssICdwYXRoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRoID0gdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlcyhvcHRpb25zLCBwYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZHJhd0xpbmUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKTtcbiAgICAgICAgICAgIGlmIChsaW5lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLnN2Z0xpbmssICdsaW5lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lID0gdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlcyhvcHRpb25zLCBsaW5lKTtcbiAgICAgICAgICAgIHJldHVybiBsaW5lO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZHJhd1JlY3RhbmdsZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcmVjdGFuZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5pZCk7XG4gICAgICAgICAgICBpZiAocmVjdGFuZ2xlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVjdGFuZ2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMuc3ZnTGluaywgJ3JlY3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY3RhbmdsZSA9IHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMob3B0aW9ucywgcmVjdGFuZ2xlKTtcbiAgICAgICAgICAgIHJldHVybiByZWN0YW5nbGU7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3Q2lyY2xlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjaXJjbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKTtcbiAgICAgICAgICAgIGlmIChjaXJjbGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAnY2lyY2xlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaXJjbGUgPSB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKG9wdGlvbnMsIGNpcmNsZSk7XG4gICAgICAgICAgICByZXR1cm4gY2lyY2xlO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BvbHlsaW5lID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBwb2x5bGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuaWQpO1xuICAgICAgICAgICAgaWYgKHBvbHlsaW5lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcG9seWxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAncG9seWxpbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvbHlsaW5lID0gdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlcyhvcHRpb25zLCBwb2x5bGluZSk7XG4gICAgICAgICAgICByZXR1cm4gcG9seWxpbmU7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3RWxsaXBzZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgZWxsaXBzZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuaWQpO1xuICAgICAgICAgICAgaWYgKGVsbGlwc2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbGxpcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMuc3ZnTGluaywgJ2VsbGlwc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsbGlwc2UgPSB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKG9wdGlvbnMsIGVsbGlwc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGVsbGlwc2U7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3UG9seWdvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcG9seWdvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuaWQpO1xuICAgICAgICAgICAgaWYgKHBvbHlnb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwb2x5Z29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMuc3ZnTGluaywgJ3BvbHlnb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvbHlnb24gPSB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKG9wdGlvbnMsIHBvbHlnb24pO1xuICAgICAgICAgICAgcmV0dXJuIHBvbHlnb247XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5kcmF3SW1hZ2UgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLnN2Z0xpbmssICdpbWFnZScpO1xuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZU5TKG51bGwsICdoZWlnaHQnLCBvcHRpb25zLmhlaWdodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnd2lkdGgnLCBvcHRpb25zLndpZHRoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ2hyZWYnLCBvcHRpb25zLmhyZWYpO1xuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZU5TKG51bGwsICd4Jywgb3B0aW9ucy54LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZU5TKG51bGwsICd5Jywgb3B0aW9ucy55LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZU5TKG51bGwsICdpZCcsIG9wdGlvbnMuaWQpO1xuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZU5TKG51bGwsICd2aXNpYmlsaXR5Jywgb3B0aW9ucy52aXNpYmlsaXR5KTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0aW9ucywgJ2NsaXAtcGF0aCcpKSkge1xuICAgICAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnY2xpcC1wYXRoJywgdGhpcy5nZXRPcHRpb25WYWx1ZShvcHRpb25zLCAnY2xpcC1wYXRoJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1dGlsXzEuaXNOdWxsT3JVbmRlZmluZWQob3B0aW9ucy5wcmVzZXJ2ZUFzcGVjdFJhdGlvKSkge1xuICAgICAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGVOUyhudWxsLCAncHJlc2VydmVBc3BlY3RSYXRpbycsIG9wdGlvbnMucHJlc2VydmVBc3BlY3RSYXRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW1nO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlVGV4dCA9IGZ1bmN0aW9uIChvcHRpb25zLCBsYWJlbCkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAndGV4dCcpO1xuICAgICAgICAgICAgdGV4dCA9IHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMob3B0aW9ucywgdGV4dCk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChsYWJlbCkpIHtcbiAgICAgICAgICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfTtcbiAgICAgICAgU3ZnUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZVRTcGFuID0gZnVuY3Rpb24gKG9wdGlvbnMsIGxhYmVsKSB7XG4gICAgICAgICAgICB2YXIgdFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAndHNwYW4nKTtcbiAgICAgICAgICAgIHRTcGFuID0gdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlcyhvcHRpb25zLCB0U3Bhbik7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChsYWJlbCkpIHtcbiAgICAgICAgICAgICAgICB0U3Bhbi50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRTcGFuO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlVGl0bGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMuc3ZnTGluaywgJ3RpdGxlJyk7XG4gICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVEZWZzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAnZGVmcycpO1xuICAgICAgICAgICAgcmV0dXJuIGRlZnM7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVDbGlwUGF0aCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgY2xpcFBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAnY2xpcFBhdGgnKTtcbiAgICAgICAgICAgIGNsaXBQYXRoID0gdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlcyhvcHRpb25zLCBjbGlwUGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gY2xpcFBhdGg7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVGb3JlaWduT2JqZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBmb3JlaWduT2JqZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMuc3ZnTGluaywgJ2ZvcmVpZ25PYmplY3QnKTtcbiAgICAgICAgICAgIGZvcmVpZ25PYmplY3QgPSB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKG9wdGlvbnMsIGZvcmVpZ25PYmplY3QpO1xuICAgICAgICAgICAgcmV0dXJuIGZvcmVpZ25PYmplY3Q7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVHcm91cCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCAnZycpO1xuICAgICAgICAgICAgZ3JvdXAgPSB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKG9wdGlvbnMsIGdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiBncm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgU3ZnUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZVBhdHRlcm4gPSBmdW5jdGlvbiAob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5zdmdMaW5rLCBlbGVtZW50KTtcbiAgICAgICAgICAgIHBhdHRlcm4gPSB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKG9wdGlvbnMsIHBhdHRlcm4pO1xuICAgICAgICAgICAgcmV0dXJuIHBhdHRlcm47XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVSYWRpYWxHcmFkaWVudCA9IGZ1bmN0aW9uIChjb2xvcnMsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjb2xvck5hbWU7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChjb2xvcnNbMF0uY29sb3JTdG9wKSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiB0aGlzLnJvb3RJZCArICdfJyArIG5hbWUgKyAncmFkaWFsR3JhZGllbnQnLFxuICAgICAgICAgICAgICAgICAgICAnY3gnOiBvcHRpb25zLmN4ICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICAnY3knOiBvcHRpb25zLmN5ICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICAncic6IG9wdGlvbnMuciArICclJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Z4Jzogb3B0aW9ucy5meCArICclJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Z5Jzogb3B0aW9ucy5meSArICclJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3R3JhZGllbnQoJ3JhZGlhbEdyYWRpZW50JywgbmV3T3B0aW9ucywgY29sb3JzKTtcbiAgICAgICAgICAgICAgICBjb2xvck5hbWUgPSAndXJsKCMnICsgdGhpcy5yb290SWQgKyAnXycgKyBuYW1lICsgJ3JhZGlhbEdyYWRpZW50KSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2xvck5hbWUgPSBjb2xvcnNbMF0uY29sb3IudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xvck5hbWU7XG4gICAgICAgIH07XG4gICAgICAgIFN2Z1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVMaW5lYXJHcmFkaWVudCA9IGZ1bmN0aW9uIChjb2xvcnMsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjb2xvck5hbWU7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChjb2xvcnNbMF0uY29sb3JTdG9wKSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiB0aGlzLnJvb3RJZCArICdfJyArIG5hbWUgKyAnbGluZWFyR3JhZGllbnQnLFxuICAgICAgICAgICAgICAgICAgICAneDEnOiBvcHRpb25zLngxICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICAneTEnOiBvcHRpb25zLnkxICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICAneDInOiBvcHRpb25zLngyICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICAneTInOiBvcHRpb25zLnkyICsgJyUnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdHcmFkaWVudCgnbGluZWFyR3JhZGllbnQnLCBuZXdPcHRpb25zLCBjb2xvcnMpO1xuICAgICAgICAgICAgICAgIGNvbG9yTmFtZSA9ICd1cmwoIycgKyB0aGlzLnJvb3RJZCArICdfJyArIG5hbWUgKyAnbGluZWFyR3JhZGllbnQpJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbG9yTmFtZSA9IGNvbG9yc1swXS5jb2xvci50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yTmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgU3ZnUmVuZGVyZXIucHJvdG90eXBlLmRyYXdHcmFkaWVudCA9IGZ1bmN0aW9uIChncmFkaWVudFR5cGUsIG9wdGlvbnMsIGNvbG9ycykge1xuICAgICAgICAgICAgdmFyIGRlZnMgPSB0aGlzLmNyZWF0ZURlZnMoKTtcbiAgICAgICAgICAgIHZhciBncmFkaWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0aGlzLnN2Z0xpbmssIGdyYWRpZW50VHlwZSk7XG4gICAgICAgICAgICBncmFkaWVudCA9IHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZXMob3B0aW9ucywgZ3JhZGllbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcF8xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMuc3ZnTGluaywgJ3N0b3AnKTtcbiAgICAgICAgICAgICAgICBzdG9wXzEuc2V0QXR0cmlidXRlKCdvZmZzZXQnLCBjb2xvcnNbaV0uY29sb3JTdG9wKTtcbiAgICAgICAgICAgICAgICBzdG9wXzEuc2V0QXR0cmlidXRlKCdzdG9wLWNvbG9yJywgY29sb3JzW2ldLmNvbG9yKTtcbiAgICAgICAgICAgICAgICBzdG9wXzEuc2V0QXR0cmlidXRlKCdzdG9wLW9wYWNpdHknLCAnMScpO1xuICAgICAgICAgICAgICAgIGdyYWRpZW50LmFwcGVuZENoaWxkKHN0b3BfMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZzLmFwcGVuZENoaWxkKGdyYWRpZW50KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZzO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZHJhd0NsaXBQYXRoID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBkZWZzID0gdGhpcy5jcmVhdGVEZWZzKCk7XG4gICAgICAgICAgICB2YXIgY2xpcFBhdGggPSB0aGlzLmNyZWF0ZUNsaXBQYXRoKHsgJ2lkJzogb3B0aW9ucy5pZCB9KTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5kcmF3UmVjdGFuZ2xlKG9wdGlvbnMpO1xuICAgICAgICAgICAgY2xpcFBhdGguYXBwZW5kQ2hpbGQocmVjdCk7XG4gICAgICAgICAgICBkZWZzLmFwcGVuZENoaWxkKGNsaXBQYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBkZWZzO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuZHJhd0NpcmN1bGFyQ2xpcFBhdGggPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGRlZnMgPSB0aGlzLmNyZWF0ZURlZnMoKTtcbiAgICAgICAgICAgIHZhciBjbGlwUGF0aCA9IHRoaXMuY3JlYXRlQ2xpcFBhdGgoeyAnaWQnOiBvcHRpb25zLmlkIH0pO1xuICAgICAgICAgICAgdmFyIGNpcmNsZSA9IHRoaXMuZHJhd0NpcmNsZShvcHRpb25zKTtcbiAgICAgICAgICAgIGNsaXBQYXRoLmFwcGVuZENoaWxkKGNpcmNsZSk7XG4gICAgICAgICAgICBkZWZzLmFwcGVuZENoaWxkKGNsaXBQYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBkZWZzO1xuICAgICAgICB9O1xuICAgICAgICBTdmdSZW5kZXJlci5wcm90b3R5cGUuc2V0RWxlbWVudEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleXNbaV0sIG9wdGlvbnNba2V5c1tpXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdmdSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3ZnUmVuZGVyZXIgPSBTdmdSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3ZnLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdXRpbFwiLCBcIi4vbm90aWZ5LXByb3BlcnR5LWNoYW5nZVwiLCBcIi4vYnJvd3NlclwiLCBcIi4vYmFzZVwiLCBcIi4vY2hpbGQtcHJvcGVydHlcIiwgXCIuL2V2ZW50LWhhbmRsZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB1dGlsXzEsIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMSwgYnJvd3Nlcl8xLCBiYXNlXzEsIGNoaWxkX3Byb3BlcnR5XzEsIGV2ZW50X2hhbmRsZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3dpcGVTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTd2lwZVNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTd2lwZVNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTd2lwZVNldHRpbmdzO1xuICAgIH0oY2hpbGRfcHJvcGVydHlfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Qcm9wZXJ0eSg1MClcbiAgICBdLCBTd2lwZVNldHRpbmdzLnByb3RvdHlwZSwgXCJzd2lwZVRocmVzaG9sZERpc3RhbmNlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Td2lwZVNldHRpbmdzID0gU3dpcGVTZXR0aW5ncztcbiAgICB2YXIgc3dpcGVSZWdleCA9IC8oVXB8RG93bikvO1xuICAgIHZhciBUb3VjaCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUb3VjaCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVG91Y2goZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnN0YXJ0RXZlbnQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gKGV2dC5jaGFuZ2VkVG91Y2hlcyA/IGV2dC5jaGFuZ2VkVG91Y2hlc1swXSA6IGV2dCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuaXNUb3VjaE1vdmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMubW92ZWREaXJlY3Rpb24gPSAnJztcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFBvaW50ID0gX3RoaXMubGFzdE1vdmVkUG9pbnQgPSB7IGNsaWVudFg6IHBvaW50LmNsaWVudFgsIGNsaWVudFk6IHBvaW50LmNsaWVudFkgfTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydEV2ZW50RGF0YSA9IHBvaW50O1xuICAgICAgICAgICAgICAgIF90aGlzLmhTY3JvbGxMb2NrZWQgPSBfdGhpcy52U2Nyb2xsTG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMudFN0YW1wU3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIF90aGlzLnRpbWVPdXRUYXBIb2xkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IF90aGlzLnRhcEhvbGRFdmVudChldnQpOyB9LCBfdGhpcy50YXBIb2xkVGhyZXNob2xkKTtcbiAgICAgICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLmFkZChfdGhpcy5lbGVtZW50LCBicm93c2VyXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgX3RoaXMubW92ZUV2ZW50LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5hZGQoX3RoaXMuZWxlbWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgX3RoaXMuZW5kRXZlbnQsIF90aGlzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5tb3ZlRXZlbnQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gZXZ0LmNoYW5nZWRUb3VjaGVzID8gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdIDogZXZ0O1xuICAgICAgICAgICAgICAgIF90aGlzLm1vdmVkUG9pbnQgPSBwb2ludDtcbiAgICAgICAgICAgICAgICBfdGhpcy5pc1RvdWNoTW92ZWQgPSAhKHBvaW50LmNsaWVudFggPT09IF90aGlzLnN0YXJ0UG9pbnQuY2xpZW50WCAmJiBwb2ludC5jbGllbnRZID09PSBfdGhpcy5zdGFydFBvaW50LmNsaWVudFkpO1xuICAgICAgICAgICAgICAgIHZhciBlU2Nyb2xsQXJncyA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1RvdWNoTW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVPdXRUYXBIb2xkKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FsY1Njcm9sbFBvaW50cyhldnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsQXJnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRFdmVudHM6IF90aGlzLnN0YXJ0RXZlbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0LCBzdGFydFg6IF90aGlzLnN0YXJ0UG9pbnQuY2xpZW50WCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0WTogX3RoaXMuc3RhcnRQb2ludC5jbGllbnRZLCBkaXN0YW5jZVg6IF90aGlzLmRpc3RhbmNlWCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlWTogX3RoaXMuZGlzdGFuY2VZLCBzY3JvbGxEaXJlY3Rpb246IF90aGlzLnNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5OiBfdGhpcy5nZXRWZWxvY2l0eShwb2ludClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZVNjcm9sbEFyZ3MgPSB1dGlsXzEuZXh0ZW5kKGVTY3JvbGxBcmdzLCB7fSwgc2Nyb2xsQXJnKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignc2Nyb2xsJywgZVNjcm9sbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXN0TW92ZWRQb2ludCA9IHsgY2xpZW50WDogcG9pbnQuY2xpZW50WCwgY2xpZW50WTogcG9pbnQuY2xpZW50WSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5lbmRFdmVudCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZU91dFRhcEhvbGQpO1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IGV2dDtcbiAgICAgICAgICAgICAgICBpZiAoZXZ0LmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5pc1RvdWNoTW92ZWQgPSAhKHBvaW50LmNsaWVudFggPT09IF90aGlzLnN0YXJ0UG9pbnQuY2xpZW50WCAmJiBwb2ludC5jbGllbnRZID09PSBfdGhpcy5zdGFydFBvaW50LmNsaWVudFkpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVuZFBvaW50ID0gcG9pbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGRibFRhcFRyaWdncmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGVEYmxUYXBBcmdzO1xuICAgICAgICAgICAgICAgIHZhciBlVGFwQXJncztcbiAgICAgICAgICAgICAgICB2YXIgZVN3aXBlQXJncztcbiAgICAgICAgICAgICAgICB2YXIgdERpc3RhbmNlID0gX3RoaXMuc3dpcGVTZXR0aW5ncy5zd2lwZVRocmVzaG9sZERpc3RhbmNlO1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbGNQb2ludHMoZXZ0KTtcbiAgICAgICAgICAgICAgICB2YXIgc3dpcGVBcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RXZlbnRzOiBfdGhpcy5zdGFydEV2ZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYOiBfdGhpcy5zdGFydFBvaW50LmNsaWVudFgsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WTogX3RoaXMuc3RhcnRQb2ludC5jbGllbnRZLFxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVg6IF90aGlzLmRpc3RhbmNlWCwgZGlzdGFuY2VZOiBfdGhpcy5kaXN0YW5jZVksIHN3aXBlRGlyZWN0aW9uOiBfdGhpcy5tb3ZlZERpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdmVsb2NpdHk6IF90aGlzLmdldFZlbG9jaXR5KHBvaW50KVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc1RvdWNoTW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZURibFRhcEFyZ3MgPSB1dGlsXzEuZXh0ZW5kKGVEYmxUYXBBcmdzLCBfdGhpcy5kZWZhdWx0QXJncywge30pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5pc051bGxPclVuZGVmaW5lZChfdGhpcy5sYXN0VGFwVGltZSkgJiYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gX3RoaXMubGFzdFRhcFRpbWUpIDwgX3RoaXMuZG91YmxlVGFwVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZU91dFRhcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYmxUYXBUcmlnZ3JlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdkb3VibGVUYXAnLCBlRGJsVGFwQXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYmxUYXBUcmlnZ3JlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZVRhcEFyZ3MgPSB1dGlsXzEuZXh0ZW5kKGVUYXBBcmdzLCBfdGhpcy5kZWZhdWx0QXJncywge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudGltZU91dFRhcCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ3RhcCcsIGVUYXBBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICh0eXBlb2YgX3RoaXMuZG91YmxlVGFwICE9PSAnZnVuY3Rpb24nID8gMCA6IF90aGlzLmRvdWJsZVRhcFRocmVzaG9sZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlU3dpcGVBcmdzID0gdXRpbF8xLmV4dGVuZChlU3dpcGVBcmdzLCBfdGhpcy5kZWZhdWx0QXJncywgc3dpcGVBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhblRyaWdnZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxCb29sID0gX3RoaXMuaXNTY3JvbGxhYmxlKGVsZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlZCA9IHN3aXBlUmVnZXgudGVzdChfdGhpcy5tb3ZlZERpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodERpc3RhbmNlIDwgX3RoaXMuZGlzdGFuY2VYICYmICFtb3ZlZCkgfHwgKHREaXN0YW5jZSA8IF90aGlzLmRpc3RhbmNlWSAmJiBtb3ZlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2Nyb2xsQm9vbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblRyaWdnZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuVHJpZ2dlciA9IF90aGlzLmNoZWNrU3dpcGUoZWxlLCBtb3ZlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhblRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ3N3aXBlJywgZVN3aXBlQXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMubGFzdFRhcFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShfdGhpcy5lbGVtZW50LCBicm93c2VyXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgX3RoaXMubW92ZUV2ZW50KTtcbiAgICAgICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShfdGhpcy5lbGVtZW50LCBicm93c2VyXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCBfdGhpcy5lbmRFdmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMuYmluZCgpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFRvdWNoLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgIH07XG4gICAgICAgIFRvdWNoLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoYnJvd3Nlcl8xLkJyb3dzZXIuaXNJRSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWJsb2NrLXRvdWNoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvdWNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb3VjaC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgYnJvd3Nlcl8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnN0YXJ0RXZlbnQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb3VjaC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnRfaGFuZGxlcl8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCBicm93c2VyXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMuc3RhcnRFdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvdWNoLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0b3VjaCc7XG4gICAgICAgIH07XG4gICAgICAgIFRvdWNoLnByb3RvdHlwZS5pc1Njcm9sbGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGVsZVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGVsZVN0eWxlLm92ZXJmbG93ICsgZWxlU3R5bGUub3ZlcmZsb3dYICsgZWxlU3R5bGUub3ZlcmZsb3dZO1xuICAgICAgICAgICAgaWYgKCgvKGF1dG98c2Nyb2xsKS8pLnRlc3Qoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRvdWNoLnByb3RvdHlwZS50YXBIb2xkRXZlbnQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICB2YXIgZVRhcEFyZ3M7XG4gICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLm1vdmVFdmVudCk7XG4gICAgICAgICAgICBldmVudF9oYW5kbGVyXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIGJyb3dzZXJfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMuZW5kRXZlbnQpO1xuICAgICAgICAgICAgZVRhcEFyZ3MgPSB7IG9yaWdpbmFsRXZlbnQ6IGV2dCB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd0YXBIb2xkJywgZVRhcEFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBUb3VjaC5wcm90b3R5cGUuY2FsY1BvaW50cyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IGV2dC5jaGFuZ2VkVG91Y2hlcyA/IGV2dC5jaGFuZ2VkVG91Y2hlc1swXSA6IGV2dDtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEFyZ3MgPSB7IG9yaWdpbmFsRXZlbnQ6IGV2dCB9O1xuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZVggPSBNYXRoLmFicygoTWF0aC5hYnMocG9pbnQuY2xpZW50WCkgLSBNYXRoLmFicyh0aGlzLnN0YXJ0UG9pbnQuY2xpZW50WCkpKTtcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VZID0gTWF0aC5hYnMoKE1hdGguYWJzKHBvaW50LmNsaWVudFkpIC0gTWF0aC5hYnModGhpcy5zdGFydFBvaW50LmNsaWVudFkpKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXN0YW5jZVggPiB0aGlzLmRpc3RhbmNlWSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZWREaXJlY3Rpb24gPSAocG9pbnQuY2xpZW50WCA+IHRoaXMuc3RhcnRQb2ludC5jbGllbnRYKSA/ICdSaWdodCcgOiAnTGVmdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVkRGlyZWN0aW9uID0gKHBvaW50LmNsaWVudFkgPCB0aGlzLnN0YXJ0UG9pbnQuY2xpZW50WSkgPyAnVXAnIDogJ0Rvd24nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb3VjaC5wcm90b3R5cGUuY2FsY1Njcm9sbFBvaW50cyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IGV2dC5jaGFuZ2VkVG91Y2hlcyA/IGV2dC5jaGFuZ2VkVG91Y2hlc1swXSA6IGV2dDtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEFyZ3MgPSB7IG9yaWdpbmFsRXZlbnQ6IGV2dCB9O1xuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZVggPSBNYXRoLmFicygoTWF0aC5hYnMocG9pbnQuY2xpZW50WCkgLSBNYXRoLmFicyh0aGlzLmxhc3RNb3ZlZFBvaW50LmNsaWVudFgpKSk7XG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlWSA9IE1hdGguYWJzKChNYXRoLmFicyhwb2ludC5jbGllbnRZKSAtIE1hdGguYWJzKHRoaXMubGFzdE1vdmVkUG9pbnQuY2xpZW50WSkpKTtcbiAgICAgICAgICAgIGlmICgodGhpcy5kaXN0YW5jZVggPiB0aGlzLmRpc3RhbmNlWSB8fCB0aGlzLmhTY3JvbGxMb2NrZWQgPT09IHRydWUpICYmIHRoaXMudlNjcm9sbExvY2tlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbERpcmVjdGlvbiA9IChwb2ludC5jbGllbnRYID4gdGhpcy5sYXN0TW92ZWRQb2ludC5jbGllbnRYKSA/ICdSaWdodCcgOiAnTGVmdCc7XG4gICAgICAgICAgICAgICAgdGhpcy5oU2Nyb2xsTG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsRGlyZWN0aW9uID0gKHBvaW50LmNsaWVudFkgPCB0aGlzLmxhc3RNb3ZlZFBvaW50LmNsaWVudFkpID8gJ1VwJyA6ICdEb3duJztcbiAgICAgICAgICAgICAgICB0aGlzLnZTY3JvbGxMb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb3VjaC5wcm90b3R5cGUuZ2V0VmVsb2NpdHkgPSBmdW5jdGlvbiAocG50KSB7XG4gICAgICAgICAgICB2YXIgbmV3WCA9IHBudC5jbGllbnRYO1xuICAgICAgICAgICAgdmFyIG5ld1kgPSBwbnQuY2xpZW50WTtcbiAgICAgICAgICAgIHZhciBuZXdUID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHZhciB4RGlzdCA9IG5ld1ggLSB0aGlzLnN0YXJ0UG9pbnQuY2xpZW50WDtcbiAgICAgICAgICAgIHZhciB5RGlzdCA9IG5ld1kgLSB0aGlzLnN0YXJ0UG9pbnQuY2xpZW50WDtcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IG5ld1QgLSB0aGlzLnRTdGFtcFN0YXJ0O1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4RGlzdCAqIHhEaXN0ICsgeURpc3QgKiB5RGlzdCkgLyBpbnRlcnZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgVG91Y2gucHJvdG90eXBlLmNoZWNrU3dpcGUgPSBmdW5jdGlvbiAoZWxlLCBmbGFnKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IFsnc2Nyb2xsJywgJ29mZnNldCddO1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBmbGFnID8gWydIZWlnaHQnLCAnVG9wJ10gOiBbJ1dpZHRoJywgJ0xlZnQnXTtcbiAgICAgICAgICAgIGlmICgoZWxlW2tleXNbMF0gKyB0ZW1wWzBdXSA8PSBlbGVba2V5c1sxXSArIHRlbXBbMF1dKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChlbGVba2V5c1swXSArIHRlbXBbMV1dID09PSAwKSB8fFxuICAgICAgICAgICAgICAgIChlbGVba2V5c1sxXSArIHRlbXBbMF1dICsgZWxlW2tleXNbMF0gKyB0ZW1wWzFdXSA+PSBlbGVba2V5c1swXSArIHRlbXBbMF1dKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvdWNoO1xuICAgIH0oYmFzZV8xLkJhc2UpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLkV2ZW50KClcbiAgICBdLCBUb3VjaC5wcm90b3R5cGUsIFwidGFwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5FdmVudCgpXG4gICAgXSwgVG91Y2gucHJvdG90eXBlLCBcImRvdWJsZVRhcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuRXZlbnQoKVxuICAgIF0sIFRvdWNoLnByb3RvdHlwZSwgXCJ0YXBIb2xkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5FdmVudCgpXG4gICAgXSwgVG91Y2gucHJvdG90eXBlLCBcInN3aXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5FdmVudCgpXG4gICAgXSwgVG91Y2gucHJvdG90eXBlLCBcInNjcm9sbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuUHJvcGVydHkoNTAwKVxuICAgIF0sIFRvdWNoLnByb3RvdHlwZSwgXCJkb3VibGVUYXBUaHJlc2hvbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgbm90aWZ5X3Byb3BlcnR5X2NoYW5nZV8xLlByb3BlcnR5KDc1MClcbiAgICBdLCBUb3VjaC5wcm90b3R5cGUsIFwidGFwSG9sZFRocmVzaG9sZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBub3RpZnlfcHJvcGVydHlfY2hhbmdlXzEuQ29tcGxleCh7fSwgU3dpcGVTZXR0aW5ncylcbiAgICBdLCBUb3VjaC5wcm90b3R5cGUsIFwic3dpcGVTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIFRvdWNoID0gX19kZWNvcmF0ZShbXG4gICAgICAgIG5vdGlmeV9wcm9wZXJ0eV9jaGFuZ2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBUb3VjaCk7XG4gICAgZXhwb3J0cy5Ub3VjaCA9IFRvdWNoO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy90b3VjaC5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi90ZW1wbGF0ZVwiLCBcIi4vZG9tXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdGVtcGxhdGVfMSwgZG9tXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhBU19ST1cgPSAvXltcXG5cXHIuXStcXDx0cnxeXFw8dHIvO1xuICAgIGZ1bmN0aW9uIGNvbXBpbGUodGVtcGxhdGVTdHJpbmcsIGhlbHBlcikge1xuICAgICAgICB2YXIgY29tcGlsZXIgPSBlbmdpbmVPYmouY29tcGlsZSh0ZW1wbGF0ZVN0cmluZywgaGVscGVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQsIHByb3BOYW1lKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29tcGlsZXIoZGF0YSwgY29tcG9uZW50LCBwcm9wTmFtZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gZG9tXzEuY3JlYXRlRWxlbWVudCgoSEFTX1JPVy50ZXN0KHJlc3VsdCkgPyAndGFibGUnIDogJ2RpdicpLCB7IGlubmVySFRNTDogcmVzdWx0IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGUuY2hpbGROb2RlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGV4cG9ydHMuY29tcGlsZSA9IGNvbXBpbGU7XG4gICAgZnVuY3Rpb24gc2V0VGVtcGxhdGVFbmdpbmUoY2xhc3NPYmopIHtcbiAgICAgICAgZW5naW5lT2JqLmNvbXBpbGUgPSBjbGFzc09iai5jb21waWxlO1xuICAgIH1cbiAgICBleHBvcnRzLnNldFRlbXBsYXRlRW5naW5lID0gc2V0VGVtcGxhdGVFbmdpbmU7XG4gICAgZnVuY3Rpb24gZ2V0VGVtcGxhdGVFbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiBlbmdpbmVPYmouY29tcGlsZTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRUZW1wbGF0ZUVuZ2luZSA9IGdldFRlbXBsYXRlRW5naW5lO1xuICAgIHZhciBFbmdpbmUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFbmdpbmUoKSB7XG4gICAgICAgIH1cbiAgICAgICAgRW5naW5lLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKHRlbXBsYXRlU3RyaW5nLCBoZWxwZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWxwZXIgPT09IHZvaWQgMCkgeyBoZWxwZXIgPSB7fTsgfVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlXzEuY29tcGlsZSh0ZW1wbGF0ZVN0cmluZywgaGVscGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVuZ2luZTtcbiAgICB9KCkpO1xuICAgIHZhciBlbmdpbmVPYmogPSB7IGNvbXBpbGU6IG5ldyBFbmdpbmUoKS5jb21waWxlIH07XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3RlbXBsYXRlLWVuZ2luZS5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTElORVMgPSBuZXcgUmVnRXhwKCdcXFxcbnxcXFxccnxcXFxcc1xcXFxzKycsICdnJyk7XG4gICAgdmFyIFFVT1RFUyA9IG5ldyBSZWdFeHAoLyd8XCIvZyk7XG4gICAgdmFyIElGX1NUTVQgPSBuZXcgUmVnRXhwKCdpZiA/XFxcXCgnKTtcbiAgICB2YXIgRUxTRV9TVE1UID0gbmV3IFJlZ0V4cCgnZWxzZScpO1xuICAgIHZhciBGT1JfU1RNVCA9IG5ldyBSZWdFeHAoJ2ZvciA/XFxcXCgnKTtcbiAgICB2YXIgSUZfT1JfRk9SID0gbmV3IFJlZ0V4cCgnKFxcL2lmfFxcL2ZvciknKTtcbiAgICB2YXIgQ0FMTF9GVU5DVElPTiA9IG5ldyBSZWdFeHAoJ1xcXFwoKC4qKVxcXFwpJywgJycpO1xuICAgIHZhciBOT1RfTlVNQkVSID0gbmV3IFJlZ0V4cCgnXlswLTldKyQnLCAnZycpO1xuICAgIHZhciBXT1JEID0gbmV3IFJlZ0V4cCgnW1xcXFx3XCJcXCcuXFxcXHMrXSsnLCAnZycpO1xuICAgIHZhciBEQkxfUVVPVEVEX1NUUiA9IG5ldyBSZWdFeHAoJ1wiKC4qPylcIicsICdnJyk7XG4gICAgdmFyIGV4cCA9IG5ldyBSZWdFeHAoJ1xcXFwkeyhbXn1dKil9JywgJ2cnKTtcbiAgICBmdW5jdGlvbiBleHByZXNzaW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgZXhwID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cDtcbiAgICB9XG4gICAgZXhwb3J0cy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICBmdW5jdGlvbiBjb21waWxlKHRlbXBsYXRlLCBoZWxwZXIpIHtcbiAgICAgICAgdmFyIGFyZ05hbWUgPSAnZGF0YSc7XG4gICAgICAgIHZhciBldmFsRXhwUmVzdWx0ID0gZXZhbEV4cCh0ZW1wbGF0ZSwgYXJnTmFtZSwgaGVscGVyKTtcbiAgICAgICAgdmFyIGZuQ29kZSA9IFwidmFyIHN0cj1cXFwiXCIgKyBldmFsRXhwUmVzdWx0ICsgXCJcXFwiOyByZXR1cm4gc3RyO1wiO1xuICAgICAgICB2YXIgZm4gPSBuZXcgRnVuY3Rpb24oYXJnTmFtZSwgZm5Db2RlKTtcbiAgICAgICAgcmV0dXJuIGZuLmJpbmQoaGVscGVyKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jb21waWxlID0gY29tcGlsZTtcbiAgICBmdW5jdGlvbiBldmFsRXhwKHN0ciwgbmFtZVNwYWNlLCBoZWxwZXIpIHtcbiAgICAgICAgdmFyIGxvY2FsS2V5cyA9IFtdO1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoTElORVMsICcnKS5yZXBsYWNlKERCTF9RVU9URURfU1RSLCAnXFwnJDFcXCcnKS5yZXBsYWNlKGV4cCwgZnVuY3Rpb24gKG1hdGNoLCBjbnQsIG9mZnNldCwgbWF0Y2hTdHIpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gY250Lm1hdGNoKENBTExfRlVOQ1RJT04pO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmxTdHIgPSBtYXRjaGVzWzFdO1xuICAgICAgICAgICAgICAgIGlmIChJRl9TVE1ULnRlc3QoY250KSkge1xuICAgICAgICAgICAgICAgICAgICBjbnQgPSAnXCI7ICcgKyBjbnQucmVwbGFjZShtYXRjaGVzWzFdLCBybFN0ci5yZXBsYWNlKFdPUkQsIGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkTmFtZVNwYWNlKHN0ciwgIShRVU9URVMudGVzdChzdHIpKSAmJiAobG9jYWxLZXlzLmluZGV4T2Yoc3RyKSA9PT0gLTEpLCBuYW1lU3BhY2UsIGxvY2FsS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKSArICd7IFxcbiBzdHIgPSBzdHIgKyBcIic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKEZPUl9TVE1ULnRlc3QoY250KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmxTdHJfMSA9IG1hdGNoZXNbMV0uc3BsaXQoJyBvZiAnKTtcbiAgICAgICAgICAgICAgICAgICAgY250ID0gJ1wiOyAnICsgY250LnJlcGxhY2UobWF0Y2hlc1sxXSwgZnVuY3Rpb24gKG10Yykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxLZXlzLnB1c2gocmxTdHJfMVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbEtleXMucHVzaChybFN0cl8xWzBdICsgJ0luZGV4Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhciBpPTA7IGkgPCAnICsgYWRkTmFtZVNwYWNlKHJsU3RyXzFbMV0sIHRydWUsIG5hbWVTcGFjZSwgbG9jYWxLZXlzKSArICcubGVuZ3RoOyBpKysnO1xuICAgICAgICAgICAgICAgICAgICB9KSArICd7IFxcbiAnICsgcmxTdHJfMVswXSArICc9ICcgKyBhZGROYW1lU3BhY2UocmxTdHJfMVsxXSwgdHJ1ZSwgbmFtZVNwYWNlLCBsb2NhbEtleXMpXG4gICAgICAgICAgICAgICAgICAgICAgICArICdbaV07IFxcbiB2YXIgJyArIHJsU3RyXzFbMF0gKyAnSW5kZXg9aTsgXFxuIHN0ciA9IHN0ciArIFwiJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmblN0ciA9IGNudC5zcGxpdCgnKCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZk5hbWVTcGFjZSA9IChoZWxwZXIgJiYgaGVscGVyLmhhc093blByb3BlcnR5KGZuU3RyWzBdKSA/ICd0aGlzLicgOiAnZ2xvYmFsJyk7XG4gICAgICAgICAgICAgICAgICAgIGZOYW1lU3BhY2UgPSAoL1xcLi8udGVzdChmblN0clswXSkgPyAnJyA6IGZOYW1lU3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICBjbnQgPSAnXCIgKyAnICsgKGZOYW1lU3BhY2UgPT09ICdnbG9iYWwnID8gJycgOiBmTmFtZVNwYWNlKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBjbnQucmVwbGFjZShybFN0ciwgYWRkTmFtZVNwYWNlKG1hdGNoZXNbMV0ucmVwbGFjZSgnLCcsIG5hbWVTcGFjZSArICcuJyksIChmTmFtZVNwYWNlID09PSAnZ2xvYmFsJyA/IGZhbHNlIDogdHJ1ZSksIG5hbWVTcGFjZSwgbG9jYWxLZXlzKSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJytcIic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoRUxTRV9TVE1ULnRlc3QoY250KSkge1xuICAgICAgICAgICAgICAgIGNudCA9ICdcIjsgJyArIGNudC5yZXBsYWNlKEVMU0VfU1RNVCwgJ30gZWxzZSB7IFxcbiBzdHIgPSBzdHIgKyBcIicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoISFjbnQubWF0Y2goSUZfT1JfRk9SKSkge1xuICAgICAgICAgICAgICAgIGNudCA9IGNudC5yZXBsYWNlKElGX09SX0ZPUiwgJ1wiOyBcXG4gfSBcXG4gc3RyID0gc3RyICsgXCInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNudCA9ICdcIisnICsgYWRkTmFtZVNwYWNlKGNudCwgKGxvY2FsS2V5cy5pbmRleE9mKGNudCkgPT09IC0xKSwgbmFtZVNwYWNlLCBsb2NhbEtleXMpICsgJytcIic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY250O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkTmFtZVNwYWNlKHN0ciwgYWRkTlMsIG5hbWVTcGFjZSwgaWdub3JlTGlzdCkge1xuICAgICAgICByZXR1cm4gKChhZGROUyAmJiAhKE5PVF9OVU1CRVIudGVzdChzdHIpKSAmJiBpZ25vcmVMaXN0LmluZGV4T2Yoc3RyLnNwbGl0KCcuJylbMF0pID09PSAtMSkgPyBuYW1lU3BhY2UgKyAnLicgKyBzdHIgOiBzdHIpO1xuICAgIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdGVtcGxhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="]}