/*!
*  filename: ej2-inputs.umd.min.js.map
*  version : 1.0.22
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-inputs.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","index_4","__export","hasOwnProperty","Object","defineProperty","value","apply","numerictextbox_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","input_1","SPINICON","INTREGEXP","RegExp","NumericTextBox","_super","options","element","_this","isPrevFocused","decimalSeparator","intRegExp","isCalled","preRender","ejInstance","getValue","cloneElement","cloneNode","angularTagName","tagName","input","createElement","index","attributes","setAttribute","nodeName","nodeValue","innerHTML","parentNode","appendChild","removeChild","setValue","role","tabindex","autocomplete","aria-live","localeText","incrementTitle","decrementTitle","placeholder","l10n","L10n","locale","isValidState","inputStyle","inputName","cultureInfo","initCultureInfo","initCultureFunc","checkAttributes","prevValue","validateMinMax","validateStep","updatePlaceholder","render","toLowerCase","createWrapper","showSpinButton","spinBtnCreation","isNullOrUndefined","width","setStyleAttribute","container","formatUnit","changeValue","wireEvents","isNaN","decimals","setProperties","roundNumber","_i","attributes_1","prop","getAttribute","enabled","readonly","instance","getNumberParser","format","getConstant","Internationalization","currency","inputObj","Input","createInput","customTag","floatLabelType","properties","cssClass","enableRtl","addClass","aria-readonly","hiddenInput","attrs","type","removeAttribute","name","insertBefore","style","spinDown","appendSpan","title","aria-label","spinUp","wireSpinBtnEvents","min","Number","max","MAX_VALUE","formattedValue","aria-valuemin","toString","aria-valuemax","getNumberFormat","maximumFractionDigits","minimumFractionDigits","useGrouping","step","action","operation","isFocused","performAction","raiseChangeEvent","checkErrorClass","removeClass","aria-invalid","EventHandler","add","focusIn","focusOut","keyDownHandler","keyPressHandler","changeHandler","pasteHandler","Browser","touchStartEvent","mouseDownOnSpinner","touchEndEvent","mouseUpOnSpinner","touchMoveEvent","touchMoveOnSpinner","unwireEvents","remove","unwireSpinBtnEvents","event","parsedInput","updateValue","eventArgs","changeEventArgs","previousValue","merge","trigger","beforeUpdate","setTimeout","numericRegex","test","setElementValue","keyCode","preventDefault","updatedValue","correctRounding","strictMode","trimValue","result","floatExp","floatValue","floatStep","valueCount","exec","stepCount","Math","roundValue","precision","divide","pow","round","numberOfDecimals","decimalPart","split","modifyText","validateState","formatNumber","elementValue","aria-valuenow","val","currentValue","result1","result2","toFixed","cancelEvent","which","metaKey","ctrlKey","currentChar","String","fromCharCode","text","substring","selectionStart","selectionEnd","stopPropagation","numericObject","getNumericObject","fractionRule","validateDecimalOnType","mouseWheel","delta","rawEvent","wheelDelta","detail","formatValue","setSelectionRange","isDevice","value_1","focus","ele_1","getElementData","currentTarget","classList","contains","mouseUpClick","timeOut","setInterval","document","elementFromPoint","clientX","clientY","clearInterval","button","increment","decrement","destroy","detach","parentElement","getText","getPersistData","keyEntity","addOnPersist","onPropertyChanged","newProp","oldProp","_a","keys","setCssClass","setEnabled","setEnableRtl","setReadonly","setPlaceholder","setLocale","getModuleName","Component","Property","Event","NotifyPropertyChanges","numerictextboxHelper","CreateBuilder","CLASSNAMES","RTL","DISABLE","INPUT","INPUTGROUP","FLOATINPUT","FLOATLINE","FLOATTEXT","CLEARICON","CLEARICONHIDE","LABELTOP","LABELBOTTOM","NOFLOATLABEL","INPUTCUSTOMTAG","FLOATCUSTOMTAG","args","inputObject","buttons","clearButton","createInputContainer","createFloatingInput","addEventListener","parent","getParentNode","showClearButton","createClearButton","push","setPropertyValue","privateInputObj","_focusFn","label","getElementsByClassName","_blurFn","getElementsByTagName","wireFloatingEvents","unwireFloatingEvents","removeEventListener","floatLinelement","floatLabelElement","className","replace","aria-labelledby","updateLabelState","updateIconState","wireClearBtnEvents","readOnly","activeElement","validateLabel","tagClass","tag","elements","oldClass","textContent","aria-placeholder","isReadonly","isRtl","isEnable","disabledAttrs","disabled","aria-disabled","removeAttributes","addAttributes","removeFloating","inputEle","querySelector","addFloating","closest","iconEle","floatLine","floatText","iconClass","ele","mask_base_1","createMask","autocorrect","autocapitalize","spellcheck","mask","splitMask","splitInnerMask","j","pushIntoRegExpCollec","chkSpace","customRegExpCollec","hiddenMask","promptChar","escapeMaskValue","promptMask","customCharacters","escapeNumber","match","applyMask","setMaskValue","maskInputKeyDownHandler","maskInputKeyPressHandler","maskInputKeyUpHandler","maskInputFocusHandler","maskInputBlurHandler","maskInputPasteHandler","maskInputCutHandler","maskInputDropHandler","unstrippedValue","strippedValue","k","checkMask","regExpCollec","isFocus","labelElement","TOPLABEL","sIndex_1","eIndex_1","oldValue_1","redoCollec","maskKeyPress","validateValue","sIndex_2","eIndex","undoCollec","startIndex","endIndex","removeMaskInputValues","startValue","collec","unshift","splice","mobileRemoveFunction","sIndex","oldEventVal","isRemove","isDeleted","initStartIndex","initEndIndex","maskValue","curMask","multipleDel","oldValue","prompt_1","triggerMaskChangeEvent","code","isIosInvalid","maskedValue","isInteraction","removeMaskError","addedValues","val_1","startIndex_1","oldVal","trim","isSpace","isAndroid","preventUnsupportedValues","mobileSwipeCheck","isCtrlKey","eventOldVal","allowText","prevSupport","keyValue","customValStr","customValArr","applySupportedValues","addMaskErrorClass","changeToLowerUpperCase","sIdx","idx","ctrl","chkSupport","timer","ERROR","curVal","caseCount","indexOf","toUpperCase","BOTTOMLABEL","maskInput","getMaskInput","UTILMASK","regularExpressions","getVal","getUtilMaskEle","getMaskedVal","0","9","#","L","?","&","C","A","MaskUndo","maskedtextbox_1","MaskedTextBox","isInitial","resetMaskedTextBox","setMaskPlaceholder","setWidth","setVal","ROOT","strippedValue_1","strippedVal","getMaskedValue","form_validator_1","ErrorOption","VALIDATE_EMAIL","VALIDATE_URL","VALIDATE_DATE_ISO","VALIDATE_DIGITS","VALIDATE_PHONE","VALIDATE_CREDITCARD","FormValidator","FormValidator_1","validated","errorRules","allowSubmit","required","infoElement","inputElement","selectQuery","defaultMessages","email","url","date","dateIso","creditcard","number","digits","maxLength","minLength","rangeLength","range","regex","tel","pattern","equalTo","select","inputElements","selectAll","createHTML5Rules","addRules","rules","extend","removeRules","validate","selected","validateRules","filter","data","rules_1","name_1","reset","elements_1","errorClass","getInputElement","getErrorElement","hideMessage","validClass","elements_2","defRules","acceptedTypes","allRule","_b","defRules_1","rule","defRule","JSON","parse","annotationRule","ruleCon","ruleName","rulesList","ruleFirstName","ruleSecondName","minvalue","maxvalue","message","annotationMessage","isCheckable","clickHandler","focusOutHandler","keyUpHandler","submitHandler","resetHandler","clearEvents","e","excludeKeys","rules_2","errorMessage","getErrorMessage","errorRule","isValid","ignore","removeErrorRules","showMessage","createErrorElement","errorElement","status","params","param","currentRule","formElement","checkValidator","ruleValue","formats","for","errorOption","Message","errorContainer","outerHTML","hasAttribute","containerId","divElement","customPlacement","nextSibling","display","checkRequired","inputType","Base","option","Date","getTime","stringify","compareTo","Label"],"mappings":"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","file":"ej2-inputs.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\")) : factory(root[\"@syncfusion/ej2-base\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(5), __webpack_require__(10), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3, index_4) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t    __export(index_4);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, numerictextbox_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(numerictextbox_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, input_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ROOT = 'e-numeric';\n\t    var SPINICON = 'e-input-group-icon';\n\t    var SPINUP = 'e-spin-up';\n\t    var SPINDOWN = 'e-spin-down';\n\t    var ERROR = 'e-error';\n\t    var INCREMENT = 'increment';\n\t    var DECREMENT = 'decrement';\n\t    var INTREGEXP = new RegExp('/^(-)?(\\d*)$/');\n\t    var DECIMALSEPARATOR = '.';\n\t    var NumericTextBox = (function (_super) {\n\t        __extends(NumericTextBox, _super);\n\t        function NumericTextBox(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isPrevFocused = false;\n\t            _this.decimalSeparator = '.';\n\t            _this.intRegExp = new RegExp('/^(-)?(\\d*)$/');\n\t            _this.isCalled = false;\n\t            return _this;\n\t        }\n\t        NumericTextBox.prototype.preRender = function () {\n\t            var ejInstance = ej2_base_4.getValue('ej2_instances', this.element);\n\t            this.cloneElement = this.element.cloneNode(true);\n\t            this.angularTagName = null;\n\t            if (this.element.tagName === 'EJ-NUMERICTEXTBOX') {\n\t                this.angularTagName = this.element.tagName;\n\t                var input = ej2_base_3.createElement('input');\n\t                var index = 0;\n\t                for (index; index < this.element.attributes.length; index++) {\n\t                    input.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);\n\t                    input.innerHTML = this.element.innerHTML;\n\t                }\n\t                this.element.parentNode.appendChild(input);\n\t                this.element.parentNode.removeChild(this.element);\n\t                this.element = input;\n\t                ej2_base_4.setValue('ej2_instances', ejInstance, this.element);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'role': 'spinbutton', 'tabindex': '0', 'autocomplete': 'off', 'aria-live': 'assertive' });\n\t            var localeText = { incrementTitle: 'Increment value', decrementTitle: 'Decrement value', placeholder: '' };\n\t            this.l10n = new ej2_base_1.L10n('numerictextbox', localeText, this.locale);\n\t            this.isValidState = true;\n\t            this.inputStyle = null;\n\t            this.inputName = null;\n\t            this.cultureInfo = {};\n\t            this.initCultureInfo();\n\t            this.initCultureFunc();\n\t            this.checkAttributes();\n\t            this.prevValue = this.value;\n\t            this.validateMinMax();\n\t            this.validateStep();\n\t            if (this.placeholder === null) {\n\t                this.updatePlaceholder();\n\t            }\n\t        };\n\t        NumericTextBox.prototype.render = function () {\n\t            if (this.element.tagName.toLowerCase() === 'input') {\n\t                this.createWrapper();\n\t                if (this.showSpinButton) {\n\t                    this.spinBtnCreation();\n\t                }\n\t                if (!ej2_base_4.isNullOrUndefined(this.width)) {\n\t                    ej2_base_3.setStyleAttribute(this.container, { 'width': ej2_base_4.formatUnit(this.width) });\n\t                }\n\t                this.changeValue(this.value);\n\t                this.wireEvents();\n\t                if (this.value !== null && !isNaN(this.value)) {\n\t                    if (this.decimals) {\n\t                        this.setProperties({ value: this.roundNumber(this.value, this.decimals) }, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        NumericTextBox.prototype.checkAttributes = function () {\n\t            var attributes = ['value', 'min', 'max', 'step', 'disabled', 'readonly', 'style', 'name'];\n\t            for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n\t                var prop = attributes_1[_i];\n\t                if (!ej2_base_4.isNullOrUndefined(this.element.getAttribute(prop))) {\n\t                    switch (prop) {\n\t                        case 'disabled':\n\t                            var enabled = this.element.getAttribute(prop) === 'disabled' ||\n\t                                this.element.getAttribute(prop) === 'true' ? false : true;\n\t                            this.setProperties({ enabled: enabled }, true);\n\t                            break;\n\t                        case 'readonly':\n\t                            var readonly = this.element.getAttribute(prop) === 'readonly'\n\t                                || this.element.getAttribute(prop) === 'true' ? true : false;\n\t                            this.setProperties({ readonly: readonly }, true);\n\t                            break;\n\t                        case 'style':\n\t                            this.inputStyle = this.element.getAttribute(prop);\n\t                            break;\n\t                        case 'name':\n\t                            this.inputName = this.element.getAttribute(prop);\n\t                            break;\n\t                        default:\n\t                            var value = this.instance.getNumberParser({ format: 'n' })(this.element.getAttribute(prop));\n\t                            if ((value !== null && !isNaN(value)) || (prop === 'value')) {\n\t                                this.setProperties(ej2_base_4.setValue(prop, value, {}), true);\n\t                            }\n\t                            break;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        NumericTextBox.prototype.updatePlaceholder = function () {\n\t            this.setProperties({ placeholder: this.l10n.getConstant('placeholder') }, true);\n\t        };\n\t        NumericTextBox.prototype.initCultureFunc = function () {\n\t            this.instance = new ej2_base_5.Internationalization(this.locale);\n\t        };\n\t        NumericTextBox.prototype.initCultureInfo = function () {\n\t            this.cultureInfo.format = this.format;\n\t            if (ej2_base_4.getValue('currency', this) !== null) {\n\t                ej2_base_4.setValue('currency', this.currency, this.cultureInfo);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.createWrapper = function () {\n\t            var inputObj = input_1.Input.createInput({\n\t                element: this.element,\n\t                customTag: this.angularTagName,\n\t                floatLabelType: this.floatLabelType,\n\t                properties: {\n\t                    readonly: this.readonly,\n\t                    placeholder: this.placeholder,\n\t                    cssClass: this.cssClass,\n\t                    enableRtl: this.enableRtl,\n\t                    enabled: this.enabled\n\t                }\n\t            });\n\t            this.container = inputObj.container;\n\t            ej2_base_3.addClass([this.container], ROOT);\n\t            if (this.readonly) {\n\t                ej2_base_3.attributes(this.element, { 'aria-readonly': 'true' });\n\t            }\n\t            this.hiddenInput = (ej2_base_3.createElement('input', { attrs: { type: 'hidden' } }));\n\t            this.inputName = this.inputName !== null ? this.inputName : this.element.id;\n\t            this.element.removeAttribute('name');\n\t            ej2_base_3.attributes(this.hiddenInput, { 'name': this.inputName });\n\t            this.container.insertBefore(this.hiddenInput, this.element);\n\t            if (this.inputStyle !== null) {\n\t                ej2_base_3.attributes(this.container, { 'style': this.inputStyle });\n\t            }\n\t        };\n\t        NumericTextBox.prototype.spinBtnCreation = function () {\n\t            this.spinDown = input_1.Input.appendSpan(SPINICON + ' ' + SPINDOWN, this.container);\n\t            ej2_base_3.attributes(this.spinDown, {\n\t                'title': this.l10n.getConstant('decrementTitle'),\n\t                'aria-label': this.l10n.getConstant('decrementTitle')\n\t            });\n\t            this.spinUp = input_1.Input.appendSpan(SPINICON + ' ' + SPINUP, this.container);\n\t            ej2_base_3.attributes(this.spinUp, {\n\t                'title': this.l10n.getConstant('incrementTitle'),\n\t                'aria-label': this.l10n.getConstant('incrementTitle')\n\t            });\n\t            this.wireSpinBtnEvents();\n\t        };\n\t        NumericTextBox.prototype.validateMinMax = function () {\n\t            if (!(typeof (this.min) === 'number' && !isNaN(this.min))) {\n\t                this.setProperties({ min: -(Number.MAX_VALUE) }, true);\n\t            }\n\t            if (!(typeof (this.max) === 'number' && !isNaN(this.max))) {\n\t                this.setProperties({ max: Number.MAX_VALUE }, true);\n\t            }\n\t            if (this.decimals !== null) {\n\t                if (this.min !== -(Number.MAX_VALUE)) {\n\t                    this.setProperties({ min: this.instance.getNumberParser({ format: 'n' })(this.formattedValue(this.decimals, this.min)) }, true);\n\t                }\n\t                if (this.max !== (Number.MAX_VALUE)) {\n\t                    this.setProperties({ max: this.instance.getNumberParser({ format: 'n' })(this.formattedValue(this.decimals, this.max)) }, true);\n\t                }\n\t            }\n\t            this.setProperties({ min: this.min > this.max ? this.max : this.min }, true);\n\t            ej2_base_3.attributes(this.element, { 'aria-valuemin': this.min.toString(), 'aria-valuemax': this.max.toString() });\n\t        };\n\t        NumericTextBox.prototype.formattedValue = function (decimals, value) {\n\t            return this.instance.getNumberFormat({\n\t                maximumFractionDigits: decimals,\n\t                minimumFractionDigits: decimals, useGrouping: false\n\t            })(value);\n\t        };\n\t        NumericTextBox.prototype.validateStep = function () {\n\t            if (this.decimals !== null) {\n\t                this.setProperties({ step: this.instance.getNumberParser({ format: 'n' })(this.formattedValue(this.decimals, this.step)) }, true);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.action = function (operation) {\n\t            var value = this.isFocused ? this.instance.getNumberParser({ format: 'n' })(this.element.value) : this.value;\n\t            this.changeValue(this.performAction(value, this.step, operation));\n\t            this.raiseChangeEvent();\n\t        };\n\t        NumericTextBox.prototype.checkErrorClass = function () {\n\t            if (this.isValidState) {\n\t                ej2_base_3.removeClass([this.container], ERROR);\n\t            }\n\t            else {\n\t                ej2_base_3.addClass([this.container], ERROR);\n\t            }\n\t            ej2_base_3.attributes(this.element, { 'aria-invalid': this.isValidState ? 'false' : 'true' });\n\t        };\n\t        NumericTextBox.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.element, 'focus', this.focusIn, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'blur', this.focusOut, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'keydown', this.keyDownHandler, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'keypress', this.keyPressHandler, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'change', this.changeHandler, this);\n\t            ej2_base_1.EventHandler.add(this.element, 'paste', this.pasteHandler, this);\n\t        };\n\t        NumericTextBox.prototype.wireSpinBtnEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.spinUp, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinDown, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinUp, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinDown, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinUp, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner, this);\n\t            ej2_base_1.EventHandler.add(this.spinDown, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner, this);\n\t        };\n\t        NumericTextBox.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.element, 'focus', this.focusIn);\n\t            ej2_base_1.EventHandler.remove(this.element, 'blur', this.focusOut);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keydown', this.keyDownHandler);\n\t            ej2_base_1.EventHandler.remove(this.element, 'keypress', this.keyPressHandler);\n\t            ej2_base_1.EventHandler.remove(this.element, 'change', this.changeHandler);\n\t            ej2_base_1.EventHandler.remove(this.element, 'paste', this.pasteHandler);\n\t        };\n\t        NumericTextBox.prototype.unwireSpinBtnEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.spinUp, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, ej2_base_1.Browser.touchStartEvent, this.mouseDownOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinUp, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, ej2_base_1.Browser.touchEndEvent, this.mouseUpOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinUp, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, ej2_base_1.Browser.touchMoveEvent, this.touchMoveOnSpinner);\n\t        };\n\t        NumericTextBox.prototype.changeHandler = function (event) {\n\t            if (!this.element.value.length) {\n\t                this.setProperties({ value: null }, true);\n\t            }\n\t            var parsedInput = this.instance.getNumberParser({ format: 'n' })(this.element.value);\n\t            this.updateValue(parsedInput, event);\n\t        };\n\t        NumericTextBox.prototype.raiseChangeEvent = function (event) {\n\t            if (this.prevValue !== this.value) {\n\t                var eventArgs = {};\n\t                this.changeEventArgs = { value: this.value, previousValue: this.prevValue };\n\t                if (event) {\n\t                    this.changeEventArgs.event = event;\n\t                }\n\t                ej2_base_4.merge(eventArgs, this.changeEventArgs);\n\t                this.prevValue = this.value;\n\t                this.trigger('change', eventArgs);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.pasteHandler = function () {\n\t            var _this = this;\n\t            var beforeUpdate = this.element.value;\n\t            setTimeout(function () {\n\t                if (!_this.numericRegex().test(_this.element.value)) {\n\t                    _this.setElementValue(beforeUpdate);\n\t                }\n\t            });\n\t        };\n\t        NumericTextBox.prototype.keyDownHandler = function (event) {\n\t            switch (event.keyCode) {\n\t                case 38:\n\t                    event.preventDefault();\n\t                    this.action(INCREMENT);\n\t                    break;\n\t                case 40:\n\t                    event.preventDefault();\n\t                    this.action(DECREMENT);\n\t                    break;\n\t                default: break;\n\t            }\n\t            if (!this.element.value.length) {\n\t                this.setProperties({ value: null }, true);\n\t                this.updateValue(this.instance.getNumberParser({ format: 'n' })(this.element.value));\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.performAction = function (value, step, operation) {\n\t            if (value === null || isNaN(value)) {\n\t                value = 0;\n\t            }\n\t            var updatedValue = operation === INCREMENT ? value + step : value - step;\n\t            updatedValue = this.correctRounding(value, step, updatedValue);\n\t            return this.strictMode ? this.trimValue(updatedValue) : updatedValue;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.correctRounding = function (value, step, result) {\n\t            var floatExp = new RegExp('[,.](.*)');\n\t            var valueText = value.toString();\n\t            var stepText = step.toString();\n\t            var floatValue = floatExp.test(value.toString());\n\t            var floatStep = floatExp.test(step.toString());\n\t            if (floatValue || floatStep) {\n\t                var valueCount = floatValue ? floatExp.exec(value.toString())[0].length : 0;\n\t                var stepCount = floatStep ? floatExp.exec(step.toString())[0].length : 0;\n\t                var max = Math.max(valueCount, stepCount);\n\t                return value = this.roundValue(result, max);\n\t            }\n\t            return result;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.roundValue = function (result, precision) {\n\t            precision = precision || 0;\n\t            var divide = Math.pow(10, precision);\n\t            return result *= divide, result = Math.round(result) / divide;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.updateValue = function (value, event) {\n\t            if (value !== null && !isNaN(value)) {\n\t                if (this.decimals) {\n\t                    value = this.roundNumber(value, this.decimals);\n\t                }\n\t            }\n\t            this.changeValue(value === null || isNaN(value) ? null : this.strictMode ? this.trimValue(value) : value);\n\t            this.raiseChangeEvent(event);\n\t        };\n\t        NumericTextBox.prototype.changeValue = function (value) {\n\t            if (!(value || value === 0)) {\n\t                value = null;\n\t                this.setProperties({ value: value }, true);\n\t            }\n\t            else {\n\t                var numberOfDecimals = void 0;\n\t                var decimalPart = value.toString().split('.')[1];\n\t                numberOfDecimals = !decimalPart || !decimalPart.length ? 0 : decimalPart.length;\n\t                if (this.decimals !== null) {\n\t                    numberOfDecimals = numberOfDecimals < this.decimals ? numberOfDecimals : this.decimals;\n\t                }\n\t                this.setProperties({ value: this.roundNumber(value, numberOfDecimals) }, true);\n\t            }\n\t            this.modifyText();\n\t            if (!this.strictMode) {\n\t                this.validateState();\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.modifyText = function () {\n\t            if (this.value || this.value === 0) {\n\t                var value = this.formatNumber();\n\t                var elementValue = this.isFocused ? value : this.instance.getNumberFormat(this.cultureInfo)(this.value);\n\t                this.setElementValue(elementValue);\n\t                ej2_base_3.attributes(this.element, { 'aria-valuenow': value });\n\t                this.hiddenInput.value = value;\n\t            }\n\t            else {\n\t                this.setElementValue('');\n\t                this.element.removeAttribute('aria-valuenow');\n\t                this.hiddenInput.value = null;\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.setElementValue = function (val, element) {\n\t            input_1.Input.setValue(val, (element ? element : this.element), this.floatLabelType);\n\t        };\n\t        NumericTextBox.prototype.validateState = function () {\n\t            this.isValidState = true;\n\t            if (this.value || this.value === 0) {\n\t                this.isValidState = !(this.value > this.max || this.value < this.min);\n\t            }\n\t            this.checkErrorClass();\n\t        };\n\t        NumericTextBox.prototype.formatNumber = function () {\n\t            var numberOfDecimals;\n\t            var currentValue = this.value;\n\t            var decimalPart = currentValue.toString().split('.')[1];\n\t            numberOfDecimals = !decimalPart || !decimalPart.length ? 0 : decimalPart.length;\n\t            if (this.decimals !== null) {\n\t                numberOfDecimals = numberOfDecimals < this.decimals ? numberOfDecimals : this.decimals;\n\t            }\n\t            return this.instance.getNumberFormat({\n\t                maximumFractionDigits: numberOfDecimals,\n\t                minimumFractionDigits: numberOfDecimals, useGrouping: false\n\t            })(this.value);\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.trimValue = function (value) {\n\t            if (value > this.max) {\n\t                return this.max;\n\t            }\n\t            if (value < this.min) {\n\t                return this.min;\n\t            }\n\t            return value;\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.roundNumber = function (value, precision) {\n\t            var result = value;\n\t            var decimals = precision || 0;\n\t            var result1 = result.toString().split('e');\n\t            result = Math.round(Number(result1[0] + 'e' + (result1[1] ? (Number(result1[1]) + decimals) : decimals)));\n\t            var result2 = result.toString().split('e');\n\t            result = Number(result2[0] + 'e' + (result2[1] ? (Number(result2[1]) - decimals) : -decimals));\n\t            return Number(result.toFixed(decimals));\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.cancelEvent = function (event) {\n\t            event.preventDefault();\n\t            return false;\n\t        };\n\t        NumericTextBox.prototype.keyPressHandler = function (event) {\n\t            if (event.which === 0 || event.metaKey || event.ctrlKey || event.keyCode === 8 || event.keyCode === 13) {\n\t                return true;\n\t            }\n\t            var currentChar = String.fromCharCode(event.which);\n\t            var text = this.element.value;\n\t            text = text.substring(0, this.element.selectionStart) + currentChar + text.substring(this.element.selectionEnd);\n\t            if (!this.numericRegex().test(text)) {\n\t                event.preventDefault();\n\t                event.stopPropagation();\n\t                return false;\n\t            }\n\t            else {\n\t                return true;\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.numericRegex = function () {\n\t            var numericObject = ej2_base_5.getNumericObject(this.locale);\n\t            var decimalSeparator = ej2_base_4.getValue('decimal', numericObject);\n\t            var fractionRule = '*';\n\t            if (decimalSeparator === DECIMALSEPARATOR) {\n\t                decimalSeparator = '\\\\' + decimalSeparator;\n\t            }\n\t            if (this.decimals === 0) {\n\t                return INTREGEXP;\n\t            }\n\t            if (this.decimals && this.validateDecimalOnType) {\n\t                fractionRule = '{0,' + this.decimals + '}';\n\t            }\n\t            return new RegExp('^(-)?(((\\\\d+(' + decimalSeparator + '\\\\d' + fractionRule +\n\t                ')?)|(' + decimalSeparator + '\\\\d' + fractionRule + ')))?$');\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.mouseWheel = function (event) {\n\t            event.preventDefault();\n\t            var delta;\n\t            var rawEvent = event;\n\t            if (rawEvent.wheelDelta) {\n\t                delta = rawEvent.wheelDelta / 120;\n\t            }\n\t            else if (rawEvent.detail) {\n\t                delta = -rawEvent.detail / 3;\n\t            }\n\t            if (delta > 0) {\n\t                this.action(INCREMENT);\n\t            }\n\t            else if (delta < 0) {\n\t                this.action(DECREMENT);\n\t            }\n\t            this.cancelEvent(event);\n\t        };\n\t        NumericTextBox.prototype.focusIn = function (event) {\n\t            if (!this.enabled || this.readonly) {\n\t                return;\n\t            }\n\t            this.isFocused = true;\n\t            ej2_base_3.removeClass([this.container], ERROR);\n\t            this.prevValue = this.value;\n\t            if ((this.value || this.value === 0)) {\n\t                var formatValue = this.formatNumber();\n\t                this.setElementValue(formatValue);\n\t                if (!this.isPrevFocused) {\n\t                    this.element.setSelectionRange(0, formatValue.length);\n\t                }\n\t            }\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.add(this.element, 'mousewheel DOMMouseScroll', this.mouseWheel, this);\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.focusOut = function (event) {\n\t            var _this = this;\n\t            if (this.isPrevFocused) {\n\t                event.preventDefault();\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    var value_1 = this.element.value;\n\t                    this.element.focus();\n\t                    this.isPrevFocused = false;\n\t                    var ele_1 = this.element;\n\t                    setTimeout(function () {\n\t                        _this.setElementValue(value_1, ele_1);\n\t                    }, 200);\n\t                }\n\t            }\n\t            else {\n\t                this.isFocused = false;\n\t                if (!this.element.value.length) {\n\t                    this.setProperties({ value: null }, true);\n\t                }\n\t                var parsedInput = this.instance.getNumberParser({ format: 'n' })(this.element.value);\n\t                this.updateValue(parsedInput);\n\t                if (!ej2_base_1.Browser.isDevice) {\n\t                    ej2_base_1.EventHandler.remove(this.element, 'mousewheel DOMMouseScroll', this.mouseWheel);\n\t                }\n\t            }\n\t        };\n\t        ;\n\t        NumericTextBox.prototype.mouseDownOnSpinner = function (event) {\n\t            var _this = this;\n\t            if (this.isFocused) {\n\t                this.isPrevFocused = true;\n\t                event.preventDefault();\n\t            }\n\t            if (!this.getElementData(event)) {\n\t                return;\n\t            }\n\t            var result = this.getElementData(event);\n\t            var target = event.currentTarget;\n\t            var action = (target.classList.contains(SPINUP)) ? INCREMENT : DECREMENT;\n\t            ej2_base_1.EventHandler.add(target, 'mouseleave', this.mouseUpClick, this);\n\t            this.timeOut = setInterval(function () { _this.isCalled = true; _this.action(action); }, 150);\n\t            ej2_base_1.EventHandler.add(document, 'mouseup', this.mouseUpClick, this);\n\t        };\n\t        NumericTextBox.prototype.touchMoveOnSpinner = function (event) {\n\t            var target = document.elementFromPoint(event.clientX, event.clientY);\n\t            if (!(target.classList.contains(SPINICON))) {\n\t                clearInterval(this.timeOut);\n\t            }\n\t        };\n\t        NumericTextBox.prototype.mouseUpOnSpinner = function (event) {\n\t            if (this.isPrevFocused) {\n\t                this.element.focus();\n\t                if (!ej2_base_1.Browser.isDevice) {\n\t                    this.isPrevFocused = false;\n\t                }\n\t            }\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                event.preventDefault();\n\t            }\n\t            if (!this.getElementData(event)) {\n\t                return;\n\t            }\n\t            var target = event.currentTarget;\n\t            var action = (target.classList.contains(SPINUP)) ? INCREMENT : DECREMENT;\n\t            ej2_base_1.EventHandler.remove(target, 'mouseleave', this.mouseUpClick);\n\t            if (!this.isCalled) {\n\t                this.action(action);\n\t            }\n\t            this.isCalled = false;\n\t            ej2_base_1.EventHandler.remove(document, 'mouseup', this.mouseUpClick);\n\t        };\n\t        NumericTextBox.prototype.getElementData = function (event) {\n\t            if ((event.which && event.which === 3) || (event.button && event.button === 2)\n\t                || !this.enabled || this.readonly) {\n\t                return false;\n\t            }\n\t            clearInterval(this.timeOut);\n\t            return true;\n\t        };\n\t        NumericTextBox.prototype.mouseUpClick = function (event) {\n\t            event.stopPropagation();\n\t            clearInterval(this.timeOut);\n\t            this.isCalled = false;\n\t            ej2_base_1.EventHandler.remove(this.spinUp, 'mouseleave', this.mouseUpClick);\n\t            ej2_base_1.EventHandler.remove(this.spinDown, 'mouseleave', this.mouseUpClick);\n\t        };\n\t        NumericTextBox.prototype.increment = function (step) {\n\t            if (step === void 0) { step = this.step; }\n\t            this.changeValue(this.performAction(this.value, step, INCREMENT));\n\t        };\n\t        NumericTextBox.prototype.decrement = function (step) {\n\t            if (step === void 0) { step = this.step; }\n\t            this.changeValue(this.performAction(this.value, step, DECREMENT));\n\t        };\n\t        NumericTextBox.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            ej2_base_3.detach(this.hiddenInput);\n\t            if (this.showSpinButton) {\n\t                this.unwireSpinBtnEvents();\n\t                ej2_base_3.detach(this.spinUp);\n\t                ej2_base_3.detach(this.spinDown);\n\t            }\n\t            this.container.parentElement.appendChild(this.cloneElement);\n\t            ej2_base_3.detach(this.container);\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        NumericTextBox.prototype.getText = function () {\n\t            return this.element.value;\n\t        };\n\t        NumericTextBox.prototype.getPersistData = function () {\n\t            var keyEntity = ['value'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        NumericTextBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var elementVal;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'width':\n\t                        ej2_base_3.setStyleAttribute(this.container, { 'width': ej2_base_4.formatUnit(newProp.width) });\n\t                        break;\n\t                    case 'cssClass':\n\t                        input_1.Input.setCssClass(newProp.cssClass, [this.container], oldProp.cssClass);\n\t                        break;\n\t                    case 'enabled':\n\t                        input_1.Input.setEnabled(newProp.enabled, this.element);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        input_1.Input.setEnableRtl(newProp.enableRtl, [this.container]);\n\t                        break;\n\t                    case 'readonly':\n\t                        input_1.Input.setReadonly(newProp.readonly, this.element);\n\t                        if (this.readonly) {\n\t                            ej2_base_3.attributes(this.element, { 'aria-readonly': 'true' });\n\t                        }\n\t                        else {\n\t                            this.element.removeAttribute('aria-readonly');\n\t                        }\n\t                        break;\n\t                    case 'placeholder':\n\t                        input_1.Input.setPlaceholder(newProp.placeholder, this.element);\n\t                        break;\n\t                    case 'step':\n\t                        this.step = newProp.step;\n\t                        this.validateStep();\n\t                        break;\n\t                    case 'showSpinButton':\n\t                        if (newProp.showSpinButton) {\n\t                            this.spinBtnCreation();\n\t                        }\n\t                        else {\n\t                            ej2_base_3.detach(this.spinUp);\n\t                            ej2_base_3.detach(this.spinDown);\n\t                        }\n\t                        break;\n\t                    case 'value':\n\t                        this.updateValue(newProp.value);\n\t                        break;\n\t                    case 'min':\n\t                    case 'max':\n\t                        ej2_base_4.setValue(prop, ej2_base_4.getValue(prop, newProp), this);\n\t                        this.validateMinMax();\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'strictMode':\n\t                        this.strictMode = newProp.strictMode;\n\t                        this.updateValue(this.value);\n\t                        this.validateState();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initCultureFunc();\n\t                        this.l10n.setLocale(this.locale);\n\t                        if (!ej2_base_4.isNullOrUndefined(this.spinDown)) {\n\t                            ej2_base_3.attributes(this.spinDown, {\n\t                                'title': this.l10n.getConstant('decrementTitle'),\n\t                                'aria-label': this.l10n.getConstant('decrementTitle')\n\t                            });\n\t                        }\n\t                        if (!ej2_base_4.isNullOrUndefined(this.spinUp)) {\n\t                            ej2_base_3.attributes(this.spinUp, {\n\t                                'title': this.l10n.getConstant('incrementTitle'),\n\t                                'aria-label': this.l10n.getConstant('incrementTitle')\n\t                            });\n\t                        }\n\t                        this.updatePlaceholder();\n\t                        input_1.Input.setPlaceholder(this.placeholder, this.element);\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'currency':\n\t                        ej2_base_4.setValue(prop, ej2_base_4.getValue(prop, newProp), this.cultureInfo);\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'format':\n\t                        ej2_base_4.setValue(prop, ej2_base_4.getValue(prop, newProp), this);\n\t                        this.initCultureInfo();\n\t                        this.updateValue(this.value);\n\t                        break;\n\t                    case 'decimals':\n\t                        this.decimals = newProp.decimals;\n\t                        this.updateValue(this.value);\n\t                }\n\t            }\n\t        };\n\t        NumericTextBox.prototype.getModuleName = function () {\n\t            return 'numerictextbox';\n\t        };\n\t        return NumericTextBox;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], NumericTextBox.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(-(Number.MAX_VALUE))\n\t    ], NumericTextBox.prototype, \"min\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(Number.MAX_VALUE)\n\t    ], NumericTextBox.prototype, \"max\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], NumericTextBox.prototype, \"step\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"placeholder\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], NumericTextBox.prototype, \"showSpinButton\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"readonly\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], NumericTextBox.prototype, \"enabled\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"enablePersistence\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('n2')\n\t    ], NumericTextBox.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"decimals\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], NumericTextBox.prototype, \"currency\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], NumericTextBox.prototype, \"strictMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], NumericTextBox.prototype, \"validateDecimalOnType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Never')\n\t    ], NumericTextBox.prototype, \"floatLabelType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], NumericTextBox.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], NumericTextBox.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], NumericTextBox.prototype, \"change\", void 0);\n\t    NumericTextBox = __decorate([\n\t        ej2_base_2.NotifyPropertyChanges\n\t    ], NumericTextBox);\n\t    exports.NumericTextBox = NumericTextBox;\n\t    exports.numerictextboxHelper = ej2_base_1.CreateBuilder(NumericTextBox);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CLASSNAMES = {\n\t        RTL: 'e-rtl',\n\t        DISABLE: 'e-disabled',\n\t        INPUT: 'e-input',\n\t        INPUTGROUP: 'e-input-group',\n\t        FLOATINPUT: 'e-float-input',\n\t        FLOATLINE: 'e-float-line',\n\t        FLOATTEXT: 'e-float-text',\n\t        CLEARICON: 'e-clear-icon',\n\t        CLEARICONHIDE: 'e-clear-icon-hide',\n\t        LABELTOP: 'e-label-top',\n\t        LABELBOTTOM: 'e-label-bottom',\n\t        NOFLOATLABEL: 'e-no-float-label',\n\t        INPUTCUSTOMTAG: 'e-input-custom-tag',\n\t        FLOATCUSTOMTAG: 'e-float-custom-tag'\n\t    };\n\t    var Input;\n\t    (function (Input) {\n\t        var privateInputObj = {\n\t            container: null,\n\t            buttons: [],\n\t            clearButton: null\n\t        };\n\t        function createInput(args) {\n\t            var inputObject = { container: null, buttons: [], clearButton: null };\n\t            if (ej2_base_1.isNullOrUndefined(args.floatLabelType) || args.floatLabelType === 'Never') {\n\t                inputObject.container = createInputContainer(args, CLASSNAMES.INPUTGROUP, CLASSNAMES.INPUTCUSTOMTAG, 'span');\n\t                args.element.parentNode.insertBefore(inputObject.container, args.element);\n\t                ej2_base_1.addClass([args.element], CLASSNAMES.INPUT);\n\t                inputObject.container.appendChild(args.element);\n\t            }\n\t            else {\n\t                createFloatingInput(args, inputObject);\n\t            }\n\t            args.element.addEventListener('focus', function () {\n\t                var parent = getParentNode(this);\n\t                if (parent.classList.contains('e-input-group')) {\n\t                    parent.classList.add('e-input-focus');\n\t                }\n\t            });\n\t            args.element.addEventListener('blur', function () {\n\t                var parent = getParentNode(this);\n\t                if (parent.classList.contains('e-input-group')) {\n\t                    parent.classList.remove('e-input-focus');\n\t                }\n\t            });\n\t            if (!ej2_base_1.isNullOrUndefined(args.properties) && !ej2_base_1.isNullOrUndefined(args.properties.showClearButton) && args.properties.showClearButton) {\n\t                inputObject.clearButton = createClearButton(args.element, inputObject.container);\n\t                if (inputObject.container.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                    ej2_base_1.addClass([inputObject.container], CLASSNAMES.INPUTGROUP);\n\t                }\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(args.buttons)) {\n\t                for (var i = 0; i < args.buttons.length; i++) {\n\t                    inputObject.buttons.push(appendSpan(args.buttons[i], inputObject.container));\n\t                }\n\t            }\n\t            inputObject = setPropertyValue(args, inputObject);\n\t            privateInputObj = inputObject;\n\t            return inputObject;\n\t        }\n\t        Input.createInput = createInput;\n\t        function _focusFn() {\n\t            var label = getParentNode(this).getElementsByClassName('e-float-text')[0];\n\t            ej2_base_1.addClass([label], CLASSNAMES.LABELTOP);\n\t            if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {\n\t                ej2_base_1.removeClass([label], CLASSNAMES.LABELBOTTOM);\n\t            }\n\t        }\n\t        function _blurFn() {\n\t            var parent = getParentNode(this);\n\t            if (parent.getElementsByTagName('input')[0].value === '') {\n\t                var label = parent.getElementsByClassName('e-float-text')[0];\n\t                if (label.classList.contains(CLASSNAMES.LABELTOP)) {\n\t                    ej2_base_1.removeClass([label], CLASSNAMES.LABELTOP);\n\t                }\n\t                ej2_base_1.addClass([label], CLASSNAMES.LABELBOTTOM);\n\t            }\n\t        }\n\t        function wireFloatingEvents(element) {\n\t            element.addEventListener('focus', _focusFn);\n\t            element.addEventListener('blur', _blurFn);\n\t        }\n\t        function unwireFloatingEvents(element) {\n\t            element.removeEventListener('focus', _focusFn);\n\t            element.removeEventListener('blur', _blurFn);\n\t        }\n\t        function createFloatingInput(args, inputObject) {\n\t            var inputElement;\n\t            var floatLinelement;\n\t            var floatLabelElement;\n\t            if (args.floatLabelType === 'Auto') {\n\t                wireFloatingEvents(args.element);\n\t            }\n\t            if (ej2_base_1.isNullOrUndefined(inputObject.container)) {\n\t                inputObject.container = createInputContainer(args, CLASSNAMES.FLOATINPUT, CLASSNAMES.FLOATCUSTOMTAG, 'div');\n\t                args.element.parentNode.insertBefore(inputObject.container, args.element);\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(args.customTag)) {\n\t                    inputObject.container.classList.add(CLASSNAMES.FLOATCUSTOMTAG);\n\t                }\n\t                inputObject.container.classList.add(CLASSNAMES.FLOATINPUT);\n\t            }\n\t            floatLinelement = ej2_base_1.createElement('span', { className: CLASSNAMES.FLOATLINE });\n\t            floatLabelElement = ej2_base_1.createElement('label', { className: CLASSNAMES.FLOATTEXT });\n\t            if (!ej2_base_1.isNullOrUndefined(args.element.id) && args.element.id !== '') {\n\t                floatLabelElement.id = 'label_' + args.element.id.replace(/ /g, '_');\n\t                ej2_base_1.attributes(args.element, { 'aria-labelledby': floatLabelElement.id });\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(args.element.placeholder) && args.element.placeholder !== '') {\n\t                floatLabelElement.innerHTML = args.element.placeholder;\n\t                args.element.removeAttribute('placeholder');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(args.properties) && !ej2_base_1.isNullOrUndefined(args.properties.placeholder) &&\n\t                args.properties.placeholder !== '') {\n\t                floatLabelElement.innerHTML = args.properties.placeholder;\n\t            }\n\t            if (!floatLabelElement.innerHTML) {\n\t                inputObject.container.classList.add(CLASSNAMES.NOFLOATLABEL);\n\t            }\n\t            inputObject.container.appendChild(args.element);\n\t            inputObject.container.appendChild(floatLinelement);\n\t            inputObject.container.appendChild(floatLabelElement);\n\t            updateLabelState(args.element.value, floatLabelElement);\n\t            if (args.floatLabelType === 'Always') {\n\t                if (floatLabelElement.classList.contains(CLASSNAMES.LABELBOTTOM)) {\n\t                    ej2_base_1.removeClass([floatLabelElement], CLASSNAMES.LABELBOTTOM);\n\t                }\n\t                ej2_base_1.addClass([floatLabelElement], CLASSNAMES.LABELTOP);\n\t            }\n\t            if (args.floatLabelType === 'Auto') {\n\t                args.element.addEventListener('input', function (event) {\n\t                    updateLabelState(args.element.value, floatLabelElement);\n\t                });\n\t                args.element.addEventListener('blur', function (event) {\n\t                    updateLabelState(args.element.value, floatLabelElement);\n\t                });\n\t            }\n\t        }\n\t        function setPropertyValue(args, inputObject) {\n\t            if (!ej2_base_1.isNullOrUndefined(args.properties)) {\n\t                for (var _i = 0, _a = Object.keys(args.properties); _i < _a.length; _i++) {\n\t                    var prop = _a[_i];\n\t                    switch (prop) {\n\t                        case 'cssClass':\n\t                            setCssClass(args.properties.cssClass, [inputObject.container]);\n\t                            break;\n\t                        case 'enabled':\n\t                            setEnabled(args.properties.enabled, args.element);\n\t                            break;\n\t                        case 'enableRtl':\n\t                            setEnableRtl(args.properties.enableRtl, [inputObject.container]);\n\t                            break;\n\t                        case 'placeholder':\n\t                            setPlaceholder(args.properties.placeholder, args.element);\n\t                            break;\n\t                        case 'readonly':\n\t                            setReadonly(args.properties.readonly, args.element);\n\t                            break;\n\t                    }\n\t                }\n\t            }\n\t            return inputObject;\n\t        }\n\t        function updateIconState(value, button) {\n\t            if (value) {\n\t                ej2_base_1.removeClass([button], CLASSNAMES.CLEARICONHIDE);\n\t            }\n\t            else {\n\t                ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t            }\n\t        }\n\t        function updateLabelState(value, label) {\n\t            if (value) {\n\t                ej2_base_1.addClass([label], CLASSNAMES.LABELTOP);\n\t                if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {\n\t                    ej2_base_1.removeClass([label], CLASSNAMES.LABELBOTTOM);\n\t                }\n\t            }\n\t            else {\n\t                if (label.classList.contains(CLASSNAMES.LABELTOP)) {\n\t                    ej2_base_1.removeClass([label], CLASSNAMES.LABELTOP);\n\t                }\n\t                ej2_base_1.addClass([label], CLASSNAMES.LABELBOTTOM);\n\t            }\n\t        }\n\t        function getParentNode(element) {\n\t            var parentNode = element.parentNode;\n\t            return parentNode;\n\t        }\n\t        function createClearButton(element, container) {\n\t            var button = ej2_base_1.createElement('span', { className: CLASSNAMES.CLEARICON });\n\t            container.appendChild(button);\n\t            if (!ej2_base_1.isNullOrUndefined(privateInputObj.container) &&\n\t                privateInputObj.container.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                ej2_base_1.addClass([privateInputObj.container], CLASSNAMES.INPUTGROUP);\n\t            }\n\t            ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t            wireClearBtnEvents(element, button);\n\t            return button;\n\t        }\n\t        function wireClearBtnEvents(element, button) {\n\t            button.addEventListener('click', function (event) {\n\t                if (!(element.classList.contains(CLASSNAMES.DISABLE) || element.readOnly)) {\n\t                    event.preventDefault();\n\t                    if (element !== document.activeElement) {\n\t                        element.focus();\n\t                    }\n\t                    element.value = '';\n\t                    ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t                }\n\t            });\n\t            element.addEventListener('input', function (event) {\n\t                updateIconState(element.value, button);\n\t            });\n\t            element.addEventListener('focus', function (event) {\n\t                updateIconState(element.value, button);\n\t            });\n\t            element.addEventListener('blur', function (event) {\n\t                setTimeout(function () { ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE); }, 200);\n\t            });\n\t        }\n\t        function validateLabel(element, floatLabelType) {\n\t            var parent = getParentNode(element);\n\t            if (parent.classList.contains(CLASSNAMES.FLOATINPUT) && floatLabelType === 'Auto') {\n\t                var label = getParentNode(element).getElementsByClassName('e-float-text')[0];\n\t                updateLabelState(element.value, label);\n\t            }\n\t        }\n\t        function createInputContainer(args, className, tagClass, tag) {\n\t            var container;\n\t            if (!ej2_base_1.isNullOrUndefined(args.customTag)) {\n\t                container = ej2_base_1.createElement(args.customTag, { className: className });\n\t                container.classList.add(tagClass);\n\t            }\n\t            else {\n\t                container = ej2_base_1.createElement(tag, { className: className });\n\t            }\n\t            return container;\n\t        }\n\t        function setValue(value, element, floatLabelType, clearButton) {\n\t            element.value = value;\n\t            if ((!ej2_base_1.isNullOrUndefined(floatLabelType)) && floatLabelType === 'Auto') {\n\t                validateLabel(element, floatLabelType);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(clearButton) && clearButton) {\n\t                var parentElement = getParentNode(element);\n\t                var button = parentElement.getElementsByClassName(CLASSNAMES.CLEARICON)[0];\n\t                if (element.value && parentElement.classList.contains('e-input-focus')) {\n\t                    ej2_base_1.removeClass([button], CLASSNAMES.CLEARICONHIDE);\n\t                }\n\t                else {\n\t                    ej2_base_1.addClass([button], CLASSNAMES.CLEARICONHIDE);\n\t                }\n\t            }\n\t        }\n\t        Input.setValue = setValue;\n\t        function setCssClass(cssClass, elements, oldClass) {\n\t            if (!ej2_base_1.isNullOrUndefined(oldClass) && oldClass !== '') {\n\t                ej2_base_1.removeClass(elements, oldClass);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cssClass) && cssClass !== '') {\n\t                ej2_base_1.addClass(elements, cssClass);\n\t            }\n\t        }\n\t        Input.setCssClass = setCssClass;\n\t        function setPlaceholder(placeholder, element) {\n\t            var parentElement;\n\t            parentElement = getParentNode(element);\n\t            if (parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                if (!ej2_base_1.isNullOrUndefined(placeholder) && placeholder !== '') {\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = placeholder;\n\t                    parentElement.classList.remove(CLASSNAMES.NOFLOATLABEL);\n\t                }\n\t                else {\n\t                    parentElement.classList.add(CLASSNAMES.NOFLOATLABEL);\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = '';\n\t                }\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(placeholder) && placeholder !== '') {\n\t                    ej2_base_1.attributes(element, { 'placeholder': placeholder, 'aria-placeholder': placeholder });\n\t                }\n\t                else {\n\t                    element.removeAttribute('placeholder');\n\t                    element.removeAttribute('aria-placeholder');\n\t                }\n\t            }\n\t        }\n\t        Input.setPlaceholder = setPlaceholder;\n\t        function setReadonly(isReadonly, element, floatLabelType) {\n\t            if (isReadonly) {\n\t                ej2_base_1.attributes(element, { readonly: '' });\n\t            }\n\t            else {\n\t                element.removeAttribute('readonly');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(floatLabelType)) {\n\t                validateLabel(element, floatLabelType);\n\t            }\n\t        }\n\t        Input.setReadonly = setReadonly;\n\t        function setEnableRtl(isRtl, elements) {\n\t            if (isRtl) {\n\t                ej2_base_1.addClass(elements, CLASSNAMES.RTL);\n\t            }\n\t            else {\n\t                ej2_base_1.removeClass(elements, CLASSNAMES.RTL);\n\t            }\n\t        }\n\t        Input.setEnableRtl = setEnableRtl;\n\t        function setEnabled(isEnable, element, floatLabelType) {\n\t            var disabledAttrs = { 'disabled': 'disabled', 'aria-disabled': 'true' };\n\t            if (isEnable) {\n\t                element.classList.remove(CLASSNAMES.DISABLE);\n\t                removeAttributes(disabledAttrs, element);\n\t            }\n\t            else {\n\t                element.classList.add(CLASSNAMES.DISABLE);\n\t                addAttributes(disabledAttrs, element);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(floatLabelType)) {\n\t                validateLabel(element, floatLabelType);\n\t            }\n\t        }\n\t        Input.setEnabled = setEnabled;\n\t        function removeAttributes(attrs, element) {\n\t            for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var parentElement = void 0;\n\t                parentElement = getParentNode(element);\n\t                if (key === 'disabled') {\n\t                    element.classList.remove(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'disabled' && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {\n\t                    parentElement.classList.remove(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'placeholder' && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = '';\n\t                }\n\t                else {\n\t                    element.removeAttribute(key);\n\t                }\n\t            }\n\t        }\n\t        Input.removeAttributes = removeAttributes;\n\t        function addAttributes(attrs, element) {\n\t            for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var parentElement = void 0;\n\t                parentElement = getParentNode(element);\n\t                if (key === 'disabled') {\n\t                    element.classList.add(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'disabled' && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {\n\t                    parentElement.classList.add(CLASSNAMES.DISABLE);\n\t                }\n\t                if (key === 'placeholder' && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                    parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = attrs[key];\n\t                }\n\t                else {\n\t                    element.setAttribute(key, attrs[key]);\n\t                }\n\t            }\n\t        }\n\t        Input.addAttributes = addAttributes;\n\t        function removeFloating(input) {\n\t            var container = input.container;\n\t            if (!ej2_base_1.isNullOrUndefined(container) && container.classList.contains(CLASSNAMES.FLOATINPUT)) {\n\t                var inputEle = container.querySelector('input');\n\t                var placeholder = container.querySelector('.' + CLASSNAMES.FLOATTEXT).textContent;\n\t                var clearButton = container.querySelector('.e-clear-icon') !== null;\n\t                ej2_base_1.detach(container.querySelector('.' + CLASSNAMES.FLOATLINE));\n\t                ej2_base_1.detach(container.querySelector('.' + CLASSNAMES.FLOATTEXT));\n\t                ej2_base_1.classList(container, [CLASSNAMES.INPUTGROUP], [CLASSNAMES.FLOATINPUT]);\n\t                unwireFloatingEvents(inputEle);\n\t                ej2_base_1.attributes(inputEle, { 'placeholder': placeholder });\n\t                inputEle.classList.add(CLASSNAMES.INPUT);\n\t                if (!clearButton) {\n\t                    inputEle.removeAttribute('required');\n\t                }\n\t            }\n\t        }\n\t        Input.removeFloating = removeFloating;\n\t        function addFloating(input, type, placeholder) {\n\t            var container = ej2_base_1.closest(input, '.' + CLASSNAMES.INPUTGROUP);\n\t            if (type !== 'Never') {\n\t                var customTag = container.tagName;\n\t                customTag = customTag !== 'DIV' && customTag !== 'SPAN' ? customTag : null;\n\t                var args = { element: input, floatLabelType: type, customTag: customTag, properties: { placeholder: placeholder } };\n\t                var iconEle = container.querySelector('.e-clear-icon');\n\t                var inputObj = { container: container };\n\t                input.classList.remove(CLASSNAMES.INPUT);\n\t                createFloatingInput(args, inputObj);\n\t                if (ej2_base_1.isNullOrUndefined(iconEle)) {\n\t                    iconEle = container.querySelector('.e-input-group-icon');\n\t                }\n\t                if (ej2_base_1.isNullOrUndefined(iconEle)) {\n\t                    container.classList.remove(CLASSNAMES.INPUTGROUP);\n\t                }\n\t                else {\n\t                    var floatLine = container.querySelector('.' + CLASSNAMES.FLOATLINE);\n\t                    var floatText = container.querySelector('.' + CLASSNAMES.FLOATTEXT);\n\t                    container.insertBefore(input, iconEle);\n\t                    container.insertBefore(floatLine, iconEle);\n\t                    container.insertBefore(floatText, iconEle);\n\t                }\n\t            }\n\t        }\n\t        Input.addFloating = addFloating;\n\t        function appendSpan(iconClass, container) {\n\t            var button = ej2_base_1.createElement('span', { className: iconClass });\n\t            container.appendChild(button);\n\t            if (!container.classList.contains(CLASSNAMES.INPUTGROUP)) {\n\t                container.classList.add(CLASSNAMES.INPUTGROUP);\n\t            }\n\t            button.addEventListener('mousedown', function () {\n\t                if (!container.classList.contains('e-disabled') && !container.querySelector('input').readOnly) {\n\t                    this.classList.add('e-input-btn-ripple');\n\t                }\n\t            });\n\t            button.addEventListener('mouseup', function () {\n\t                var ele = this;\n\t                setTimeout(function () { ele.classList.remove('e-input-btn-ripple'); }, 500);\n\t            });\n\t            return button;\n\t        }\n\t        Input.appendSpan = appendSpan;\n\t    })(Input = exports.Input || (exports.Input = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, mask_base_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(mask_base_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, input_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ERROR = 'e-error';\n\t    var INPUTGROUP = 'e-input-group';\n\t    var FLOATINPUT = 'e-float-input';\n\t    var UTILMASK = 'e-utility-mask';\n\t    var TOPLABEL = 'e-label-top';\n\t    var BOTTOMLABEL = 'e-label-bottom';\n\t    exports.regularExpressions = {\n\t        '0': '[0-9]',\n\t        '9': '[0-9 ]',\n\t        '#': '[0-9 +-]',\n\t        'L': '[A-Za-z]',\n\t        '?': '[A-Za-z ]',\n\t        '&': '[^\\x7f ]+',\n\t        'C': '[^\\x7f]+',\n\t        'A': '[A-Za-z0-9]',\n\t        'a': '[A-Za-z0-9 ]',\n\t    };\n\t    function createMask() {\n\t        ej2_base_1.attributes(this.element, { 'role': 'textbox', 'autocomplete': 'off', 'autocorrect': 'off', 'autocapitalize': 'off',\n\t            'spellcheck': 'false', 'aria-live': 'assertive', 'aria-valuenow': '' });\n\t        if (this.mask) {\n\t            var splitMask = this.mask.split(']');\n\t            for (var i = 0; i < splitMask.length; i++) {\n\t                if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n\t                    splitMask[i] = splitMask[i] + ']';\n\t                    var splitInnerMask = splitMask[i].split('[');\n\t                    for (var j = 0; j < splitInnerMask.length; j++) {\n\t                        if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n\t                            splitInnerMask[j] = splitInnerMask[j] + '[';\n\t                        }\n\t                        pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n\t                    }\n\t                }\n\t                else {\n\t                    var splitInnerMask = splitMask[i].split('[');\n\t                    if (splitInnerMask.length > 1) {\n\t                        var chkSpace = false;\n\t                        for (var j = 0; j < splitInnerMask.length; j++) {\n\t                            if (splitInnerMask[j] === '\\\\') {\n\t                                this.customRegExpCollec.push('[');\n\t                                this.hiddenMask += splitInnerMask[j] + '[';\n\t                            }\n\t                            else if (splitInnerMask[j] === '') {\n\t                                chkSpace = true;\n\t                            }\n\t                            else if ((splitInnerMask[j] !== '' && chkSpace) || j === splitInnerMask.length - 1) {\n\t                                this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n\t                                this.hiddenMask += this.promptChar;\n\t                                chkSpace = false;\n\t                            }\n\t                            else {\n\t                                pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n\t                    }\n\t                }\n\t            }\n\t            this.escapeMaskValue = this.hiddenMask;\n\t            this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n\t            if (!ej2_base_1.isNullOrUndefined(this.customCharacters)) {\n\t                for (var i = 0; i < this.promptMask.length; i++) {\n\t                    if (!ej2_base_1.isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n\t                        this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n\t                    }\n\t                }\n\t            }\n\t            var escapeNumber = 0;\n\t            if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n\t                for (var i = 0; i < this.hiddenMask.length; i++) {\n\t                    var j = 0;\n\t                    if (i >= 2) {\n\t                        j = i;\n\t                    }\n\t                    escapeNumber = this.hiddenMask.length - this.promptMask.length;\n\t                    j = j - escapeNumber;\n\t                    if ((i > 0 && this.hiddenMask[i - 1] !== '\\\\') && (this.hiddenMask[i] === '>' ||\n\t                        this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n\t                        this.promptMask = this.promptMask.substring(0, j) +\n\t                            this.promptMask.substring((i + 1) - escapeNumber, this.promptMask.length);\n\t                        this.escapeMaskValue = this.escapeMaskValue.substring(0, j) +\n\t                            this.escapeMaskValue.substring((i + 1) - escapeNumber, this.escapeMaskValue.length);\n\t                    }\n\t                    if (this.hiddenMask[i] === '\\\\') {\n\t                        this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] +\n\t                            this.promptMask.substring((i + 2) - escapeNumber, this.promptMask.length);\n\t                        this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] +\n\t                            this.escapeMaskValue.substring((i + 2) - escapeNumber, this.escapeMaskValue.length);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n\t                this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n\t            }\n\t            ej2_base_1.attributes(this.element, { 'aria-invalid': 'false' });\n\t        }\n\t    }\n\t    exports.createMask = createMask;\n\t    function applyMask() {\n\t        setElementValue.call(this, this.promptMask);\n\t        setMaskValue.call(this, this.value);\n\t    }\n\t    exports.applyMask = applyMask;\n\t    function wireEvents() {\n\t        ej2_base_1.EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n\t        ej2_base_1.EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n\t    }\n\t    exports.wireEvents = wireEvents;\n\t    function unwireEvents() {\n\t        ej2_base_1.EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n\t        ej2_base_1.EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n\t        ej2_base_1.EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n\t        ej2_base_1.EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n\t        ej2_base_1.EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n\t        ej2_base_1.EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n\t        ej2_base_1.EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n\t    }\n\t    exports.unwireEvents = unwireEvents;\n\t    function unstrippedValue(element) {\n\t        return element.value;\n\t    }\n\t    exports.unstrippedValue = unstrippedValue;\n\t    function strippedValue(element) {\n\t        var value = '';\n\t        var k = 0;\n\t        var checkMask = false;\n\t        if (!ej2_base_1.isNullOrUndefined(element) && !ej2_base_1.isNullOrUndefined(this) && element.value !== this.promptMask) {\n\t            for (var i = 0; i < this.customRegExpCollec.length; i++) {\n\t                if (checkMask) {\n\t                    checkMask = false;\n\t                }\n\t                if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' ||\n\t                    this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n\t                    --i;\n\t                    checkMask = true;\n\t                }\n\t                if (!checkMask) {\n\t                    if ((element.value[i] !== this.promptChar) && (!ej2_base_1.isNullOrUndefined(this.customRegExpCollec[k]) &&\n\t                        ((!ej2_base_1.isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]])) ||\n\t                            (this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' &&\n\t                                this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']') ||\n\t                            (!ej2_base_1.isNullOrUndefined(this.customCharacters) &&\n\t                                (!ej2_base_1.isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]])))))) {\n\t                        value += element.value[i];\n\t                    }\n\t                }\n\t                ++k;\n\t            }\n\t        }\n\t        return value;\n\t    }\n\t    exports.strippedValue = strippedValue;\n\t    function pushIntoRegExpCollec(value) {\n\t        for (var k = 0; k < value.length; k++) {\n\t            this.hiddenMask += value[k];\n\t            if (value[k] !== '\\\\') {\n\t                this.customRegExpCollec.push(value[k]);\n\t            }\n\t        }\n\t    }\n\t    function maskInputFocusHandler(event) {\n\t        var _this = this;\n\t        if (this.mask) {\n\t            this.isFocus = true;\n\t            if (this.placeholder && this.element.value === '') {\n\t                setElementValue.call(this, this.promptMask);\n\t                this.element.setSelectionRange(0, this.element.value.length);\n\t                setTimeout(function () {\n\t                    _this.element.setSelectionRange(0, _this.element.value.length);\n\t                }, 1);\n\t            }\n\t        }\n\t    }\n\t    exports.maskInputFocusHandler = maskInputFocusHandler;\n\t    function maskInputBlurHandler(event) {\n\t        if (this.mask) {\n\t            this.isFocus = false;\n\t            if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n\t                setElementValue.call(this, '');\n\t                var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\t                if (this.floatLabelType === 'Auto' && !ej2_base_1.isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n\t                    ej2_base_1.removeClass([labelElement], TOPLABEL);\n\t                }\n\t            }\n\t        }\n\t    }\n\t    exports.maskInputBlurHandler = maskInputBlurHandler;\n\t    function maskInputPasteHandler(event) {\n\t        var _this = this;\n\t        if (this.mask) {\n\t            var sIndex_1 = this.element.selectionStart;\n\t            var eIndex_1 = this.element.selectionEnd;\n\t            var oldValue_1 = this.element.value;\n\t            setElementValue.call(this, '');\n\t            setTimeout(function () {\n\t                var value = _this.element.value;\n\t                if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n\t                    value = strippedValue.call(_this, _this.element);\n\t                }\n\t                setElementValue.call(_this, oldValue_1);\n\t                _this.element.selectionStart = sIndex_1;\n\t                _this.element.selectionEnd = eIndex_1;\n\t                var i = 0;\n\t                _this.maskKeyPress = true;\n\t                do {\n\t                    validateValue.call(_this, value[i], false, null);\n\t                    ++i;\n\t                } while (i < value.length);\n\t                _this.maskKeyPress = false;\n\t            }, 1);\n\t        }\n\t    }\n\t    function maskInputCutHandler(event) {\n\t        var _this = this;\n\t        if (this.mask) {\n\t            var sIndex_2 = this.element.selectionStart;\n\t            var eIndex = this.element.selectionEnd;\n\t            this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd });\n\t            var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) +\n\t                this.element.value.substring(eIndex);\n\t            setTimeout(function () {\n\t                setElementValue.call(_this, value_1);\n\t                _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n\t            }, 0);\n\t        }\n\t    }\n\t    function maskInputDropHandler(event) {\n\t        event.preventDefault();\n\t    }\n\t    exports.maskInputDropHandler = maskInputDropHandler;\n\t    function maskInputKeyDownHandler(event) {\n\t        var _this = this;\n\t        if (this.mask) {\n\t            if (event.keyCode !== 229) {\n\t                if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n\t                    event.preventDefault();\n\t                }\n\t                removeMaskInputValues.call(this, event);\n\t            }\n\t            else {\n\t                setTimeout(function () {\n\t                    removeMaskInputValues.call(_this, event);\n\t                }, 0);\n\t            }\n\t            var startValue = this.element.value;\n\t            if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n\t                var collec = void 0;\n\t                if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n\t                    collec = this.undoCollec[this.undoCollec.length - 1];\n\t                    this.redoCollec.unshift({\n\t                        value: this.element.value, startIndex: this.element.selectionStart,\n\t                        endIndex: this.element.selectionEnd\n\t                    });\n\t                    setElementValue.call(this, collec.value);\n\t                    this.element.selectionStart = collec.startIndex;\n\t                    this.element.selectionEnd = collec.endIndex;\n\t                    this.undoCollec.splice(this.undoCollec.length - 1, 1);\n\t                }\n\t                else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n\t                    collec = this.redoCollec[0];\n\t                    this.undoCollec.push({\n\t                        value: this.element.value, startIndex: this.element.selectionStart,\n\t                        endIndex: this.element.selectionEnd\n\t                    });\n\t                    setElementValue.call(this, collec.value);\n\t                    this.element.selectionStart = collec.startIndex;\n\t                    this.element.selectionEnd = collec.endIndex;\n\t                    this.redoCollec.splice(0, 1);\n\t                }\n\t            }\n\t        }\n\t    }\n\t    function mobileRemoveFunction() {\n\t        var collec;\n\t        var sIndex = this.element.selectionStart;\n\t        var eIndex = this.element.selectionEnd;\n\t        if (this.redoCollec.length > 0) {\n\t            collec = this.redoCollec[0];\n\t            setElementValue.call(this, collec.value);\n\t            if ((collec.startIndex - sIndex) === 1) {\n\t                this.element.selectionStart = collec.startIndex;\n\t                this.element.selectionEnd = collec.endIndex;\n\t            }\n\t            else {\n\t                this.element.selectionStart = sIndex + 1;\n\t                this.element.selectionEnd = eIndex + 1;\n\t            }\n\t        }\n\t        else {\n\t            setElementValue.call(this, this.promptMask);\n\t            this.element.selectionStart = this.element.selectionEnd = sIndex;\n\t        }\n\t    }\n\t    exports.mobileRemoveFunction = mobileRemoveFunction;\n\t    function removeMaskInputValues(event) {\n\t        var isRemove = false;\n\t        var oldEventVal;\n\t        var isDeleted = false;\n\t        if (this.element.value.length < this.promptMask.length) {\n\t            isRemove = true;\n\t            mobileRemoveFunction.call(this);\n\t            oldEventVal = this.element.value;\n\t        }\n\t        var initStartIndex = this.element.selectionStart;\n\t        var initEndIndex = this.element.selectionEnd;\n\t        var startIndex = this.element.selectionStart;\n\t        var endIndex = this.element.selectionEnd;\n\t        var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n\t        var curMask = maskValue[startIndex - 1];\n\t        var parentElement = this.element.parentNode;\n\t        if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n\t            this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: endIndex });\n\t            var multipleDel = false;\n\t            if (startIndex > 0 || ((event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length\n\t                && ((this.element.selectionEnd - startIndex) !== this.element.value.length))) {\n\t                var index = startIndex;\n\t                if (startIndex !== endIndex) {\n\t                    startIndex = endIndex;\n\t                    if (event.keyCode === 46) {\n\t                        multipleDel = true;\n\t                    }\n\t                }\n\t                else if (event.keyCode === 46) {\n\t                    ++index;\n\t                }\n\t                else {\n\t                    --index;\n\t                }\n\t                for (var k = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? k > index : k < index; (event.keyCode === 8 || isRemove || multipleDel) ? k-- : k++) {\n\t                    for (var i = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? i > 0 : i < this.element.value.length; (event.keyCode === 8 || isRemove || multipleDel) ? i-- : i++) {\n\t                        var sIndex = void 0;\n\t                        if (((event.keyCode === 8 || multipleDel) && ((initStartIndex !== initEndIndex && initStartIndex !== startIndex) ||\n\t                            (initStartIndex === initEndIndex))) || isRemove) {\n\t                            curMask = maskValue[i - 1];\n\t                            sIndex = startIndex - 1;\n\t                        }\n\t                        else {\n\t                            curMask = maskValue[i];\n\t                            sIndex = startIndex;\n\t                            ++startIndex;\n\t                        }\n\t                        var oldValue = this.element.value[sIndex];\n\t                        if ((ej2_base_1.isNullOrUndefined(this.regExpCollec[curMask]) && (!ej2_base_1.isNullOrUndefined(this.customCharacters)\n\t                            && ej2_base_1.isNullOrUndefined(this.customCharacters[curMask]))\n\t                            && ((this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '['\n\t                                && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']')))\n\t                            || (this.promptMask[sIndex] !== this.promptChar && ej2_base_1.isNullOrUndefined(this.customCharacters))) {\n\t                            this.element.selectionStart = this.element.selectionEnd = sIndex;\n\t                            event.preventDefault();\n\t                            if (event.keyCode === 46 && !multipleDel) {\n\t                                ++this.element.selectionStart;\n\t                            }\n\t                        }\n\t                        else {\n\t                            var value = this.element.value;\n\t                            var prompt_1 = this.promptChar;\n\t                            var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n\t                            setElementValue.call(this, elementValue);\n\t                            event.preventDefault();\n\t                            this.element.selectionStart = this.element.selectionEnd = sIndex;\n\t                            isDeleted = true;\n\t                        }\n\t                        startIndex = this.element.selectionStart;\n\t                        if ((!isDeleted && event.keyCode === 8) || multipleDel || (!isDeleted && !(event.keyCode === 46))) {\n\t                            sIndex = startIndex - 1;\n\t                        }\n\t                        else {\n\t                            sIndex = startIndex;\n\t                            isDeleted = false;\n\t                        }\n\t                        oldValue = this.element.value[sIndex];\n\t                        if (((initStartIndex !== initEndIndex) && (this.element.selectionStart === initStartIndex))\n\t                            || (this.promptMask[sIndex] === this.promptChar) || ((oldValue !== this.promptMask[sIndex]) &&\n\t                            (this.promptMask[sIndex] !== this.promptChar) && !ej2_base_1.isNullOrUndefined(this.customCharacters))) {\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (this.element.selectionStart === 0 && (this.element.selectionEnd === this.element.value.length)) {\n\t                setElementValue.call(this, this.promptMask);\n\t                event.preventDefault();\n\t                this.element.selectionStart = this.element.selectionEnd = startIndex;\n\t            }\n\t            this.redoCollec.unshift({\n\t                value: this.element.value, startIndex: this.element.selectionStart,\n\t                endIndex: this.element.selectionEnd\n\t            });\n\t            triggerMaskChangeEvent.call(this, event, oldEventVal);\n\t        }\n\t    }\n\t    function maskInputKeyPressHandler(event) {\n\t        if (this.mask) {\n\t            var oldValue = this.element.value;\n\t            if ((!event.ctrlKey) || (event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY'\n\t                && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV')) {\n\t                this.maskKeyPress = true;\n\t                var key = event.key;\n\t                if (key === 'Spacebar') {\n\t                    key = String.fromCharCode(event.keyCode);\n\t                }\n\t                if (!key) {\n\t                    this.isIosInvalid = true;\n\t                    validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n\t                    event.preventDefault();\n\t                    this.isIosInvalid = false;\n\t                }\n\t                else if (key && key.length === 1) {\n\t                    validateValue.call(this, key, event.ctrlKey, event);\n\t                    event.preventDefault();\n\t                }\n\t            }\n\t            triggerMaskChangeEvent.call(this, event, oldValue);\n\t        }\n\t    }\n\t    function triggerMaskChangeEvent(event, oldValue) {\n\t        if (!ej2_base_1.isNullOrUndefined(this.changeEventArgs)) {\n\t            var eventArgs = {};\n\t            this.changeEventArgs = { value: this.element.value, maskedValue: this.element.value, isInteraction: false };\n\t            if (this.mask) {\n\t                this.changeEventArgs.value = strippedValue.call(this, this.element);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(event)) {\n\t                this.changeEventArgs.isInteraction = true;\n\t                this.changeEventArgs.event = event;\n\t            }\n\t            ej2_base_1.merge(eventArgs, this.changeEventArgs);\n\t            this.trigger('change', eventArgs);\n\t        }\n\t        ej2_base_1.attributes(this.element, { 'aria-valuenow': this.element.value });\n\t    }\n\t    function maskInputKeyUpHandler(event) {\n\t        if (this.mask) {\n\t            var collec = void 0;\n\t            if (!this.maskKeyPress && event.keyCode === 229) {\n\t                var oldEventVal = void 0;\n\t                if (this.element.value.length === 1) {\n\t                    this.element.value = this.element.value + this.promptMask;\n\t                    this.element.setSelectionRange(1, 1);\n\t                }\n\t                if (this.element.value.length > this.promptMask.length) {\n\t                    var startIndex = this.element.selectionStart;\n\t                    var addedValues = this.element.value.length - this.promptMask.length;\n\t                    var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n\t                    if (this.undoCollec.length > 0) {\n\t                        collec = this.undoCollec[this.undoCollec.length - 1];\n\t                        var startIndex_1 = this.element.selectionStart;\n\t                        oldEventVal = collec.value;\n\t                        var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n\t                        collec = this.redoCollec[0];\n\t                        val_1 = val_1.trim();\n\t                        var isSpace = ej2_base_1.Browser.isAndroid && val_1 === '';\n\t                        if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n\t                            validateValue.call(this, val_1, event.ctrlKey, event);\n\t                        }\n\t                        else if (isSpace) {\n\t                            preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n\t                        }\n\t                    }\n\t                    else {\n\t                        oldEventVal = this.promptMask;\n\t                        validateValue.call(this, val_1, event.ctrlKey, event);\n\t                    }\n\t                    this.maskKeyPress = false;\n\t                    triggerMaskChangeEvent.call(this, event, oldEventVal);\n\t                }\n\t            }\n\t            else {\n\t                removeMaskError.call(this);\n\t            }\n\t            var val = strippedValue.call(this, this.element);\n\t            if (!((this.element.selectionStart === 0) && (this.promptMask === this.element.value) && val === '')) {\n\t                this.prevValue = val;\n\t                this.value = val;\n\t            }\n\t        }\n\t        else {\n\t            triggerMaskChangeEvent.call(this, event);\n\t            this.value = this.element.value;\n\t        }\n\t    }\n\t    function mobileSwipeCheck(key) {\n\t        if (key.length > 1 && ((this.promptMask.length + key.length) < this.element.value.length)) {\n\t            var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key +\n\t                this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n\t            setElementValue.call(this, elementValue);\n\t            this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n\t        }\n\t        this.element.selectionStart = this.element.selectionStart - key.length;\n\t        this.element.selectionEnd = this.element.selectionEnd - key.length;\n\t    }\n\t    function validateValue(key, isCtrlKey, event) {\n\t        if (!this.maskKeyPress) {\n\t            mobileSwipeCheck.call(this, key);\n\t        }\n\t        var startIndex = this.element.selectionStart;\n\t        var initStartIndex = startIndex;\n\t        var endIndex = this.element.selectionEnd;\n\t        var curMask;\n\t        var allowText = false;\n\t        var value = this.element.value;\n\t        var eventOldVal;\n\t        var prevSupport = false;\n\t        for (var k = 0; k < key.length; k++) {\n\t            var keyValue = key[k];\n\t            startIndex = this.element.selectionStart;\n\t            endIndex = this.element.selectionEnd;\n\t            if (!this.maskKeyPress && initStartIndex === startIndex) {\n\t                startIndex = startIndex + k;\n\t            }\n\t            if ((!this.maskKeyPress || startIndex < this.promptMask.length)) {\n\t                for (var i = startIndex; i < this.promptMask.length; i++) {\n\t                    var maskValue = this.escapeMaskValue;\n\t                    curMask = maskValue[startIndex];\n\t                    if ((ej2_base_1.isNullOrUndefined(this.regExpCollec[curMask]) && (ej2_base_1.isNullOrUndefined(this.customCharacters)\n\t                        || (!ej2_base_1.isNullOrUndefined(this.customCharacters) && ej2_base_1.isNullOrUndefined(this.customCharacters[curMask])))\n\t                        && ((this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '['\n\t                            && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']')))\n\t                        || ((this.promptMask[startIndex] !== this.promptChar) && ej2_base_1.isNullOrUndefined(this.customCharacters))\n\t                        || (this.promptChar === curMask && this.escapeMaskValue === this.mask)) {\n\t                        this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n\t                        startIndex = this.element.selectionStart;\n\t                        curMask = this.hiddenMask[startIndex];\n\t                    }\n\t                }\n\t                if (!ej2_base_1.isNullOrUndefined(this.customCharacters) && !ej2_base_1.isNullOrUndefined(this.customCharacters[curMask])) {\n\t                    var customValStr = this.customCharacters[curMask];\n\t                    var customValArr = customValStr.split(',');\n\t                    for (var i = 0; i < customValArr.length; i++) {\n\t                        if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n\t                            allowText = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t                else if (!ej2_base_1.isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask]))\n\t                    && this.promptMask[startIndex] === this.promptChar) {\n\t                    allowText = true;\n\t                }\n\t                else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '['\n\t                    && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']'\n\t                    && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n\t                    allowText = true;\n\t                }\n\t                if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n\t                    if (k === 0) {\n\t                        if (this.maskKeyPress) {\n\t                            this.undoCollec.push({ value: value, startIndex: startIndex, endIndex: startIndex });\n\t                        }\n\t                        else {\n\t                            var sIndex = this.element.selectionStart;\n\t                            var eIndex = this.element.selectionEnd;\n\t                            if (this.redoCollec.length > 0) {\n\t                                eventOldVal = this.redoCollec[0].value;\n\t                                setElementValue.call(this, eventOldVal);\n\t                                this.undoCollec.push(this.redoCollec[0]);\n\t                            }\n\t                            else {\n\t                                this.undoCollec.push({ value: this.promptMask, startIndex: startIndex, endIndex: startIndex });\n\t                                eventOldVal = this.promptMask;\n\t                                setElementValue.call(this, eventOldVal);\n\t                            }\n\t                            this.element.selectionStart = sIndex;\n\t                            this.element.selectionEnd = eIndex;\n\t                        }\n\t                    }\n\t                    startIndex = this.element.selectionStart;\n\t                    applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal);\n\t                    prevSupport = true;\n\t                    if (k === key.length - 1) {\n\t                        this.redoCollec.unshift({\n\t                            value: this.element.value, startIndex: this.element.selectionStart,\n\t                            endIndex: this.element.selectionEnd\n\t                        });\n\t                    }\n\t                    allowText = false;\n\t                }\n\t                else {\n\t                    startIndex = this.element.selectionStart;\n\t                    preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n\t                }\n\t                if (k === key.length - 1 && !allowText) {\n\t                    if (!ej2_base_1.Browser.isAndroid || (ej2_base_1.Browser.isAndroid && startIndex < this.promptMask.length)) {\n\t                        this.redoCollec.unshift({\n\t                            value: this.element.value,\n\t                            startIndex: this.element.selectionStart,\n\t                            endIndex: this.element.selectionEnd\n\t                        });\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (key.length === 1 && !isCtrlKey && !ej2_base_1.isNullOrUndefined(event)) {\n\t                    addMaskErrorClass.call(this);\n\t                }\n\t            }\n\t        }\n\t    }\n\t    function applySupportedValues(event, startIndex, keyValue, eventOldVal) {\n\t        if (this.hiddenMask.length > this.promptMask.length) {\n\t            keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n\t        }\n\t        var value = this.element.value;\n\t        var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n\t        setElementValue.call(this, elementValue);\n\t        this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n\t        triggerMaskChangeEvent.call(this, event, eventOldVal);\n\t    }\n\t    function preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n\t        if (!this.maskKeyPress) {\n\t            var eventOldVal = void 0;\n\t            var value = this.element.value;\n\t            if (sIdx >= this.promptMask.length) {\n\t                setElementValue.call(this, value.substring(0, sIdx));\n\t            }\n\t            else {\n\t                if (idx === sIdx) {\n\t                    setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n\t                }\n\t                else {\n\t                    if (this.promptMask.length === this.element.value.length) {\n\t                        setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n\t                    }\n\t                    else {\n\t                        setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n\t                    }\n\t                }\n\t                this.element.selectionStart = this.element.selectionEnd = (chkSupport ||\n\t                    this.element.value[idx] !== this.promptChar) ? sIdx : idx;\n\t            }\n\t            eventOldVal = this.element.value;\n\t            triggerMaskChangeEvent.call(this, event, eventOldVal);\n\t            addMaskErrorClass.call(this);\n\t        }\n\t        if (key.length === 1 && !ctrl && !ej2_base_1.isNullOrUndefined(event)) {\n\t            addMaskErrorClass.call(this);\n\t        }\n\t    }\n\t    function addMaskErrorClass() {\n\t        var _this = this;\n\t        var parentElement = this.element.parentNode;\n\t        var timer = 200;\n\t        if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n\t            ej2_base_1.addClass([parentElement], ERROR);\n\t        }\n\t        else {\n\t            ej2_base_1.addClass([this.element], ERROR);\n\t        }\n\t        if (this.isIosInvalid === true) {\n\t            timer = 400;\n\t        }\n\t        ej2_base_1.attributes(this.element, { 'aria-invalid': 'true' });\n\t        setTimeout(function () {\n\t            if (!_this.maskKeyPress) {\n\t                removeMaskError.call(_this);\n\t            }\n\t        }, timer);\n\t    }\n\t    function removeMaskError() {\n\t        var parentElement = this.element.parentNode;\n\t        ej2_base_1.removeClass([parentElement], ERROR);\n\t        ej2_base_1.removeClass([this.element], ERROR);\n\t        ej2_base_1.attributes(this.element, { 'aria-invalid': 'false' });\n\t    }\n\t    function changeToLowerUpperCase(key, value) {\n\t        var promptMask;\n\t        var i;\n\t        var j = 0;\n\t        var curVal = value;\n\t        var caseCount = 0;\n\t        for (i = 0; i < this.hiddenMask.length; i++) {\n\t            if (this.hiddenMask[i] === '\\\\') {\n\t                promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n\t            }\n\t            if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n\t                if (this.hiddenMask[i] !== curVal[i]) {\n\t                    promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n\t                }\n\t                ++caseCount;\n\t            }\n\t            if (promptMask) {\n\t                if (((promptMask[i] === this.promptChar) && (i > this.element.selectionStart)) ||\n\t                    (this.element.value.indexOf(this.promptChar) < 0 && (this.element.selectionStart + caseCount) === i)) {\n\t                    caseCount = 0;\n\t                    break;\n\t                }\n\t                curVal = promptMask;\n\t            }\n\t        }\n\t        while (i >= 0 && promptMask) {\n\t            if (i === 0 || promptMask[i - 1] !== '\\\\') {\n\t                var val = this.element.value;\n\t                if (promptMask[i] === '>') {\n\t                    key = key.toUpperCase();\n\t                    break;\n\t                }\n\t                else if (promptMask[i] === '<') {\n\t                    key = key.toLowerCase();\n\t                    break;\n\t                }\n\t                else if (promptMask[i] === '|') {\n\t                    break;\n\t                }\n\t            }\n\t            --i;\n\t        }\n\t        return key;\n\t    }\n\t    function setMaskValue(val) {\n\t        if (this.mask && !ej2_base_1.isNullOrUndefined(val) && (val === '' || this.prevValue !== val)) {\n\t            this.maskKeyPress = true;\n\t            setElementValue.call(this, this.promptMask);\n\t            if (val !== '') {\n\t                this.element.selectionStart = 0;\n\t                this.element.selectionEnd = 0;\n\t            }\n\t            for (var i = 0; i < val.length; i++) {\n\t                validateValue.call(this, val[i], false, null);\n\t            }\n\t            this.value = strippedValue.call(this, this.element);\n\t            this.maskKeyPress = false;\n\t            var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\t            if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' &&\n\t                !ej2_base_1.isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n\t                ej2_base_1.removeClass([labelElement], TOPLABEL);\n\t                ej2_base_1.addClass([labelElement], BOTTOMLABEL);\n\t                setElementValue.call(this, '');\n\t            }\n\t        }\n\t    }\n\t    exports.setMaskValue = setMaskValue;\n\t    function setElementValue(val, element) {\n\t        if (!this.isFocus && this.floatLabelType === 'Auto' && ej2_base_1.isNullOrUndefined(this.value)) {\n\t            val = '';\n\t        }\n\t        input_1.Input.setValue(val, (element ? element : this.element), this.floatLabelType);\n\t    }\n\t    exports.setElementValue = setElementValue;\n\t    function maskInput(args) {\n\t        var inputEle = getMaskInput(args);\n\t        applyMask.call(inputEle);\n\t        var val = strippedValue.call(this, this.element);\n\t        this.prevValue = val;\n\t        this.value = val;\n\t        if (args.mask) {\n\t            unwireEvents.call(inputEle);\n\t            wireEvents.call(inputEle);\n\t        }\n\t    }\n\t    exports.maskInput = maskInput;\n\t    function getMaskInput(args) {\n\t        ej2_base_1.addClass([args.element], UTILMASK);\n\t        var inputEle = {\n\t            element: args.element,\n\t            mask: args.mask,\n\t            promptMask: '',\n\t            hiddenMask: '',\n\t            escapeMaskValue: '',\n\t            promptChar: args.promptChar ? (args.promptChar.length > 1) ? args.promptChar = args.promptChar[0]\n\t                : args.promptChar : '_',\n\t            value: args.value ? args.value : null,\n\t            regExpCollec: exports.regularExpressions,\n\t            customRegExpCollec: [],\n\t            customCharacters: args.customCharacters,\n\t            undoCollec: [],\n\t            redoCollec: [],\n\t            maskKeyPress: false,\n\t            prevValue: ''\n\t        };\n\t        createMask.call(inputEle);\n\t        return inputEle;\n\t    }\n\t    function getVal(args) {\n\t        return strippedValue.call(getUtilMaskEle(args), args.element);\n\t    }\n\t    exports.getVal = getVal;\n\t    function getMaskedVal(args) {\n\t        return unstrippedValue.call(getUtilMaskEle(args), args.element);\n\t    }\n\t    exports.getMaskedVal = getMaskedVal;\n\t    function getUtilMaskEle(args) {\n\t        var value = '';\n\t        var inputEle;\n\t        if (!ej2_base_1.isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n\t            inputEle = getMaskInput(args);\n\t        }\n\t        return inputEle;\n\t    }\n\t    var MaskUndo = (function () {\n\t        function MaskUndo() {\n\t        }\n\t        return MaskUndo;\n\t    }());\n\t    exports.MaskUndo = MaskUndo;\n\t    var maskUndo = new MaskUndo();\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, maskedtextbox_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(maskedtextbox_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(4), __webpack_require__(6), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, input_1, index_1, index_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ROOT = 'e-widget e-mask';\n\t    var INPUT = 'e-input';\n\t    var MaskedTextBox = (function (_super) {\n\t        __extends(MaskedTextBox, _super);\n\t        function MaskedTextBox(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.promptMask = '';\n\t            _this.hiddenMask = '';\n\t            _this.escapeMaskValue = '';\n\t            _this.regExpCollec = index_1.regularExpressions;\n\t            _this.customRegExpCollec = [];\n\t            _this.undoCollec = [];\n\t            _this.redoCollec = [];\n\t            _this.changeEventArgs = {};\n\t            _this.maskKeyPress = false;\n\t            _this.isFocus = false;\n\t            _this.isInitial = false;\n\t            _this.isIosInvalid = false;\n\t            return _this;\n\t        }\n\t        MaskedTextBox.prototype.getModuleName = function () {\n\t            return 'maskedtextbox';\n\t        };\n\t        MaskedTextBox.prototype.preRender = function () {\n\t            var ejInstance = ej2_base_2.getValue('ej2_instances', this.element);\n\t            this.cloneElement = this.element.cloneNode(true);\n\t            this.angularTagName = null;\n\t            if (this.element.tagName === 'EJ-MASKEDTEXTBOX') {\n\t                this.angularTagName = this.element.tagName;\n\t                var input = ej2_base_2.createElement('input');\n\t                for (var i = 0; i < this.element.attributes.length; i++) {\n\t                    input.setAttribute(this.element.attributes[i].nodeName, this.element.attributes[i].nodeValue);\n\t                    input.innerHTML = this.element.innerHTML;\n\t                }\n\t                this.element.parentNode.appendChild(input);\n\t                this.element.parentNode.removeChild(this.element);\n\t                this.element = input;\n\t                ej2_base_2.setValue('ej2_instances', ejInstance, this.element);\n\t            }\n\t        };\n\t        MaskedTextBox.prototype.getPersistData = function () {\n\t            var keyEntity = ['value'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        MaskedTextBox.prototype.render = function () {\n\t            if (this.element.tagName.toLowerCase() === 'input') {\n\t                if (this.floatLabelType === 'Never') {\n\t                    ej2_base_2.addClass([this.element], INPUT);\n\t                }\n\t                this.createWrapper();\n\t                this.isInitial = true;\n\t                this.resetMaskedTextBox();\n\t                this.isInitial = false;\n\t                this.setMaskPlaceholder(true);\n\t                this.setWidth(this.width);\n\t            }\n\t        };\n\t        MaskedTextBox.prototype.resetMaskedTextBox = function () {\n\t            this.promptMask = '';\n\t            this.hiddenMask = '';\n\t            this.escapeMaskValue = '';\n\t            this.customRegExpCollec = [];\n\t            this.undoCollec = [];\n\t            this.redoCollec = [];\n\t            if (this.promptChar.length > 1) {\n\t                this.promptChar = this.promptChar[0];\n\t            }\n\t            index_1.createMask.call(this);\n\t            index_1.applyMask.call(this);\n\t            var val = index_1.strippedValue.call(this, this.element);\n\t            this.prevValue = val;\n\t            this.value = val;\n\t            if (!this.isInitial) {\n\t                index_1.unwireEvents.call(this);\n\t            }\n\t            index_1.wireEvents.call(this);\n\t        };\n\t        MaskedTextBox.prototype.setMaskPlaceholder = function (setVal) {\n\t            if (this.placeholder) {\n\t                input_1.Input.setPlaceholder(this.placeholder, this.element);\n\t                if (this.element.value === this.promptMask && setVal && this.floatLabelType !== 'Always') {\n\t                    index_2.setElementValue.call(this, '');\n\t                }\n\t            }\n\t        };\n\t        MaskedTextBox.prototype.setCssClass = function (cssClass, element) {\n\t            if (cssClass) {\n\t                ej2_base_2.addClass(element, cssClass);\n\t            }\n\t        };\n\t        MaskedTextBox.prototype.setWidth = function (width) {\n\t            if (!ej2_base_2.isNullOrUndefined(width)) {\n\t                this.element.style.width = ej2_base_2.formatUnit(width);\n\t            }\n\t        };\n\t        MaskedTextBox.prototype.createWrapper = function () {\n\t            this.inputObj = input_1.Input.createInput({\n\t                element: this.element,\n\t                customTag: this.angularTagName,\n\t                floatLabelType: this.floatLabelType,\n\t                properties: {\n\t                    enableRtl: this.enableRtl,\n\t                    enabled: this.enabled,\n\t                    placeholder: this.placeholder\n\t                }\n\t            });\n\t            this.inputObj.container.setAttribute('class', ROOT + ' ' + this.inputObj.container.getAttribute('class'));\n\t        };\n\t        MaskedTextBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'value':\n\t                        index_2.setMaskValue.call(this, this.value);\n\t                        if (this.placeholder) {\n\t                            this.setMaskPlaceholder(false);\n\t                        }\n\t                        break;\n\t                    case 'placeholder':\n\t                        this.setMaskPlaceholder(true);\n\t                        break;\n\t                    case 'width':\n\t                        this.setWidth(newProp.width);\n\t                        break;\n\t                    case 'cssClass':\n\t                        this.setCssClass(newProp.cssClass, [this.inputObj.container]);\n\t                        break;\n\t                    case 'enabled':\n\t                        input_1.Input.setEnabled(newProp.enabled, this.element);\n\t                        break;\n\t                    case 'enableRtl':\n\t                        input_1.Input.setEnableRtl(newProp.enableRtl, [this.inputObj.container]);\n\t                        break;\n\t                    case 'customCharacters':\n\t                        this.customCharacters = newProp.customCharacters;\n\t                        this.resetMaskedTextBox();\n\t                        break;\n\t                    case 'mask':\n\t                        var strippedValue_1 = this.value;\n\t                        this.mask = newProp.mask;\n\t                        this.updateValue(strippedValue_1);\n\t                        break;\n\t                    case 'promptChar':\n\t                        if (newProp.promptChar.length > 1) {\n\t                            newProp.promptChar = newProp.promptChar[0];\n\t                        }\n\t                        if (newProp.promptChar) {\n\t                            this.promptChar = newProp.promptChar;\n\t                        }\n\t                        else {\n\t                            this.promptChar = '_';\n\t                        }\n\t                        var value = this.element.value.replace(new RegExp('[' + oldProp.promptChar + ']', 'g'), this.promptChar);\n\t                        if (this.promptMask === this.element.value) {\n\t                            value = this.promptMask.replace(new RegExp('[' + oldProp.promptChar + ']', 'g'), this.promptChar);\n\t                        }\n\t                        this.promptMask = this.promptMask.replace(new RegExp('[' + oldProp.promptChar + ']', 'g'), this.promptChar);\n\t                        this.undoCollec = this.redoCollec = [];\n\t                        index_2.setElementValue.call(this, value);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        MaskedTextBox.prototype.updateValue = function (strippedVal) {\n\t            this.resetMaskedTextBox();\n\t            index_2.setMaskValue.call(this, strippedVal);\n\t        };\n\t        MaskedTextBox.prototype.getMaskedValue = function () {\n\t            return index_1.unstrippedValue.call(this, this.element);\n\t        };\n\t        MaskedTextBox.prototype.destroy = function () {\n\t            index_1.unwireEvents.call(this);\n\t            this.inputObj.container.parentElement.appendChild(this.cloneElement);\n\t            ej2_base_2.detach(this.inputObj.container);\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        return MaskedTextBox;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MaskedTextBox.prototype, \"cssClass\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MaskedTextBox.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MaskedTextBox.prototype, \"placeholder\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Never')\n\t    ], MaskedTextBox.prototype, \"floatLabelType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], MaskedTextBox.prototype, \"enabled\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], MaskedTextBox.prototype, \"enablePersistence\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], MaskedTextBox.prototype, \"enableRtl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MaskedTextBox.prototype, \"mask\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('_')\n\t    ], MaskedTextBox.prototype, \"promptChar\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MaskedTextBox.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MaskedTextBox.prototype, \"customCharacters\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], MaskedTextBox.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], MaskedTextBox.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Event()\n\t    ], MaskedTextBox.prototype, \"change\", void 0);\n\t    MaskedTextBox = __decorate([\n\t        ej2_base_1.NotifyPropertyChanges\n\t    ], MaskedTextBox);\n\t    exports.MaskedTextBox = MaskedTextBox;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, input_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(input_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, form_validator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(form_validator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VALIDATE_EMAIL = new RegExp('^[A-Za-z0-9._%+-]{3,}@[a-zA-Z]{3,}([.]{1}[a-zA-Z]{2,5}' +\n\t        '|[.]{1}[a-zA-Z]{2,4}[.]{1}[a-zA-Z]{2,4})$');\n\t    var VALIDATE_URL = new RegExp('^((ftp|http|https):\\/\\/)?www\\.([A-z]{2,})\\.([A-z]{2,})$');\n\t    var VALIDATE_DATE_ISO = new RegExp('^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$');\n\t    var VALIDATE_DIGITS = new RegExp('^[0-9]*$');\n\t    var VALIDATE_PHONE = new RegExp('^[+]?[0-9]{9,13}$');\n\t    var VALIDATE_CREDITCARD = new RegExp('^\\\\d{13,16}$');\n\t    var ErrorOption;\n\t    (function (ErrorOption) {\n\t        ErrorOption[ErrorOption[\"Message\"] = 0] = \"Message\";\n\t        ErrorOption[ErrorOption[\"Label\"] = 1] = \"Label\";\n\t    })(ErrorOption = exports.ErrorOption || (exports.ErrorOption = {}));\n\t    var FormValidator = FormValidator_1 = (function (_super) {\n\t        __extends(FormValidator, _super);\n\t        function FormValidator(element, options) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.validated = [];\n\t            _this.errorRules = [];\n\t            _this.allowSubmit = false;\n\t            _this.required = 'required';\n\t            _this.infoElement = null;\n\t            _this.inputElement = null;\n\t            _this.selectQuery = 'input:not([type=reset]):not([type=button]), select, textarea';\n\t            _this.defaultMessages = {\n\t                required: 'This field is required.',\n\t                email: 'Please enter a valid email address.',\n\t                url: 'Please enter a valid URL.',\n\t                date: 'Please enter a valid date.',\n\t                dateIso: 'Please enter a valid date ( ISO ).',\n\t                creditcard: 'Please enter valid card number',\n\t                number: 'Please enter a valid number.',\n\t                digits: 'Please enter only digits.',\n\t                maxLength: 'Please enter no more than {0} characters.',\n\t                minLength: 'Please enter at least {0} characters.',\n\t                rangeLength: 'Please enter a value between {0} and {1} characters long.',\n\t                range: 'Please enter a value between {0} and {1}.',\n\t                max: 'Please enter a value less than or equal to {0}.',\n\t                min: 'Please enter a value greater than or equal to {0}.',\n\t                regex: 'Please enter a correct value.',\n\t                tel: 'Please enter a valid phone number.',\n\t                pattern: 'Please enter a correct pattern value.',\n\t                equalTo: 'Please enter the valid match text',\n\t            };\n\t            element = typeof element === 'string' ? ej2_base_1.select(element, document) : element;\n\t            if (_this.element != null) {\n\t                _this.element.setAttribute('novalidate', '');\n\t                _this.inputElements = ej2_base_1.selectAll(_this.selectQuery, _this.element);\n\t                _this.createHTML5Rules();\n\t                _this.wireEvents();\n\t            }\n\t            else {\n\t                return undefined;\n\t            }\n\t            return _this;\n\t        }\n\t        FormValidator.prototype.addRules = function (name, rules) {\n\t            if (this.rules.hasOwnProperty(name)) {\n\t                ej2_base_2.extend(this.rules[name], rules, {});\n\t            }\n\t            else {\n\t                this.rules[name] = rules;\n\t            }\n\t        };\n\t        FormValidator.prototype.removeRules = function (name, rules) {\n\t            if (!name && !rules) {\n\t                this.rules = {};\n\t            }\n\t            else if (this.rules[name] && !rules) {\n\t                delete this.rules[name];\n\t            }\n\t            else if (!ej2_base_2.isNullOrUndefined(this.rules[name] && rules)) {\n\t                for (var i = 0; i < rules.length; i++) {\n\t                    delete this.rules[name][rules[i]];\n\t                }\n\t            }\n\t            else {\n\t                return;\n\t            }\n\t        };\n\t        FormValidator.prototype.validate = function (selected) {\n\t            var rules = Object.keys(this.rules);\n\t            if (selected && rules.length) {\n\t                this.validateRules(selected);\n\t                return rules.indexOf(selected) !== -1 && this.errorRules.filter(function (data) {\n\t                    return data.name === selected;\n\t                }).length === 0;\n\t            }\n\t            else {\n\t                for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {\n\t                    var name_1 = rules_1[_i];\n\t                    this.validateRules(name_1);\n\t                }\n\t                return this.errorRules.length === 0;\n\t            }\n\t        };\n\t        FormValidator.prototype.reset = function () {\n\t            this.errorRules = [];\n\t            this.validated = [];\n\t            this.element.reset();\n\t            var elements = ej2_base_1.selectAll(this.selectQuery, this.element);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var element = elements_1[_i];\n\t                var input = element;\n\t                input.removeAttribute('aria-invalid');\n\t                input.classList.remove(this.errorClass);\n\t                if (input.name.length > 0) {\n\t                    this.getInputElement(input.name);\n\t                    this.getErrorElement(input.name);\n\t                    this.hideMessage(input.name);\n\t                }\n\t                input.classList.remove(this.validClass);\n\t            }\n\t        };\n\t        FormValidator.prototype.getInputElement = function (name) {\n\t            this.inputElement = (ej2_base_1.select('[name=' + name + ']', this.element));\n\t            return this.inputElement;\n\t        };\n\t        FormValidator.prototype.destroy = function () {\n\t            this.reset();\n\t            this.unwireEvents();\n\t            this.rules = {};\n\t            var elements = ej2_base_1.selectAll('.' + this.errorClass + ', .' + this.validClass, this.element);\n\t            for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n\t                var element = elements_2[_i];\n\t                element.remove();\n\t            }\n\t            _super.prototype.destroy.call(this);\n\t        };\n\t        FormValidator.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t        };\n\t        ;\n\t        FormValidator.prototype.getModuleName = function () {\n\t            return 'formValidator';\n\t        };\n\t        FormValidator.prototype.createHTML5Rules = function () {\n\t            var defRules = ['required', 'regex', 'rangeLength', 'maxLength', 'minLength', 'dateIso', 'digits', 'pattern',\n\t                'data-val-required', 'type', 'data-validation', 'min', 'max', 'range', 'equalTo', 'data-val-minlength-min',\n\t                'data-val-equalto-other', 'data-val-maxlength-max', 'data-val-range-min', 'data-val-regex-pattern', 'data-val-length-max',\n\t                'data-val-creditcard', 'data-val-phone'];\n\t            var acceptedTypes = ['email', 'url', 'date', 'number', 'tel'];\n\t            for (var _i = 0, _a = (this.inputElements); _i < _a.length; _i++) {\n\t                var input = _a[_i];\n\t                var allRule = {};\n\t                for (var _b = 0, defRules_1 = defRules; _b < defRules_1.length; _b++) {\n\t                    var rule = defRules_1[_b];\n\t                    if (input.getAttribute(rule) !== null) {\n\t                        switch (rule) {\n\t                            case 'required':\n\t                                this.defRule(input, allRule, rule, input.required);\n\t                                break;\n\t                            case 'data-validation':\n\t                                rule = input.getAttribute(rule);\n\t                                this.defRule(input, allRule, rule, true);\n\t                                break;\n\t                            case 'type':\n\t                                if (acceptedTypes.indexOf(input.type) !== -1) {\n\t                                    this.defRule(input, allRule, input.type, true);\n\t                                }\n\t                                break;\n\t                            case 'rangeLength':\n\t                            case 'range':\n\t                                this.defRule(input, allRule, rule, JSON.parse(input.getAttribute(rule)));\n\t                                break;\n\t                            case 'equalTo':\n\t                                var id = input.getAttribute(rule);\n\t                                this.defRule(input, allRule, rule, id);\n\t                                break;\n\t                            default:\n\t                                if (input.getAttribute('data-val') === 'true') {\n\t                                    this.annotationRule(input, allRule, rule, input.getAttribute(rule));\n\t                                }\n\t                                else {\n\t                                    this.defRule(input, allRule, rule, input.getAttribute(rule));\n\t                                }\n\t                        }\n\t                    }\n\t                }\n\t                if (Object.keys(allRule).length !== 0) {\n\t                    this.addRules(input.name, allRule);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.annotationRule = function (input, ruleCon, ruleName, value) {\n\t            var annotationRule = ruleName.split('-');\n\t            var rulesList = ['required', 'creditcard', 'phone', 'maxlength', 'minlength', 'range', 'regex', 'equalto'];\n\t            var ruleFirstName = annotationRule[annotationRule.length - 1];\n\t            var ruleSecondName = annotationRule[annotationRule.length - 2];\n\t            if (rulesList.indexOf(ruleFirstName) !== -1) {\n\t                switch (ruleFirstName) {\n\t                    case 'required':\n\t                        this.defRule(input, ruleCon, 'required', value);\n\t                        break;\n\t                    case 'creditcard':\n\t                        this.defRule(input, ruleCon, 'creditcard', value);\n\t                        break;\n\t                    case 'phone':\n\t                        this.defRule(input, ruleCon, 'tel', value);\n\t                        break;\n\t                }\n\t            }\n\t            else if (rulesList.indexOf(ruleSecondName) !== -1) {\n\t                switch (ruleSecondName) {\n\t                    case 'maxlength':\n\t                        this.defRule(input, ruleCon, 'maxLength', value);\n\t                        break;\n\t                    case 'minlength':\n\t                        this.defRule(input, ruleCon, 'minLength', value);\n\t                        break;\n\t                    case 'range':\n\t                        var minvalue = input.getAttribute('data-val-range-min');\n\t                        var maxvalue = input.getAttribute('data-val-range-max');\n\t                        this.defRule(input, ruleCon, 'range', [minvalue, maxvalue]);\n\t                        break;\n\t                    case 'equalto':\n\t                        var id = input.getAttribute(ruleName).split('.');\n\t                        this.defRule(input, ruleCon, 'equalTo', id[id.length - 1]);\n\t                        break;\n\t                    case 'regex':\n\t                        this.defRule(input, ruleCon, 'regex', value);\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.defRule = function (input, ruleCon, ruleName, value) {\n\t            var message = input.getAttribute('data-' + ruleName + '-message');\n\t            var annotationMessage = input.getAttribute('data-val-' + ruleName);\n\t            if (message) {\n\t                value = [value, message];\n\t            }\n\t            else if (annotationMessage) {\n\t                value = [value, annotationMessage];\n\t            }\n\t            ruleCon[ruleName] = value;\n\t        };\n\t        FormValidator.prototype.wireEvents = function () {\n\t            for (var _i = 0, _a = (this.inputElements); _i < _a.length; _i++) {\n\t                var input = _a[_i];\n\t                if (FormValidator_1.isCheckable(input)) {\n\t                    ej2_base_2.EventHandler.add(input, 'click', this.clickHandler, this);\n\t                }\n\t                else if (input.tagName === 'SELECT') {\n\t                    ej2_base_2.EventHandler.add(input, 'change', this.changeHandler, this);\n\t                }\n\t                else {\n\t                    ej2_base_2.EventHandler.add(input, 'focusout', this.focusOutHandler, this);\n\t                    ej2_base_2.EventHandler.add(input, 'keyup', this.keyUpHandler, this);\n\t                }\n\t            }\n\t            ej2_base_2.EventHandler.add(this.element, 'submit', this.submitHandler, this);\n\t            ej2_base_2.EventHandler.add(this.element, 'reset', this.resetHandler, this);\n\t        };\n\t        FormValidator.prototype.unwireEvents = function () {\n\t            for (var _i = 0, _a = (this.inputElements); _i < _a.length; _i++) {\n\t                var input = _a[_i];\n\t                ej2_base_2.EventHandler.clearEvents(input);\n\t            }\n\t            ej2_base_2.EventHandler.remove(this.element, 'submit', this.submitHandler);\n\t            ej2_base_2.EventHandler.remove(this.element, 'reset', this.resetHandler);\n\t        };\n\t        FormValidator.prototype.focusOutHandler = function (e) {\n\t            this.trigger('focusout', e);\n\t            var element = e.target;\n\t            if (this.rules[element.name]) {\n\t                if (this.rules[element.name][this.required] || element.value.length > 0) {\n\t                    this.validate(element.name);\n\t                }\n\t                else if (this.validated.indexOf(element.name) === -1) {\n\t                    this.validated.push(element.name);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.keyUpHandler = function (e) {\n\t            this.trigger('keyup', e);\n\t            var element = e.target;\n\t            var excludeKeys = [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225];\n\t            if (e.which === 9 && (!this.rules[element.name] || (this.rules[element.name] && !this.rules[element.name][this.required]))) {\n\t                return;\n\t            }\n\t            if (this.validated.indexOf(element.name) !== -1 && this.rules[element.name] && excludeKeys.indexOf(e.which) === -1) {\n\t                this.validate(element.name);\n\t            }\n\t        };\n\t        FormValidator.prototype.clickHandler = function (e) {\n\t            this.trigger('click', e);\n\t            var element = e.target;\n\t            if (element.type !== 'submit') {\n\t                this.validate(element.name);\n\t            }\n\t            else if (element.getAttribute('formnovalidate') !== null) {\n\t                this.allowSubmit = true;\n\t            }\n\t        };\n\t        FormValidator.prototype.changeHandler = function (e) {\n\t            this.trigger('change', e);\n\t            var element = e.target;\n\t            this.validate(element.name);\n\t        };\n\t        FormValidator.prototype.submitHandler = function (e) {\n\t            this.trigger('submit', e);\n\t            if (!this.allowSubmit && !this.validate()) {\n\t                e.preventDefault();\n\t            }\n\t            else {\n\t                this.allowSubmit = false;\n\t            }\n\t        };\n\t        FormValidator.prototype.resetHandler = function () {\n\t            this.reset();\n\t        };\n\t        FormValidator.prototype.validateRules = function (name) {\n\t            if (!this.rules[name]) {\n\t                return;\n\t            }\n\t            var rules = Object.keys(this.rules[name]);\n\t            this.getInputElement(name);\n\t            this.getErrorElement(name);\n\t            for (var _i = 0, rules_2 = rules; _i < rules_2.length; _i++) {\n\t                var rule = rules_2[_i];\n\t                var errorMessage = this.getErrorMessage(this.rules[name][rule], rule);\n\t                var errorRule = { name: name, message: errorMessage };\n\t                var eventArgs = {\n\t                    inputName: name,\n\t                    element: this.inputElement,\n\t                    message: errorMessage\n\t                };\n\t                if (!this.isValid(name, rule) && !this.inputElement.classList.contains(this.ignore)) {\n\t                    this.removeErrorRules(name);\n\t                    this.errorRules.push(errorRule);\n\t                    this.inputElement.setAttribute('aria-invalid', 'true');\n\t                    this.inputElement.setAttribute('aria-describedby', this.inputElement.id + '-info');\n\t                    if (!this.infoElement) {\n\t                        this.createErrorElement(name, errorRule.message, this.inputElement);\n\t                    }\n\t                    else {\n\t                        this.showMessage(errorRule);\n\t                    }\n\t                    eventArgs.errorElement = this.infoElement;\n\t                    eventArgs.status = 'failure';\n\t                    this.inputElement.classList.add(this.errorClass);\n\t                    this.inputElement.classList.remove(this.validClass);\n\t                    this.trigger('validationComplete', eventArgs);\n\t                    if (rule === 'required') {\n\t                        this.inputElement.setAttribute('aria-required', 'true');\n\t                    }\n\t                    break;\n\t                }\n\t                else {\n\t                    this.hideMessage(name);\n\t                    eventArgs.status = 'success';\n\t                    this.trigger('validationComplete', eventArgs);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.isValid = function (name, rule) {\n\t            var params = this.rules[name][rule];\n\t            var param = (params instanceof Array && typeof params[1] === 'string') ? params[0] : params;\n\t            var currentRule = this.rules[name][rule];\n\t            var args = { value: this.inputElement.value, param: param, element: this.inputElement, formElement: this.element };\n\t            this.trigger('validationBegin', args);\n\t            if (currentRule && typeof currentRule[0] === 'function') {\n\t                var fn = currentRule[0];\n\t                return fn.call(this, { element: this.inputElement, value: this.inputElement.value });\n\t            }\n\t            else if (FormValidator_1.isCheckable(this.inputElement)) {\n\t                if (rule !== 'required') {\n\t                    return true;\n\t                }\n\t                return ej2_base_1.selectAll('input[name=' + name + ']:checked', this.element).length > 0;\n\t            }\n\t            else {\n\t                return FormValidator_1.checkValidator[rule](args);\n\t            }\n\t        };\n\t        FormValidator.prototype.getErrorMessage = function (ruleValue, rule) {\n\t            var message = (ruleValue instanceof Array && typeof ruleValue[1] === 'string') ? ruleValue[1] : this.defaultMessages[rule];\n\t            var formats = message.match(/{(\\d)}/g);\n\t            if (!ej2_base_2.isNullOrUndefined(formats)) {\n\t                for (var i = 0; i < formats.length; i++) {\n\t                    var value = ruleValue instanceof Array ? ruleValue[i] : ruleValue;\n\t                    message = message.replace(formats[i], value);\n\t                }\n\t            }\n\t            return message;\n\t        };\n\t        FormValidator.prototype.createErrorElement = function (name, message, input) {\n\t            var errorElement = ej2_base_1.createElement(this.errorElement, {\n\t                className: this.errorClass,\n\t                innerHTML: message,\n\t                attrs: { for: name }\n\t            });\n\t            if (this.errorOption === ErrorOption.Message) {\n\t                errorElement.classList.remove(this.errorClass);\n\t                errorElement.classList.add('e-message');\n\t                errorElement = ej2_base_1.createElement(this.errorContainer, { className: this.errorClass, innerHTML: errorElement.outerHTML });\n\t            }\n\t            errorElement.id = this.inputElement.name + '-info';\n\t            if (this.element.querySelector('[data-valmsg-for=\"' + input.id + '\"]')) {\n\t                this.element.querySelector('[data-valmsg-for=\"' + input.id + '\"]').appendChild(errorElement);\n\t            }\n\t            else if (input.hasAttribute('data-msg-containerid') === true) {\n\t                var containerId = input.getAttribute('data-msg-containerid');\n\t                var divElement = this.element.querySelector('#' + containerId);\n\t                divElement.appendChild(errorElement);\n\t            }\n\t            else if (this.customPlacement != null) {\n\t                this.customPlacement.call(this, this.inputElement, errorElement);\n\t            }\n\t            else {\n\t                this.inputElement.parentNode.insertBefore(errorElement, this.inputElement.nextSibling);\n\t            }\n\t            errorElement.style.display = 'block';\n\t            this.getErrorElement(name);\n\t            this.validated.push(name);\n\t            this.checkRequired(name);\n\t        };\n\t        FormValidator.prototype.getErrorElement = function (name) {\n\t            this.infoElement = ej2_base_1.select(this.errorElement + '.' + this.errorClass, this.inputElement.parentElement);\n\t            if (!this.infoElement) {\n\t                this.infoElement = ej2_base_1.select(this.errorElement + '.' + this.errorClass + '[for=\"' + name + '\"]');\n\t            }\n\t            return this.infoElement;\n\t        };\n\t        FormValidator.prototype.removeErrorRules = function (name) {\n\t            for (var i = 0; i < this.errorRules.length; i++) {\n\t                var rule = this.errorRules[i];\n\t                if (rule.name === name) {\n\t                    this.errorRules.splice(i, 1);\n\t                }\n\t            }\n\t        };\n\t        FormValidator.prototype.showMessage = function (errorRule) {\n\t            this.infoElement.style.display = 'block';\n\t            this.infoElement.innerHTML = errorRule.message;\n\t            this.checkRequired(errorRule.name);\n\t        };\n\t        FormValidator.prototype.hideMessage = function (name) {\n\t            if (this.infoElement) {\n\t                this.infoElement.style.display = 'none';\n\t                this.removeErrorRules(name);\n\t                this.inputElement.classList.add(this.validClass);\n\t                this.inputElement.classList.remove(this.errorClass);\n\t                this.inputElement.setAttribute('aria-invalid', 'false');\n\t            }\n\t        };\n\t        FormValidator.prototype.checkRequired = function (name) {\n\t            if (!this.rules[name][this.required] && !this.inputElement.value.length) {\n\t                this.infoElement.innerHTML = this.inputElement.value;\n\t                this.infoElement.setAttribute('aria-invalid', 'false');\n\t                this.hideMessage(name);\n\t            }\n\t        };\n\t        FormValidator.isCheckable = function (input) {\n\t            var inputType = input.getAttribute('type');\n\t            return inputType && (inputType === 'checkbox' || inputType === 'radio' || inputType === 'submit');\n\t        };\n\t        return FormValidator;\n\t    }(ej2_base_1.Base));\n\t    FormValidator.checkValidator = {\n\t        required: function (option) {\n\t            return option.value.length > 0;\n\t        },\n\t        email: function (option) {\n\t            return VALIDATE_EMAIL.test(option.value);\n\t        },\n\t        url: function (option) {\n\t            return VALIDATE_URL.test(option.value);\n\t        },\n\t        dateIso: function (option) {\n\t            return VALIDATE_DATE_ISO.test(option.value);\n\t        },\n\t        tel: function (option) {\n\t            return VALIDATE_PHONE.test(option.value);\n\t        },\n\t        creditcard: function (option) {\n\t            return VALIDATE_CREDITCARD.test(option.value);\n\t        },\n\t        number: function (option) {\n\t            return !isNaN(Number(option.value)) && option.value.indexOf(' ') === -1;\n\t        },\n\t        digits: function (option) {\n\t            return VALIDATE_DIGITS.test(option.value);\n\t        },\n\t        maxLength: function (option) {\n\t            return option.value.length <= option.param;\n\t        },\n\t        minLength: function (option) {\n\t            return option.value.length >= option.param;\n\t        },\n\t        rangeLength: function (option) {\n\t            var param = option.param;\n\t            return option.value.length >= param[0] && option.value.length <= param[1];\n\t        },\n\t        range: function (option) {\n\t            var param = option.param;\n\t            return !isNaN(Number(option.value)) && Number(option.value) >= param[0] && Number(option.value) <= param[1];\n\t        },\n\t        date: function (option) {\n\t            return !isNaN(new Date(option.value).getTime());\n\t        },\n\t        max: function (option) {\n\t            if (!isNaN(Number(option.value))) {\n\t                return +option.value <= option.param;\n\t            }\n\t            return new Date(option.value).getTime() <= new Date(JSON.parse(JSON.stringify(option.param))).getTime();\n\t        },\n\t        min: function (option) {\n\t            if (!isNaN(Number(option.value))) {\n\t                return +option.value >= option.param;\n\t            }\n\t            return new Date(option.value).getTime() >= new Date(JSON.parse(JSON.stringify(option.param))).getTime();\n\t        },\n\t        regex: function (option) {\n\t            return new RegExp(option.param).test(option.value);\n\t        },\n\t        equalTo: function (option) {\n\t            var compareTo = option.formElement.querySelector('#' + option.param);\n\t            option.param = compareTo.value;\n\t            return option.param === option.value;\n\t        },\n\t    };\n\t    __decorate([\n\t        ej2_base_3.Property('e-hidden')\n\t    ], FormValidator.prototype, \"ignore\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property({})\n\t    ], FormValidator.prototype, \"rules\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('e-error')\n\t    ], FormValidator.prototype, \"errorClass\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('e-valid')\n\t    ], FormValidator.prototype, \"validClass\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('label')\n\t    ], FormValidator.prototype, \"errorElement\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property('div')\n\t    ], FormValidator.prototype, \"errorContainer\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property(ErrorOption.Label)\n\t    ], FormValidator.prototype, \"errorOption\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"focusout\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"keyup\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"change\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"submit\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"validationBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"validationComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Event()\n\t    ], FormValidator.prototype, \"customPlacement\", void 0);\n\t    FormValidator = FormValidator_1 = __decorate([\n\t        ej2_base_3.NotifyPropertyChanges\n\t    ], FormValidator);\n\t    exports.FormValidator = FormValidator;\n\t    var FormValidator_1;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyNzJhNDY3MmRhYjEzNmI0ZjMxMyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL251bWVyaWN0ZXh0Ym94L2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9udW1lcmljdGV4dGJveC9udW1lcmljdGV4dGJveC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiIiwid2VicGFjazovLy8uL3NyYy9pbnB1dC9pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFza2VkdGV4dGJveC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFza2VkdGV4dGJveC9iYXNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9tYXNrZWR0ZXh0Ym94L2Jhc2UvbWFzay1iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXNrZWR0ZXh0Ym94L21hc2tlZHRleHRib3gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hc2tlZHRleHRib3gvbWFza2VkdGV4dGJveC9tYXNrZWR0ZXh0Ym94LmpzIiwid2VicGFjazovLy8uL3NyYy9pbnB1dC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybS12YWxpZGF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm0tdmFsaWRhdG9yL2Zvcm0tdmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxjQUFjO0FBQ2xEO0FBQ0EsOERBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxjQUFjO0FBQ2xELGlFQUFnRSxjQUFjO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxlQUFlO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsbURBQW1EO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFxRCx5QkFBeUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCwwQkFBMEI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixvQ0FBb0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUIsa0JBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQywwR0FBMEc7QUFDNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0MseUZBQXlGO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXdDLDBFQUEwRTtBQUNsSCw2Q0FBNEMsMEZBQTBGO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsc0NBQXNDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXVCLGdCQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3Qyw0QkFBNEI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMseUJBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCw2REFBNkQ7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsdUVBQXVFO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLHlCQUF5QjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLDBCQUEwQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFtQiw0QkFBNEI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGdCQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDdnlCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O0FDUEQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0Isb0NBQW9DO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDblBEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBLHlCQUF3QjtBQUN4QixjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsK0VBQThFLGdFQUFnRTtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLDRCQUE0QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDIiwiZmlsZSI6ImVqMi1pbnB1dHMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDI3MmE0NjcyZGFiMTM2YjRmMzEzIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9udW1lcmljdGV4dGJveC9pbmRleFwiLCBcIi4vbWFza2VkdGV4dGJveC9pbmRleFwiLCBcIi4vaW5wdXQvaW5kZXhcIiwgXCIuL2Zvcm0tdmFsaWRhdG9yL2luZGV4XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaW5kZXhfMSwgaW5kZXhfMiwgaW5kZXhfMywgaW5kZXhfNCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaW5kZXhfMSk7XG4gICAgX19leHBvcnQoaW5kZXhfMik7XG4gICAgX19leHBvcnQoaW5kZXhfMyk7XG4gICAgX19leHBvcnQoaW5kZXhfNCk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbnVtZXJpY3RleHRib3hcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBudW1lcmljdGV4dGJveF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChudW1lcmljdGV4dGJveF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbnVtZXJpY3RleHRib3gvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vaW5wdXQvaW5wdXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBpbnB1dF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBST09UID0gJ2UtbnVtZXJpYyc7XG4gICAgdmFyIFNQSU5JQ09OID0gJ2UtaW5wdXQtZ3JvdXAtaWNvbic7XG4gICAgdmFyIFNQSU5VUCA9ICdlLXNwaW4tdXAnO1xuICAgIHZhciBTUElORE9XTiA9ICdlLXNwaW4tZG93bic7XG4gICAgdmFyIEVSUk9SID0gJ2UtZXJyb3InO1xuICAgIHZhciBJTkNSRU1FTlQgPSAnaW5jcmVtZW50JztcbiAgICB2YXIgREVDUkVNRU5UID0gJ2RlY3JlbWVudCc7XG4gICAgdmFyIElOVFJFR0VYUCA9IG5ldyBSZWdFeHAoJy9eKC0pPyhcXGQqKSQvJyk7XG4gICAgdmFyIERFQ0lNQUxTRVBBUkFUT1IgPSAnLic7XG4gICAgdmFyIE51bWVyaWNUZXh0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE51bWVyaWNUZXh0Qm94LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBOdW1lcmljVGV4dEJveChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuaXNQcmV2Rm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuZGVjaW1hbFNlcGFyYXRvciA9ICcuJztcbiAgICAgICAgICAgIF90aGlzLmludFJlZ0V4cCA9IG5ldyBSZWdFeHAoJy9eKC0pPyhcXGQqKSQvJyk7XG4gICAgICAgICAgICBfdGhpcy5pc0NhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWpJbnN0YW5jZSA9IGVqMl9iYXNlXzQuZ2V0VmFsdWUoJ2VqMl9pbnN0YW5jZXMnLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5jbG9uZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5hbmd1bGFyVGFnTmFtZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnRhZ05hbWUgPT09ICdFSi1OVU1FUklDVEVYVEJPWCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuZ3VsYXJUYWdOYW1lID0gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChpbmRleDsgaW5kZXggPCB0aGlzLmVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzW2luZGV4XS5ub2RlTmFtZSwgdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNbaW5kZXhdLm5vZGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmlubmVySFRNTCA9IHRoaXMuZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGlucHV0O1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUoJ2VqMl9pbnN0YW5jZXMnLCBlakluc3RhbmNlLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAncm9sZSc6ICdzcGluYnV0dG9uJywgJ3RhYmluZGV4JzogJzAnLCAnYXV0b2NvbXBsZXRlJzogJ29mZicsICdhcmlhLWxpdmUnOiAnYXNzZXJ0aXZlJyB9KTtcbiAgICAgICAgICAgIHZhciBsb2NhbGVUZXh0ID0geyBpbmNyZW1lbnRUaXRsZTogJ0luY3JlbWVudCB2YWx1ZScsIGRlY3JlbWVudFRpdGxlOiAnRGVjcmVtZW50IHZhbHVlJywgcGxhY2Vob2xkZXI6ICcnIH07XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSBuZXcgZWoyX2Jhc2VfMS5MMTBuKCdudW1lcmljdGV4dGJveCcsIGxvY2FsZVRleHQsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdHlsZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmlucHV0TmFtZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmN1bHR1cmVJbmZvID0ge307XG4gICAgICAgICAgICB0aGlzLmluaXRDdWx0dXJlSW5mbygpO1xuICAgICAgICAgICAgdGhpcy5pbml0Q3VsdHVyZUZ1bmMoKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICB0aGlzLnByZXZWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlTWluTWF4KCk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlU3RlcCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBsYWNlaG9sZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlV3JhcHBlcigpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dTcGluQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BpbkJ0bkNyZWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZCh0aGlzLndpZHRoKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY29udGFpbmVyLCB7ICd3aWR0aCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdCh0aGlzLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gbnVsbCAmJiAhaXNOYU4odGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVjaW1hbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHZhbHVlOiB0aGlzLnJvdW5kTnVtYmVyKHRoaXMudmFsdWUsIHRoaXMuZGVjaW1hbHMpIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuY2hlY2tBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBbJ3ZhbHVlJywgJ21pbicsICdtYXgnLCAnc3RlcCcsICdkaXNhYmxlZCcsICdyZWFkb25seScsICdzdHlsZScsICduYW1lJ107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGF0dHJpYnV0ZXNfMSA9IGF0dHJpYnV0ZXM7IF9pIDwgYXR0cmlidXRlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gYXR0cmlidXRlc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXNhYmxlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuYWJsZWQgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApID09PSAnZGlzYWJsZWQnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCkgPT09ICd0cnVlJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBlbmFibGVkOiBlbmFibGVkIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVhZG9ubHknOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkb25seSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCkgPT09ICdyZWFkb25seSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHJlYWRvbmx5OiByZWFkb25seSB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0eWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0U3R5bGUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmFtZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dE5hbWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKHByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmluc3RhbmNlLmdldE51bWJlclBhcnNlcih7IGZvcm1hdDogJ24nIH0pKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUocHJvcCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgIT09IG51bGwgJiYgIWlzTmFOKHZhbHVlKSkgfHwgKHByb3AgPT09ICd2YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyhlajJfYmFzZV80LnNldFZhbHVlKHByb3AsIHZhbHVlLCB7fSksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnVwZGF0ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgcGxhY2Vob2xkZXI6IHRoaXMubDEwbi5nZXRDb25zdGFudCgncGxhY2Vob2xkZXInKSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmluaXRDdWx0dXJlRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgZWoyX2Jhc2VfNS5JbnRlcm5hdGlvbmFsaXphdGlvbih0aGlzLmxvY2FsZSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5pbml0Q3VsdHVyZUluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmN1bHR1cmVJbmZvLmZvcm1hdCA9IHRoaXMuZm9ybWF0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuZ2V0VmFsdWUoJ2N1cnJlbmN5JywgdGhpcykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKCdjdXJyZW5jeScsIHRoaXMuY3VycmVuY3ksIHRoaXMuY3VsdHVyZUluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuY3JlYXRlV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dE9iaiA9IGlucHV0XzEuSW5wdXQuY3JlYXRlSW5wdXQoe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBjdXN0b21UYWc6IHRoaXMuYW5ndWxhclRhZ05hbWUsXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IHRoaXMuZmxvYXRMYWJlbFR5cGUsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICByZWFkb25seTogdGhpcy5yZWFkb25seSxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiB0aGlzLmNzc0NsYXNzLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0aGlzLmVuYWJsZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gaW5wdXRPYmouY29udGFpbmVyO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hZGRDbGFzcyhbdGhpcy5jb250YWluZXJdLCBST09UKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRvbmx5KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAnYXJpYS1yZWFkb25seSc6ICd0cnVlJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGlkZGVuSW5wdXQgPSAoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgYXR0cnM6IHsgdHlwZTogJ2hpZGRlbicgfSB9KSk7XG4gICAgICAgICAgICB0aGlzLmlucHV0TmFtZSA9IHRoaXMuaW5wdXROYW1lICE9PSBudWxsID8gdGhpcy5pbnB1dE5hbWUgOiB0aGlzLmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCduYW1lJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5oaWRkZW5JbnB1dCwgeyAnbmFtZSc6IHRoaXMuaW5wdXROYW1lIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QmVmb3JlKHRoaXMuaGlkZGVuSW5wdXQsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dFN0eWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuY29udGFpbmVyLCB7ICdzdHlsZSc6IHRoaXMuaW5wdXRTdHlsZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnNwaW5CdG5DcmVhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3BpbkRvd24gPSBpbnB1dF8xLklucHV0LmFwcGVuZFNwYW4oU1BJTklDT04gKyAnICcgKyBTUElORE9XTiwgdGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuc3BpbkRvd24sIHtcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ2RlY3JlbWVudFRpdGxlJyksXG4gICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ2RlY3JlbWVudFRpdGxlJylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zcGluVXAgPSBpbnB1dF8xLklucHV0LmFwcGVuZFNwYW4oU1BJTklDT04gKyAnICcgKyBTUElOVVAsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLnNwaW5VcCwge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnaW5jcmVtZW50VGl0bGUnKSxcbiAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnaW5jcmVtZW50VGl0bGUnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndpcmVTcGluQnRuRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS52YWxpZGF0ZU1pbk1heCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghKHR5cGVvZiAodGhpcy5taW4pID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odGhpcy5taW4pKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IG1pbjogLShOdW1iZXIuTUFYX1ZBTFVFKSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKHR5cGVvZiAodGhpcy5tYXgpID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odGhpcy5tYXgpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IG1heDogTnVtYmVyLk1BWF9WQUxVRSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRlY2ltYWxzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWluICE9PSAtKE51bWJlci5NQVhfVkFMVUUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IG1pbjogdGhpcy5pbnN0YW5jZS5nZXROdW1iZXJQYXJzZXIoeyBmb3JtYXQ6ICduJyB9KSh0aGlzLmZvcm1hdHRlZFZhbHVlKHRoaXMuZGVjaW1hbHMsIHRoaXMubWluKSkgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heCAhPT0gKE51bWJlci5NQVhfVkFMVUUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IG1heDogdGhpcy5pbnN0YW5jZS5nZXROdW1iZXJQYXJzZXIoeyBmb3JtYXQ6ICduJyB9KSh0aGlzLmZvcm1hdHRlZFZhbHVlKHRoaXMuZGVjaW1hbHMsIHRoaXMubWF4KSkgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgbWluOiB0aGlzLm1pbiA+IHRoaXMubWF4ID8gdGhpcy5tYXggOiB0aGlzLm1pbiB9LCB0cnVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtdmFsdWVtaW4nOiB0aGlzLm1pbi50b1N0cmluZygpLCAnYXJpYS12YWx1ZW1heCc6IHRoaXMubWF4LnRvU3RyaW5nKCkgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5mb3JtYXR0ZWRWYWx1ZSA9IGZ1bmN0aW9uIChkZWNpbWFscywgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmdldE51bWJlckZvcm1hdCh7XG4gICAgICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiBkZWNpbWFscyxcbiAgICAgICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IGRlY2ltYWxzLCB1c2VHcm91cGluZzogZmFsc2VcbiAgICAgICAgICAgIH0pKHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnZhbGlkYXRlU3RlcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlY2ltYWxzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgc3RlcDogdGhpcy5pbnN0YW5jZS5nZXROdW1iZXJQYXJzZXIoeyBmb3JtYXQ6ICduJyB9KSh0aGlzLmZvcm1hdHRlZFZhbHVlKHRoaXMuZGVjaW1hbHMsIHRoaXMuc3RlcCkpIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuYWN0aW9uID0gZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5pc0ZvY3VzZWQgPyB0aGlzLmluc3RhbmNlLmdldE51bWJlclBhcnNlcih7IGZvcm1hdDogJ24nIH0pKHRoaXMuZWxlbWVudC52YWx1ZSkgOiB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZSh0aGlzLnBlcmZvcm1BY3Rpb24odmFsdWUsIHRoaXMuc3RlcCwgb3BlcmF0aW9uKSk7XG4gICAgICAgICAgICB0aGlzLnJhaXNlQ2hhbmdlRXZlbnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmNoZWNrRXJyb3JDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlQ2xhc3MoW3RoaXMuY29udGFpbmVyXSwgRVJST1IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hZGRDbGFzcyhbdGhpcy5jb250YWluZXJdLCBFUlJPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLWludmFsaWQnOiB0aGlzLmlzVmFsaWRTdGF0ZSA/ICdmYWxzZScgOiAndHJ1ZScgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5mb2N1c0luLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdibHVyJywgdGhpcy5mb2N1c091dCwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAna2V5ZG93bicsIHRoaXMua2V5RG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2tleXByZXNzJywgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NoYW5nZScsIHRoaXMuY2hhbmdlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAncGFzdGUnLCB0aGlzLnBhc3RlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS53aXJlU3BpbkJ0bkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNwaW5VcCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5tb3VzZURvd25PblNwaW5uZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuc3BpbkRvd24sIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMubW91c2VEb3duT25TcGlubmVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNwaW5VcCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMubW91c2VVcE9uU3Bpbm5lciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zcGluRG93biwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMubW91c2VVcE9uU3Bpbm5lciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zcGluVXAsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy50b3VjaE1vdmVPblNwaW5uZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuc3BpbkRvd24sIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy50b3VjaE1vdmVPblNwaW5uZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5mb2N1c0luKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdibHVyJywgdGhpcy5mb2N1c091dCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAna2V5ZG93bicsIHRoaXMua2V5RG93bkhhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2tleXByZXNzJywgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NoYW5nZScsIHRoaXMuY2hhbmdlSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAncGFzdGUnLCB0aGlzLnBhc3RlSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS51bndpcmVTcGluQnRuRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc3BpblVwLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLm1vdXNlRG93bk9uU3Bpbm5lcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5zcGluRG93biwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5tb3VzZURvd25PblNwaW5uZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc3BpblVwLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZVVwT25TcGlubmVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNwaW5Eb3duLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZVVwT25TcGlubmVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNwaW5VcCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnRvdWNoTW92ZU9uU3Bpbm5lcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5zcGluRG93biwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnRvdWNoTW92ZU9uU3Bpbm5lcik7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5jaGFuZ2VIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyB2YWx1ZTogbnVsbCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXJzZWRJbnB1dCA9IHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyUGFyc2VyKHsgZm9ybWF0OiAnbicgfSkodGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUocGFyc2VkSW5wdXQsIGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnJhaXNlQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZWYWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUV2ZW50QXJncyA9IHsgdmFsdWU6IHRoaXMudmFsdWUsIHByZXZpb3VzVmFsdWU6IHRoaXMucHJldlZhbHVlIH07XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRXZlbnRBcmdzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQubWVyZ2UoZXZlbnRBcmdzLCB0aGlzLmNoYW5nZUV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2VmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnBhc3RlSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYmVmb3JlVXBkYXRlID0gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5udW1lcmljUmVnZXgoKS50ZXN0KF90aGlzLmVsZW1lbnQudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEVsZW1lbnRWYWx1ZShiZWZvcmVVcGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUua2V5RG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uKElOQ1JFTUVOVCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uKERFQ1JFTUVOVCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgdmFsdWU6IG51bGwgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLmluc3RhbmNlLmdldE51bWJlclBhcnNlcih7IGZvcm1hdDogJ24nIH0pKHRoaXMuZWxlbWVudC52YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5wZXJmb3JtQWN0aW9uID0gZnVuY3Rpb24gKHZhbHVlLCBzdGVwLCBvcGVyYXRpb24pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdXBkYXRlZFZhbHVlID0gb3BlcmF0aW9uID09PSBJTkNSRU1FTlQgPyB2YWx1ZSArIHN0ZXAgOiB2YWx1ZSAtIHN0ZXA7XG4gICAgICAgICAgICB1cGRhdGVkVmFsdWUgPSB0aGlzLmNvcnJlY3RSb3VuZGluZyh2YWx1ZSwgc3RlcCwgdXBkYXRlZFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmljdE1vZGUgPyB0aGlzLnRyaW1WYWx1ZSh1cGRhdGVkVmFsdWUpIDogdXBkYXRlZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5jb3JyZWN0Um91bmRpbmcgPSBmdW5jdGlvbiAodmFsdWUsIHN0ZXAsIHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIGZsb2F0RXhwID0gbmV3IFJlZ0V4cCgnWywuXSguKiknKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZVRleHQgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgdmFyIHN0ZXBUZXh0ID0gc3RlcC50b1N0cmluZygpO1xuICAgICAgICAgICAgdmFyIGZsb2F0VmFsdWUgPSBmbG9hdEV4cC50ZXN0KHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdmFyIGZsb2F0U3RlcCA9IGZsb2F0RXhwLnRlc3Qoc3RlcC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGlmIChmbG9hdFZhbHVlIHx8IGZsb2F0U3RlcCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZUNvdW50ID0gZmxvYXRWYWx1ZSA/IGZsb2F0RXhwLmV4ZWModmFsdWUudG9TdHJpbmcoKSlbMF0ubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICB2YXIgc3RlcENvdW50ID0gZmxvYXRTdGVwID8gZmxvYXRFeHAuZXhlYyhzdGVwLnRvU3RyaW5nKCkpWzBdLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgdmFyIG1heCA9IE1hdGgubWF4KHZhbHVlQ291bnQsIHN0ZXBDb3VudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID0gdGhpcy5yb3VuZFZhbHVlKHJlc3VsdCwgbWF4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLnJvdW5kVmFsdWUgPSBmdW5jdGlvbiAocmVzdWx0LCBwcmVjaXNpb24pIHtcbiAgICAgICAgICAgIHByZWNpc2lvbiA9IHByZWNpc2lvbiB8fCAwO1xuICAgICAgICAgICAgdmFyIGRpdmlkZSA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAqPSBkaXZpZGUsIHJlc3VsdCA9IE1hdGgucm91bmQocmVzdWx0KSAvIGRpdmlkZTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUudXBkYXRlVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlY2ltYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5yb3VuZE51bWJlcih2YWx1ZSwgdGhpcy5kZWNpbWFscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZSh2YWx1ZSA9PT0gbnVsbCB8fCBpc05hTih2YWx1ZSkgPyBudWxsIDogdGhpcy5zdHJpY3RNb2RlID8gdGhpcy50cmltVmFsdWUodmFsdWUpIDogdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5yYWlzZUNoYW5nZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmNoYW5nZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoISh2YWx1ZSB8fCB2YWx1ZSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgdmFsdWU6IHZhbHVlIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mRGVjaW1hbHMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGRlY2ltYWxQYXJ0ID0gdmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgICAgIG51bWJlck9mRGVjaW1hbHMgPSAhZGVjaW1hbFBhcnQgfHwgIWRlY2ltYWxQYXJ0Lmxlbmd0aCA/IDAgOiBkZWNpbWFsUGFydC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVjaW1hbHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZEZWNpbWFscyA9IG51bWJlck9mRGVjaW1hbHMgPCB0aGlzLmRlY2ltYWxzID8gbnVtYmVyT2ZEZWNpbWFscyA6IHRoaXMuZGVjaW1hbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyh7IHZhbHVlOiB0aGlzLnJvdW5kTnVtYmVyKHZhbHVlLCBudW1iZXJPZkRlY2ltYWxzKSB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubW9kaWZ5VGV4dCgpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0cmljdE1vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlU3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUubW9kaWZ5VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlIHx8IHRoaXMudmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmZvcm1hdE51bWJlcigpO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VmFsdWUgPSB0aGlzLmlzRm9jdXNlZCA/IHZhbHVlIDogdGhpcy5pbnN0YW5jZS5nZXROdW1iZXJGb3JtYXQodGhpcy5jdWx0dXJlSW5mbykodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50VmFsdWUoZWxlbWVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLXZhbHVlbm93JzogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5JbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50VmFsdWUoJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbklucHV0LnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuc2V0RWxlbWVudFZhbHVlID0gZnVuY3Rpb24gKHZhbCwgZWxlbWVudCkge1xuICAgICAgICAgICAgaW5wdXRfMS5JbnB1dC5zZXRWYWx1ZSh2YWwsIChlbGVtZW50ID8gZWxlbWVudCA6IHRoaXMuZWxlbWVudCksIHRoaXMuZmxvYXRMYWJlbFR5cGUpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUudmFsaWRhdGVTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZFN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlIHx8IHRoaXMudmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmFsaWRTdGF0ZSA9ICEodGhpcy52YWx1ZSA+IHRoaXMubWF4IHx8IHRoaXMudmFsdWUgPCB0aGlzLm1pbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoZWNrRXJyb3JDbGFzcygpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuZm9ybWF0TnVtYmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG51bWJlck9mRGVjaW1hbHM7XG4gICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIHZhciBkZWNpbWFsUGFydCA9IGN1cnJlbnRWYWx1ZS50b1N0cmluZygpLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICBudW1iZXJPZkRlY2ltYWxzID0gIWRlY2ltYWxQYXJ0IHx8ICFkZWNpbWFsUGFydC5sZW5ndGggPyAwIDogZGVjaW1hbFBhcnQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVjaW1hbHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBudW1iZXJPZkRlY2ltYWxzID0gbnVtYmVyT2ZEZWNpbWFscyA8IHRoaXMuZGVjaW1hbHMgPyBudW1iZXJPZkRlY2ltYWxzIDogdGhpcy5kZWNpbWFscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmdldE51bWJlckZvcm1hdCh7XG4gICAgICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiBudW1iZXJPZkRlY2ltYWxzLFxuICAgICAgICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogbnVtYmVyT2ZEZWNpbWFscywgdXNlR3JvdXBpbmc6IGZhbHNlXG4gICAgICAgICAgICB9KSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUudHJpbVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPiB0aGlzLm1heCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1heDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IHRoaXMubWluKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5yb3VuZE51bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJlY2lzaW9uKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICB2YXIgZGVjaW1hbHMgPSBwcmVjaXNpb24gfHwgMDtcbiAgICAgICAgICAgIHZhciByZXN1bHQxID0gcmVzdWx0LnRvU3RyaW5nKCkuc3BsaXQoJ2UnKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IE1hdGgucm91bmQoTnVtYmVyKHJlc3VsdDFbMF0gKyAnZScgKyAocmVzdWx0MVsxXSA/IChOdW1iZXIocmVzdWx0MVsxXSkgKyBkZWNpbWFscykgOiBkZWNpbWFscykpKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQyID0gcmVzdWx0LnRvU3RyaW5nKCkuc3BsaXQoJ2UnKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IE51bWJlcihyZXN1bHQyWzBdICsgJ2UnICsgKHJlc3VsdDJbMV0gPyAoTnVtYmVyKHJlc3VsdDJbMV0pIC0gZGVjaW1hbHMpIDogLWRlY2ltYWxzKSk7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHJlc3VsdC50b0ZpeGVkKGRlY2ltYWxzKSk7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmNhbmNlbEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDAgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50LmtleUNvZGUgPT09IDggfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQud2hpY2gpO1xuICAgICAgICAgICAgdmFyIHRleHQgPSB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0KSArIGN1cnJlbnRDaGFyICsgdGV4dC5zdWJzdHJpbmcodGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMubnVtZXJpY1JlZ2V4KCkudGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLm51bWVyaWNSZWdleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBudW1lcmljT2JqZWN0ID0gZWoyX2Jhc2VfNS5nZXROdW1lcmljT2JqZWN0KHRoaXMubG9jYWxlKTtcbiAgICAgICAgICAgIHZhciBkZWNpbWFsU2VwYXJhdG9yID0gZWoyX2Jhc2VfNC5nZXRWYWx1ZSgnZGVjaW1hbCcsIG51bWVyaWNPYmplY3QpO1xuICAgICAgICAgICAgdmFyIGZyYWN0aW9uUnVsZSA9ICcqJztcbiAgICAgICAgICAgIGlmIChkZWNpbWFsU2VwYXJhdG9yID09PSBERUNJTUFMU0VQQVJBVE9SKSB7XG4gICAgICAgICAgICAgICAgZGVjaW1hbFNlcGFyYXRvciA9ICdcXFxcJyArIGRlY2ltYWxTZXBhcmF0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kZWNpbWFscyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlRSRUdFWFA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kZWNpbWFscyAmJiB0aGlzLnZhbGlkYXRlRGVjaW1hbE9uVHlwZSkge1xuICAgICAgICAgICAgICAgIGZyYWN0aW9uUnVsZSA9ICd7MCwnICsgdGhpcy5kZWNpbWFscyArICd9JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdeKC0pPygoKFxcXFxkKygnICsgZGVjaW1hbFNlcGFyYXRvciArICdcXFxcZCcgKyBmcmFjdGlvblJ1bGUgK1xuICAgICAgICAgICAgICAgICcpPyl8KCcgKyBkZWNpbWFsU2VwYXJhdG9yICsgJ1xcXFxkJyArIGZyYWN0aW9uUnVsZSArICcpKSk/JCcpO1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5tb3VzZVdoZWVsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICAgICAgdmFyIHJhd0V2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICBpZiAocmF3RXZlbnQud2hlZWxEZWx0YSkge1xuICAgICAgICAgICAgICAgIGRlbHRhID0gcmF3RXZlbnQud2hlZWxEZWx0YSAvIDEyMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJhd0V2ZW50LmRldGFpbCkge1xuICAgICAgICAgICAgICAgIGRlbHRhID0gLXJhd0V2ZW50LmRldGFpbCAvIDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVsdGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24oSU5DUkVNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRlbHRhIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uKERFQ1JFTUVOVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmZvY3VzSW4gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZUNsYXNzKFt0aGlzLmNvbnRhaW5lcl0sIEVSUk9SKTtcbiAgICAgICAgICAgIHRoaXMucHJldlZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGlmICgodGhpcy52YWx1ZSB8fCB0aGlzLnZhbHVlID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHZhciBmb3JtYXRWYWx1ZSA9IHRoaXMuZm9ybWF0TnVtYmVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50VmFsdWUoZm9ybWF0VmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1ByZXZGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBmb3JtYXRWYWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnLCB0aGlzLm1vdXNlV2hlZWwsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5mb2N1c091dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJldkZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlXzEgPSB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJldkZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZV8xID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEVsZW1lbnRWYWx1ZSh2YWx1ZV8xLCBlbGVfMSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgdmFsdWU6IG51bGwgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWRJbnB1dCA9IHRoaXMuaW5zdGFuY2UuZ2V0TnVtYmVyUGFyc2VyKHsgZm9ybWF0OiAnbicgfSkodGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHBhcnNlZElucHV0KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnbW91c2V3aGVlbCBET01Nb3VzZVNjcm9sbCcsIHRoaXMubW91c2VXaGVlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5tb3VzZURvd25PblNwaW5uZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJldkZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0RWxlbWVudERhdGEoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0RWxlbWVudERhdGEoZXZlbnQpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoU1BJTlVQKSkgPyBJTkNSRU1FTlQgOiBERUNSRU1FTlQ7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGFyZ2V0LCAnbW91c2VsZWF2ZScsIHRoaXMubW91c2VVcENsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGltZU91dCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMuaXNDYWxsZWQgPSB0cnVlOyBfdGhpcy5hY3Rpb24oYWN0aW9uKTsgfSwgMTUwKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBDbGljaywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS50b3VjaE1vdmVPblNwaW5uZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICAgICAgaWYgKCEodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhTUElOSUNPTikpKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVPdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUubW91c2VVcE9uU3Bpbm5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmV2Rm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmV2Rm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRFbGVtZW50RGF0YShldmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhTUElOVVApKSA/IElOQ1JFTUVOVCA6IERFQ1JFTUVOVDtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZVVwQ2xpY2spO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24oYWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBDbGljayk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5nZXRFbGVtZW50RGF0YSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKChldmVudC53aGljaCAmJiBldmVudC53aGljaCA9PT0gMykgfHwgKGV2ZW50LmJ1dHRvbiAmJiBldmVudC5idXR0b24gPT09IDIpXG4gICAgICAgICAgICAgICAgfHwgIXRoaXMuZW5hYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVPdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5tb3VzZVVwQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVPdXQpO1xuICAgICAgICAgICAgdGhpcy5pc0NhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc3BpblVwLCAnbW91c2VsZWF2ZScsIHRoaXMubW91c2VVcENsaWNrKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNwaW5Eb3duLCAnbW91c2VsZWF2ZScsIHRoaXMubW91c2VVcENsaWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmluY3JlbWVudCA9IGZ1bmN0aW9uIChzdGVwKSB7XG4gICAgICAgICAgICBpZiAoc3RlcCA9PT0gdm9pZCAwKSB7IHN0ZXAgPSB0aGlzLnN0ZXA7IH1cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUodGhpcy5wZXJmb3JtQWN0aW9uKHRoaXMudmFsdWUsIHN0ZXAsIElOQ1JFTUVOVCkpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuZGVjcmVtZW50ID0gZnVuY3Rpb24gKHN0ZXApIHtcbiAgICAgICAgICAgIGlmIChzdGVwID09PSB2b2lkIDApIHsgc3RlcCA9IHRoaXMuc3RlcDsgfVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VWYWx1ZSh0aGlzLnBlcmZvcm1BY3Rpb24odGhpcy52YWx1ZSwgc3RlcCwgREVDUkVNRU5UKSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKHRoaXMuaGlkZGVuSW5wdXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1NwaW5CdXR0b24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVud2lyZVNwaW5CdG5FdmVudHMoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmRldGFjaCh0aGlzLnNwaW5VcCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5kZXRhY2godGhpcy5zcGluRG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2xvbmVFbGVtZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlFbnRpdHkgPSBbJ3ZhbHVlJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50VmFsO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuY29udGFpbmVyLCB7ICd3aWR0aCc6IGVqMl9iYXNlXzQuZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldENzc0NsYXNzKG5ld1Byb3AuY3NzQ2xhc3MsIFt0aGlzLmNvbnRhaW5lcl0sIG9sZFByb3AuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfMS5JbnB1dC5zZXRFbmFibGVkKG5ld1Byb3AuZW5hYmxlZCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfMS5JbnB1dC5zZXRFbmFibGVSdGwobmV3UHJvcC5lbmFibGVSdGwsIFt0aGlzLmNvbnRhaW5lcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlYWRvbmx5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0XzEuSW5wdXQuc2V0UmVhZG9ubHkobmV3UHJvcC5yZWFkb25seSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWRvbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAnYXJpYS1yZWFkb25seSc6ICd0cnVlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtcmVhZG9ubHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwbGFjZWhvbGRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldFBsYWNlaG9sZGVyKG5ld1Byb3AucGxhY2Vob2xkZXIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RlcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSBuZXdQcm9wLnN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlU3RlcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dTcGluQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLnNob3dTcGluQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGluQnRuQ3JlYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuZGV0YWNoKHRoaXMuc3BpblVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmRldGFjaCh0aGlzLnNwaW5Eb3duKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKG5ld1Byb3AudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKHByb3AsIGVqMl9iYXNlXzQuZ2V0VmFsdWUocHJvcCwgbmV3UHJvcCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU1pbk1heCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpY3RNb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaWN0TW9kZSA9IG5ld1Byb3Auc3RyaWN0TW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlU3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Q3VsdHVyZUZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubDEwbi5zZXRMb2NhbGUodGhpcy5sb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc3BpbkRvd24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5hdHRyaWJ1dGVzKHRoaXMuc3BpbkRvd24sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogdGhpcy5sMTBuLmdldENvbnN0YW50KCdkZWNyZW1lbnRUaXRsZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnZGVjcmVtZW50VGl0bGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc3BpblVwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyh0aGlzLnNwaW5VcCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ2luY3JlbWVudFRpdGxlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5sMTBuLmdldENvbnN0YW50KCdpbmNyZW1lbnRUaXRsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBsYWNlaG9sZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldFBsYWNlaG9sZGVyKHRoaXMucGxhY2Vob2xkZXIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1cnJlbmN5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUocHJvcCwgZWoyX2Jhc2VfNC5nZXRWYWx1ZShwcm9wLCBuZXdQcm9wKSwgdGhpcy5jdWx0dXJlSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV80LnNldFZhbHVlKHByb3AsIGVqMl9iYXNlXzQuZ2V0VmFsdWUocHJvcCwgbmV3UHJvcCksIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Q3VsdHVyZUluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVjaW1hbHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNpbWFscyA9IG5ld1Byb3AuZGVjaW1hbHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ251bWVyaWN0ZXh0Ym94JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE51bWVyaWNUZXh0Qm94O1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KC0oTnVtYmVyLk1BWF9WQUxVRSkpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KE51bWJlci5NQVhfVkFMVUUpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcInN0ZXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwic2hvd1NwaW5CdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwicmVhZG9ubHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJlbmFibGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImVuYWJsZVJ0bFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJlbmFibGVQZXJzaXN0ZW5jZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCduMicpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImZvcm1hdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImRlY2ltYWxzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBOdW1lcmljVGV4dEJveC5wcm90b3R5cGUsIFwiY3VycmVuY3lcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJzdHJpY3RNb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcInZhbGlkYXRlRGVjaW1hbE9uVHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdOZXZlcicpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImZsb2F0TGFiZWxUeXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIE51bWVyaWNUZXh0Qm94LnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudCgpXG4gICAgXSwgTnVtZXJpY1RleHRCb3gucHJvdG90eXBlLCBcImNoYW5nZVwiLCB2b2lkIDApO1xuICAgIE51bWVyaWNUZXh0Qm94ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgTnVtZXJpY1RleHRCb3gpO1xuICAgIGV4cG9ydHMuTnVtZXJpY1RleHRCb3ggPSBOdW1lcmljVGV4dEJveDtcbiAgICBleHBvcnRzLm51bWVyaWN0ZXh0Ym94SGVscGVyID0gZWoyX2Jhc2VfMS5DcmVhdGVCdWlsZGVyKE51bWVyaWNUZXh0Qm94KTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbnVtZXJpY3RleHRib3gvbnVtZXJpY3RleHRib3guanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDTEFTU05BTUVTID0ge1xuICAgICAgICBSVEw6ICdlLXJ0bCcsXG4gICAgICAgIERJU0FCTEU6ICdlLWRpc2FibGVkJyxcbiAgICAgICAgSU5QVVQ6ICdlLWlucHV0JyxcbiAgICAgICAgSU5QVVRHUk9VUDogJ2UtaW5wdXQtZ3JvdXAnLFxuICAgICAgICBGTE9BVElOUFVUOiAnZS1mbG9hdC1pbnB1dCcsXG4gICAgICAgIEZMT0FUTElORTogJ2UtZmxvYXQtbGluZScsXG4gICAgICAgIEZMT0FUVEVYVDogJ2UtZmxvYXQtdGV4dCcsXG4gICAgICAgIENMRUFSSUNPTjogJ2UtY2xlYXItaWNvbicsXG4gICAgICAgIENMRUFSSUNPTkhJREU6ICdlLWNsZWFyLWljb24taGlkZScsXG4gICAgICAgIExBQkVMVE9QOiAnZS1sYWJlbC10b3AnLFxuICAgICAgICBMQUJFTEJPVFRPTTogJ2UtbGFiZWwtYm90dG9tJyxcbiAgICAgICAgTk9GTE9BVExBQkVMOiAnZS1uby1mbG9hdC1sYWJlbCcsXG4gICAgICAgIElOUFVUQ1VTVE9NVEFHOiAnZS1pbnB1dC1jdXN0b20tdGFnJyxcbiAgICAgICAgRkxPQVRDVVNUT01UQUc6ICdlLWZsb2F0LWN1c3RvbS10YWcnXG4gICAgfTtcbiAgICB2YXIgSW5wdXQ7XG4gICAgKGZ1bmN0aW9uIChJbnB1dCkge1xuICAgICAgICB2YXIgcHJpdmF0ZUlucHV0T2JqID0ge1xuICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLFxuICAgICAgICAgICAgYnV0dG9uczogW10sXG4gICAgICAgICAgICBjbGVhckJ1dHRvbjogbnVsbFxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbnB1dChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRPYmplY3QgPSB7IGNvbnRhaW5lcjogbnVsbCwgYnV0dG9uczogW10sIGNsZWFyQnV0dG9uOiBudWxsIH07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmZsb2F0TGFiZWxUeXBlKSB8fCBhcmdzLmZsb2F0TGFiZWxUeXBlID09PSAnTmV2ZXInKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyID0gY3JlYXRlSW5wdXRDb250YWluZXIoYXJncywgQ0xBU1NOQU1FUy5JTlBVVEdST1VQLCBDTEFTU05BTUVTLklOUFVUQ1VTVE9NVEFHLCAnc3BhbicpO1xuICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpbnB1dE9iamVjdC5jb250YWluZXIsIGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYXJncy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5JTlBVVCk7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyLmFwcGVuZENoaWxkKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVGbG9hdGluZ0lucHV0KGFyZ3MsIGlucHV0T2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnB1dC1ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnB1dC1ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wcm9wZXJ0aWVzKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnByb3BlcnRpZXMuc2hvd0NsZWFyQnV0dG9uKSAmJiBhcmdzLnByb3BlcnRpZXMuc2hvd0NsZWFyQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY2xlYXJCdXR0b24gPSBjcmVhdGVDbGVhckJ1dHRvbihhcmdzLmVsZW1lbnQsIGlucHV0T2JqZWN0LmNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0T2JqZWN0LmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtpbnB1dE9iamVjdC5jb250YWluZXJdLCBDTEFTU05BTUVTLklOUFVUR1JPVVApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmJ1dHRvbnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuYnV0dG9ucy5wdXNoKGFwcGVuZFNwYW4oYXJncy5idXR0b25zW2ldLCBpbnB1dE9iamVjdC5jb250YWluZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dE9iamVjdCA9IHNldFByb3BlcnR5VmFsdWUoYXJncywgaW5wdXRPYmplY3QpO1xuICAgICAgICAgICAgcHJpdmF0ZUlucHV0T2JqID0gaW5wdXRPYmplY3Q7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQuY3JlYXRlSW5wdXQgPSBjcmVhdGVJbnB1dDtcbiAgICAgICAgZnVuY3Rpb24gX2ZvY3VzRm4oKSB7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBnZXRQYXJlbnROb2RlKHRoaXMpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZmxvYXQtdGV4dCcpWzBdO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMVE9QKTtcbiAgICAgICAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtsYWJlbF0sIENMQVNTTkFNRVMuTEFCRUxCT1RUT00pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIF9ibHVyRm4oKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50Tm9kZSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF0udmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gcGFyZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZmxvYXQtdGV4dCcpWzBdO1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5MQUJFTFRPUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMVE9QKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMQk9UVE9NKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB3aXJlRmxvYXRpbmdFdmVudHMoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIF9mb2N1c0ZuKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIF9ibHVyRm4pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVud2lyZUZsb2F0aW5nRXZlbnRzKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBfZm9jdXNGbik7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBfYmx1ckZuKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVGbG9hdGluZ0lucHV0KGFyZ3MsIGlucHV0T2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGZsb2F0TGluZWxlbWVudDtcbiAgICAgICAgICAgIHZhciBmbG9hdExhYmVsRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChhcmdzLmZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICB3aXJlRmxvYXRpbmdFdmVudHMoYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGlucHV0T2JqZWN0LmNvbnRhaW5lcikpIHtcbiAgICAgICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIgPSBjcmVhdGVJbnB1dENvbnRhaW5lcihhcmdzLCBDTEFTU05BTUVTLkZMT0FUSU5QVVQsIENMQVNTTkFNRVMuRkxPQVRDVVNUT01UQUcsICdkaXYnKTtcbiAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW5wdXRPYmplY3QuY29udGFpbmVyLCBhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MuY3VzdG9tVGFnKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLkZMT0FUQ1VTVE9NVEFHKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZsb2F0TGluZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTEFTU05BTUVTLkZMT0FUTElORSB9KTtcbiAgICAgICAgICAgIGZsb2F0TGFiZWxFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsYWJlbCcsIHsgY2xhc3NOYW1lOiBDTEFTU05BTUVTLkZMT0FUVEVYVCB9KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmVsZW1lbnQuaWQpICYmIGFyZ3MuZWxlbWVudC5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsRWxlbWVudC5pZCA9ICdsYWJlbF8nICsgYXJncy5lbGVtZW50LmlkLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXMoYXJncy5lbGVtZW50LCB7ICdhcmlhLWxhYmVsbGVkYnknOiBmbG9hdExhYmVsRWxlbWVudC5pZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmVsZW1lbnQucGxhY2Vob2xkZXIpICYmIGFyZ3MuZWxlbWVudC5wbGFjZWhvbGRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsRWxlbWVudC5pbm5lckhUTUwgPSBhcmdzLmVsZW1lbnQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnByb3BlcnRpZXMpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MucHJvcGVydGllcy5wbGFjZWhvbGRlcikgJiZcbiAgICAgICAgICAgICAgICBhcmdzLnByb3BlcnRpZXMucGxhY2Vob2xkZXIgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbEVsZW1lbnQuaW5uZXJIVE1MID0gYXJncy5wcm9wZXJ0aWVzLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmbG9hdExhYmVsRWxlbWVudC5pbm5lckhUTUwpIHtcbiAgICAgICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLk5PRkxPQVRMQUJFTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dE9iamVjdC5jb250YWluZXIuYXBwZW5kQ2hpbGQoYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlucHV0T2JqZWN0LmNvbnRhaW5lci5hcHBlbmRDaGlsZChmbG9hdExpbmVsZW1lbnQpO1xuICAgICAgICAgICAgaW5wdXRPYmplY3QuY29udGFpbmVyLmFwcGVuZENoaWxkKGZsb2F0TGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZUxhYmVsU3RhdGUoYXJncy5lbGVtZW50LnZhbHVlLCBmbG9hdExhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoYXJncy5mbG9hdExhYmVsVHlwZSA9PT0gJ0Fsd2F5cycpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRMYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuTEFCRUxCT1RUT00pKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2Zsb2F0TGFiZWxFbGVtZW50XSwgQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2Zsb2F0TGFiZWxFbGVtZW50XSwgQ0xBU1NOQU1FUy5MQUJFTFRPUCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5mbG9hdExhYmVsVHlwZSA9PT0gJ0F1dG8nKSB7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUxhYmVsU3RhdGUoYXJncy5lbGVtZW50LnZhbHVlLCBmbG9hdExhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGFiZWxTdGF0ZShhcmdzLmVsZW1lbnQudmFsdWUsIGZsb2F0TGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eVZhbHVlKGFyZ3MsIGlucHV0T2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhhcmdzLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3NzQ2xhc3MoYXJncy5wcm9wZXJ0aWVzLmNzc0NsYXNzLCBbaW5wdXRPYmplY3QuY29udGFpbmVyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbmFibGVkKGFyZ3MucHJvcGVydGllcy5lbmFibGVkLCBhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbmFibGVSdGwoYXJncy5wcm9wZXJ0aWVzLmVuYWJsZVJ0bCwgW2lucHV0T2JqZWN0LmNvbnRhaW5lcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGxhY2Vob2xkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYWNlaG9sZGVyKGFyZ3MucHJvcGVydGllcy5wbGFjZWhvbGRlciwgYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlYWRvbmx5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZWFkb25seShhcmdzLnByb3BlcnRpZXMucmVhZG9ubHksIGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSWNvblN0YXRlKHZhbHVlLCBidXR0b24pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2J1dHRvbl0sIENMQVNTTkFNRVMuQ0xFQVJJQ09OSElERSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUxhYmVsU3RhdGUodmFsdWUsIGxhYmVsKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtsYWJlbF0sIENMQVNTTkFNRVMuTEFCRUxUT1ApO1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbbGFiZWxdLCBDTEFTU05BTUVTLkxBQkVMQk9UVE9NKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuTEFCRUxUT1ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW2xhYmVsXSwgQ0xBU1NOQU1FUy5MQUJFTFRPUCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2xhYmVsXSwgQ0xBU1NOQU1FUy5MQUJFTEJPVFRPTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZShlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsZWFyQnV0dG9uKGVsZW1lbnQsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBDTEFTU05BTUVTLkNMRUFSSUNPTiB9KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHByaXZhdGVJbnB1dE9iai5jb250YWluZXIpICYmXG4gICAgICAgICAgICAgICAgcHJpdmF0ZUlucHV0T2JqLmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3ByaXZhdGVJbnB1dE9iai5jb250YWluZXJdLCBDTEFTU05BTUVTLklOUFVUR1JPVVApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgQ0xBU1NOQU1FUy5DTEVBUklDT05ISURFKTtcbiAgICAgICAgICAgIHdpcmVDbGVhckJ0bkV2ZW50cyhlbGVtZW50LCBidXR0b24pO1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB3aXJlQ2xlYXJCdG5FdmVudHMoZWxlbWVudCwgYnV0dG9uKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLkRJU0FCTEUpIHx8IGVsZW1lbnQucmVhZE9ubHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUljb25TdGF0ZShlbGVtZW50LnZhbHVlLCBidXR0b24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlSWNvblN0YXRlKGVsZW1lbnQudmFsdWUsIGJ1dHRvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBlajJfYmFzZV8xLmFkZENsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpOyB9LCAyMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVMYWJlbChlbGVtZW50LCBmbG9hdExhYmVsVHlwZSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLkZMT0FUSU5QVVQpICYmIGZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBnZXRQYXJlbnROb2RlKGVsZW1lbnQpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZmxvYXQtdGV4dCcpWzBdO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUxhYmVsU3RhdGUoZWxlbWVudC52YWx1ZSwgbGFiZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUlucHV0Q29udGFpbmVyKGFyZ3MsIGNsYXNzTmFtZSwgdGFnQ2xhc3MsIHRhZykge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lcjtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLmN1c3RvbVRhZykpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoYXJncy5jdXN0b21UYWcsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGFnQ2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KHRhZywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUsIGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlLCBjbGVhckJ1dHRvbikge1xuICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKCghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmbG9hdExhYmVsVHlwZSkpICYmIGZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUxhYmVsKGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjbGVhckJ1dHRvbikgJiYgY2xlYXJCdXR0b24pIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IHBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDTEFTU05BTUVTLkNMRUFSSUNPTilbMF07XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUgJiYgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5wdXQtZm9jdXMnKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtidXR0b25dLCBDTEFTU05BTUVTLkNMRUFSSUNPTkhJREUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbYnV0dG9uXSwgQ0xBU1NOQU1FUy5DTEVBUklDT05ISURFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQuc2V0VmFsdWUgPSBzZXRWYWx1ZTtcbiAgICAgICAgZnVuY3Rpb24gc2V0Q3NzQ2xhc3MoY3NzQ2xhc3MsIGVsZW1lbnRzLCBvbGRDbGFzcykge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKG9sZENsYXNzKSAmJiBvbGRDbGFzcyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKGVsZW1lbnRzLCBvbGRDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3NzQ2xhc3MpICYmIGNzc0NsYXNzICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoZWxlbWVudHMsIGNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5zZXRDc3NDbGFzcyA9IHNldENzc0NsYXNzO1xuICAgICAgICBmdW5jdGlvbiBzZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlciwgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLkZMT0FUSU5QVVQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHBsYWNlaG9sZGVyKSAmJiBwbGFjZWhvbGRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTTkFNRVMuRkxPQVRURVhUKVswXS50ZXh0Q29udGVudCA9IHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5OT0ZMT0FUTEFCRUwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuTk9GTE9BVExBQkVMKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTTkFNRVMuRkxPQVRURVhUKVswXS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwbGFjZWhvbGRlcikgJiYgcGxhY2Vob2xkZXIgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhlbGVtZW50LCB7ICdwbGFjZWhvbGRlcic6IHBsYWNlaG9sZGVyLCAnYXJpYS1wbGFjZWhvbGRlcic6IHBsYWNlaG9sZGVyIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXBsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LnNldFBsYWNlaG9sZGVyID0gc2V0UGxhY2Vob2xkZXI7XG4gICAgICAgIGZ1bmN0aW9uIHNldFJlYWRvbmx5KGlzUmVhZG9ubHksIGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlKSB7XG4gICAgICAgICAgICBpZiAoaXNSZWFkb25seSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhlbGVtZW50LCB7IHJlYWRvbmx5OiAnJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZsb2F0TGFiZWxUeXBlKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlTGFiZWwoZWxlbWVudCwgZmxvYXRMYWJlbFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LnNldFJlYWRvbmx5ID0gc2V0UmVhZG9ubHk7XG4gICAgICAgIGZ1bmN0aW9uIHNldEVuYWJsZVJ0bChpc1J0bCwgZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGlmIChpc1J0bCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoZWxlbWVudHMsIENMQVNTTkFNRVMuUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoZWxlbWVudHMsIENMQVNTTkFNRVMuUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5zZXRFbmFibGVSdGwgPSBzZXRFbmFibGVSdGw7XG4gICAgICAgIGZ1bmN0aW9uIHNldEVuYWJsZWQoaXNFbmFibGUsIGVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZWRBdHRycyA9IHsgJ2Rpc2FibGVkJzogJ2Rpc2FibGVkJywgJ2FyaWEtZGlzYWJsZWQnOiAndHJ1ZScgfTtcbiAgICAgICAgICAgIGlmIChpc0VuYWJsZSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLkRJU0FCTEUpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUF0dHJpYnV0ZXMoZGlzYWJsZWRBdHRycywgZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICBhZGRBdHRyaWJ1dGVzKGRpc2FibGVkQXR0cnMsIGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZsb2F0TGFiZWxUeXBlKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlTGFiZWwoZWxlbWVudCwgZmxvYXRMYWJlbFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LnNldEVuYWJsZWQgPSBzZXRFbmFibGVkO1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVBdHRyaWJ1dGVzKGF0dHJzLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoYXR0cnMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudCA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5ESVNBQkxFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2Rpc2FibGVkJyAmJiBwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLklOUFVUR1JPVVApKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLkRJU0FCTEUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAncGxhY2Vob2xkZXInICYmIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuRkxPQVRJTlBVVCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTTkFNRVMuRkxPQVRURVhUKVswXS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQucmVtb3ZlQXR0cmlidXRlcyA9IHJlbW92ZUF0dHJpYnV0ZXM7XG4gICAgICAgIGZ1bmN0aW9uIGFkZEF0dHJpYnV0ZXMoYXR0cnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhhdHRycyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU05BTUVTLkRJU0FCTEUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnZGlzYWJsZWQnICYmIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTTkFNRVMuSU5QVVRHUk9VUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuRElTQUJMRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdwbGFjZWhvbGRlcicgJiYgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ0xBU1NOQU1FUy5GTE9BVFRFWFQpWzBdLnRleHRDb250ZW50ID0gYXR0cnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0LmFkZEF0dHJpYnV0ZXMgPSBhZGRBdHRyaWJ1dGVzO1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVGbG9hdGluZyhpbnB1dCkge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGlucHV0LmNvbnRhaW5lcjtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb250YWluZXIpICYmIGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FUy5GTE9BVElOUFVUKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dEVsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIENMQVNTTkFNRVMuRkxPQVRURVhUKS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2xlYXJCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmUtY2xlYXItaWNvbicpICE9PSBudWxsO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZGV0YWNoKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIENMQVNTTkFNRVMuRkxPQVRMSU5FKSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2goY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xBU1NOQU1FUy5GTE9BVFRFWFQpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChjb250YWluZXIsIFtDTEFTU05BTUVTLklOUFVUR1JPVVBdLCBbQ0xBU1NOQU1FUy5GTE9BVElOUFVUXSk7XG4gICAgICAgICAgICAgICAgdW53aXJlRmxvYXRpbmdFdmVudHMoaW5wdXRFbGUpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyhpbnB1dEVsZSwgeyAncGxhY2Vob2xkZXInOiBwbGFjZWhvbGRlciB9KTtcbiAgICAgICAgICAgICAgICBpbnB1dEVsZS5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuSU5QVVQpO1xuICAgICAgICAgICAgICAgIGlmICghY2xlYXJCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFbGUucmVtb3ZlQXR0cmlidXRlKCdyZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5yZW1vdmVGbG9hdGluZyA9IHJlbW92ZUZsb2F0aW5nO1xuICAgICAgICBmdW5jdGlvbiBhZGRGbG9hdGluZyhpbnB1dCwgdHlwZSwgcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBlajJfYmFzZV8xLmNsb3Nlc3QoaW5wdXQsICcuJyArIENMQVNTTkFNRVMuSU5QVVRHUk9VUCk7XG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gJ05ldmVyJykge1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21UYWcgPSBjb250YWluZXIudGFnTmFtZTtcbiAgICAgICAgICAgICAgICBjdXN0b21UYWcgPSBjdXN0b21UYWcgIT09ICdESVYnICYmIGN1c3RvbVRhZyAhPT0gJ1NQQU4nID8gY3VzdG9tVGFnIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgZWxlbWVudDogaW5wdXQsIGZsb2F0TGFiZWxUeXBlOiB0eXBlLCBjdXN0b21UYWc6IGN1c3RvbVRhZywgcHJvcGVydGllczogeyBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIgfSB9O1xuICAgICAgICAgICAgICAgIHZhciBpY29uRWxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWNsZWFyLWljb24nKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRPYmogPSB7IGNvbnRhaW5lcjogY29udGFpbmVyIH07XG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLklOUFVUKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVGbG9hdGluZ0lucHV0KGFyZ3MsIGlucHV0T2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChpY29uRWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBpY29uRWxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWlucHV0LWdyb3VwLWljb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoaWNvbkVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5JTlBVVEdST1VQKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbG9hdExpbmUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLicgKyBDTEFTU05BTUVTLkZMT0FUTElORSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbG9hdFRleHQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLicgKyBDTEFTU05BTUVTLkZMT0FUVEVYVCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoaW5wdXQsIGljb25FbGUpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGZsb2F0TGluZSwgaWNvbkVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZmxvYXRUZXh0LCBpY29uRWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSW5wdXQuYWRkRmxvYXRpbmcgPSBhZGRGbG9hdGluZztcbiAgICAgICAgZnVuY3Rpb24gYXBwZW5kU3BhbihpY29uQ2xhc3MsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiBpY29uQ2xhc3MgfSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhDTEFTU05BTUVTLklOUFVUR1JPVVApKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5JTlBVVEdST1VQKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpc2FibGVkJykgJiYgIWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZS1pbnB1dC1idG4tcmlwcGxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gdGhpcztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtYnRuLXJpcHBsZScpOyB9LCA1MDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgICAgICB9XG4gICAgICAgIElucHV0LmFwcGVuZFNwYW4gPSBhcHBlbmRTcGFuO1xuICAgIH0pKElucHV0ID0gZXhwb3J0cy5JbnB1dCB8fCAoZXhwb3J0cy5JbnB1dCA9IHt9KSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2lucHV0L2lucHV0LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYmFzZS9pbmRleFwiLCBcIi4vbWFza2VkdGV4dGJveC9pbmRleFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGluZGV4XzEsIGluZGV4XzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGluZGV4XzEpO1xuICAgIF9fZXhwb3J0KGluZGV4XzIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9tYXNrZWR0ZXh0Ym94L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbWFzay1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgbWFza19iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KG1hc2tfYmFzZV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFza2VkdGV4dGJveC9iYXNlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vaW5wdXQvaW5wdXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbnB1dF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFUlJPUiA9ICdlLWVycm9yJztcbiAgICB2YXIgSU5QVVRHUk9VUCA9ICdlLWlucHV0LWdyb3VwJztcbiAgICB2YXIgRkxPQVRJTlBVVCA9ICdlLWZsb2F0LWlucHV0JztcbiAgICB2YXIgVVRJTE1BU0sgPSAnZS11dGlsaXR5LW1hc2snO1xuICAgIHZhciBUT1BMQUJFTCA9ICdlLWxhYmVsLXRvcCc7XG4gICAgdmFyIEJPVFRPTUxBQkVMID0gJ2UtbGFiZWwtYm90dG9tJztcbiAgICBleHBvcnRzLnJlZ3VsYXJFeHByZXNzaW9ucyA9IHtcbiAgICAgICAgJzAnOiAnWzAtOV0nLFxuICAgICAgICAnOSc6ICdbMC05IF0nLFxuICAgICAgICAnIyc6ICdbMC05ICstXScsXG4gICAgICAgICdMJzogJ1tBLVphLXpdJyxcbiAgICAgICAgJz8nOiAnW0EtWmEteiBdJyxcbiAgICAgICAgJyYnOiAnW15cXHg3ZiBdKycsXG4gICAgICAgICdDJzogJ1teXFx4N2ZdKycsXG4gICAgICAgICdBJzogJ1tBLVphLXowLTldJyxcbiAgICAgICAgJ2EnOiAnW0EtWmEtejAtOSBdJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGNyZWF0ZU1hc2soKSB7XG4gICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ3JvbGUnOiAndGV4dGJveCcsICdhdXRvY29tcGxldGUnOiAnb2ZmJywgJ2F1dG9jb3JyZWN0JzogJ29mZicsICdhdXRvY2FwaXRhbGl6ZSc6ICdvZmYnLFxuICAgICAgICAgICAgJ3NwZWxsY2hlY2snOiAnZmFsc2UnLCAnYXJpYS1saXZlJzogJ2Fzc2VydGl2ZScsICdhcmlhLXZhbHVlbm93JzogJycgfSk7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHZhciBzcGxpdE1hc2sgPSB0aGlzLm1hc2suc3BsaXQoJ10nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BsaXRNYXNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwbGl0TWFza1tpXVtzcGxpdE1hc2tbaV0ubGVuZ3RoIC0gMV0gPT09ICdcXFxcJykge1xuICAgICAgICAgICAgICAgICAgICBzcGxpdE1hc2tbaV0gPSBzcGxpdE1hc2tbaV0gKyAnXSc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGxpdElubmVyTWFzayA9IHNwbGl0TWFza1tpXS5zcGxpdCgnWycpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNwbGl0SW5uZXJNYXNrLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRJbm5lck1hc2tbal1bc3BsaXRJbm5lck1hc2tbal0ubGVuZ3RoIC0gMV0gPT09ICdcXFxcJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0SW5uZXJNYXNrW2pdID0gc3BsaXRJbm5lck1hc2tbal0gKyAnWyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoSW50b1JlZ0V4cENvbGxlYy5jYWxsKHRoaXMsIHNwbGl0SW5uZXJNYXNrW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0SW5uZXJNYXNrID0gc3BsaXRNYXNrW2ldLnNwbGl0KCdbJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdElubmVyTWFzay5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hrU3BhY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3BsaXRJbm5lck1hc2subGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRJbm5lck1hc2tbal0gPT09ICdcXFxcJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlYy5wdXNoKCdbJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuTWFzayArPSBzcGxpdElubmVyTWFza1tqXSArICdbJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3BsaXRJbm5lck1hc2tbal0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoa1NwYWNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHNwbGl0SW5uZXJNYXNrW2pdICE9PSAnJyAmJiBjaGtTcGFjZSkgfHwgaiA9PT0gc3BsaXRJbm5lck1hc2subGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlYy5wdXNoKCdbJyArIHNwbGl0SW5uZXJNYXNrW2pdICsgJ10nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5NYXNrICs9IHRoaXMucHJvbXB0Q2hhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hrU3BhY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hJbnRvUmVnRXhwQ29sbGVjLmNhbGwodGhpcywgc3BsaXRJbm5lck1hc2tbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hJbnRvUmVnRXhwQ29sbGVjLmNhbGwodGhpcywgc3BsaXRJbm5lck1hc2tbMF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lc2NhcGVNYXNrVmFsdWUgPSB0aGlzLmhpZGRlbk1hc2s7XG4gICAgICAgICAgICB0aGlzLnByb21wdE1hc2sgPSB0aGlzLmhpZGRlbk1hc2sucmVwbGFjZSgvWzA5P0xDQWEjJl0vZywgdGhpcy5wcm9tcHRDaGFyKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1c3RvbUNoYXJhY3RlcnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb21wdE1hc2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVyc1t0aGlzLnByb21wdE1hc2tbaV1dKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9tcHRNYXNrID0gdGhpcy5wcm9tcHRNYXNrLnJlcGxhY2UobmV3IFJlZ0V4cCh0aGlzLnByb21wdE1hc2tbaV0sICdnJyksIHRoaXMucHJvbXB0Q2hhcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXNjYXBlTnVtYmVyID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpZGRlbk1hc2subWF0Y2gobmV3IFJlZ0V4cCgvXFxcXC8pKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oaWRkZW5NYXNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPj0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlTnVtYmVyID0gdGhpcy5oaWRkZW5NYXNrLmxlbmd0aCAtIHRoaXMucHJvbXB0TWFzay5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGogPSBqIC0gZXNjYXBlTnVtYmVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGkgPiAwICYmIHRoaXMuaGlkZGVuTWFza1tpIC0gMV0gIT09ICdcXFxcJykgJiYgKHRoaXMuaGlkZGVuTWFza1tpXSA9PT0gJz4nIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbk1hc2tbaV0gPT09ICc8JyB8fCB0aGlzLmhpZGRlbk1hc2tbaV0gPT09ICd8JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvbXB0TWFzayA9IHRoaXMucHJvbXB0TWFzay5zdWJzdHJpbmcoMCwgaikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvbXB0TWFzay5zdWJzdHJpbmcoKGkgKyAxKSAtIGVzY2FwZU51bWJlciwgdGhpcy5wcm9tcHRNYXNrLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVzY2FwZU1hc2tWYWx1ZSA9IHRoaXMuZXNjYXBlTWFza1ZhbHVlLnN1YnN0cmluZygwLCBqKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lc2NhcGVNYXNrVmFsdWUuc3Vic3RyaW5nKChpICsgMSkgLSBlc2NhcGVOdW1iZXIsIHRoaXMuZXNjYXBlTWFza1ZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZGVuTWFza1tpXSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb21wdE1hc2sgPSB0aGlzLnByb21wdE1hc2suc3Vic3RyaW5nKDAsIGopICsgdGhpcy5oaWRkZW5NYXNrW2kgKyAxXSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9tcHRNYXNrLnN1YnN0cmluZygoaSArIDIpIC0gZXNjYXBlTnVtYmVyLCB0aGlzLnByb21wdE1hc2subGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXNjYXBlTWFza1ZhbHVlID0gdGhpcy5lc2NhcGVNYXNrVmFsdWUuc3Vic3RyaW5nKDAsIGopICsgdGhpcy5lc2NhcGVNYXNrVmFsdWVbaSArIDFdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVzY2FwZU1hc2tWYWx1ZS5zdWJzdHJpbmcoKGkgKyAyKSAtIGVzY2FwZU51bWJlciwgdGhpcy5lc2NhcGVNYXNrVmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvbXB0TWFzayA9IHRoaXMucHJvbXB0TWFzay5yZXBsYWNlKC9bPnw8XS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lc2NhcGVNYXNrVmFsdWUgPSB0aGlzLmhpZGRlbk1hc2sucmVwbGFjZSgvWz58PF0vZywgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAnYXJpYS1pbnZhbGlkJzogJ2ZhbHNlJyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmNyZWF0ZU1hc2sgPSBjcmVhdGVNYXNrO1xuICAgIGZ1bmN0aW9uIGFwcGx5TWFzaygpIHtcbiAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgdGhpcy5wcm9tcHRNYXNrKTtcbiAgICAgICAgc2V0TWFza1ZhbHVlLmNhbGwodGhpcywgdGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIGV4cG9ydHMuYXBwbHlNYXNrID0gYXBwbHlNYXNrO1xuICAgIGZ1bmN0aW9uIHdpcmVFdmVudHMoKSB7XG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgbWFza0lucHV0S2V5RG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAna2V5cHJlc3MnLCBtYXNrSW5wdXRLZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAna2V5dXAnLCBtYXNrSW5wdXRLZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXMnLCBtYXNrSW5wdXRGb2N1c0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnYmx1cicsIG1hc2tJbnB1dEJsdXJIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ3Bhc3RlJywgbWFza0lucHV0UGFzdGVIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2N1dCcsIG1hc2tJbnB1dEN1dEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZHJvcCcsIG1hc2tJbnB1dERyb3BIYW5kbGVyLCB0aGlzKTtcbiAgICB9XG4gICAgZXhwb3J0cy53aXJlRXZlbnRzID0gd2lyZUV2ZW50cztcbiAgICBmdW5jdGlvbiB1bndpcmVFdmVudHMoKSB7XG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgbWFza0lucHV0S2V5RG93bkhhbmRsZXIpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAna2V5cHJlc3MnLCBtYXNrSW5wdXRLZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAna2V5dXAnLCBtYXNrSW5wdXRLZXlVcEhhbmRsZXIpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnZm9jdXMnLCBtYXNrSW5wdXRGb2N1c0hhbmRsZXIpO1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnYmx1cicsIG1hc2tJbnB1dEJsdXJIYW5kbGVyKTtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ3Bhc3RlJywgbWFza0lucHV0UGFzdGVIYW5kbGVyKTtcbiAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2N1dCcsIG1hc2tJbnB1dEN1dEhhbmRsZXIpO1xuICAgIH1cbiAgICBleHBvcnRzLnVud2lyZUV2ZW50cyA9IHVud2lyZUV2ZW50cztcbiAgICBmdW5jdGlvbiB1bnN0cmlwcGVkVmFsdWUoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZXhwb3J0cy51bnN0cmlwcGVkVmFsdWUgPSB1bnN0cmlwcGVkVmFsdWU7XG4gICAgZnVuY3Rpb24gc3RyaXBwZWRWYWx1ZShlbGVtZW50KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9ICcnO1xuICAgICAgICB2YXIgayA9IDA7XG4gICAgICAgIHZhciBjaGVja01hc2sgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMpICYmIGVsZW1lbnQudmFsdWUgIT09IHRoaXMucHJvbXB0TWFzaykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjaGVja01hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tNYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1trXSA9PT0gJz4nIHx8IHRoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW2tdID09PSAnPCcgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21SZWdFeHBDb2xsZWNba10gPT09ICd8JyB8fCB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1trXSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tNYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja01hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChlbGVtZW50LnZhbHVlW2ldICE9PSB0aGlzLnByb21wdENoYXIpICYmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1trXSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICgoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5yZWdFeHBDb2xsZWNbdGhpcy5jdXN0b21SZWdFeHBDb2xsZWNba11dKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXN0b21SZWdFeHBDb2xsZWNba10ubGVuZ3RoID4gMiAmJiB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1trXVswXSA9PT0gJ1snICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW2tdW3RoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW2tdLmxlbmd0aCAtIDFdID09PSAnXScpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVycykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVyc1t0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1trXV0pKSkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gZWxlbWVudC52YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICArK2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBleHBvcnRzLnN0cmlwcGVkVmFsdWUgPSBzdHJpcHBlZFZhbHVlO1xuICAgIGZ1bmN0aW9uIHB1c2hJbnRvUmVnRXhwQ29sbGVjKHZhbHVlKSB7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdmFsdWUubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuTWFzayArPSB2YWx1ZVtrXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZVtrXSAhPT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21SZWdFeHBDb2xsZWMucHVzaCh2YWx1ZVtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWFza0lucHV0Rm9jdXNIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1cyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlciAmJiB0aGlzLmVsZW1lbnQudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgdGhpcy5wcm9tcHRNYXNrKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGhpcy5lbGVtZW50LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgX3RoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMubWFza0lucHV0Rm9jdXNIYW5kbGVyID0gbWFza0lucHV0Rm9jdXNIYW5kbGVyO1xuICAgIGZ1bmN0aW9uIG1hc2tJbnB1dEJsdXJIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1cyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIgJiYgdGhpcy5lbGVtZW50LnZhbHVlID09PSB0aGlzLnByb21wdE1hc2sgJiYgdGhpcy5mbG9hdExhYmVsVHlwZSAhPT0gJ0Fsd2F5cycpIHtcbiAgICAgICAgICAgICAgICBzZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsRWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5lLWZsb2F0LXRleHQnKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mbG9hdExhYmVsVHlwZSA9PT0gJ0F1dG8nICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGxhYmVsRWxlbWVudCkgJiYgbGFiZWxFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhUT1BMQUJFTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbbGFiZWxFbGVtZW50XSwgVE9QTEFCRUwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLm1hc2tJbnB1dEJsdXJIYW5kbGVyID0gbWFza0lucHV0Qmx1ckhhbmRsZXI7XG4gICAgZnVuY3Rpb24gbWFza0lucHV0UGFzdGVIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHZhciBzSW5kZXhfMSA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHZhciBlSW5kZXhfMSA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQ7XG4gICAgICAgICAgICB2YXIgb2xkVmFsdWVfMSA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsICcnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF90aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnJlZG9Db2xsZWMubGVuZ3RoID4gMCAmJiBfdGhpcy5yZWRvQ29sbGVjWzBdLnZhbHVlID09PSBfdGhpcy5lbGVtZW50LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc3RyaXBwZWRWYWx1ZS5jYWxsKF90aGlzLCBfdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwoX3RoaXMsIG9sZFZhbHVlXzEpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBzSW5kZXhfMTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IGVJbmRleF8xO1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXNrS2V5UHJlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVWYWx1ZS5jYWxsKF90aGlzLCB2YWx1ZVtpXSwgZmFsc2UsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgfSB3aGlsZSAoaSA8IHZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgX3RoaXMubWFza0tleVByZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtYXNrSW5wdXRDdXRIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHZhciBzSW5kZXhfMiA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHZhciBlSW5kZXggPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kO1xuICAgICAgICAgICAgdGhpcy51bmRvQ29sbGVjLnB1c2goeyB2YWx1ZTogdGhpcy5lbGVtZW50LnZhbHVlLCBzdGFydEluZGV4OiB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQsIGVuZEluZGV4OiB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kIH0pO1xuICAgICAgICAgICAgdmFyIHZhbHVlXzEgPSB0aGlzLmVsZW1lbnQudmFsdWUuc3Vic3RyaW5nKDAsIHNJbmRleF8yKSArIHRoaXMucHJvbXB0TWFzay5zdWJzdHJpbmcoc0luZGV4XzIsIGVJbmRleCkgK1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZS5zdWJzdHJpbmcoZUluZGV4KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKF90aGlzLCB2YWx1ZV8xKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gX3RoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSBzSW5kZXhfMjtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hc2tJbnB1dERyb3BIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGV4cG9ydHMubWFza0lucHV0RHJvcEhhbmRsZXIgPSBtYXNrSW5wdXREcm9wSGFuZGxlcjtcbiAgICBmdW5jdGlvbiBtYXNrSW5wdXRLZXlEb3duSGFuZGxlcihldmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5tYXNrKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gMjI5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgJiYgKGV2ZW50LmtleUNvZGUgPT09IDg5IHx8IGV2ZW50LmtleUNvZGUgPT09IDkwKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZW1vdmVNYXNrSW5wdXRWYWx1ZXMuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTWFza0lucHV0VmFsdWVzLmNhbGwoX3RoaXMsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzdGFydFZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgJiYgKGV2ZW50LmtleUNvZGUgPT09IDg5IHx8IGV2ZW50LmtleUNvZGUgPT09IDkwKSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xsZWMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDkwICYmIHRoaXMudW5kb0NvbGxlYy5sZW5ndGggPiAwICYmIHN0YXJ0VmFsdWUgIT09IHRoaXMudW5kb0NvbGxlY1t0aGlzLnVuZG9Db2xsZWMubGVuZ3RoIC0gMV0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjID0gdGhpcy51bmRvQ29sbGVjW3RoaXMudW5kb0NvbGxlYy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRvQ29sbGVjLnVuc2hpZnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuZWxlbWVudC52YWx1ZSwgc3RhcnRJbmRleDogdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg6IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsIGNvbGxlYy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IGNvbGxlYy5zdGFydEluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID0gY29sbGVjLmVuZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG9Db2xsZWMuc3BsaWNlKHRoaXMudW5kb0NvbGxlYy5sZW5ndGggLSAxLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gODkgJiYgdGhpcy5yZWRvQ29sbGVjLmxlbmd0aCA+IDAgJiYgc3RhcnRWYWx1ZSAhPT0gdGhpcy5yZWRvQ29sbGVjWzBdLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlYyA9IHRoaXMucmVkb0NvbGxlY1swXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bmRvQ29sbGVjLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuZWxlbWVudC52YWx1ZSwgc3RhcnRJbmRleDogdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg6IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsIGNvbGxlYy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IGNvbGxlYy5zdGFydEluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID0gY29sbGVjLmVuZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZG9Db2xsZWMuc3BsaWNlKDAsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtb2JpbGVSZW1vdmVGdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbGxlYztcbiAgICAgICAgdmFyIHNJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgdmFyIGVJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQ7XG4gICAgICAgIGlmICh0aGlzLnJlZG9Db2xsZWMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29sbGVjID0gdGhpcy5yZWRvQ29sbGVjWzBdO1xuICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgY29sbGVjLnZhbHVlKTtcbiAgICAgICAgICAgIGlmICgoY29sbGVjLnN0YXJ0SW5kZXggLSBzSW5kZXgpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gY29sbGVjLnN0YXJ0SW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IGNvbGxlYy5lbmRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IHNJbmRleCArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IGVJbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCB0aGlzLnByb21wdE1hc2spO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IHNJbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLm1vYmlsZVJlbW92ZUZ1bmN0aW9uID0gbW9iaWxlUmVtb3ZlRnVuY3Rpb247XG4gICAgZnVuY3Rpb24gcmVtb3ZlTWFza0lucHV0VmFsdWVzKGV2ZW50KSB7XG4gICAgICAgIHZhciBpc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgb2xkRXZlbnRWYWw7XG4gICAgICAgIHZhciBpc0RlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGggPCB0aGlzLnByb21wdE1hc2subGVuZ3RoKSB7XG4gICAgICAgICAgICBpc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICBtb2JpbGVSZW1vdmVGdW5jdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgb2xkRXZlbnRWYWwgPSB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluaXRTdGFydEluZGV4ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICB2YXIgaW5pdEVuZEluZGV4ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZDtcbiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgIHZhciBlbmRJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQ7XG4gICAgICAgIHZhciBtYXNrVmFsdWUgPSB0aGlzLmhpZGRlbk1hc2sucmVwbGFjZSgvWz58XFxcXDxdL2csICcnKTtcbiAgICAgICAgdmFyIGN1ck1hc2sgPSBtYXNrVmFsdWVbc3RhcnRJbmRleCAtIDFdO1xuICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICBpZiAoaXNSZW1vdmUgfHwgZXZlbnQua2V5Q29kZSA9PT0gOCB8fCBldmVudC5rZXlDb2RlID09PSA0Nikge1xuICAgICAgICAgICAgdGhpcy51bmRvQ29sbGVjLnB1c2goeyB2YWx1ZTogdGhpcy5lbGVtZW50LnZhbHVlLCBzdGFydEluZGV4OiB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQsIGVuZEluZGV4OiBlbmRJbmRleCB9KTtcbiAgICAgICAgICAgIHZhciBtdWx0aXBsZURlbCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPiAwIHx8ICgoZXZlbnQua2V5Q29kZSA9PT0gOCB8fCBldmVudC5rZXlDb2RlID09PSA0NikgJiYgc3RhcnRJbmRleCA8IHRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGhcbiAgICAgICAgICAgICAgICAmJiAoKHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgLSBzdGFydEluZGV4KSAhPT0gdGhpcy5lbGVtZW50LnZhbHVlLmxlbmd0aCkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRJbmRleCAhPT0gZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlRGVsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSA0Nikge1xuICAgICAgICAgICAgICAgICAgICArK2luZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLS1pbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IHN0YXJ0SW5kZXg7IChldmVudC5rZXlDb2RlID09PSA4IHx8IGlzUmVtb3ZlIHx8IG11bHRpcGxlRGVsKSA/IGsgPiBpbmRleCA6IGsgPCBpbmRleDsgKGV2ZW50LmtleUNvZGUgPT09IDggfHwgaXNSZW1vdmUgfHwgbXVsdGlwbGVEZWwpID8gay0tIDogaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyAoZXZlbnQua2V5Q29kZSA9PT0gOCB8fCBpc1JlbW92ZSB8fCBtdWx0aXBsZURlbCkgPyBpID4gMCA6IGkgPCB0aGlzLmVsZW1lbnQudmFsdWUubGVuZ3RoOyAoZXZlbnQua2V5Q29kZSA9PT0gOCB8fCBpc1JlbW92ZSB8fCBtdWx0aXBsZURlbCkgPyBpLS0gOiBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzSW5kZXggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChldmVudC5rZXlDb2RlID09PSA4IHx8IG11bHRpcGxlRGVsKSAmJiAoKGluaXRTdGFydEluZGV4ICE9PSBpbml0RW5kSW5kZXggJiYgaW5pdFN0YXJ0SW5kZXggIT09IHN0YXJ0SW5kZXgpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluaXRTdGFydEluZGV4ID09PSBpbml0RW5kSW5kZXgpKSkgfHwgaXNSZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJNYXNrID0gbWFza1ZhbHVlW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzSW5kZXggPSBzdGFydEluZGV4IC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck1hc2sgPSBtYXNrVmFsdWVbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0luZGV4ID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK3N0YXJ0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLmVsZW1lbnQudmFsdWVbc0luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnJlZ0V4cENvbGxlY1tjdXJNYXNrXSkgJiYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVyc1tjdXJNYXNrXSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCh0aGlzLmhpZGRlbk1hc2tbc0luZGV4XSAhPT0gdGhpcy5wcm9tcHRDaGFyICYmIHRoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW3NJbmRleF1bMF0gIT09ICdbJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1tzSW5kZXhdW3RoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW3NJbmRleF0ubGVuZ3RoIC0gMV0gIT09ICddJykpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLnByb21wdE1hc2tbc0luZGV4XSAhPT0gdGhpcy5wcm9tcHRDaGFyICYmIGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jdXN0b21DaGFyYWN0ZXJzKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID0gc0luZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDQ2ICYmICFtdWx0aXBsZURlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK3RoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21wdF8xID0gdGhpcy5wcm9tcHRDaGFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgc0luZGV4KSArIHByb21wdF8xICsgdmFsdWUuc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIHZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgZWxlbWVudFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSBzSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCFpc0RlbGV0ZWQgJiYgZXZlbnQua2V5Q29kZSA9PT0gOCkgfHwgbXVsdGlwbGVEZWwgfHwgKCFpc0RlbGV0ZWQgJiYgIShldmVudC5rZXlDb2RlID09PSA0NikpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0luZGV4ID0gc3RhcnRJbmRleCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzSW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSB0aGlzLmVsZW1lbnQudmFsdWVbc0luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGluaXRTdGFydEluZGV4ICE9PSBpbml0RW5kSW5kZXgpICYmICh0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPT09IGluaXRTdGFydEluZGV4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy5wcm9tcHRNYXNrW3NJbmRleF0gPT09IHRoaXMucHJvbXB0Q2hhcikgfHwgKChvbGRWYWx1ZSAhPT0gdGhpcy5wcm9tcHRNYXNrW3NJbmRleF0pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucHJvbXB0TWFza1tzSW5kZXhdICE9PSB0aGlzLnByb21wdENoYXIpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVycykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID09PSAwICYmICh0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID09PSB0aGlzLmVsZW1lbnQudmFsdWUubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsIHRoaXMucHJvbXB0TWFzayk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVkb0NvbGxlYy51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5lbGVtZW50LnZhbHVlLCBzdGFydEluZGV4OiB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgICAgZW5kSW5kZXg6IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJpZ2dlck1hc2tDaGFuZ2VFdmVudC5jYWxsKHRoaXMsIGV2ZW50LCBvbGRFdmVudFZhbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWFza0lucHV0S2V5UHJlc3NIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIGlmICgoIWV2ZW50LmN0cmxLZXkpIHx8IChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmNvZGUgIT09ICdLZXlBJyAmJiBldmVudC5jb2RlICE9PSAnS2V5WSdcbiAgICAgICAgICAgICAgICAmJiBldmVudC5jb2RlICE9PSAnS2V5WicgJiYgZXZlbnQuY29kZSAhPT0gJ0tleVgnICYmIGV2ZW50LmNvZGUgIT09ICdLZXlDJyAmJiBldmVudC5jb2RlICE9PSAnS2V5VicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrS2V5UHJlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBldmVudC5rZXk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ1NwYWNlYmFyJykge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmtleUNvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzSW9zSW52YWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlVmFsdWUuY2FsbCh0aGlzLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmtleUNvZGUpLCBldmVudC5jdHJsS2V5LCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNJb3NJbnZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleSAmJiBrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlVmFsdWUuY2FsbCh0aGlzLCBrZXksIGV2ZW50LmN0cmxLZXksIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmlnZ2VyTWFza0NoYW5nZUV2ZW50LmNhbGwodGhpcywgZXZlbnQsIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyTWFza0NoYW5nZUV2ZW50KGV2ZW50LCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jaGFuZ2VFdmVudEFyZ3MpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge307XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUV2ZW50QXJncyA9IHsgdmFsdWU6IHRoaXMuZWxlbWVudC52YWx1ZSwgbWFza2VkVmFsdWU6IHRoaXMuZWxlbWVudC52YWx1ZSwgaXNJbnRlcmFjdGlvbjogZmFsc2UgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUV2ZW50QXJncy52YWx1ZSA9IHN0cmlwcGVkVmFsdWUuY2FsbCh0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRXZlbnRBcmdzLmlzSW50ZXJhY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRXZlbnRBcmdzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKGV2ZW50QXJncywgdGhpcy5jaGFuZ2VFdmVudEFyZ3MpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCBldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtdmFsdWVub3cnOiB0aGlzLmVsZW1lbnQudmFsdWUgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hc2tJbnB1dEtleVVwSGFuZGxlcihldmVudCkge1xuICAgICAgICBpZiAodGhpcy5tYXNrKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1hc2tLZXlQcmVzcyAmJiBldmVudC5rZXlDb2RlID09PSAyMjkpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkRXZlbnRWYWwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlICsgdGhpcy5wcm9tcHRNYXNrO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudmFsdWUubGVuZ3RoID4gdGhpcy5wcm9tcHRNYXNrLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGVkVmFsdWVzID0gdGhpcy5lbGVtZW50LnZhbHVlLmxlbmd0aCAtIHRoaXMucHJvbXB0TWFzay5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWxfMSA9IHRoaXMuZWxlbWVudC52YWx1ZS5zdWJzdHJpbmcoc3RhcnRJbmRleCAtIGFkZGVkVmFsdWVzLCBzdGFydEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5kb0NvbGxlYy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWMgPSB0aGlzLnVuZG9Db2xsZWNbdGhpcy51bmRvQ29sbGVjLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXhfMSA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEV2ZW50VmFsID0gY29sbGVjLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFZhbCA9IGNvbGxlYy52YWx1ZS5zdWJzdHJpbmcoc3RhcnRJbmRleF8xIC0gYWRkZWRWYWx1ZXMsIHN0YXJ0SW5kZXhfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWMgPSB0aGlzLnJlZG9Db2xsZWNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxfMSA9IHZhbF8xLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1NwYWNlID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzQW5kcm9pZCAmJiB2YWxfMSA9PT0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzU3BhY2UgJiYgb2xkVmFsICE9PSB2YWxfMSAmJiBjb2xsZWMudmFsdWUuc3Vic3RyaW5nKHN0YXJ0SW5kZXhfMSAtIGFkZGVkVmFsdWVzLCBzdGFydEluZGV4XzEpICE9PSB2YWxfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlVmFsdWUuY2FsbCh0aGlzLCB2YWxfMSwgZXZlbnQuY3RybEtleSwgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNTcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRVbnN1cHBvcnRlZFZhbHVlcy5jYWxsKHRoaXMsIGV2ZW50LCBzdGFydEluZGV4XzEgLSAxLCB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kIC0gMSwgdmFsXzEsIGV2ZW50LmN0cmxLZXksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEV2ZW50VmFsID0gdGhpcy5wcm9tcHRNYXNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVWYWx1ZS5jYWxsKHRoaXMsIHZhbF8xLCBldmVudC5jdHJsS2V5LCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXNrS2V5UHJlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlck1hc2tDaGFuZ2VFdmVudC5jYWxsKHRoaXMsIGV2ZW50LCBvbGRFdmVudFZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTWFza0Vycm9yLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsID0gc3RyaXBwZWRWYWx1ZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoISgodGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID09PSAwKSAmJiAodGhpcy5wcm9tcHRNYXNrID09PSB0aGlzLmVsZW1lbnQudmFsdWUpICYmIHZhbCA9PT0gJycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2VmFsdWUgPSB2YWw7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyaWdnZXJNYXNrQ2hhbmdlRXZlbnQuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vYmlsZVN3aXBlQ2hlY2soa2V5KSB7XG4gICAgICAgIGlmIChrZXkubGVuZ3RoID4gMSAmJiAoKHRoaXMucHJvbXB0TWFzay5sZW5ndGggKyBrZXkubGVuZ3RoKSA8IHRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGgpKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFZhbHVlID0gdGhpcy5yZWRvQ29sbGVjWzBdLnZhbHVlLnN1YnN0cmluZygwLCB0aGlzLnJlZG9Db2xsZWNbMF0uc3RhcnRJbmRleCkgKyBrZXkgK1xuICAgICAgICAgICAgICAgIHRoaXMucmVkb0NvbGxlY1swXS52YWx1ZS5zdWJzdHJpbmcodGhpcy5yZWRvQ29sbGVjWzBdLnN0YXJ0SW5kZXgsIHRoaXMucmVkb0NvbGxlY1swXS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgZWxlbWVudFZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSB0aGlzLnJlZG9Db2xsZWNbMF0uc3RhcnRJbmRleCArIGtleS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0IC0ga2V5Lmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgLSBrZXkubGVuZ3RoO1xuICAgIH1cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZVZhbHVlKGtleSwgaXNDdHJsS2V5LCBldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMubWFza0tleVByZXNzKSB7XG4gICAgICAgICAgICBtb2JpbGVTd2lwZUNoZWNrLmNhbGwodGhpcywga2V5KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgdmFyIGluaXRTdGFydEluZGV4ID0gc3RhcnRJbmRleDtcbiAgICAgICAgdmFyIGVuZEluZGV4ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZDtcbiAgICAgICAgdmFyIGN1ck1hc2s7XG4gICAgICAgIHZhciBhbGxvd1RleHQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgICAgICB2YXIgZXZlbnRPbGRWYWw7XG4gICAgICAgIHZhciBwcmV2U3VwcG9ydCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleS5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgdmFyIGtleVZhbHVlID0ga2V5W2tdO1xuICAgICAgICAgICAgc3RhcnRJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIGVuZEluZGV4ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvbkVuZDtcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXNrS2V5UHJlc3MgJiYgaW5pdFN0YXJ0SW5kZXggPT09IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCArIGs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCF0aGlzLm1hc2tLZXlQcmVzcyB8fCBzdGFydEluZGV4IDwgdGhpcy5wcm9tcHRNYXNrLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IHRoaXMucHJvbXB0TWFzay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFza1ZhbHVlID0gdGhpcy5lc2NhcGVNYXNrVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGN1ck1hc2sgPSBtYXNrVmFsdWVbc3RhcnRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnJlZ0V4cENvbGxlY1tjdXJNYXNrXSkgJiYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jdXN0b21DaGFyYWN0ZXJzKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVycykgJiYgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1c3RvbUNoYXJhY3RlcnNbY3VyTWFza10pKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICgodGhpcy5oaWRkZW5NYXNrW3N0YXJ0SW5kZXhdICE9PSB0aGlzLnByb21wdENoYXIgJiYgdGhpcy5jdXN0b21SZWdFeHBDb2xsZWNbc3RhcnRJbmRleF1bMF0gIT09ICdbJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW3N0YXJ0SW5kZXhdW3RoaXMuY3VzdG9tUmVnRXhwQ29sbGVjW3N0YXJ0SW5kZXhdLmxlbmd0aCAtIDFdICE9PSAnXScpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICgodGhpcy5wcm9tcHRNYXNrW3N0YXJ0SW5kZXhdICE9PSB0aGlzLnByb21wdENoYXIpICYmIGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jdXN0b21DaGFyYWN0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLnByb21wdENoYXIgPT09IGN1ck1hc2sgJiYgdGhpcy5lc2NhcGVNYXNrVmFsdWUgPT09IHRoaXMubWFzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSBzdGFydEluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJNYXNrID0gdGhpcy5oaWRkZW5NYXNrW3N0YXJ0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmN1c3RvbUNoYXJhY3RlcnMpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3VzdG9tQ2hhcmFjdGVyc1tjdXJNYXNrXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbVZhbFN0ciA9IHRoaXMuY3VzdG9tQ2hhcmFjdGVyc1tjdXJNYXNrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbVZhbEFyciA9IGN1c3RvbVZhbFN0ci5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN1c3RvbVZhbEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVZhbHVlLm1hdGNoKG5ldyBSZWdFeHAoJ1snICsgY3VzdG9tVmFsQXJyW2ldICsgJ10nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1RleHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVnRXhwQ29sbGVjW2N1ck1hc2tdKSAmJiBrZXlWYWx1ZS5tYXRjaChuZXcgUmVnRXhwKHRoaXMucmVnRXhwQ29sbGVjW2N1ck1hc2tdKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5wcm9tcHRNYXNrW3N0YXJ0SW5kZXhdID09PSB0aGlzLnByb21wdENoYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dUZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wcm9tcHRNYXNrW3N0YXJ0SW5kZXhdID09PSB0aGlzLnByb21wdENoYXIgJiYgdGhpcy5jdXN0b21SZWdFeHBDb2xsZWNbc3RhcnRJbmRleF1bMF0gPT09ICdbJ1xuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1tzdGFydEluZGV4XVt0aGlzLmN1c3RvbVJlZ0V4cENvbGxlY1tzdGFydEluZGV4XS5sZW5ndGggLSAxXSA9PT0gJ10nXG4gICAgICAgICAgICAgICAgICAgICYmIGtleVZhbHVlLm1hdGNoKG5ldyBSZWdFeHAodGhpcy5jdXN0b21SZWdFeHBDb2xsZWNbc3RhcnRJbmRleF0pKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd1RleHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKCF0aGlzLm1hc2tLZXlQcmVzcyB8fCBzdGFydEluZGV4IDwgdGhpcy5oaWRkZW5NYXNrLmxlbmd0aCkgJiYgYWxsb3dUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXNrS2V5UHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG9Db2xsZWMucHVzaCh7IHZhbHVlOiB2YWx1ZSwgc3RhcnRJbmRleDogc3RhcnRJbmRleCwgZW5kSW5kZXg6IHN0YXJ0SW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0luZGV4ID0gdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlSW5kZXggPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZG9Db2xsZWMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9sZFZhbCA9IHRoaXMucmVkb0NvbGxlY1swXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgZXZlbnRPbGRWYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG9Db2xsZWMucHVzaCh0aGlzLnJlZG9Db2xsZWNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmRvQ29sbGVjLnB1c2goeyB2YWx1ZTogdGhpcy5wcm9tcHRNYXNrLCBzdGFydEluZGV4OiBzdGFydEluZGV4LCBlbmRJbmRleDogc3RhcnRJbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPbGRWYWwgPSB0aGlzLnByb21wdE1hc2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsIGV2ZW50T2xkVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gc0luZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSBlSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICAgICAgYXBwbHlTdXBwb3J0ZWRWYWx1ZXMuY2FsbCh0aGlzLCBldmVudCwgc3RhcnRJbmRleCwga2V5VmFsdWUsIGV2ZW50T2xkVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgcHJldlN1cHBvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoayA9PT0ga2V5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVkb0NvbGxlYy51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5lbGVtZW50LnZhbHVlLCBzdGFydEluZGV4OiB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg6IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFsbG93VGV4dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudFVuc3VwcG9ydGVkVmFsdWVzLmNhbGwodGhpcywgZXZlbnQsIHN0YXJ0SW5kZXgsIGluaXRTdGFydEluZGV4LCBrZXksIGlzQ3RybEtleSwgcHJldlN1cHBvcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoayA9PT0ga2V5Lmxlbmd0aCAtIDEgJiYgIWFsbG93VGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0FuZHJvaWQgfHwgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0FuZHJvaWQgJiYgc3RhcnRJbmRleCA8IHRoaXMucHJvbXB0TWFzay5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZG9Db2xsZWMudW5zaGlmdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuZWxlbWVudC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEluZGV4OiB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg6IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5sZW5ndGggPT09IDEgJiYgIWlzQ3RybEtleSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTWFza0Vycm9yQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYXBwbHlTdXBwb3J0ZWRWYWx1ZXMoZXZlbnQsIHN0YXJ0SW5kZXgsIGtleVZhbHVlLCBldmVudE9sZFZhbCkge1xuICAgICAgICBpZiAodGhpcy5oaWRkZW5NYXNrLmxlbmd0aCA+IHRoaXMucHJvbXB0TWFzay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGtleVZhbHVlID0gY2hhbmdlVG9Mb3dlclVwcGVyQ2FzZS5jYWxsKHRoaXMsIGtleVZhbHVlLCB0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgdmFyIGVsZW1lbnRWYWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCBzdGFydEluZGV4KSArIGtleVZhbHVlICsgdmFsdWUuc3Vic3RyaW5nKHN0YXJ0SW5kZXggKyAxLCB2YWx1ZS5sZW5ndGgpO1xuICAgICAgICBzZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCBlbGVtZW50VmFsdWUpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uRW5kID0gc3RhcnRJbmRleCArIDE7XG4gICAgICAgIHRyaWdnZXJNYXNrQ2hhbmdlRXZlbnQuY2FsbCh0aGlzLCBldmVudCwgZXZlbnRPbGRWYWwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcmV2ZW50VW5zdXBwb3J0ZWRWYWx1ZXMoZXZlbnQsIHNJZHgsIGlkeCwga2V5LCBjdHJsLCBjaGtTdXBwb3J0KSB7XG4gICAgICAgIGlmICghdGhpcy5tYXNrS2V5UHJlc3MpIHtcbiAgICAgICAgICAgIHZhciBldmVudE9sZFZhbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChzSWR4ID49IHRoaXMucHJvbXB0TWFzay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoMCwgc0lkeCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gc0lkeCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoMCwgc0lkeCkgKyB2YWx1ZS5zdWJzdHJpbmcoc0lkeCArIDEsIHZhbHVlLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvbXB0TWFzay5sZW5ndGggPT09IHRoaXMuZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsIHZhbHVlLnN1YnN0cmluZygwLCBzSWR4KSArIHZhbHVlLnN1YnN0cmluZyhzSWR4LCB2YWx1ZS5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsIHZhbHVlLnN1YnN0cmluZygwLCBpZHgpICsgdmFsdWUuc3Vic3RyaW5nKGlkeCArIDEsIHZhbHVlLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSAoY2hrU3VwcG9ydCB8fFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWVbaWR4XSAhPT0gdGhpcy5wcm9tcHRDaGFyKSA/IHNJZHggOiBpZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudE9sZFZhbCA9IHRoaXMuZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIHRyaWdnZXJNYXNrQ2hhbmdlRXZlbnQuY2FsbCh0aGlzLCBldmVudCwgZXZlbnRPbGRWYWwpO1xuICAgICAgICAgICAgYWRkTWFza0Vycm9yQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSAmJiAhY3RybCAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChldmVudCkpIHtcbiAgICAgICAgICAgIGFkZE1hc2tFcnJvckNsYXNzLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkTWFza0Vycm9yQ2xhc3MoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgIHZhciB0aW1lciA9IDIwMDtcbiAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKElOUFVUR1JPVVApIHx8IHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKEZMT0FUSU5QVVQpKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKFtwYXJlbnRFbGVtZW50XSwgRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzSW9zSW52YWxpZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGltZXIgPSA0MDA7XG4gICAgICAgIH1cbiAgICAgICAgZWoyX2Jhc2VfMS5hdHRyaWJ1dGVzKHRoaXMuZWxlbWVudCwgeyAnYXJpYS1pbnZhbGlkJzogJ3RydWUnIH0pO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMubWFza0tleVByZXNzKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTWFza0Vycm9yLmNhbGwoX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aW1lcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZU1hc2tFcnJvcigpIHtcbiAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbcGFyZW50RWxlbWVudF0sIEVSUk9SKTtcbiAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgRVJST1IpO1xuICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXModGhpcy5lbGVtZW50LCB7ICdhcmlhLWludmFsaWQnOiAnZmFsc2UnIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VUb0xvd2VyVXBwZXJDYXNlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIHByb21wdE1hc2s7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgIHZhciBjdXJWYWwgPSB2YWx1ZTtcbiAgICAgICAgdmFyIGNhc2VDb3VudCA9IDA7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmhpZGRlbk1hc2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpZGRlbk1hc2tbaV0gPT09ICdcXFxcJykge1xuICAgICAgICAgICAgICAgIHByb21wdE1hc2sgPSBjdXJWYWwuc3Vic3RyaW5nKDAsIGkpICsgJ1xcXFwnICsgY3VyVmFsLnN1YnN0cmluZyhpLCBjdXJWYWwubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhpZGRlbk1hc2tbaV0gPT09ICc+JyB8fCB0aGlzLmhpZGRlbk1hc2tbaV0gPT09ICc8JyB8fCB0aGlzLmhpZGRlbk1hc2tbaV0gPT09ICd8Jykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZGRlbk1hc2tbaV0gIT09IGN1clZhbFtpXSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHRNYXNrID0gY3VyVmFsLnN1YnN0cmluZygwLCBpKSArIHRoaXMuaGlkZGVuTWFza1tpXSArIGN1clZhbC5zdWJzdHJpbmcoaSwgY3VyVmFsLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICsrY2FzZUNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdE1hc2spIHtcbiAgICAgICAgICAgICAgICBpZiAoKChwcm9tcHRNYXNrW2ldID09PSB0aGlzLnByb21wdENoYXIpICYmIChpID4gdGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0KSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudC52YWx1ZS5pbmRleE9mKHRoaXMucHJvbXB0Q2hhcikgPCAwICYmICh0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgKyBjYXNlQ291bnQpID09PSBpKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VyVmFsID0gcHJvbXB0TWFzaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoaSA+PSAwICYmIHByb21wdE1hc2spIHtcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHByb21wdE1hc2tbaSAtIDFdICE9PSAnXFxcXCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChwcm9tcHRNYXNrW2ldID09PSAnPicpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0ga2V5LnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9tcHRNYXNrW2ldID09PSAnPCcpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9tcHRNYXNrW2ldID09PSAnfCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLS1pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldE1hc2tWYWx1ZSh2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMubWFzayAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWwpICYmICh2YWwgPT09ICcnIHx8IHRoaXMucHJldlZhbHVlICE9PSB2YWwpKSB7XG4gICAgICAgICAgICB0aGlzLm1hc2tLZXlQcmVzcyA9IHRydWU7XG4gICAgICAgICAgICBzZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCB0aGlzLnByb21wdE1hc2spO1xuICAgICAgICAgICAgaWYgKHZhbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZVZhbHVlLmNhbGwodGhpcywgdmFsW2ldLCBmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gc3RyaXBwZWRWYWx1ZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLm1hc2tLZXlQcmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGxhYmVsRWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5lLWZsb2F0LXRleHQnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudmFsdWUgPT09IHRoaXMucHJvbXB0TWFzayAmJiB0aGlzLmZsb2F0TGFiZWxUeXBlID09PSAnQXV0bycgJiZcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChsYWJlbEVsZW1lbnQpICYmIGxhYmVsRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoVE9QTEFCRUwpICYmICF0aGlzLmlzRm9jdXMpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFtsYWJlbEVsZW1lbnRdLCBUT1BMQUJFTCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbbGFiZWxFbGVtZW50XSwgQk9UVE9NTEFCRUwpO1xuICAgICAgICAgICAgICAgIHNldEVsZW1lbnRWYWx1ZS5jYWxsKHRoaXMsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnNldE1hc2tWYWx1ZSA9IHNldE1hc2tWYWx1ZTtcbiAgICBmdW5jdGlvbiBzZXRFbGVtZW50VmFsdWUodmFsLCBlbGVtZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzICYmIHRoaXMuZmxvYXRMYWJlbFR5cGUgPT09ICdBdXRvJyAmJiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB2YWwgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpbnB1dF8xLklucHV0LnNldFZhbHVlKHZhbCwgKGVsZW1lbnQgPyBlbGVtZW50IDogdGhpcy5lbGVtZW50KSwgdGhpcy5mbG9hdExhYmVsVHlwZSk7XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0RWxlbWVudFZhbHVlID0gc2V0RWxlbWVudFZhbHVlO1xuICAgIGZ1bmN0aW9uIG1hc2tJbnB1dChhcmdzKSB7XG4gICAgICAgIHZhciBpbnB1dEVsZSA9IGdldE1hc2tJbnB1dChhcmdzKTtcbiAgICAgICAgYXBwbHlNYXNrLmNhbGwoaW5wdXRFbGUpO1xuICAgICAgICB2YXIgdmFsID0gc3RyaXBwZWRWYWx1ZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMucHJldlZhbHVlID0gdmFsO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsO1xuICAgICAgICBpZiAoYXJncy5tYXNrKSB7XG4gICAgICAgICAgICB1bndpcmVFdmVudHMuY2FsbChpbnB1dEVsZSk7XG4gICAgICAgICAgICB3aXJlRXZlbnRzLmNhbGwoaW5wdXRFbGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMubWFza0lucHV0ID0gbWFza0lucHV0O1xuICAgIGZ1bmN0aW9uIGdldE1hc2tJbnB1dChhcmdzKSB7XG4gICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2FyZ3MuZWxlbWVudF0sIFVUSUxNQVNLKTtcbiAgICAgICAgdmFyIGlucHV0RWxlID0ge1xuICAgICAgICAgICAgZWxlbWVudDogYXJncy5lbGVtZW50LFxuICAgICAgICAgICAgbWFzazogYXJncy5tYXNrLFxuICAgICAgICAgICAgcHJvbXB0TWFzazogJycsXG4gICAgICAgICAgICBoaWRkZW5NYXNrOiAnJyxcbiAgICAgICAgICAgIGVzY2FwZU1hc2tWYWx1ZTogJycsXG4gICAgICAgICAgICBwcm9tcHRDaGFyOiBhcmdzLnByb21wdENoYXIgPyAoYXJncy5wcm9tcHRDaGFyLmxlbmd0aCA+IDEpID8gYXJncy5wcm9tcHRDaGFyID0gYXJncy5wcm9tcHRDaGFyWzBdXG4gICAgICAgICAgICAgICAgOiBhcmdzLnByb21wdENoYXIgOiAnXycsXG4gICAgICAgICAgICB2YWx1ZTogYXJncy52YWx1ZSA/IGFyZ3MudmFsdWUgOiBudWxsLFxuICAgICAgICAgICAgcmVnRXhwQ29sbGVjOiBleHBvcnRzLnJlZ3VsYXJFeHByZXNzaW9ucyxcbiAgICAgICAgICAgIGN1c3RvbVJlZ0V4cENvbGxlYzogW10sXG4gICAgICAgICAgICBjdXN0b21DaGFyYWN0ZXJzOiBhcmdzLmN1c3RvbUNoYXJhY3RlcnMsXG4gICAgICAgICAgICB1bmRvQ29sbGVjOiBbXSxcbiAgICAgICAgICAgIHJlZG9Db2xsZWM6IFtdLFxuICAgICAgICAgICAgbWFza0tleVByZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIHByZXZWYWx1ZTogJydcbiAgICAgICAgfTtcbiAgICAgICAgY3JlYXRlTWFzay5jYWxsKGlucHV0RWxlKTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRWYWwoYXJncykge1xuICAgICAgICByZXR1cm4gc3RyaXBwZWRWYWx1ZS5jYWxsKGdldFV0aWxNYXNrRWxlKGFyZ3MpLCBhcmdzLmVsZW1lbnQpO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFZhbCA9IGdldFZhbDtcbiAgICBmdW5jdGlvbiBnZXRNYXNrZWRWYWwoYXJncykge1xuICAgICAgICByZXR1cm4gdW5zdHJpcHBlZFZhbHVlLmNhbGwoZ2V0VXRpbE1hc2tFbGUoYXJncyksIGFyZ3MuZWxlbWVudCk7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0TWFza2VkVmFsID0gZ2V0TWFza2VkVmFsO1xuICAgIGZ1bmN0aW9uIGdldFV0aWxNYXNrRWxlKGFyZ3MpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gJyc7XG4gICAgICAgIHZhciBpbnB1dEVsZTtcbiAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MpICYmIGFyZ3MuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoVVRJTE1BU0spKSB7XG4gICAgICAgICAgICBpbnB1dEVsZSA9IGdldE1hc2tJbnB1dChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXRFbGU7XG4gICAgfVxuICAgIHZhciBNYXNrVW5kbyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE1hc2tVbmRvKCkge1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXNrVW5kbztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTWFza1VuZG8gPSBNYXNrVW5kbztcbiAgICB2YXIgbWFza1VuZG8gPSBuZXcgTWFza1VuZG8oKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFza2VkdGV4dGJveC9iYXNlL21hc2stYmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL21hc2tlZHRleHRib3hcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBtYXNrZWR0ZXh0Ym94XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KG1hc2tlZHRleHRib3hfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL21hc2tlZHRleHRib3gvbWFza2VkdGV4dGJveC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9pbnB1dC9pbnB1dFwiLCBcIi4uL2Jhc2UvaW5kZXhcIiwgXCIuLi9iYXNlL2luZGV4XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgaW5wdXRfMSwgaW5kZXhfMSwgaW5kZXhfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUk9PVCA9ICdlLXdpZGdldCBlLW1hc2snO1xuICAgIHZhciBJTlBVVCA9ICdlLWlucHV0JztcbiAgICB2YXIgTWFza2VkVGV4dEJveCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhNYXNrZWRUZXh0Qm94LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNYXNrZWRUZXh0Qm94KG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wcm9tcHRNYXNrID0gJyc7XG4gICAgICAgICAgICBfdGhpcy5oaWRkZW5NYXNrID0gJyc7XG4gICAgICAgICAgICBfdGhpcy5lc2NhcGVNYXNrVmFsdWUgPSAnJztcbiAgICAgICAgICAgIF90aGlzLnJlZ0V4cENvbGxlYyA9IGluZGV4XzEucmVndWxhckV4cHJlc3Npb25zO1xuICAgICAgICAgICAgX3RoaXMuY3VzdG9tUmVnRXhwQ29sbGVjID0gW107XG4gICAgICAgICAgICBfdGhpcy51bmRvQ29sbGVjID0gW107XG4gICAgICAgICAgICBfdGhpcy5yZWRvQ29sbGVjID0gW107XG4gICAgICAgICAgICBfdGhpcy5jaGFuZ2VFdmVudEFyZ3MgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLm1hc2tLZXlQcmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuaXNGb2N1cyA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuaXNJbml0aWFsID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5pc0lvc0ludmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdtYXNrZWR0ZXh0Ym94JztcbiAgICAgICAgfTtcbiAgICAgICAgTWFza2VkVGV4dEJveC5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVqSW5zdGFuY2UgPSBlajJfYmFzZV8yLmdldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuY2xvbmVFbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuYW5ndWxhclRhZ05hbWUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC50YWdOYW1lID09PSAnRUotTUFTS0VEVEVYVEJPWCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuZ3VsYXJUYWdOYW1lID0gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzW2ldLm5vZGVOYW1lLCB0aGlzLmVsZW1lbnQuYXR0cmlidXRlc1tpXS5ub2RlVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5pbm5lckhUTUwgPSB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnNldFZhbHVlKCdlajJfaW5zdGFuY2VzJywgZWpJbnN0YW5jZSwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTWFza2VkVGV4dEJveC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWyd2YWx1ZSddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmxvYXRMYWJlbFR5cGUgPT09ICdOZXZlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgSU5QVVQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVdyYXBwZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzSW5pdGlhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldE1hc2tlZFRleHRCb3goKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzSW5pdGlhbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWFza1BsYWNlaG9sZGVyKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgodGhpcy53aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLnJlc2V0TWFza2VkVGV4dEJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvbXB0TWFzayA9ICcnO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW5NYXNrID0gJyc7XG4gICAgICAgICAgICB0aGlzLmVzY2FwZU1hc2tWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21SZWdFeHBDb2xsZWMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudW5kb0NvbGxlYyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZWRvQ29sbGVjID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9tcHRDaGFyLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb21wdENoYXIgPSB0aGlzLnByb21wdENoYXJbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleF8xLmNyZWF0ZU1hc2suY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGluZGV4XzEuYXBwbHlNYXNrLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgdmFsID0gaW5kZXhfMS5zdHJpcHBlZFZhbHVlLmNhbGwodGhpcywgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJldlZhbHVlID0gdmFsO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbDtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luaXRpYWwpIHtcbiAgICAgICAgICAgICAgICBpbmRleF8xLnVud2lyZUV2ZW50cy5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXhfMS53aXJlRXZlbnRzLmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLnNldE1hc2tQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChzZXRWYWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRfMS5JbnB1dC5zZXRQbGFjZWhvbGRlcih0aGlzLnBsYWNlaG9sZGVyLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudmFsdWUgPT09IHRoaXMucHJvbXB0TWFzayAmJiBzZXRWYWwgJiYgdGhpcy5mbG9hdExhYmVsVHlwZSAhPT0gJ0Fsd2F5cycpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhfMi5zZXRFbGVtZW50VmFsdWUuY2FsbCh0aGlzLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZS5zZXRDc3NDbGFzcyA9IGZ1bmN0aW9uIChjc3NDbGFzcywgZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhlbGVtZW50LCBjc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24gKHdpZHRoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQod2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTWFza2VkVGV4dEJveC5wcm90b3R5cGUuY3JlYXRlV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRPYmogPSBpbnB1dF8xLklucHV0LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgY3VzdG9tVGFnOiB0aGlzLmFuZ3VsYXJUYWdOYW1lLFxuICAgICAgICAgICAgICAgIGZsb2F0TGFiZWxUeXBlOiB0aGlzLmZsb2F0TGFiZWxUeXBlLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5wbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnB1dE9iai5jb250YWluZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsIFJPT1QgKyAnICcgKyB0aGlzLmlucHV0T2JqLmNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpO1xuICAgICAgICB9O1xuICAgICAgICBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4XzIuc2V0TWFza1ZhbHVlLmNhbGwodGhpcywgdGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TWFza1BsYWNlaG9sZGVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwbGFjZWhvbGRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1hc2tQbGFjZWhvbGRlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoKG5ld1Byb3Aud2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzc0NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3MobmV3UHJvcC5jc3NDbGFzcywgW3RoaXMuaW5wdXRPYmouY29udGFpbmVyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldEVuYWJsZWQobmV3UHJvcC5lbmFibGVkLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF8xLklucHV0LnNldEVuYWJsZVJ0bChuZXdQcm9wLmVuYWJsZVJ0bCwgW3RoaXMuaW5wdXRPYmouY29udGFpbmVyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tQ2hhcmFjdGVycyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUNoYXJhY3RlcnMgPSBuZXdQcm9wLmN1c3RvbUNoYXJhY3RlcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0TWFza2VkVGV4dEJveCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hc2snOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmlwcGVkVmFsdWVfMSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hc2sgPSBuZXdQcm9wLm1hc2s7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHN0cmlwcGVkVmFsdWVfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJvbXB0Q2hhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC5wcm9tcHRDaGFyLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wLnByb21wdENoYXIgPSBuZXdQcm9wLnByb21wdENoYXJbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC5wcm9tcHRDaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9tcHRDaGFyID0gbmV3UHJvcC5wcm9tcHRDaGFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9tcHRDaGFyID0gJ18nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cCgnWycgKyBvbGRQcm9wLnByb21wdENoYXIgKyAnXScsICdnJyksIHRoaXMucHJvbXB0Q2hhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9tcHRNYXNrID09PSB0aGlzLmVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucHJvbXB0TWFzay5yZXBsYWNlKG5ldyBSZWdFeHAoJ1snICsgb2xkUHJvcC5wcm9tcHRDaGFyICsgJ10nLCAnZycpLCB0aGlzLnByb21wdENoYXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9tcHRNYXNrID0gdGhpcy5wcm9tcHRNYXNrLnJlcGxhY2UobmV3IFJlZ0V4cCgnWycgKyBvbGRQcm9wLnByb21wdENoYXIgKyAnXScsICdnJyksIHRoaXMucHJvbXB0Q2hhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG9Db2xsZWMgPSB0aGlzLnJlZG9Db2xsZWMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4XzIuc2V0RWxlbWVudFZhbHVlLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIChzdHJpcHBlZFZhbCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldE1hc2tlZFRleHRCb3goKTtcbiAgICAgICAgICAgIGluZGV4XzIuc2V0TWFza1ZhbHVlLmNhbGwodGhpcywgc3RyaXBwZWRWYWwpO1xuICAgICAgICB9O1xuICAgICAgICBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZS5nZXRNYXNrZWRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleF8xLnVuc3RyaXBwZWRWYWx1ZS5jYWxsKHRoaXMsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpbmRleF8xLnVud2lyZUV2ZW50cy5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dE9iai5jb250YWluZXIucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNsb25lRWxlbWVudCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmRldGFjaCh0aGlzLmlucHV0T2JqLmNvbnRhaW5lcik7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE1hc2tlZFRleHRCb3g7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTWFza2VkVGV4dEJveC5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdOZXZlcicpXG4gICAgXSwgTWFza2VkVGV4dEJveC5wcm90b3R5cGUsIFwiZmxvYXRMYWJlbFR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLCBcImVuYWJsZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZSwgXCJlbmFibGVQZXJzaXN0ZW5jZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLCBcImVuYWJsZVJ0bFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTWFza2VkVGV4dEJveC5wcm90b3R5cGUsIFwibWFza1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdfJylcbiAgICBdLCBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZSwgXCJwcm9tcHRDaGFyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTWFza2VkVGV4dEJveC5wcm90b3R5cGUsIFwiY3VzdG9tQ2hhcmFjdGVyc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuRXZlbnQoKVxuICAgIF0sIE1hc2tlZFRleHRCb3gucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkV2ZW50KClcbiAgICBdLCBNYXNrZWRUZXh0Qm94LnByb3RvdHlwZSwgXCJjaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBNYXNrZWRUZXh0Qm94ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgTWFza2VkVGV4dEJveCk7XG4gICAgZXhwb3J0cy5NYXNrZWRUZXh0Qm94ID0gTWFza2VkVGV4dEJveDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFza2VkdGV4dGJveC9tYXNrZWR0ZXh0Ym94L21hc2tlZHRleHRib3guanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9pbnB1dFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGlucHV0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGlucHV0XzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbnB1dC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9mb3JtLXZhbGlkYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGZvcm1fdmFsaWRhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGZvcm1fdmFsaWRhdG9yXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9mb3JtLXZhbGlkYXRvci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWQUxJREFURV9FTUFJTCA9IG5ldyBSZWdFeHAoJ15bQS1aYS16MC05Ll8lKy1dezMsfUBbYS16QS1aXXszLH0oWy5dezF9W2EtekEtWl17Miw1fScgK1xuICAgICAgICAnfFsuXXsxfVthLXpBLVpdezIsNH1bLl17MX1bYS16QS1aXXsyLDR9KSQnKTtcbiAgICB2YXIgVkFMSURBVEVfVVJMID0gbmV3IFJlZ0V4cCgnXigoZnRwfGh0dHB8aHR0cHMpOlxcL1xcLyk/d3d3XFwuKFtBLXpdezIsfSlcXC4oW0Etel17Mix9KSQnKTtcbiAgICB2YXIgVkFMSURBVEVfREFURV9JU08gPSBuZXcgUmVnRXhwKCdeKFswLTldezR9KS0oMFsxLTldfDFbMC0yXSktKDBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkkJyk7XG4gICAgdmFyIFZBTElEQVRFX0RJR0lUUyA9IG5ldyBSZWdFeHAoJ15bMC05XSokJyk7XG4gICAgdmFyIFZBTElEQVRFX1BIT05FID0gbmV3IFJlZ0V4cCgnXlsrXT9bMC05XXs5LDEzfSQnKTtcbiAgICB2YXIgVkFMSURBVEVfQ1JFRElUQ0FSRCA9IG5ldyBSZWdFeHAoJ15cXFxcZHsxMywxNn0kJyk7XG4gICAgdmFyIEVycm9yT3B0aW9uO1xuICAgIChmdW5jdGlvbiAoRXJyb3JPcHRpb24pIHtcbiAgICAgICAgRXJyb3JPcHRpb25bRXJyb3JPcHRpb25bXCJNZXNzYWdlXCJdID0gMF0gPSBcIk1lc3NhZ2VcIjtcbiAgICAgICAgRXJyb3JPcHRpb25bRXJyb3JPcHRpb25bXCJMYWJlbFwiXSA9IDFdID0gXCJMYWJlbFwiO1xuICAgIH0pKEVycm9yT3B0aW9uID0gZXhwb3J0cy5FcnJvck9wdGlvbiB8fCAoZXhwb3J0cy5FcnJvck9wdGlvbiA9IHt9KSk7XG4gICAgdmFyIEZvcm1WYWxpZGF0b3IgPSBGb3JtVmFsaWRhdG9yXzEgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRm9ybVZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRm9ybVZhbGlkYXRvcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMudmFsaWRhdGVkID0gW107XG4gICAgICAgICAgICBfdGhpcy5lcnJvclJ1bGVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5hbGxvd1N1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMucmVxdWlyZWQgPSAncmVxdWlyZWQnO1xuICAgICAgICAgICAgX3RoaXMuaW5mb0VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgX3RoaXMuaW5wdXRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdFF1ZXJ5ID0gJ2lucHV0Om5vdChbdHlwZT1yZXNldF0pOm5vdChbdHlwZT1idXR0b25dKSwgc2VsZWN0LCB0ZXh0YXJlYSc7XG4gICAgICAgICAgICBfdGhpcy5kZWZhdWx0TWVzc2FnZXMgPSB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLicsXG4gICAgICAgICAgICAgICAgdXJsOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgVVJMLicsXG4gICAgICAgICAgICAgICAgZGF0ZTogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGRhdGUuJyxcbiAgICAgICAgICAgICAgICBkYXRlSXNvOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZSAoIElTTyApLicsXG4gICAgICAgICAgICAgICAgY3JlZGl0Y2FyZDogJ1BsZWFzZSBlbnRlciB2YWxpZCBjYXJkIG51bWJlcicsXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyLicsXG4gICAgICAgICAgICAgICAgZGlnaXRzOiAnUGxlYXNlIGVudGVyIG9ubHkgZGlnaXRzLicsXG4gICAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAnUGxlYXNlIGVudGVyIG5vIG1vcmUgdGhhbiB7MH0gY2hhcmFjdGVycy4nLFxuICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogJ1BsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycy4nLFxuICAgICAgICAgICAgICAgIHJhbmdlTGVuZ3RoOiAnUGxlYXNlIGVudGVyIGEgdmFsdWUgYmV0d2VlbiB7MH0gYW5kIHsxfSBjaGFyYWN0ZXJzIGxvbmcuJyxcbiAgICAgICAgICAgICAgICByYW5nZTogJ1BsZWFzZSBlbnRlciBhIHZhbHVlIGJldHdlZW4gezB9IGFuZCB7MX0uJyxcbiAgICAgICAgICAgICAgICBtYXg6ICdQbGVhc2UgZW50ZXIgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gezB9LicsXG4gICAgICAgICAgICAgICAgbWluOiAnUGxlYXNlIGVudGVyIGEgdmFsdWUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHswfS4nLFxuICAgICAgICAgICAgICAgIHJlZ2V4OiAnUGxlYXNlIGVudGVyIGEgY29ycmVjdCB2YWx1ZS4nLFxuICAgICAgICAgICAgICAgIHRlbDogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIHBob25lIG51bWJlci4nLFxuICAgICAgICAgICAgICAgIHBhdHRlcm46ICdQbGVhc2UgZW50ZXIgYSBjb3JyZWN0IHBhdHRlcm4gdmFsdWUuJyxcbiAgICAgICAgICAgICAgICBlcXVhbFRvOiAnUGxlYXNlIGVudGVyIHRoZSB2YWxpZCBtYXRjaCB0ZXh0JyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbGVtZW50ID0gdHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnID8gZWoyX2Jhc2VfMS5zZWxlY3QoZWxlbWVudCwgZG9jdW1lbnQpIDogZWxlbWVudDtcbiAgICAgICAgICAgIGlmIChfdGhpcy5lbGVtZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnbm92YWxpZGF0ZScsICcnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbnB1dEVsZW1lbnRzID0gZWoyX2Jhc2VfMS5zZWxlY3RBbGwoX3RoaXMuc2VsZWN0UXVlcnksIF90aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIF90aGlzLmNyZWF0ZUhUTUw1UnVsZXMoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmFkZFJ1bGVzID0gZnVuY3Rpb24gKG5hbWUsIHJ1bGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ydWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuZXh0ZW5kKHRoaXMucnVsZXNbbmFtZV0sIHJ1bGVzLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bGVzW25hbWVdID0gcnVsZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnJlbW92ZVJ1bGVzID0gZnVuY3Rpb24gKG5hbWUsIHJ1bGVzKSB7XG4gICAgICAgICAgICBpZiAoIW5hbWUgJiYgIXJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5ydWxlc1tuYW1lXSAmJiAhcnVsZXMpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ydWxlc1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucnVsZXNbbmFtZV0gJiYgcnVsZXMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ydWxlc1tuYW1lXVtydWxlc1tpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgdmFyIHJ1bGVzID0gT2JqZWN0LmtleXModGhpcy5ydWxlcyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQgJiYgcnVsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVJ1bGVzKHNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVsZXMuaW5kZXhPZihzZWxlY3RlZCkgIT09IC0xICYmIHRoaXMuZXJyb3JSdWxlcy5maWx0ZXIoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubmFtZSA9PT0gc2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgfSkubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBydWxlc18xID0gcnVsZXM7IF9pIDwgcnVsZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWVfMSA9IHJ1bGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlUnVsZXMobmFtZV8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JSdWxlcy5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvclJ1bGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlc2V0KCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBlajJfYmFzZV8xLnNlbGVjdEFsbCh0aGlzLnNlbGVjdFF1ZXJ5LCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaW5wdXQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Lm5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldElucHV0RWxlbWVudChpbnB1dC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRFcnJvckVsZW1lbnQoaW5wdXQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZU1lc3NhZ2UoaW5wdXQubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy52YWxpZENsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuZ2V0SW5wdXRFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50ID0gKGVqMl9iYXNlXzEuc2VsZWN0KCdbbmFtZT0nICsgbmFtZSArICddJywgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnB1dEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZWoyX2Jhc2VfMS5zZWxlY3RBbGwoJy4nICsgdGhpcy5lcnJvckNsYXNzICsgJywgLicgKyB0aGlzLnZhbGlkQ2xhc3MsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzIgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNfMltfaV07XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZm9ybVZhbGlkYXRvcic7XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmNyZWF0ZUhUTUw1UnVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGVmUnVsZXMgPSBbJ3JlcXVpcmVkJywgJ3JlZ2V4JywgJ3JhbmdlTGVuZ3RoJywgJ21heExlbmd0aCcsICdtaW5MZW5ndGgnLCAnZGF0ZUlzbycsICdkaWdpdHMnLCAncGF0dGVybicsXG4gICAgICAgICAgICAgICAgJ2RhdGEtdmFsLXJlcXVpcmVkJywgJ3R5cGUnLCAnZGF0YS12YWxpZGF0aW9uJywgJ21pbicsICdtYXgnLCAncmFuZ2UnLCAnZXF1YWxUbycsICdkYXRhLXZhbC1taW5sZW5ndGgtbWluJyxcbiAgICAgICAgICAgICAgICAnZGF0YS12YWwtZXF1YWx0by1vdGhlcicsICdkYXRhLXZhbC1tYXhsZW5ndGgtbWF4JywgJ2RhdGEtdmFsLXJhbmdlLW1pbicsICdkYXRhLXZhbC1yZWdleC1wYXR0ZXJuJywgJ2RhdGEtdmFsLWxlbmd0aC1tYXgnLFxuICAgICAgICAgICAgICAgICdkYXRhLXZhbC1jcmVkaXRjYXJkJywgJ2RhdGEtdmFsLXBob25lJ107XG4gICAgICAgICAgICB2YXIgYWNjZXB0ZWRUeXBlcyA9IFsnZW1haWwnLCAndXJsJywgJ2RhdGUnLCAnbnVtYmVyJywgJ3RlbCddO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9ICh0aGlzLmlucHV0RWxlbWVudHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgYWxsUnVsZSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgZGVmUnVsZXNfMSA9IGRlZlJ1bGVzOyBfYiA8IGRlZlJ1bGVzXzEubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gZGVmUnVsZXNfMVtfYl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUocnVsZSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocnVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlcXVpcmVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBhbGxSdWxlLCBydWxlLCBpbnB1dC5yZXF1aXJlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGEtdmFsaWRhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocnVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgYWxsUnVsZSwgcnVsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXB0ZWRUeXBlcy5pbmRleE9mKGlucHV0LnR5cGUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBhbGxSdWxlLCBpbnB1dC50eXBlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyYW5nZUxlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIGFsbFJ1bGUsIHJ1bGUsIEpTT04ucGFyc2UoaW5wdXQuZ2V0QXR0cmlidXRlKHJ1bGUpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VxdWFsVG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocnVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgYWxsUnVsZSwgcnVsZSwgaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbCcpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblJ1bGUoaW5wdXQsIGFsbFJ1bGUsIHJ1bGUsIGlucHV0LmdldEF0dHJpYnV0ZShydWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIGFsbFJ1bGUsIHJ1bGUsIGlucHV0LmdldEF0dHJpYnV0ZShydWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWxsUnVsZSkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUnVsZXMoaW5wdXQubmFtZSwgYWxsUnVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5hbm5vdGF0aW9uUnVsZSA9IGZ1bmN0aW9uIChpbnB1dCwgcnVsZUNvbiwgcnVsZU5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvblJ1bGUgPSBydWxlTmFtZS5zcGxpdCgnLScpO1xuICAgICAgICAgICAgdmFyIHJ1bGVzTGlzdCA9IFsncmVxdWlyZWQnLCAnY3JlZGl0Y2FyZCcsICdwaG9uZScsICdtYXhsZW5ndGgnLCAnbWlubGVuZ3RoJywgJ3JhbmdlJywgJ3JlZ2V4JywgJ2VxdWFsdG8nXTtcbiAgICAgICAgICAgIHZhciBydWxlRmlyc3ROYW1lID0gYW5ub3RhdGlvblJ1bGVbYW5ub3RhdGlvblJ1bGUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB2YXIgcnVsZVNlY29uZE5hbWUgPSBhbm5vdGF0aW9uUnVsZVthbm5vdGF0aW9uUnVsZS5sZW5ndGggLSAyXTtcbiAgICAgICAgICAgIGlmIChydWxlc0xpc3QuaW5kZXhPZihydWxlRmlyc3ROYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJ1bGVGaXJzdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVxdWlyZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBydWxlQ29uLCAncmVxdWlyZWQnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3JlZGl0Y2FyZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIHJ1bGVDb24sICdjcmVkaXRjYXJkJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Bob25lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgcnVsZUNvbiwgJ3RlbCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGVzTGlzdC5pbmRleE9mKHJ1bGVTZWNvbmROYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJ1bGVTZWNvbmROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21heGxlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIHJ1bGVDb24sICdtYXhMZW5ndGgnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWlubGVuZ3RoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgcnVsZUNvbiwgJ21pbkxlbmd0aCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdyYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWludmFsdWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsLXJhbmdlLW1pbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heHZhbHVlID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbC1yYW5nZS1tYXgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmUnVsZShpbnB1dCwgcnVsZUNvbiwgJ3JhbmdlJywgW21pbnZhbHVlLCBtYXh2YWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VxdWFsdG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gaW5wdXQuZ2V0QXR0cmlidXRlKHJ1bGVOYW1lKS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZSdWxlKGlucHV0LCBydWxlQ29uLCAnZXF1YWxUbycsIGlkW2lkLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWdleCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZlJ1bGUoaW5wdXQsIHJ1bGVDb24sICdyZWdleCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuZGVmUnVsZSA9IGZ1bmN0aW9uIChpbnB1dCwgcnVsZUNvbiwgcnVsZU5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS0nICsgcnVsZU5hbWUgKyAnLW1lc3NhZ2UnKTtcbiAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uTWVzc2FnZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWwtJyArIHJ1bGVOYW1lKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBbdmFsdWUsIG1lc3NhZ2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYW5ub3RhdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IFt2YWx1ZSwgYW5ub3RhdGlvbk1lc3NhZ2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVsZUNvbltydWxlTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSAodGhpcy5pbnB1dEVsZW1lbnRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKEZvcm1WYWxpZGF0b3JfMS5pc0NoZWNrYWJsZShpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKGlucHV0LCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0LnRhZ05hbWUgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChpbnB1dCwgJ2NoYW5nZScsIHRoaXMuY2hhbmdlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoaW5wdXQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKGlucHV0LCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ3N1Ym1pdCcsIHRoaXMuc3VibWl0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAncmVzZXQnLCB0aGlzLnJlc2V0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSAodGhpcy5pbnB1dEVsZW1lbnRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuY2xlYXJFdmVudHMoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ3N1Ym1pdCcsIHRoaXMuc3VibWl0SGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAncmVzZXQnLCB0aGlzLnJlc2V0SGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmZvY3VzT3V0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2ZvY3Vzb3V0JywgZSk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRoaXMucnVsZXNbZWxlbWVudC5uYW1lXSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVzW2VsZW1lbnQubmFtZV1bdGhpcy5yZXF1aXJlZF0gfHwgZWxlbWVudC52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoZWxlbWVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52YWxpZGF0ZWQuaW5kZXhPZihlbGVtZW50Lm5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlZC5wdXNoKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5rZXlVcEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdrZXl1cCcsIGUpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBleGNsdWRlS2V5cyA9IFsxNiwgMTcsIDE4LCAyMCwgMzUsIDM2LCAzNywgMzgsIDM5LCA0MCwgNDUsIDE0NCwgMjI1XTtcbiAgICAgICAgICAgIGlmIChlLndoaWNoID09PSA5ICYmICghdGhpcy5ydWxlc1tlbGVtZW50Lm5hbWVdIHx8ICh0aGlzLnJ1bGVzW2VsZW1lbnQubmFtZV0gJiYgIXRoaXMucnVsZXNbZWxlbWVudC5uYW1lXVt0aGlzLnJlcXVpcmVkXSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVkLmluZGV4T2YoZWxlbWVudC5uYW1lKSAhPT0gLTEgJiYgdGhpcy5ydWxlc1tlbGVtZW50Lm5hbWVdICYmIGV4Y2x1ZGVLZXlzLmluZGV4T2YoZS53aGljaCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZShlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbGljaycsIGUpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgIT09ICdzdWJtaXQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZShlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2Zvcm1ub3ZhbGlkYXRlJykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93U3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuY2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIGUpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoZWxlbWVudC5uYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuc3VibWl0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3N1Ym1pdCcsIGUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93U3VibWl0ICYmICF0aGlzLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93U3VibWl0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnJlc2V0SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUudmFsaWRhdGVSdWxlcyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucnVsZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBPYmplY3Qua2V5cyh0aGlzLnJ1bGVzW25hbWVdKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0SW5wdXRFbGVtZW50KG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5nZXRFcnJvckVsZW1lbnQobmFtZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJ1bGVzXzIgPSBydWxlczsgX2kgPCBydWxlc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNfMltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlKHRoaXMucnVsZXNbbmFtZV1bcnVsZV0sIHJ1bGUpO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvclJ1bGUgPSB7IG5hbWU6IG5hbWUsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSB9O1xuICAgICAgICAgICAgICAgIHZhciBldmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0TmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5pbnB1dEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQobmFtZSwgcnVsZSkgJiYgIXRoaXMuaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmlnbm9yZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFcnJvclJ1bGVzKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yUnVsZXMucHVzaChlcnJvclJ1bGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRoaXMuaW5wdXRFbGVtZW50LmlkICsgJy1pbmZvJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbmZvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVFcnJvckVsZW1lbnQobmFtZSwgZXJyb3JSdWxlLm1lc3NhZ2UsIHRoaXMuaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoZXJyb3JSdWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3MuZXJyb3JFbGVtZW50ID0gdGhpcy5pbmZvRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRBcmdzLnN0YXR1cyA9ICdmYWlsdXJlJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMudmFsaWRDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndmFsaWRhdGlvbkNvbXBsZXRlJywgZXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUgPT09ICdyZXF1aXJlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1yZXF1aXJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBldmVudEFyZ3Muc3RhdHVzID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3ZhbGlkYXRpb25Db21wbGV0ZScsIGV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKG5hbWUsIHJ1bGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnJ1bGVzW25hbWVdW3J1bGVdO1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gKHBhcmFtcyBpbnN0YW5jZW9mIEFycmF5ICYmIHR5cGVvZiBwYXJhbXNbMV0gPT09ICdzdHJpbmcnKSA/IHBhcmFtc1swXSA6IHBhcmFtcztcbiAgICAgICAgICAgIHZhciBjdXJyZW50UnVsZSA9IHRoaXMucnVsZXNbbmFtZV1bcnVsZV07XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgdmFsdWU6IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLCBwYXJhbTogcGFyYW0sIGVsZW1lbnQ6IHRoaXMuaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudDogdGhpcy5lbGVtZW50IH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3ZhbGlkYXRpb25CZWdpbicsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRSdWxlICYmIHR5cGVvZiBjdXJyZW50UnVsZVswXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IGN1cnJlbnRSdWxlWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIHsgZWxlbWVudDogdGhpcy5pbnB1dEVsZW1lbnQsIHZhbHVlOiB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEZvcm1WYWxpZGF0b3JfMS5pc0NoZWNrYWJsZSh0aGlzLmlucHV0RWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZSAhPT0gJ3JlcXVpcmVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuc2VsZWN0QWxsKCdpbnB1dFtuYW1lPScgKyBuYW1lICsgJ106Y2hlY2tlZCcsIHRoaXMuZWxlbWVudCkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBGb3JtVmFsaWRhdG9yXzEuY2hlY2tWYWxpZGF0b3JbcnVsZV0oYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZSA9IGZ1bmN0aW9uIChydWxlVmFsdWUsIHJ1bGUpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gKHJ1bGVWYWx1ZSBpbnN0YW5jZW9mIEFycmF5ICYmIHR5cGVvZiBydWxlVmFsdWVbMV0gPT09ICdzdHJpbmcnKSA/IHJ1bGVWYWx1ZVsxXSA6IHRoaXMuZGVmYXVsdE1lc3NhZ2VzW3J1bGVdO1xuICAgICAgICAgICAgdmFyIGZvcm1hdHMgPSBtZXNzYWdlLm1hdGNoKC97KFxcZCl9L2cpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGZvcm1hdHMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JtYXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJ1bGVWYWx1ZSBpbnN0YW5jZW9mIEFycmF5ID8gcnVsZVZhbHVlW2ldIDogcnVsZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKGZvcm1hdHNbaV0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUuY3JlYXRlRXJyb3JFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG1lc3NhZ2UsIGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KHRoaXMuZXJyb3JFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmVycm9yQ2xhc3MsXG4gICAgICAgICAgICAgICAgaW5uZXJIVE1MOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IGZvcjogbmFtZSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVycm9yT3B0aW9uID09PSBFcnJvck9wdGlvbi5NZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcbiAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1tZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KHRoaXMuZXJyb3JDb250YWluZXIsIHsgY2xhc3NOYW1lOiB0aGlzLmVycm9yQ2xhc3MsIGlubmVySFRNTDogZXJyb3JFbGVtZW50Lm91dGVySFRNTCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVycm9yRWxlbWVudC5pZCA9IHRoaXMuaW5wdXRFbGVtZW50Lm5hbWUgKyAnLWluZm8nO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS12YWxtc2ctZm9yPVwiJyArIGlucHV0LmlkICsgJ1wiXScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXZhbG1zZy1mb3I9XCInICsgaW5wdXQuaWQgKyAnXCJdJykuYXBwZW5kQ2hpbGQoZXJyb3JFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tc2ctY29udGFpbmVyaWQnKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb250YWluZXJJZCA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1tc2ctY29udGFpbmVyaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgZGl2RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGNvbnRhaW5lcklkKTtcbiAgICAgICAgICAgICAgICBkaXZFbGVtZW50LmFwcGVuZENoaWxkKGVycm9yRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmN1c3RvbVBsYWNlbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21QbGFjZW1lbnQuY2FsbCh0aGlzLCB0aGlzLmlucHV0RWxlbWVudCwgZXJyb3JFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVycm9yRWxlbWVudCwgdGhpcy5pbnB1dEVsZW1lbnQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgdGhpcy5nZXRFcnJvckVsZW1lbnQobmFtZSk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlZC5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5jaGVja1JlcXVpcmVkKG5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5nZXRFcnJvckVsZW1lbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdGhpcy5pbmZvRWxlbWVudCA9IGVqMl9iYXNlXzEuc2VsZWN0KHRoaXMuZXJyb3JFbGVtZW50ICsgJy4nICsgdGhpcy5lcnJvckNsYXNzLCB0aGlzLmlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbmZvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mb0VsZW1lbnQgPSBlajJfYmFzZV8xLnNlbGVjdCh0aGlzLmVycm9yRWxlbWVudCArICcuJyArIHRoaXMuZXJyb3JDbGFzcyArICdbZm9yPVwiJyArIG5hbWUgKyAnXCJdJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmZvRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUucmVtb3ZlRXJyb3JSdWxlcyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXJyb3JSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBydWxlID0gdGhpcy5lcnJvclJ1bGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChydWxlLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvclJ1bGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKGVycm9yUnVsZSkge1xuICAgICAgICAgICAgdGhpcy5pbmZvRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHRoaXMuaW5mb0VsZW1lbnQuaW5uZXJIVE1MID0gZXJyb3JSdWxlLm1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLmNoZWNrUmVxdWlyZWQoZXJyb3JSdWxlLm5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5oaWRlTWVzc2FnZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmZvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUVycm9yUnVsZXMobmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnZhbGlkQ2xhc3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICdmYWxzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZS5jaGVja1JlcXVpcmVkID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ydWxlc1tuYW1lXVt0aGlzLnJlcXVpcmVkXSAmJiAhdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm9FbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlTWVzc2FnZShuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9ybVZhbGlkYXRvci5pc0NoZWNrYWJsZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIGlucHV0VHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0VHlwZSAmJiAoaW5wdXRUeXBlID09PSAnY2hlY2tib3gnIHx8IGlucHV0VHlwZSA9PT0gJ3JhZGlvJyB8fCBpbnB1dFR5cGUgPT09ICdzdWJtaXQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZvcm1WYWxpZGF0b3I7XG4gICAgfShlajJfYmFzZV8xLkJhc2UpKTtcbiAgICBGb3JtVmFsaWRhdG9yLmNoZWNrVmFsaWRhdG9yID0ge1xuICAgICAgICByZXF1aXJlZDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICB9LFxuICAgICAgICBlbWFpbDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFZBTElEQVRFX0VNQUlMLnRlc3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXJsOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gVkFMSURBVEVfVVJMLnRlc3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGF0ZUlzbzogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFZBTElEQVRFX0RBVEVfSVNPLnRlc3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGVsOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gVkFMSURBVEVfUEhPTkUudGVzdChvcHRpb24udmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBjcmVkaXRjYXJkOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gVkFMSURBVEVfQ1JFRElUQ0FSRC50ZXN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG51bWJlcjogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICFpc05hTihOdW1iZXIob3B0aW9uLnZhbHVlKSkgJiYgb3B0aW9uLnZhbHVlLmluZGV4T2YoJyAnKSA9PT0gLTE7XG4gICAgICAgIH0sXG4gICAgICAgIGRpZ2l0czogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFZBTElEQVRFX0RJR0lUUy50ZXN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1heExlbmd0aDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZS5sZW5ndGggPD0gb3B0aW9uLnBhcmFtO1xuICAgICAgICB9LFxuICAgICAgICBtaW5MZW5ndGg6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWUubGVuZ3RoID49IG9wdGlvbi5wYXJhbTtcbiAgICAgICAgfSxcbiAgICAgICAgcmFuZ2VMZW5ndGg6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IG9wdGlvbi5wYXJhbTtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWUubGVuZ3RoID49IHBhcmFtWzBdICYmIG9wdGlvbi52YWx1ZS5sZW5ndGggPD0gcGFyYW1bMV07XG4gICAgICAgIH0sXG4gICAgICAgIHJhbmdlOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBvcHRpb24ucGFyYW07XG4gICAgICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcihvcHRpb24udmFsdWUpKSAmJiBOdW1iZXIob3B0aW9uLnZhbHVlKSA+PSBwYXJhbVswXSAmJiBOdW1iZXIob3B0aW9uLnZhbHVlKSA8PSBwYXJhbVsxXTtcbiAgICAgICAgfSxcbiAgICAgICAgZGF0ZTogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICFpc05hTihuZXcgRGF0ZShvcHRpb24udmFsdWUpLmdldFRpbWUoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1heDogZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIob3B0aW9uLnZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gK29wdGlvbi52YWx1ZSA8PSBvcHRpb24ucGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUob3B0aW9uLnZhbHVlKS5nZXRUaW1lKCkgPD0gbmV3IERhdGUoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcHRpb24ucGFyYW0pKSkuZ2V0VGltZSgpO1xuICAgICAgICB9LFxuICAgICAgICBtaW46IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKG9wdGlvbi52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICtvcHRpb24udmFsdWUgPj0gb3B0aW9uLnBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG9wdGlvbi52YWx1ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3B0aW9uLnBhcmFtKSkpLmdldFRpbWUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVnZXg6IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG9wdGlvbi5wYXJhbSkudGVzdChvcHRpb24udmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlcXVhbFRvOiBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY29tcGFyZVRvID0gb3B0aW9uLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgb3B0aW9uLnBhcmFtKTtcbiAgICAgICAgICAgIG9wdGlvbi5wYXJhbSA9IGNvbXBhcmVUby52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24ucGFyYW0gPT09IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdlLWhpZGRlbicpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwiaWdub3JlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoe30pXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwicnVsZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnZS1lcnJvcicpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwiZXJyb3JDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KCdlLXZhbGlkJylcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJ2YWxpZENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoJ2xhYmVsJylcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJlcnJvckVsZW1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgnZGl2JylcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJlcnJvckNvbnRhaW5lclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KEVycm9yT3B0aW9uLkxhYmVsKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImVycm9yT3B0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImZvY3Vzb3V0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImtleXVwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcImNoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJzdWJtaXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5FdmVudCgpXG4gICAgXSwgRm9ybVZhbGlkYXRvci5wcm90b3R5cGUsIFwidmFsaWRhdGlvbkJlZ2luXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuRXZlbnQoKVxuICAgIF0sIEZvcm1WYWxpZGF0b3IucHJvdG90eXBlLCBcInZhbGlkYXRpb25Db21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkV2ZW50KClcbiAgICBdLCBGb3JtVmFsaWRhdG9yLnByb3RvdHlwZSwgXCJjdXN0b21QbGFjZW1lbnRcIiwgdm9pZCAwKTtcbiAgICBGb3JtVmFsaWRhdG9yID0gRm9ybVZhbGlkYXRvcl8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgRm9ybVZhbGlkYXRvcik7XG4gICAgZXhwb3J0cy5Gb3JtVmFsaWRhdG9yID0gRm9ybVZhbGlkYXRvcjtcbiAgICB2YXIgRm9ybVZhbGlkYXRvcl8xO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9mb3JtLXZhbGlkYXRvci9mb3JtLXZhbGlkYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ=="]}